{"ast":null,"code":"/* Tabulator v4.8.2 (c) Oliver Folkerd */\n'use strict'; // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nif (!Array.prototype.findIndex) {\n  Object.defineProperty(Array.prototype, 'findIndex', {\n    value: function value(predicate) {\n      // 1. Let O be ? ToObject(this value).\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n\n      var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n      var len = o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      } // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n      var thisArg = arguments[1]; // 5. Let k be 0.\n\n      var k = 0; // 6. Repeat, while k < len\n\n      while (k < len) {\n        // a. Let Pk be ! ToString(k).\n        // b. Let kValue be ? Get(O, Pk).\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n        // d. If testResult is true, return k.\n        var kValue = o[k];\n\n        if (predicate.call(thisArg, kValue, k, o)) {\n          return k;\n        } // e. Increase k by 1.\n\n\n        k++;\n      } // 7. Return -1.\n\n\n      return -1;\n    }\n  });\n} // https://tc39.github.io/ecma262/#sec-array.prototype.find\n\n\nif (!Array.prototype.find) {\n  Object.defineProperty(Array.prototype, 'find', {\n    value: function value(predicate) {\n      // 1. Let O be ? ToObject(this value).\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      }\n\n      var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n      var len = o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      } // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n      var thisArg = arguments[1]; // 5. Let k be 0.\n\n      var k = 0; // 6. Repeat, while k < len\n\n      while (k < len) {\n        // a. Let Pk be ! ToString(k).\n        // b. Let kValue be ? Get(O, Pk).\n        // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n        // d. If testResult is true, return kValue.\n        var kValue = o[k];\n\n        if (predicate.call(thisArg, kValue, k, o)) {\n          return kValue;\n        } // e. Increase k by 1.\n\n\n        k++;\n      } // 7. Return undefined.\n\n\n      return undefined;\n    }\n  });\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes#Polyfill\n\n\nif (!String.prototype.includes) {\n  String.prototype.includes = function (search, start) {\n    'use strict';\n\n    if (search instanceof RegExp) {\n      throw TypeError('first argument must not be a RegExp');\n    }\n\n    if (start === undefined) {\n      start = 0;\n    }\n\n    return this.indexOf(search, start) !== -1;\n  };\n} // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n\n\nif (!Array.prototype.includes) {\n  Object.defineProperty(Array.prototype, 'includes', {\n    value: function value(searchElement, fromIndex) {\n      if (this == null) {\n        throw new TypeError('\"this\" is null or not defined');\n      } // 1. Let O be ? ToObject(this value).\n\n\n      var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n      var len = o.length >>> 0; // 3. If len is 0, return false.\n\n      if (len === 0) {\n        return false;\n      } // 4. Let n be ? ToInteger(fromIndex).\n      //    (If fromIndex is undefined, this step produces the value 0.)\n\n\n      var n = fromIndex | 0; // 5. If n ≥ 0, then\n      //  a. Let k be n.\n      // 6. Else n < 0,\n      //  a. Let k be len + n.\n      //  b. If k < 0, let k be 0.\n\n      var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n      function sameValueZero(x, y) {\n        return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);\n      } // 7. Repeat, while k < len\n\n\n      while (k < len) {\n        // a. Let elementK be the result of ? Get(O, ! ToString(k)).\n        // b. If SameValueZero(searchElement, elementK) is true, return true.\n        if (sameValueZero(o[k], searchElement)) {\n          return true;\n        } // c. Increase k by 1.\n\n\n        k++;\n      } // 8. Return false\n\n\n      return false;\n    }\n  });\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n\n\nif (typeof Object.assign !== 'function') {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.defineProperty(Object, \"assign\", {\n    value: function assign(target, varArgs) {\n      // .length of function is 2\n      'use strict';\n\n      if (target === null || target === undefined) {\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var to = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource !== null && nextSource !== undefined) {\n          for (var nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n\n      return to;\n    },\n    writable: true,\n    configurable: true\n  });\n}\n\nvar ColumnManager = function ColumnManager(table) {\n  this.table = table; //hold parent table\n\n  this.blockHozScrollEvent = false;\n  this.headersElement = this.createHeadersElement();\n  this.element = this.createHeaderElement(); //containing element\n\n  this.rowManager = null; //hold row manager object\n\n  this.columns = []; // column definition object\n\n  this.columnsByIndex = []; //columns by index\n\n  this.columnsByField = {}; //columns by field\n\n  this.scrollLeft = 0;\n  this.element.insertBefore(this.headersElement, this.element.firstChild);\n}; ////////////// Setup Functions /////////////////\n\n\nColumnManager.prototype.createHeadersElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-headers\");\n  return el;\n};\n\nColumnManager.prototype.createHeaderElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-header\");\n\n  if (!this.table.options.headerVisible) {\n    el.classList.add(\"tabulator-header-hidden\");\n  }\n\n  return el;\n};\n\nColumnManager.prototype.initialize = function () {\n  var self = this; //scroll body along with header\n  // self.element.addEventListener(\"scroll\", function(e){\n  // \tif(!self.blockHozScrollEvent){\n  // \t\tself.table.rowManager.scrollHorizontal(self.element.scrollLeft);\n  // \t}\n  // });\n}; //link to row manager\n\n\nColumnManager.prototype.setRowManager = function (manager) {\n  this.rowManager = manager;\n}; //return containing element\n\n\nColumnManager.prototype.getElement = function () {\n  return this.element;\n}; //return header containing element\n\n\nColumnManager.prototype.getHeadersElement = function () {\n  return this.headersElement;\n}; // ColumnManager.prototype.tempScrollBlock = function(){\n// \tclearTimeout(this.blockHozScrollEvent);\n// \tthis.blockHozScrollEvent = setTimeout(() => {this.blockHozScrollEvent = false;}, 50);\n// }\n//scroll horizontally to match table body\n\n\nColumnManager.prototype.scrollHorizontal = function (left) {\n  var hozAdjust = 0,\n      scrollWidth = this.element.scrollWidth - this.table.element.clientWidth; // this.tempScrollBlock();\n\n  this.element.scrollLeft = left; //adjust for vertical scrollbar moving table when present\n\n  if (left > scrollWidth) {\n    hozAdjust = left - scrollWidth;\n    this.element.style.marginLeft = -hozAdjust + \"px\";\n  } else {\n    this.element.style.marginLeft = 0;\n  } //keep frozen columns fixed in position\n  //this._calcFrozenColumnsPos(hozAdjust + 3);\n\n\n  this.scrollLeft = left;\n\n  if (this.table.modExists(\"frozenColumns\")) {\n    this.table.modules.frozenColumns.scrollHorizontal();\n  }\n}; ///////////// Column Setup Functions /////////////\n\n\nColumnManager.prototype.generateColumnsFromRowData = function (data) {\n  var cols = [],\n      definitions = this.table.options.autoColumnsDefinitions,\n      row,\n      sorter;\n\n  if (data && data.length) {\n    row = data[0];\n\n    for (var key in row) {\n      var col = {\n        field: key,\n        title: key\n      };\n      var value = row[key];\n\n      switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n        case \"undefined\":\n          sorter = \"string\";\n          break;\n\n        case \"boolean\":\n          sorter = \"boolean\";\n          break;\n\n        case \"object\":\n          if (Array.isArray(value)) {\n            sorter = \"array\";\n          } else {\n            sorter = \"string\";\n          }\n\n          break;\n\n        default:\n          if (!isNaN(value) && value !== \"\") {\n            sorter = \"number\";\n          } else {\n            if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n              sorter = \"alphanum\";\n            } else {\n              sorter = \"string\";\n            }\n          }\n\n          break;\n      }\n\n      col.sorter = sorter;\n      cols.push(col);\n    }\n\n    if (definitions) {\n      switch (typeof definitions === 'undefined' ? 'undefined' : _typeof(definitions)) {\n        case \"function\":\n          this.table.options.columns = definitions.call(this.table, cols);\n          break;\n\n        case \"object\":\n          if (Array.isArray(definitions)) {\n            cols.forEach(function (col) {\n              var match = definitions.find(function (def) {\n                return def.field === col.field;\n              });\n\n              if (match) {\n                Object.assign(col, match);\n              }\n            });\n          } else {\n            cols.forEach(function (col) {\n              if (definitions[col.field]) {\n                Object.assign(col, definitions[col.field]);\n              }\n            });\n          }\n\n          this.table.options.columns = cols;\n          break;\n      }\n    } else {\n      this.table.options.columns = cols;\n    }\n\n    this.setColumns(this.table.options.columns);\n  }\n};\n\nColumnManager.prototype.setColumns = function (cols, row) {\n  var self = this;\n\n  while (self.headersElement.firstChild) {\n    self.headersElement.removeChild(self.headersElement.firstChild);\n  }\n\n  self.columns = [];\n  self.columnsByIndex = [];\n  self.columnsByField = {}; //reset frozen columns\n\n  if (self.table.modExists(\"frozenColumns\")) {\n    self.table.modules.frozenColumns.reset();\n  }\n\n  cols.forEach(function (def, i) {\n    self._addColumn(def);\n  });\n\n  self._reIndexColumns();\n\n  if (self.table.options.responsiveLayout && self.table.modExists(\"responsiveLayout\", true)) {\n    self.table.modules.responsiveLayout.initialize();\n  }\n\n  if (this.table.options.virtualDomHoz) {\n    this.table.vdomHoz.reinitialize(false, true);\n  }\n\n  self.redraw(true);\n};\n\nColumnManager.prototype._addColumn = function (definition, before, nextToColumn) {\n  var column = new Column(definition, this),\n      colEl = column.getElement(),\n      index = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\n  if (nextToColumn && index > -1) {\n    var parentIndex = this.columns.indexOf(nextToColumn.getTopColumn());\n    var nextEl = nextToColumn.getElement();\n\n    if (before) {\n      this.columns.splice(parentIndex, 0, column);\n      nextEl.parentNode.insertBefore(colEl, nextEl);\n    } else {\n      this.columns.splice(parentIndex + 1, 0, column);\n      nextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n    }\n  } else {\n    if (before) {\n      this.columns.unshift(column);\n      this.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n    } else {\n      this.columns.push(column);\n      this.headersElement.appendChild(column.getElement());\n    }\n\n    column.columnRendered();\n  }\n\n  return column;\n};\n\nColumnManager.prototype.registerColumnField = function (col) {\n  if (col.definition.field) {\n    this.columnsByField[col.definition.field] = col;\n  }\n};\n\nColumnManager.prototype.registerColumnPosition = function (col) {\n  this.columnsByIndex.push(col);\n};\n\nColumnManager.prototype._reIndexColumns = function () {\n  this.columnsByIndex = [];\n  this.columns.forEach(function (column) {\n    column.reRegisterPosition();\n  });\n}; //ensure column headers take up the correct amount of space in column groups\n\n\nColumnManager.prototype._verticalAlignHeaders = function () {\n  var self = this,\n      minHeight = 0;\n  self.columns.forEach(function (column) {\n    var height;\n    column.clearVerticalAlign();\n    height = column.getHeight();\n\n    if (height > minHeight) {\n      minHeight = height;\n    }\n  });\n  self.columns.forEach(function (column) {\n    column.verticalAlign(self.table.options.columnHeaderVertAlign, minHeight);\n  });\n  self.rowManager.adjustTableSize();\n}; //////////////// Column Details /////////////////\n\n\nColumnManager.prototype.findColumn = function (subject) {\n  var self = this;\n\n  if ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n    if (subject instanceof Column) {\n      //subject is column element\n      return subject;\n    } else if (subject instanceof ColumnComponent) {\n      //subject is public column component\n      return subject._getSelf() || false;\n    } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n      //subject is a HTML element of the column header\n      var match = self.columns.find(function (column) {\n        return column.element === subject;\n      });\n      return match || false;\n    }\n  } else {\n    //subject should be treated as the field name of the column\n    return this.columnsByField[subject] || false;\n  } //catch all for any other type of input\n\n\n  return false;\n};\n\nColumnManager.prototype.getColumnByField = function (field) {\n  return this.columnsByField[field];\n};\n\nColumnManager.prototype.getColumnsByFieldRoot = function (root) {\n  var _this = this;\n\n  var matches = [];\n  Object.keys(this.columnsByField).forEach(function (field) {\n    var fieldRoot = field.split(\".\")[0];\n\n    if (fieldRoot === root) {\n      matches.push(_this.columnsByField[field]);\n    }\n  });\n  return matches;\n};\n\nColumnManager.prototype.getColumnByIndex = function (index) {\n  return this.columnsByIndex[index];\n};\n\nColumnManager.prototype.getFirstVisibileColumn = function (index) {\n  var index = this.columnsByIndex.findIndex(function (col) {\n    return col.visible;\n  });\n  return index > -1 ? this.columnsByIndex[index] : false;\n};\n\nColumnManager.prototype.getColumns = function () {\n  return this.columns;\n};\n\nColumnManager.prototype.findColumnIndex = function (column) {\n  return this.columnsByIndex.findIndex(function (col) {\n    return column === col;\n  });\n}; //return all columns that are not groups\n\n\nColumnManager.prototype.getRealColumns = function () {\n  return this.columnsByIndex;\n}; //travers across columns and call action\n\n\nColumnManager.prototype.traverse = function (callback) {\n  var self = this;\n  self.columnsByIndex.forEach(function (column, i) {\n    callback(column, i);\n  });\n}; //get defintions of actual columns\n\n\nColumnManager.prototype.getDefinitions = function (active) {\n  var self = this,\n      output = [];\n  self.columnsByIndex.forEach(function (column) {\n    if (!active || active && column.visible) {\n      output.push(column.getDefinition());\n    }\n  });\n  return output;\n}; //get full nested definition tree\n\n\nColumnManager.prototype.getDefinitionTree = function () {\n  var self = this,\n      output = [];\n  self.columns.forEach(function (column) {\n    output.push(column.getDefinition(true));\n  });\n  return output;\n};\n\nColumnManager.prototype.getComponents = function (structured) {\n  var self = this,\n      output = [],\n      columns = structured ? self.columns : self.columnsByIndex;\n  columns.forEach(function (column) {\n    output.push(column.getComponent());\n  });\n  return output;\n};\n\nColumnManager.prototype.getWidth = function () {\n  var width = 0;\n  this.columnsByIndex.forEach(function (column) {\n    if (column.visible) {\n      width += column.getWidth();\n    }\n  });\n  return width;\n};\n\nColumnManager.prototype.moveColumn = function (from, to, after) {\n  this.moveColumnActual(from, to, after);\n\n  if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n    this.table.modules.responsiveLayout.initialize();\n  }\n\n  if (this.table.modExists(\"columnCalcs\")) {\n    this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n  }\n\n  to.element.parentNode.insertBefore(from.element, to.element);\n\n  if (after) {\n    to.element.parentNode.insertBefore(to.element, from.element);\n  }\n\n  this._verticalAlignHeaders();\n\n  this.table.rowManager.reinitialize();\n};\n\nColumnManager.prototype.moveColumnActual = function (from, to, after) {\n  if (from.parent.isGroup) {\n    this._moveColumnInArray(from.parent.columns, from, to, after);\n  } else {\n    this._moveColumnInArray(this.columns, from, to, after);\n  }\n\n  this._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\n  if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n    this.table.modules.responsiveLayout.initialize();\n  }\n\n  if (this.table.options.virtualDomHoz) {\n    this.table.vdomHoz.reinitialize(true);\n  }\n\n  if (this.table.options.columnMoved) {\n    this.table.options.columnMoved.call(this.table, from.getComponent(), this.table.columnManager.getComponents());\n  }\n\n  if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n    this.table.modules.persistence.save(\"columns\");\n  }\n};\n\nColumnManager.prototype._moveColumnInArray = function (columns, from, to, after, updateRows) {\n  var _this2 = this;\n\n  var fromIndex = columns.indexOf(from),\n      toIndex,\n      rows = [];\n\n  if (fromIndex > -1) {\n    columns.splice(fromIndex, 1);\n    toIndex = columns.indexOf(to);\n\n    if (toIndex > -1) {\n      if (after) {\n        toIndex = toIndex + 1;\n      }\n    } else {\n      toIndex = fromIndex;\n    }\n\n    columns.splice(toIndex, 0, from);\n\n    if (updateRows) {\n      if (this.table.options.dataTree && this.table.modExists(\"dataTree\", true)) {\n        this.table.rowManager.rows.forEach(function (row) {\n          rows = rows.concat(_this2.table.modules.dataTree.getTreeChildren(row, false, true));\n        });\n      }\n\n      rows = rows.concat(this.table.rowManager.rows);\n      rows.forEach(function (row) {\n        if (row.cells.length) {\n          var cell = row.cells.splice(fromIndex, 1)[0];\n          row.cells.splice(toIndex, 0, cell);\n        }\n      });\n    }\n  }\n};\n\nColumnManager.prototype.scrollToColumn = function (column, position, ifVisible) {\n  var _this3 = this;\n\n  var left = 0,\n      offset = 0,\n      adjust = 0,\n      colEl = column.getElement();\n  return new Promise(function (resolve, reject) {\n    if (typeof position === \"undefined\") {\n      position = _this3.table.options.scrollToColumnPosition;\n    }\n\n    if (typeof ifVisible === \"undefined\") {\n      ifVisible = _this3.table.options.scrollToColumnIfVisible;\n    }\n\n    if (column.visible) {\n      //align to correct position\n      switch (position) {\n        case \"middle\":\n        case \"center\":\n          adjust = -_this3.element.clientWidth / 2;\n          break;\n\n        case \"right\":\n          adjust = colEl.clientWidth - _this3.headersElement.clientWidth;\n          break;\n      } //check column visibility\n\n\n      if (!ifVisible) {\n        offset = colEl.offsetLeft;\n\n        if (offset > 0 && offset + colEl.offsetWidth < _this3.element.clientWidth) {\n          return false;\n        }\n      } //calculate scroll position\n\n\n      left = colEl.offsetLeft + adjust;\n      left = Math.max(Math.min(left, _this3.table.rowManager.element.scrollWidth - _this3.table.rowManager.element.clientWidth), 0);\n\n      _this3.table.rowManager.scrollHorizontal(left);\n\n      _this3.scrollHorizontal(left);\n\n      resolve();\n    } else {\n      console.warn(\"Scroll Error - Column not visible\");\n      reject(\"Scroll Error - Column not visible\");\n    }\n  });\n}; //////////////// Cell Management /////////////////\n\n\nColumnManager.prototype.generateCells = function (row) {\n  var self = this;\n  var cells = [];\n  self.columnsByIndex.forEach(function (column) {\n    cells.push(column.generateCell(row));\n  });\n  return cells;\n}; //////////////// Column Management /////////////////\n\n\nColumnManager.prototype.getFlexBaseWidth = function () {\n  var self = this,\n      totalWidth = self.table.element.clientWidth,\n      //table element width\n  fixedWidth = 0; //adjust for vertical scrollbar if present\n\n  if (self.rowManager.element.scrollHeight > self.rowManager.element.clientHeight) {\n    totalWidth -= self.rowManager.element.offsetWidth - self.rowManager.element.clientWidth;\n  }\n\n  this.columnsByIndex.forEach(function (column) {\n    var width, minWidth, colWidth;\n\n    if (column.visible) {\n      width = column.definition.width || 0;\n      minWidth = typeof column.minWidth == \"undefined\" ? self.table.options.columnMinWidth : parseInt(column.minWidth);\n\n      if (typeof width == \"string\") {\n        if (width.indexOf(\"%\") > -1) {\n          colWidth = totalWidth / 100 * parseInt(width);\n        } else {\n          colWidth = parseInt(width);\n        }\n      } else {\n        colWidth = width;\n      }\n\n      fixedWidth += colWidth > minWidth ? colWidth : minWidth;\n    }\n  });\n  return fixedWidth;\n};\n\nColumnManager.prototype.addColumn = function (definition, before, nextToColumn) {\n  var _this4 = this;\n\n  return new Promise(function (resolve, reject) {\n    var column = _this4._addColumn(definition, before, nextToColumn);\n\n    _this4._reIndexColumns();\n\n    if (_this4.table.options.responsiveLayout && _this4.table.modExists(\"responsiveLayout\", true)) {\n      _this4.table.modules.responsiveLayout.initialize();\n    }\n\n    if (_this4.table.modExists(\"columnCalcs\")) {\n      _this4.table.modules.columnCalcs.recalc(_this4.table.rowManager.activeRows);\n    }\n\n    _this4.redraw();\n\n    if (_this4.table.modules.layout.getMode() != \"fitColumns\") {\n      column.reinitializeWidth();\n    }\n\n    _this4._verticalAlignHeaders();\n\n    _this4.table.rowManager.reinitialize();\n\n    if (_this4.table.options.virtualDomHoz) {\n      _this4.table.vdomHoz.reinitialize();\n    }\n\n    resolve(column);\n  });\n}; //remove column from system\n\n\nColumnManager.prototype.deregisterColumn = function (column) {\n  var field = column.getField(),\n      index; //remove from field list\n\n  if (field) {\n    delete this.columnsByField[field];\n  } //remove from index list\n\n\n  index = this.columnsByIndex.indexOf(column);\n\n  if (index > -1) {\n    this.columnsByIndex.splice(index, 1);\n  } //remove from column list\n\n\n  index = this.columns.indexOf(column);\n\n  if (index > -1) {\n    this.columns.splice(index, 1);\n  }\n\n  if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n    this.table.modules.responsiveLayout.initialize();\n  }\n\n  this._verticalAlignHeaders();\n\n  this.redraw();\n}; //redraw columns\n\n\nColumnManager.prototype.redraw = function (force) {\n  if (force) {\n    if (Tabulator.prototype.helpers.elVisible(this.element)) {\n      this._verticalAlignHeaders();\n    }\n\n    this.table.rowManager.resetScroll();\n    this.table.rowManager.reinitialize();\n  }\n\n  if ([\"fitColumns\", \"fitDataStretch\"].indexOf(this.table.modules.layout.getMode()) > -1) {\n    this.table.modules.layout.layout();\n  } else {\n    if (force) {\n      this.table.modules.layout.layout();\n    } else {\n      if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.update();\n      }\n    }\n  }\n\n  if (this.table.modExists(\"frozenColumns\")) {\n    this.table.modules.frozenColumns.layout();\n  }\n\n  if (this.table.modExists(\"columnCalcs\")) {\n    this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n  }\n\n  if (force) {\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n      this.table.modules.persistence.save(\"columns\");\n    }\n\n    if (this.table.modExists(\"columnCalcs\")) {\n      this.table.modules.columnCalcs.redraw();\n    }\n  }\n\n  this.table.footerManager.redraw();\n}; //public column object\n\n\nvar ColumnComponent = function ColumnComponent(column) {\n  this._column = column;\n  this.type = \"ColumnComponent\";\n};\n\nColumnComponent.prototype.getElement = function () {\n  return this._column.getElement();\n};\n\nColumnComponent.prototype.getDefinition = function () {\n  return this._column.getDefinition();\n};\n\nColumnComponent.prototype.getField = function () {\n  return this._column.getField();\n};\n\nColumnComponent.prototype.getCells = function () {\n  var cells = [];\n\n  this._column.cells.forEach(function (cell) {\n    cells.push(cell.getComponent());\n  });\n\n  return cells;\n};\n\nColumnComponent.prototype.getVisibility = function () {\n  console.warn(\"getVisibility function is deprecated, you should now use the isVisible function\");\n  return this._column.visible;\n};\n\nColumnComponent.prototype.isVisible = function () {\n  return this._column.visible;\n};\n\nColumnComponent.prototype.show = function () {\n  if (this._column.isGroup) {\n    this._column.columns.forEach(function (column) {\n      column.show();\n    });\n  } else {\n    this._column.show();\n  }\n};\n\nColumnComponent.prototype.hide = function () {\n  if (this._column.isGroup) {\n    this._column.columns.forEach(function (column) {\n      column.hide();\n    });\n  } else {\n    this._column.hide();\n  }\n};\n\nColumnComponent.prototype.toggle = function () {\n  if (this._column.visible) {\n    this.hide();\n  } else {\n    this.show();\n  }\n};\n\nColumnComponent.prototype.delete = function () {\n  return this._column.delete();\n};\n\nColumnComponent.prototype.getSubColumns = function () {\n  var output = [];\n\n  if (this._column.columns.length) {\n    this._column.columns.forEach(function (column) {\n      output.push(column.getComponent());\n    });\n  }\n\n  return output;\n};\n\nColumnComponent.prototype.getParentColumn = function () {\n  return this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n};\n\nColumnComponent.prototype._getSelf = function () {\n  return this._column;\n};\n\nColumnComponent.prototype.scrollTo = function () {\n  return this._column.table.columnManager.scrollToColumn(this._column);\n};\n\nColumnComponent.prototype.getTable = function () {\n  return this._column.table;\n};\n\nColumnComponent.prototype.headerFilterFocus = function () {\n  if (this._column.table.modExists(\"filter\", true)) {\n    this._column.table.modules.filter.setHeaderFilterFocus(this._column);\n  }\n};\n\nColumnComponent.prototype.reloadHeaderFilter = function () {\n  if (this._column.table.modExists(\"filter\", true)) {\n    this._column.table.modules.filter.reloadHeaderFilter(this._column);\n  }\n};\n\nColumnComponent.prototype.getHeaderFilterValue = function () {\n  if (this._column.table.modExists(\"filter\", true)) {\n    return this._column.table.modules.filter.getHeaderFilterValue(this._column);\n  }\n};\n\nColumnComponent.prototype.setHeaderFilterValue = function (value) {\n  if (this._column.table.modExists(\"filter\", true)) {\n    this._column.table.modules.filter.setHeaderFilterValue(this._column, value);\n  }\n};\n\nColumnComponent.prototype.move = function (to, after) {\n  var toColumn = this._column.table.columnManager.findColumn(to);\n\n  if (toColumn) {\n    this._column.table.columnManager.moveColumn(this._column, toColumn, after);\n  } else {\n    console.warn(\"Move Error - No matching column found:\", toColumn);\n  }\n};\n\nColumnComponent.prototype.getNextColumn = function () {\n  var nextCol = this._column.nextColumn();\n\n  return nextCol ? nextCol.getComponent() : false;\n};\n\nColumnComponent.prototype.getPrevColumn = function () {\n  var prevCol = this._column.prevColumn();\n\n  return prevCol ? prevCol.getComponent() : false;\n};\n\nColumnComponent.prototype.updateDefinition = function (updates) {\n  return this._column.updateDefinition(updates);\n};\n\nColumnComponent.prototype.getWidth = function () {\n  return this._column.getWidth();\n};\n\nColumnComponent.prototype.setWidth = function (width) {\n  var result;\n\n  if (width === true) {\n    result = this._column.reinitializeWidth(true);\n  } else {\n    result = this._column.setWidth(width);\n  }\n\n  if (this._column.table.options.virtualDomHoz) {\n    this._column.table.vdomHoz.reinitialize(true);\n  }\n\n  return result;\n};\n\nColumnComponent.prototype.validate = function () {\n  return this._column.validate();\n};\n\nvar Column = function Column(def, parent) {\n  var self = this;\n  this.table = parent.table;\n  this.definition = def; //column definition\n\n  this.parent = parent; //hold parent object\n\n  this.type = \"column\"; //type of element\n\n  this.columns = []; //child columns\n\n  this.cells = []; //cells bound to this column\n\n  this.element = this.createElement(); //column header element\n\n  this.contentElement = false;\n  this.titleHolderElement = false;\n  this.titleElement = false;\n  this.groupElement = this.createGroupElement(); //column group holder element\n\n  this.isGroup = false;\n  this.tooltip = false; //hold column tooltip\n\n  this.hozAlign = \"\"; //horizontal text alignment\n\n  this.vertAlign = \"\"; //vert text alignment\n  //multi dimensional filed handling\n\n  this.field = \"\";\n  this.fieldStructure = \"\";\n  this.getFieldValue = \"\";\n  this.setFieldValue = \"\";\n  this.titleFormatterRendered = false;\n  this.setField(this.definition.field);\n\n  if (this.table.options.invalidOptionWarnings) {\n    this.checkDefinition();\n  }\n\n  this.modules = {}; //hold module variables;\n\n  this.cellEvents = {\n    cellClick: false,\n    cellDblClick: false,\n    cellContext: false,\n    cellTap: false,\n    cellDblTap: false,\n    cellTapHold: false,\n    cellMouseEnter: false,\n    cellMouseLeave: false,\n    cellMouseOver: false,\n    cellMouseOut: false,\n    cellMouseMove: false\n  };\n  this.width = null; //column width\n\n  this.widthStyled = \"\"; //column width prestyled to improve render efficiency\n\n  this.minWidth = null; //column minimum width\n\n  this.minWidthStyled = \"\"; //column minimum prestyled to improve render efficiency\n\n  this.widthFixed = false; //user has specified a width for this column\n\n  this.visible = true; //default visible state\n\n  this.component = null;\n\n  this._mapDepricatedFunctionality(); //initialize column\n\n\n  if (def.columns) {\n    this.isGroup = true;\n    def.columns.forEach(function (def, i) {\n      var newCol = new Column(def, self);\n      self.attachColumn(newCol);\n    });\n    self.checkColumnVisibility();\n  } else {\n    parent.registerColumnField(this);\n  }\n\n  if (def.rowHandle && this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")) {\n    this.table.modules.moveRow.setHandle(true);\n  }\n\n  this._buildHeader();\n\n  this.bindModuleColumns();\n};\n\nColumn.prototype.createElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-col\");\n  el.setAttribute(\"role\", \"columnheader\");\n  el.setAttribute(\"aria-sort\", \"none\");\n  return el;\n};\n\nColumn.prototype.createGroupElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-col-group-cols\");\n  return el;\n};\n\nColumn.prototype.checkDefinition = function () {\n  var _this5 = this;\n\n  Object.keys(this.definition).forEach(function (key) {\n    if (_this5.defaultOptionList.indexOf(key) === -1) {\n      console.warn(\"Invalid column definition option in '\" + (_this5.field || _this5.definition.title) + \"' column:\", key);\n    }\n  });\n};\n\nColumn.prototype.setField = function (field) {\n  this.field = field;\n  this.fieldStructure = field ? this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field] : [];\n  this.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n  this.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n}; //register column position with column manager\n\n\nColumn.prototype.registerColumnPosition = function (column) {\n  this.parent.registerColumnPosition(column);\n}; //register column position with column manager\n\n\nColumn.prototype.registerColumnField = function (column) {\n  this.parent.registerColumnField(column);\n}; //trigger position registration\n\n\nColumn.prototype.reRegisterPosition = function () {\n  if (this.isGroup) {\n    this.columns.forEach(function (column) {\n      column.reRegisterPosition();\n    });\n  } else {\n    this.registerColumnPosition(this);\n  }\n};\n\nColumn.prototype._mapDepricatedFunctionality = function () {\n  if (typeof this.definition.hideInHtml !== \"undefined\") {\n    this.definition.htmlOutput = !this.definition.hideInHtml;\n    console.warn(\"hideInHtml column definition property is deprecated, you should now use htmlOutput\");\n  }\n\n  if (typeof this.definition.align !== \"undefined\") {\n    this.definition.hozAlign = this.definition.align;\n    console.warn(\"align column definition property is deprecated, you should now use hozAlign\");\n  }\n\n  if (typeof this.definition.downloadTitle !== \"undefined\") {\n    this.definition.titleDownload = this.definition.downloadTitle;\n    console.warn(\"downloadTitle definition property is deprecated, you should now use titleDownload\");\n  }\n};\n\nColumn.prototype.setTooltip = function () {\n  var self = this,\n      def = self.definition; //set header tooltips\n\n  var tooltip = def.headerTooltip || def.tooltip === false ? def.headerTooltip : self.table.options.tooltipsHeader;\n\n  if (tooltip) {\n    if (tooltip === true) {\n      if (def.field) {\n        self.table.modules.localize.bind(\"columns|\" + def.field, function (value) {\n          self.element.setAttribute(\"title\", value || def.title);\n        });\n      } else {\n        self.element.setAttribute(\"title\", def.title);\n      }\n    } else {\n      if (typeof tooltip == \"function\") {\n        tooltip = tooltip(self.getComponent());\n\n        if (tooltip === false) {\n          tooltip = \"\";\n        }\n      }\n\n      self.element.setAttribute(\"title\", tooltip);\n    }\n  } else {\n    self.element.setAttribute(\"title\", \"\");\n  }\n}; //build header element\n\n\nColumn.prototype._buildHeader = function () {\n  var self = this,\n      def = self.definition;\n\n  while (self.element.firstChild) {\n    self.element.removeChild(self.element.firstChild);\n  }\n\n  if (def.headerVertical) {\n    self.element.classList.add(\"tabulator-col-vertical\");\n\n    if (def.headerVertical === \"flip\") {\n      self.element.classList.add(\"tabulator-col-vertical-flip\");\n    }\n  }\n\n  self.contentElement = self._bindEvents();\n  self.contentElement = self._buildColumnHeaderContent();\n  self.element.appendChild(self.contentElement);\n\n  if (self.isGroup) {\n    self._buildGroupHeader();\n  } else {\n    self._buildColumnHeader();\n  }\n\n  self.setTooltip(); //set resizable handles\n\n  if (self.table.options.resizableColumns && self.table.modExists(\"resizeColumns\")) {\n    self.table.modules.resizeColumns.initializeColumn(\"header\", self, self.element);\n  } //set resizable handles\n\n\n  if (def.headerFilter && self.table.modExists(\"filter\") && self.table.modExists(\"edit\")) {\n    if (typeof def.headerFilterPlaceholder !== \"undefined\" && def.field) {\n      self.table.modules.localize.setHeaderFilterColumnPlaceholder(def.field, def.headerFilterPlaceholder);\n    }\n\n    self.table.modules.filter.initializeColumn(self);\n  } //set resizable handles\n\n\n  if (self.table.modExists(\"frozenColumns\")) {\n    self.table.modules.frozenColumns.initializeColumn(self);\n  } //set movable column\n\n\n  if (self.table.options.movableColumns && !self.isGroup && self.table.modExists(\"moveColumn\")) {\n    self.table.modules.moveColumn.initializeColumn(self);\n  } //set calcs column\n\n\n  if ((def.topCalc || def.bottomCalc) && self.table.modExists(\"columnCalcs\")) {\n    self.table.modules.columnCalcs.initializeColumn(self);\n  } //handle persistence\n\n\n  if (self.table.modExists(\"persistence\") && self.table.modules.persistence.config.columns) {\n    self.table.modules.persistence.initializeColumn(self);\n  } //update header tooltip on mouse enter\n\n\n  self.element.addEventListener(\"mouseenter\", function (e) {\n    self.setTooltip();\n  });\n};\n\nColumn.prototype._bindEvents = function () {\n  var self = this,\n      def = self.definition,\n      dblTap,\n      tapHold,\n      tap; //setup header click event bindings\n\n  if (typeof def.headerClick == \"function\") {\n    self.element.addEventListener(\"click\", function (e) {\n      def.headerClick(e, self.getComponent());\n    });\n  }\n\n  if (typeof def.headerDblClick == \"function\") {\n    self.element.addEventListener(\"dblclick\", function (e) {\n      def.headerDblClick(e, self.getComponent());\n    });\n  }\n\n  if (typeof def.headerContext == \"function\") {\n    self.element.addEventListener(\"contextmenu\", function (e) {\n      def.headerContext(e, self.getComponent());\n    });\n  } //setup header tap event bindings\n\n\n  if (typeof def.headerTap == \"function\") {\n    tap = false;\n    self.element.addEventListener(\"touchstart\", function (e) {\n      tap = true;\n    }, {\n      passive: true\n    });\n    self.element.addEventListener(\"touchend\", function (e) {\n      if (tap) {\n        def.headerTap(e, self.getComponent());\n      }\n\n      tap = false;\n    });\n  }\n\n  if (typeof def.headerDblTap == \"function\") {\n    dblTap = null;\n    self.element.addEventListener(\"touchend\", function (e) {\n      if (dblTap) {\n        clearTimeout(dblTap);\n        dblTap = null;\n        def.headerDblTap(e, self.getComponent());\n      } else {\n        dblTap = setTimeout(function () {\n          clearTimeout(dblTap);\n          dblTap = null;\n        }, 300);\n      }\n    });\n  }\n\n  if (typeof def.headerTapHold == \"function\") {\n    tapHold = null;\n    self.element.addEventListener(\"touchstart\", function (e) {\n      clearTimeout(tapHold);\n      tapHold = setTimeout(function () {\n        clearTimeout(tapHold);\n        tapHold = null;\n        tap = false;\n        def.headerTapHold(e, self.getComponent());\n      }, 1000);\n    }, {\n      passive: true\n    });\n    self.element.addEventListener(\"touchend\", function (e) {\n      clearTimeout(tapHold);\n      tapHold = null;\n    });\n  } //store column cell click event bindings\n\n\n  if (typeof def.cellClick == \"function\") {\n    self.cellEvents.cellClick = def.cellClick;\n  }\n\n  if (typeof def.cellDblClick == \"function\") {\n    self.cellEvents.cellDblClick = def.cellDblClick;\n  }\n\n  if (typeof def.cellContext == \"function\") {\n    self.cellEvents.cellContext = def.cellContext;\n  } //store column mouse event bindings\n\n\n  if (typeof def.cellMouseEnter == \"function\") {\n    self.cellEvents.cellMouseEnter = def.cellMouseEnter;\n  }\n\n  if (typeof def.cellMouseLeave == \"function\") {\n    self.cellEvents.cellMouseLeave = def.cellMouseLeave;\n  }\n\n  if (typeof def.cellMouseOver == \"function\") {\n    self.cellEvents.cellMouseOver = def.cellMouseOver;\n  }\n\n  if (typeof def.cellMouseOut == \"function\") {\n    self.cellEvents.cellMouseOut = def.cellMouseOut;\n  }\n\n  if (typeof def.cellMouseMove == \"function\") {\n    self.cellEvents.cellMouseMove = def.cellMouseMove;\n  } //setup column cell tap event bindings\n\n\n  if (typeof def.cellTap == \"function\") {\n    self.cellEvents.cellTap = def.cellTap;\n  }\n\n  if (typeof def.cellDblTap == \"function\") {\n    self.cellEvents.cellDblTap = def.cellDblTap;\n  }\n\n  if (typeof def.cellTapHold == \"function\") {\n    self.cellEvents.cellTapHold = def.cellTapHold;\n  } //setup column cell edit callbacks\n\n\n  if (typeof def.cellEdited == \"function\") {\n    self.cellEvents.cellEdited = def.cellEdited;\n  }\n\n  if (typeof def.cellEditing == \"function\") {\n    self.cellEvents.cellEditing = def.cellEditing;\n  }\n\n  if (typeof def.cellEditCancelled == \"function\") {\n    self.cellEvents.cellEditCancelled = def.cellEditCancelled;\n  }\n}; //build header element for header\n\n\nColumn.prototype._buildColumnHeader = function () {\n  var _this6 = this;\n\n  var def = this.definition,\n      table = this.table,\n      sortable; //set column sorter\n\n  if (table.modExists(\"sort\")) {\n    table.modules.sort.initializeColumn(this, this.titleHolderElement);\n  } //set column header context menu\n\n\n  if ((def.headerContextMenu || def.headerClickMenu || def.headerMenu) && table.modExists(\"menu\")) {\n    table.modules.menu.initializeColumnHeader(this);\n  } //set column formatter\n\n\n  if (table.modExists(\"format\")) {\n    table.modules.format.initializeColumn(this);\n  } //set column editor\n\n\n  if (typeof def.editor != \"undefined\" && table.modExists(\"edit\")) {\n    table.modules.edit.initializeColumn(this);\n  } //set colum validator\n\n\n  if (typeof def.validator != \"undefined\" && table.modExists(\"validate\")) {\n    table.modules.validate.initializeColumn(this);\n  } //set column mutator\n\n\n  if (table.modExists(\"mutator\")) {\n    table.modules.mutator.initializeColumn(this);\n  } //set column accessor\n\n\n  if (table.modExists(\"accessor\")) {\n    table.modules.accessor.initializeColumn(this);\n  } //set respoviveLayout\n\n\n  if (_typeof(table.options.responsiveLayout) && table.modExists(\"responsiveLayout\")) {\n    table.modules.responsiveLayout.initializeColumn(this);\n  } //set column visibility\n\n\n  if (typeof def.visible != \"undefined\") {\n    if (def.visible) {\n      this.show(true);\n    } else {\n      this.hide(true);\n    }\n  } //asign additional css classes to column header\n\n\n  if (def.cssClass) {\n    var classeNames = def.cssClass.split(\" \");\n    classeNames.forEach(function (className) {\n      _this6.element.classList.add(className);\n    });\n  }\n\n  if (def.field) {\n    this.element.setAttribute(\"tabulator-field\", def.field);\n  } //set min width if present\n\n\n  this.setMinWidth(typeof def.minWidth == \"undefined\" ? this.table.options.columnMinWidth : parseInt(def.minWidth));\n  this.reinitializeWidth(); //set tooltip if present\n\n  this.tooltip = this.definition.tooltip || this.definition.tooltip === false ? this.definition.tooltip : this.table.options.tooltips; //set orizontal text alignment\n\n  this.hozAlign = typeof this.definition.hozAlign == \"undefined\" ? this.table.options.cellHozAlign : this.definition.hozAlign;\n  this.vertAlign = typeof this.definition.vertAlign == \"undefined\" ? this.table.options.cellVertAlign : this.definition.vertAlign;\n  this.titleElement.style.textAlign = this.definition.headerHozAlign || this.table.options.headerHozAlign;\n};\n\nColumn.prototype._buildColumnHeaderContent = function () {\n  var def = this.definition,\n      table = this.table;\n  var contentElement = document.createElement(\"div\");\n  contentElement.classList.add(\"tabulator-col-content\");\n  this.titleHolderElement = document.createElement(\"div\");\n  this.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n  contentElement.appendChild(this.titleHolderElement);\n  this.titleElement = this._buildColumnHeaderTitle();\n  this.titleHolderElement.appendChild(this.titleElement);\n  return contentElement;\n}; //build title element of column\n\n\nColumn.prototype._buildColumnHeaderTitle = function () {\n  var self = this,\n      def = self.definition,\n      table = self.table,\n      title;\n  var titleHolderElement = document.createElement(\"div\");\n  titleHolderElement.classList.add(\"tabulator-col-title\");\n\n  if (def.editableTitle) {\n    var titleElement = document.createElement(\"input\");\n    titleElement.classList.add(\"tabulator-title-editor\");\n    titleElement.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n      titleElement.focus();\n    });\n    titleElement.addEventListener(\"change\", function () {\n      def.title = titleElement.value;\n      table.options.columnTitleChanged.call(self.table, self.getComponent());\n    });\n    titleHolderElement.appendChild(titleElement);\n\n    if (def.field) {\n      table.modules.localize.bind(\"columns|\" + def.field, function (text) {\n        titleElement.value = text || def.title || \"&nbsp;\";\n      });\n    } else {\n      titleElement.value = def.title || \"&nbsp;\";\n    }\n  } else {\n    if (def.field) {\n      table.modules.localize.bind(\"columns|\" + def.field, function (text) {\n        self._formatColumnHeaderTitle(titleHolderElement, text || def.title || \"&nbsp;\");\n      });\n    } else {\n      self._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n    }\n  }\n\n  return titleHolderElement;\n};\n\nColumn.prototype._formatColumnHeaderTitle = function (el, title) {\n  var _this7 = this;\n\n  var formatter, contents, params, mockCell, onRendered;\n\n  if (this.definition.titleFormatter && this.table.modExists(\"format\")) {\n    formatter = this.table.modules.format.getFormatter(this.definition.titleFormatter);\n\n    onRendered = function onRendered(callback) {\n      _this7.titleFormatterRendered = callback;\n    };\n\n    mockCell = {\n      getValue: function getValue() {\n        return title;\n      },\n      getElement: function getElement() {\n        return el;\n      }\n    };\n    params = this.definition.titleFormatterParams || {};\n    params = typeof params === \"function\" ? params() : params;\n    contents = formatter.call(this.table.modules.format, mockCell, params, onRendered);\n\n    switch (typeof contents === 'undefined' ? 'undefined' : _typeof(contents)) {\n      case \"object\":\n        if (contents instanceof Node) {\n          el.appendChild(contents);\n        } else {\n          el.innerHTML = \"\";\n          console.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n        }\n\n        break;\n\n      case \"undefined\":\n      case \"null\":\n        el.innerHTML = \"\";\n        break;\n\n      default:\n        el.innerHTML = contents;\n    }\n  } else {\n    el.innerHTML = title;\n  }\n}; //build header element for column group\n\n\nColumn.prototype._buildGroupHeader = function () {\n  var _this8 = this;\n\n  this.element.classList.add(\"tabulator-col-group\");\n  this.element.setAttribute(\"role\", \"columngroup\");\n  this.element.setAttribute(\"aria-title\", this.definition.title); //asign additional css classes to column header\n\n  if (this.definition.cssClass) {\n    var classeNames = this.definition.cssClass.split(\" \");\n    classeNames.forEach(function (className) {\n      _this8.element.classList.add(className);\n    });\n  } //set column header context menu\n\n\n  if ((this.definition.headerContextMenu || this.definition.headerMenu) && this.table.modExists(\"menu\")) {\n    this.table.modules.menu.initializeColumnHeader(this);\n  }\n\n  this.element.appendChild(this.groupElement);\n}; //flat field lookup\n\n\nColumn.prototype._getFlatData = function (data) {\n  return data[this.field];\n}; //nested field lookup\n\n\nColumn.prototype._getNestedData = function (data) {\n  var dataObj = data,\n      structure = this.fieldStructure,\n      length = structure.length,\n      output;\n\n  for (var _i = 0; _i < length; _i++) {\n    dataObj = dataObj[structure[_i]];\n    output = dataObj;\n\n    if (!dataObj) {\n      break;\n    }\n  }\n\n  return output;\n}; //flat field set\n\n\nColumn.prototype._setFlatData = function (data, value) {\n  if (this.field) {\n    data[this.field] = value;\n  }\n}; //nested field set\n\n\nColumn.prototype._setNestedData = function (data, value) {\n  var dataObj = data,\n      structure = this.fieldStructure,\n      length = structure.length;\n\n  for (var _i2 = 0; _i2 < length; _i2++) {\n    if (_i2 == length - 1) {\n      dataObj[structure[_i2]] = value;\n    } else {\n      if (!dataObj[structure[_i2]]) {\n        if (typeof value !== \"undefined\") {\n          dataObj[structure[_i2]] = {};\n        } else {\n          break;\n        }\n      }\n\n      dataObj = dataObj[structure[_i2]];\n    }\n  }\n}; //attach column to this group\n\n\nColumn.prototype.attachColumn = function (column) {\n  var self = this;\n\n  if (self.groupElement) {\n    self.columns.push(column);\n    self.groupElement.appendChild(column.getElement());\n  } else {\n    console.warn(\"Column Warning - Column being attached to another column instead of column group\");\n  }\n}; //vertically align header in column\n\n\nColumn.prototype.verticalAlign = function (alignment, height) {\n  //calculate height of column header and group holder element\n  var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : height || this.parent.getHeadersElement().clientHeight; // var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n  this.element.style.height = parentHeight + \"px\";\n\n  if (this.isGroup) {\n    this.groupElement.style.minHeight = parentHeight - this.contentElement.offsetHeight + \"px\";\n  } //vertically align cell contents\n\n\n  if (!this.isGroup && alignment !== \"top\") {\n    if (alignment === \"bottom\") {\n      this.element.style.paddingTop = this.element.clientHeight - this.contentElement.offsetHeight + \"px\";\n    } else {\n      this.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) / 2 + \"px\";\n    }\n  }\n\n  this.columns.forEach(function (column) {\n    column.verticalAlign(alignment);\n  });\n}; //clear vertical alignmenet\n\n\nColumn.prototype.clearVerticalAlign = function () {\n  this.element.style.paddingTop = \"\";\n  this.element.style.height = \"\";\n  this.element.style.minHeight = \"\";\n  this.groupElement.style.minHeight = \"\";\n  this.columns.forEach(function (column) {\n    column.clearVerticalAlign();\n  });\n};\n\nColumn.prototype.bindModuleColumns = function () {\n  //check if rownum formatter is being used on a column\n  if (this.definition.formatter == \"rownum\") {\n    this.table.rowManager.rowNumColumn = this;\n  }\n}; //// Retreive Column Information ////\n//return column header element\n\n\nColumn.prototype.getElement = function () {\n  return this.element;\n}; //return colunm group element\n\n\nColumn.prototype.getGroupElement = function () {\n  return this.groupElement;\n}; //return field name\n\n\nColumn.prototype.getField = function () {\n  return this.field;\n}; //return the first column in a group\n\n\nColumn.prototype.getFirstColumn = function () {\n  if (!this.isGroup) {\n    return this;\n  } else {\n    if (this.columns.length) {\n      return this.columns[0].getFirstColumn();\n    } else {\n      return false;\n    }\n  }\n}; //return the last column in a group\n\n\nColumn.prototype.getLastColumn = function () {\n  if (!this.isGroup) {\n    return this;\n  } else {\n    if (this.columns.length) {\n      return this.columns[this.columns.length - 1].getLastColumn();\n    } else {\n      return false;\n    }\n  }\n}; //return all columns in a group\n\n\nColumn.prototype.getColumns = function () {\n  return this.columns;\n}; //return all columns in a group\n\n\nColumn.prototype.getCells = function () {\n  return this.cells;\n}; //retreive the top column in a group of columns\n\n\nColumn.prototype.getTopColumn = function () {\n  if (this.parent.isGroup) {\n    return this.parent.getTopColumn();\n  } else {\n    return this;\n  }\n}; //return column definition object\n\n\nColumn.prototype.getDefinition = function (updateBranches) {\n  var colDefs = [];\n\n  if (this.isGroup && updateBranches) {\n    this.columns.forEach(function (column) {\n      colDefs.push(column.getDefinition(true));\n    });\n    this.definition.columns = colDefs;\n  }\n\n  return this.definition;\n}; //////////////////// Actions ////////////////////\n\n\nColumn.prototype.checkColumnVisibility = function () {\n  var visible = false;\n  this.columns.forEach(function (column) {\n    if (column.visible) {\n      visible = true;\n    }\n  });\n\n  if (visible) {\n    this.show();\n    this.parent.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n  } else {\n    this.hide();\n  }\n}; //show column\n\n\nColumn.prototype.show = function (silent, responsiveToggle) {\n  if (!this.visible) {\n    this.visible = true;\n    this.element.style.display = \"\";\n\n    if (this.parent.isGroup) {\n      this.parent.checkColumnVisibility();\n    }\n\n    this.cells.forEach(function (cell) {\n      cell.show();\n    });\n\n    if (!this.isGroup && this.width === null) {\n      this.reinitializeWidth();\n    }\n\n    this.table.columnManager._verticalAlignHeaders();\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n      this.table.modules.persistence.save(\"columns\");\n    }\n\n    if (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n    }\n\n    if (!silent) {\n      this.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), true);\n    }\n\n    if (this.parent.isGroup) {\n      this.parent.matchChildWidths();\n    }\n  }\n}; //hide column\n\n\nColumn.prototype.hide = function (silent, responsiveToggle) {\n  if (this.visible) {\n    this.visible = false;\n    this.element.style.display = \"none\";\n\n    this.table.columnManager._verticalAlignHeaders();\n\n    if (this.parent.isGroup) {\n      this.parent.checkColumnVisibility();\n    }\n\n    this.cells.forEach(function (cell) {\n      cell.hide();\n    });\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n      this.table.modules.persistence.save(\"columns\");\n    }\n\n    if (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n    }\n\n    if (!silent) {\n      this.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n    }\n\n    if (this.parent.isGroup) {\n      this.parent.matchChildWidths();\n    }\n  }\n};\n\nColumn.prototype.matchChildWidths = function () {\n  var childWidth = 0;\n\n  if (this.contentElement && this.columns.length) {\n    this.columns.forEach(function (column) {\n      if (column.visible) {\n        childWidth += column.getWidth();\n      }\n    });\n    this.contentElement.style.maxWidth = childWidth - 1 + \"px\";\n\n    if (this.parent.isGroup) {\n      this.parent.matchChildWidths();\n    }\n  }\n};\n\nColumn.prototype.setWidth = function (width) {\n  this.widthFixed = true;\n  this.setWidthActual(width);\n};\n\nColumn.prototype.setWidthActual = function (width) {\n  if (isNaN(width)) {\n    width = Math.floor(this.table.element.clientWidth / 100 * parseInt(width));\n  }\n\n  width = Math.max(this.minWidth, width);\n  this.width = width;\n  this.widthStyled = width ? width + \"px\" : \"\";\n  this.element.style.width = this.widthStyled;\n\n  if (!this.isGroup) {\n    this.cells.forEach(function (cell) {\n      cell.setWidth();\n    });\n  }\n\n  if (this.parent.isGroup) {\n    this.parent.matchChildWidths();\n  } //set resizable handles\n\n\n  if (this.table.modExists(\"frozenColumns\")) {\n    this.table.modules.frozenColumns.layout();\n  }\n};\n\nColumn.prototype.checkCellHeights = function () {\n  var rows = [];\n  this.cells.forEach(function (cell) {\n    if (cell.row.heightInitialized) {\n      if (cell.row.getElement().offsetParent !== null) {\n        rows.push(cell.row);\n        cell.row.clearCellHeight();\n      } else {\n        cell.row.heightInitialized = false;\n      }\n    }\n  });\n  rows.forEach(function (row) {\n    row.calcHeight();\n  });\n  rows.forEach(function (row) {\n    row.setCellHeight();\n  });\n};\n\nColumn.prototype.getWidth = function () {\n  var width = 0;\n\n  if (this.isGroup) {\n    this.columns.forEach(function (column) {\n      if (column.visible) {\n        width += column.getWidth();\n      }\n    });\n  } else {\n    width = this.width;\n  }\n\n  return width;\n};\n\nColumn.prototype.getHeight = function () {\n  return this.element.offsetHeight;\n};\n\nColumn.prototype.setMinWidth = function (minWidth) {\n  this.minWidth = minWidth;\n  this.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n  this.element.style.minWidth = this.minWidthStyled;\n  this.cells.forEach(function (cell) {\n    cell.setMinWidth();\n  });\n};\n\nColumn.prototype.delete = function () {\n  var _this9 = this;\n\n  return new Promise(function (resolve, reject) {\n    if (_this9.isGroup) {\n      _this9.columns.forEach(function (column) {\n        column.delete();\n      });\n    } //cancel edit if column is currently being edited\n\n\n    if (_this9.table.modExists(\"edit\")) {\n      if (_this9.table.modules.edit.currentCell.column === _this9) {\n        _this9.table.modules.edit.cancelEdit();\n      }\n    }\n\n    var cellCount = _this9.cells.length;\n\n    for (var _i3 = 0; _i3 < cellCount; _i3++) {\n      _this9.cells[0].delete();\n    }\n\n    if (_this9.element.parentNode) {\n      _this9.element.parentNode.removeChild(_this9.element);\n    }\n\n    _this9.element = false;\n    _this9.contentElement = false;\n    _this9.titleElement = false;\n    _this9.groupElement = false;\n\n    _this9.table.columnManager.deregisterColumn(_this9);\n\n    if (_this9.table.options.virtualDomHoz) {\n      _this9.table.vdomHoz.reinitialize(true);\n    }\n\n    resolve();\n  });\n};\n\nColumn.prototype.columnRendered = function () {\n  if (this.titleFormatterRendered) {\n    this.titleFormatterRendered();\n  }\n};\n\nColumn.prototype.validate = function () {\n  var invalid = [];\n  this.cells.forEach(function (cell) {\n    if (!cell.validate()) {\n      invalid.push(cell.getComponent());\n    }\n  });\n  return invalid.length ? invalid : true;\n}; //////////////// Cell Management /////////////////\n//generate cell for this column\n\n\nColumn.prototype.generateCell = function (row) {\n  var self = this;\n  var cell = new Cell(self, row);\n  this.cells.push(cell);\n  return cell;\n};\n\nColumn.prototype.nextColumn = function () {\n  var index = this.table.columnManager.findColumnIndex(this);\n  return index > -1 ? this._nextVisibleColumn(index + 1) : false;\n};\n\nColumn.prototype._nextVisibleColumn = function (index) {\n  var column = this.table.columnManager.getColumnByIndex(index);\n  return !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n};\n\nColumn.prototype.prevColumn = function () {\n  var index = this.table.columnManager.findColumnIndex(this);\n  return index > -1 ? this._prevVisibleColumn(index - 1) : false;\n};\n\nColumn.prototype._prevVisibleColumn = function (index) {\n  var column = this.table.columnManager.getColumnByIndex(index);\n  return !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n};\n\nColumn.prototype.reinitializeWidth = function (force) {\n  this.widthFixed = false; //set width if present\n\n  if (typeof this.definition.width !== \"undefined\" && !force) {\n    this.setWidth(this.definition.width);\n  } //hide header filters to prevent them altering column width\n\n\n  if (this.table.modExists(\"filter\")) {\n    this.table.modules.filter.hideHeaderFilterElements();\n  }\n\n  this.fitToData(); //show header filters again after layout is complete\n\n  if (this.table.modExists(\"filter\")) {\n    this.table.modules.filter.showHeaderFilterElements();\n  }\n}; //set column width to maximum cell width\n\n\nColumn.prototype.fitToData = function () {\n  var self = this;\n\n  if (!this.widthFixed) {\n    this.element.style.width = \"\";\n    self.cells.forEach(function (cell) {\n      cell.clearWidth();\n    });\n  }\n\n  var maxWidth = this.element.offsetWidth;\n\n  if (!self.width || !this.widthFixed) {\n    self.cells.forEach(function (cell) {\n      var width = cell.getWidth();\n\n      if (width > maxWidth) {\n        maxWidth = width;\n      }\n    });\n\n    if (maxWidth) {\n      self.setWidthActual(maxWidth + 1);\n    }\n  }\n};\n\nColumn.prototype.updateDefinition = function (updates) {\n  var _this10 = this;\n\n  return new Promise(function (resolve, reject) {\n    var definition;\n\n    if (!_this10.isGroup) {\n      definition = Object.assign({}, _this10.getDefinition());\n      definition = Object.assign(definition, updates);\n\n      _this10.table.columnManager.addColumn(definition, false, _this10).then(function (column) {\n        if (definition.field == _this10.field) {\n          _this10.field = false; //cleair field name to prevent deletion of duplicate column from arrays\n        }\n\n        _this10.delete().then(function () {\n          resolve(column.getComponent());\n        }).catch(function (err) {\n          reject(err);\n        });\n      }).catch(function (err) {\n        reject(err);\n      });\n    } else {\n      console.warn(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n      reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n    }\n  });\n};\n\nColumn.prototype.deleteCell = function (cell) {\n  var index = this.cells.indexOf(cell);\n\n  if (index > -1) {\n    this.cells.splice(index, 1);\n  }\n};\n\nColumn.prototype.defaultOptionList = [\"title\", \"field\", \"columns\", \"visible\", \"align\", \"hozAlign\", \"vertAlign\", \"width\", \"minWidth\", \"widthGrow\", \"widthShrink\", \"resizable\", \"frozen\", \"responsive\", \"tooltip\", \"cssClass\", \"rowHandle\", \"hideInHtml\", \"print\", \"htmlOutput\", \"sorter\", \"sorterParams\", \"formatter\", \"formatterParams\", \"variableHeight\", \"editable\", \"editor\", \"editorParams\", \"validator\", \"mutator\", \"mutatorParams\", \"mutatorData\", \"mutatorDataParams\", \"mutatorEdit\", \"mutatorEditParams\", \"mutatorClipboard\", \"mutatorClipboardParams\", \"accessor\", \"accessorParams\", \"accessorData\", \"accessorDataParams\", \"accessorDownload\", \"accessorDownloadParams\", \"accessorClipboard\", \"accessorClipboardParams\", \"accessorPrint\", \"accessorPrintParams\", \"accessorHtmlOutput\", \"accessorHtmlOutputParams\", \"clipboard\", \"download\", \"downloadTitle\", \"topCalc\", \"topCalcParams\", \"topCalcFormatter\", \"topCalcFormatterParams\", \"bottomCalc\", \"bottomCalcParams\", \"bottomCalcFormatter\", \"bottomCalcFormatterParams\", \"cellClick\", \"cellDblClick\", \"cellContext\", \"cellTap\", \"cellDblTap\", \"cellTapHold\", \"cellMouseEnter\", \"cellMouseLeave\", \"cellMouseOver\", \"cellMouseOut\", \"cellMouseMove\", \"cellEditing\", \"cellEdited\", \"cellEditCancelled\", \"headerSort\", \"headerSortStartingDir\", \"headerSortTristate\", \"headerClick\", \"headerDblClick\", \"headerContext\", \"headerTap\", \"headerDblTap\", \"headerTapHold\", \"headerTooltip\", \"headerVertical\", \"headerHozAlign\", \"editableTitle\", \"titleFormatter\", \"titleFormatterParams\", \"headerFilter\", \"headerFilterPlaceholder\", \"headerFilterParams\", \"headerFilterEmptyCheck\", \"headerFilterFunc\", \"headerFilterFuncParams\", \"headerFilterLiveFilter\", \"print\", \"headerContextMenu\", \"headerMenu\", \"contextMenu\", // \"headerClickMenu\",\n\"clickMenu\", \"formatterPrint\", \"formatterPrintParams\", \"formatterClipboard\", \"formatterClipboardParams\", \"formatterHtmlOutput\", \"formatterHtmlOutputParams\", \"titlePrint\", \"titleClipboard\", \"titleHtmlOutput\", \"titleDownload\"]; //////////////// Event Bindings /////////////////\n//////////////// Object Generation /////////////////\n\nColumn.prototype.getComponent = function () {\n  if (!this.component) {\n    this.component = new ColumnComponent(this);\n  }\n\n  return this.component;\n};\n\nvar RowManager = function RowManager(table) {\n  this.table = table;\n  this.element = this.createHolderElement(); //containing element\n\n  this.tableElement = this.createTableElement(); //table element\n\n  this.heightFixer = this.createTableElement(); //table element\n\n  this.columnManager = null; //hold column manager object\n\n  this.height = 0; //hold height of table element\n\n  this.firstRender = false; //handle first render\n\n  this.renderMode = \"virtual\"; //current rendering mode\n\n  this.fixedHeight = false; //current rendering mode\n\n  this.rows = []; //hold row data objects\n\n  this.activeRows = []; //rows currently available to on display in the table\n\n  this.activeRowsCount = 0; //count of active rows\n\n  this.displayRows = []; //rows currently on display in the table\n\n  this.displayRowsCount = 0; //count of display rows\n\n  this.scrollTop = 0;\n  this.scrollLeft = 0;\n  this.vDomRowHeight = 20; //approximation of row heights for padding\n\n  this.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\n  this.vDomBottom = 0; //hold possition for last rendered row in the virtual DOM\n\n  this.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\n  this.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n  this.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\n  this.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n  this.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n  this.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n  this.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\n  this.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n  this.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\n  this.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\n  this.rowNumColumn = false; //hold column component for row number column\n\n  this.redrawBlock = false; //prevent redraws to allow multiple data manipulations becore continuing\n\n  this.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\n  this.redrawBlockRederInPosition = false; //store latest redraw function calls for when redraw is needed\n}; //////////////// Setup Functions /////////////////\n\n\nRowManager.prototype.createHolderElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-tableHolder\");\n  el.setAttribute(\"tabindex\", 0);\n  return el;\n};\n\nRowManager.prototype.createTableElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-table\");\n  return el;\n}; //return containing element\n\n\nRowManager.prototype.getElement = function () {\n  return this.element;\n}; //return table element\n\n\nRowManager.prototype.getTableElement = function () {\n  return this.tableElement;\n}; //return position of row in table\n\n\nRowManager.prototype.getRowPosition = function (row, active) {\n  if (active) {\n    return this.activeRows.indexOf(row);\n  } else {\n    return this.rows.indexOf(row);\n  }\n}; //link to column manager\n\n\nRowManager.prototype.setColumnManager = function (manager) {\n  this.columnManager = manager;\n};\n\nRowManager.prototype.initialize = function () {\n  var self = this;\n  self.setRenderMode(); //initialize manager\n\n  self.element.appendChild(self.tableElement);\n  self.firstRender = true; //scroll header along with table body\n\n  self.element.addEventListener(\"scroll\", function () {\n    var left = self.element.scrollLeft; //handle horizontal scrolling\n\n    if (self.scrollLeft != left) {\n      self.columnManager.scrollHorizontal(left);\n\n      if (self.table.options.groupBy) {\n        self.table.modules.groupRows.scrollHeaders(left);\n      }\n\n      if (self.table.modExists(\"columnCalcs\")) {\n        self.table.modules.columnCalcs.scrollHorizontal(left);\n      }\n\n      self.table.options.scrollHorizontal(left);\n    }\n\n    self.scrollLeft = left;\n  }); //handle virtual dom scrolling\n\n  if (this.renderMode === \"virtual\") {\n    self.element.addEventListener(\"scroll\", function () {\n      var top = self.element.scrollTop;\n      var dir = self.scrollTop > top; //handle verical scrolling\n\n      if (self.scrollTop != top) {\n        self.scrollTop = top;\n        self.scrollVertical(dir);\n\n        if (self.table.options.ajaxProgressiveLoad == \"scroll\") {\n          self.table.modules.ajax.nextPage(self.element.scrollHeight - self.element.clientHeight - top);\n        }\n\n        self.table.options.scrollVertical(top);\n      } else {\n        self.scrollTop = top;\n      }\n    });\n  }\n}; ////////////////// Row Manipulation //////////////////\n\n\nRowManager.prototype.findRow = function (subject) {\n  var self = this;\n\n  if ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n    if (subject instanceof Row) {\n      //subject is row element\n      return subject;\n    } else if (subject instanceof RowComponent) {\n      //subject is public row component\n      return subject._getSelf() || false;\n    } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n      //subject is a HTML element of the row\n      var match = self.rows.find(function (row) {\n        return row.element === subject;\n      });\n      return match || false;\n    }\n  } else if (typeof subject == \"undefined\" || subject === null) {\n    return false;\n  } else {\n    //subject should be treated as the index of the row\n    var _match = self.rows.find(function (row) {\n      return row.data[self.table.options.index] == subject;\n    });\n\n    return _match || false;\n  } //catch all for any other type of input\n\n\n  return false;\n};\n\nRowManager.prototype.getRowFromDataObject = function (data) {\n  var match = this.rows.find(function (row) {\n    return row.data === data;\n  });\n  return match || false;\n};\n\nRowManager.prototype.getRowFromPosition = function (position, active) {\n  if (active) {\n    return this.activeRows[position];\n  } else {\n    return this.rows[position];\n  }\n};\n\nRowManager.prototype.scrollToRow = function (row, position, ifVisible) {\n  var _this11 = this;\n\n  var rowIndex = this.getDisplayRows().indexOf(row),\n      rowEl = row.getElement(),\n      rowTop,\n      offset = 0;\n  return new Promise(function (resolve, reject) {\n    if (rowIndex > -1) {\n      if (typeof position === \"undefined\") {\n        position = _this11.table.options.scrollToRowPosition;\n      }\n\n      if (typeof ifVisible === \"undefined\") {\n        ifVisible = _this11.table.options.scrollToRowIfVisible;\n      }\n\n      if (position === \"nearest\") {\n        switch (_this11.renderMode) {\n          case \"classic\":\n            rowTop = Tabulator.prototype.helpers.elOffset(rowEl).top;\n            position = Math.abs(_this11.element.scrollTop - rowTop) > Math.abs(_this11.element.scrollTop + _this11.element.clientHeight - rowTop) ? \"bottom\" : \"top\";\n            break;\n\n          case \"virtual\":\n            position = Math.abs(_this11.vDomTop - rowIndex) > Math.abs(_this11.vDomBottom - rowIndex) ? \"bottom\" : \"top\";\n            break;\n        }\n      } //check row visibility\n\n\n      if (!ifVisible) {\n        if (Tabulator.prototype.helpers.elVisible(rowEl)) {\n          offset = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this11.element).top;\n\n          if (offset > 0 && offset < _this11.element.clientHeight - rowEl.offsetHeight) {\n            return false;\n          }\n        }\n      } //scroll to row\n\n\n      switch (_this11.renderMode) {\n        case \"classic\":\n          _this11.element.scrollTop = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this11.element).top + _this11.element.scrollTop;\n          break;\n\n        case \"virtual\":\n          _this11._virtualRenderFill(rowIndex, true);\n\n          break;\n      } //align to correct position\n\n\n      switch (position) {\n        case \"middle\":\n        case \"center\":\n          if (_this11.element.scrollHeight - _this11.element.scrollTop == _this11.element.clientHeight) {\n            _this11.element.scrollTop = _this11.element.scrollTop + (rowEl.offsetTop - _this11.element.scrollTop) - (_this11.element.scrollHeight - rowEl.offsetTop) / 2;\n          } else {\n            _this11.element.scrollTop = _this11.element.scrollTop - _this11.element.clientHeight / 2;\n          }\n\n          break;\n\n        case \"bottom\":\n          if (_this11.element.scrollHeight - _this11.element.scrollTop == _this11.element.clientHeight) {\n            _this11.element.scrollTop = _this11.element.scrollTop - (_this11.element.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n          } else {\n            _this11.element.scrollTop = _this11.element.scrollTop - _this11.element.clientHeight + rowEl.offsetHeight;\n          }\n\n          break;\n      }\n\n      resolve();\n    } else {\n      console.warn(\"Scroll Error - Row not visible\");\n      reject(\"Scroll Error - Row not visible\");\n    }\n  });\n}; ////////////////// Data Handling //////////////////\n\n\nRowManager.prototype.setData = function (data, renderInPosition, columnsChanged) {\n  var _this12 = this;\n\n  var self = this;\n  return new Promise(function (resolve, reject) {\n    if (renderInPosition && _this12.getDisplayRows().length) {\n      if (self.table.options.pagination) {\n        self._setDataActual(data, true);\n      } else {\n        _this12.reRenderInPosition(function () {\n          self._setDataActual(data);\n        });\n      }\n    } else {\n      if (_this12.table.options.autoColumns && columnsChanged) {\n        _this12.table.columnManager.generateColumnsFromRowData(data);\n      }\n\n      _this12.resetScroll();\n\n      _this12._setDataActual(data);\n    }\n\n    resolve();\n  });\n};\n\nRowManager.prototype._setDataActual = function (data, renderInPosition) {\n  var self = this;\n  self.table.options.dataLoading.call(this.table, data);\n\n  this._wipeElements();\n\n  if (this.table.options.history && this.table.modExists(\"history\")) {\n    this.table.modules.history.clear();\n  }\n\n  if (Array.isArray(data)) {\n    if (this.table.modExists(\"selectRow\")) {\n      this.table.modules.selectRow.clearSelectionData();\n    }\n\n    if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n      this.table.modules.reactiveData.watchData(data);\n    }\n\n    data.forEach(function (def, i) {\n      if (def && (typeof def === 'undefined' ? 'undefined' : _typeof(def)) === \"object\") {\n        var row = new Row(def, self);\n        self.rows.push(row);\n      } else {\n        console.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n      }\n    });\n    self.refreshActiveData(false, false, renderInPosition);\n    self.table.options.dataLoaded.call(this.table, data);\n  } else {\n    console.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data === 'undefined' ? 'undefined' : _typeof(data), \"\\nData:     \", data);\n  }\n};\n\nRowManager.prototype._wipeElements = function () {\n  this.rows.forEach(function (row) {\n    row.wipe();\n  });\n\n  if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n    this.table.modules.groupRows.wipe();\n  }\n\n  this.rows = [];\n  this.activeRows = [];\n  this.activeRowsCount = 0;\n  this.displayRows = [];\n  this.displayRowsCount = 0;\n  this.adjustTableSize();\n};\n\nRowManager.prototype.deleteRow = function (row, blockRedraw) {\n  var allIndex = this.rows.indexOf(row),\n      activeIndex = this.activeRows.indexOf(row);\n\n  if (activeIndex > -1) {\n    this.activeRows.splice(activeIndex, 1);\n  }\n\n  if (allIndex > -1) {\n    this.rows.splice(allIndex, 1);\n  }\n\n  this.setActiveRows(this.activeRows);\n  this.displayRowIterator(function (rows) {\n    var displayIndex = rows.indexOf(row);\n\n    if (displayIndex > -1) {\n      rows.splice(displayIndex, 1);\n    }\n  });\n\n  if (!blockRedraw) {\n    this.reRenderInPosition();\n  }\n\n  this.regenerateRowNumbers();\n  this.table.options.rowDeleted.call(this.table, row.getComponent());\n\n  if (this.table.options.dataChanged) {\n    this.table.options.dataChanged.call(this.table, this.getData());\n  }\n\n  if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n    this.table.modules.groupRows.updateGroupRows(true);\n  } else if (this.table.options.pagination && this.table.modExists(\"page\")) {\n    this.refreshActiveData(false, false, true);\n  } else {\n    if (this.table.options.pagination && this.table.modExists(\"page\")) {\n      this.refreshActiveData(\"page\");\n    }\n  }\n};\n\nRowManager.prototype.addRow = function (data, pos, index, blockRedraw) {\n  var row = this.addRowActual(data, pos, index, blockRedraw);\n\n  if (this.table.options.history && this.table.modExists(\"history\")) {\n    this.table.modules.history.action(\"rowAdd\", row, {\n      data: data,\n      pos: pos,\n      index: index\n    });\n  }\n\n  return row;\n}; //add multiple rows\n\n\nRowManager.prototype.addRows = function (data, pos, index) {\n  var _this13 = this;\n\n  var self = this,\n      length = 0,\n      rows = [];\n  return new Promise(function (resolve, reject) {\n    pos = _this13.findAddRowPos(pos);\n\n    if (!Array.isArray(data)) {\n      data = [data];\n    }\n\n    length = data.length - 1;\n\n    if (typeof index == \"undefined\" && pos || typeof index !== \"undefined\" && !pos) {\n      data.reverse();\n    }\n\n    data.forEach(function (item, i) {\n      var row = self.addRow(item, pos, index, true);\n      rows.push(row);\n    });\n\n    if (_this13.table.options.groupBy && _this13.table.modExists(\"groupRows\")) {\n      _this13.table.modules.groupRows.updateGroupRows(true);\n    } else if (_this13.table.options.pagination && _this13.table.modExists(\"page\")) {\n      _this13.refreshActiveData(false, false, true);\n    } else {\n      _this13.reRenderInPosition();\n    } //recalc column calculations if present\n\n\n    if (_this13.table.modExists(\"columnCalcs\")) {\n      _this13.table.modules.columnCalcs.recalc(_this13.table.rowManager.activeRows);\n    }\n\n    _this13.regenerateRowNumbers();\n\n    resolve(rows);\n  });\n};\n\nRowManager.prototype.findAddRowPos = function (pos) {\n  if (typeof pos === \"undefined\") {\n    pos = this.table.options.addRowPos;\n  }\n\n  if (pos === \"pos\") {\n    pos = true;\n  }\n\n  if (pos === \"bottom\") {\n    pos = false;\n  }\n\n  return pos;\n};\n\nRowManager.prototype.addRowActual = function (data, pos, index, blockRedraw) {\n  var row = data instanceof Row ? data : new Row(data || {}, this),\n      top = this.findAddRowPos(pos),\n      allIndex = -1,\n      activeIndex,\n      dispRows;\n\n  if (!index && this.table.options.pagination && this.table.options.paginationAddRow == \"page\") {\n    dispRows = this.getDisplayRows();\n\n    if (top) {\n      if (dispRows.length) {\n        index = dispRows[0];\n      } else {\n        if (this.activeRows.length) {\n          index = this.activeRows[this.activeRows.length - 1];\n          top = false;\n        }\n      }\n    } else {\n      if (dispRows.length) {\n        index = dispRows[dispRows.length - 1];\n        top = dispRows.length < this.table.modules.page.getPageSize() ? false : true;\n      }\n    }\n  }\n\n  if (typeof index !== \"undefined\") {\n    index = this.findRow(index);\n  }\n\n  if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n    this.table.modules.groupRows.assignRowToGroup(row);\n    var groupRows = row.getGroup().rows;\n\n    if (groupRows.length > 1) {\n      if (!index || index && groupRows.indexOf(index) == -1) {\n        if (top) {\n          if (groupRows[0] !== row) {\n            index = groupRows[0];\n\n            this._moveRowInArray(row.getGroup().rows, row, index, !top);\n          }\n        } else {\n          if (groupRows[groupRows.length - 1] !== row) {\n            index = groupRows[groupRows.length - 1];\n\n            this._moveRowInArray(row.getGroup().rows, row, index, !top);\n          }\n        }\n      } else {\n        this._moveRowInArray(row.getGroup().rows, row, index, !top);\n      }\n    }\n  }\n\n  if (index) {\n    allIndex = this.rows.indexOf(index);\n  }\n\n  if (index && allIndex > -1) {\n    activeIndex = this.activeRows.indexOf(index);\n    this.displayRowIterator(function (rows) {\n      var displayIndex = rows.indexOf(index);\n\n      if (displayIndex > -1) {\n        rows.splice(top ? displayIndex : displayIndex + 1, 0, row);\n      }\n    });\n\n    if (activeIndex > -1) {\n      this.activeRows.splice(top ? activeIndex : activeIndex + 1, 0, row);\n    }\n\n    this.rows.splice(top ? allIndex : allIndex + 1, 0, row);\n  } else {\n    if (top) {\n      this.displayRowIterator(function (rows) {\n        rows.unshift(row);\n      });\n      this.activeRows.unshift(row);\n      this.rows.unshift(row);\n    } else {\n      this.displayRowIterator(function (rows) {\n        rows.push(row);\n      });\n      this.activeRows.push(row);\n      this.rows.push(row);\n    }\n  }\n\n  this.setActiveRows(this.activeRows);\n  this.table.options.rowAdded.call(this.table, row.getComponent());\n\n  if (this.table.options.dataChanged) {\n    this.table.options.dataChanged.call(this.table, this.getData());\n  }\n\n  if (!blockRedraw) {\n    this.reRenderInPosition();\n  }\n\n  return row;\n};\n\nRowManager.prototype.moveRow = function (from, to, after) {\n  if (this.table.options.history && this.table.modExists(\"history\")) {\n    this.table.modules.history.action(\"rowMove\", from, {\n      posFrom: this.getRowPosition(from),\n      posTo: this.getRowPosition(to),\n      to: to,\n      after: after\n    });\n  }\n\n  this.moveRowActual(from, to, after);\n  this.regenerateRowNumbers();\n  this.table.options.rowMoved.call(this.table, from.getComponent());\n};\n\nRowManager.prototype.moveRowActual = function (from, to, after) {\n  var _this14 = this;\n\n  this._moveRowInArray(this.rows, from, to, after);\n\n  this._moveRowInArray(this.activeRows, from, to, after);\n\n  this.displayRowIterator(function (rows) {\n    _this14._moveRowInArray(rows, from, to, after);\n  });\n\n  if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n    if (!after && to instanceof Group) {\n      to = this.table.rowManager.prevDisplayRow(from) || to;\n    }\n\n    var toGroup = to.getGroup();\n    var fromGroup = from.getGroup();\n\n    if (toGroup === fromGroup) {\n      this._moveRowInArray(toGroup.rows, from, to, after);\n    } else {\n      if (fromGroup) {\n        fromGroup.removeRow(from);\n      }\n\n      toGroup.insertRow(from, to, after);\n    }\n  }\n};\n\nRowManager.prototype._moveRowInArray = function (rows, from, to, after) {\n  var fromIndex, toIndex, start, end;\n\n  if (from !== to) {\n    fromIndex = rows.indexOf(from);\n\n    if (fromIndex > -1) {\n      rows.splice(fromIndex, 1);\n      toIndex = rows.indexOf(to);\n\n      if (toIndex > -1) {\n        if (after) {\n          rows.splice(toIndex + 1, 0, from);\n        } else {\n          rows.splice(toIndex, 0, from);\n        }\n      } else {\n        rows.splice(fromIndex, 0, from);\n      }\n    } //restyle rows\n\n\n    if (rows === this.getDisplayRows()) {\n      start = fromIndex < toIndex ? fromIndex : toIndex;\n      end = toIndex > fromIndex ? toIndex : fromIndex + 1;\n\n      for (var _i4 = start; _i4 <= end; _i4++) {\n        if (rows[_i4]) {\n          this.styleRow(rows[_i4], _i4);\n        }\n      }\n    }\n  }\n};\n\nRowManager.prototype.clearData = function () {\n  this.setData([]);\n};\n\nRowManager.prototype.getRowIndex = function (row) {\n  return this.findRowIndex(row, this.rows);\n};\n\nRowManager.prototype.getDisplayRowIndex = function (row) {\n  var index = this.getDisplayRows().indexOf(row);\n  return index > -1 ? index : false;\n};\n\nRowManager.prototype.nextDisplayRow = function (row, rowOnly) {\n  var index = this.getDisplayRowIndex(row),\n      nextRow = false;\n\n  if (index !== false && index < this.displayRowsCount - 1) {\n    nextRow = this.getDisplayRows()[index + 1];\n  }\n\n  if (nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")) {\n    return this.nextDisplayRow(nextRow, rowOnly);\n  }\n\n  return nextRow;\n};\n\nRowManager.prototype.prevDisplayRow = function (row, rowOnly) {\n  var index = this.getDisplayRowIndex(row),\n      prevRow = false;\n\n  if (index) {\n    prevRow = this.getDisplayRows()[index - 1];\n  }\n\n  if (rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")) {\n    return this.prevDisplayRow(prevRow, rowOnly);\n  }\n\n  return prevRow;\n};\n\nRowManager.prototype.findRowIndex = function (row, list) {\n  var rowIndex;\n  row = this.findRow(row);\n\n  if (row) {\n    rowIndex = list.indexOf(row);\n\n    if (rowIndex > -1) {\n      return rowIndex;\n    }\n  }\n\n  return false;\n};\n\nRowManager.prototype.getData = function (active, transform) {\n  var output = [],\n      rows = this.getRows(active);\n  rows.forEach(function (row) {\n    if (row.type == \"row\") {\n      output.push(row.getData(transform || \"data\"));\n    }\n  });\n  return output;\n};\n\nRowManager.prototype.getComponents = function (active) {\n  var output = [],\n      rows = this.getRows(active);\n  rows.forEach(function (row) {\n    output.push(row.getComponent());\n  });\n  return output;\n};\n\nRowManager.prototype.getDataCount = function (active) {\n  var rows = this.getRows(active);\n  return rows.length;\n};\n\nRowManager.prototype._genRemoteRequest = function () {\n  var _this15 = this;\n\n  var table = this.table,\n      options = table.options,\n      params = {};\n\n  if (table.modExists(\"page\")) {\n    //set sort data if defined\n    if (options.ajaxSorting) {\n      var sorters = this.table.modules.sort.getSort();\n      sorters.forEach(function (item) {\n        delete item.column;\n      });\n      params[this.table.modules.page.paginationDataSentNames.sorters] = sorters;\n    } //set filter data if defined\n\n\n    if (options.ajaxFiltering) {\n      var filters = this.table.modules.filter.getFilters(true, true);\n      params[this.table.modules.page.paginationDataSentNames.filters] = filters;\n    }\n\n    this.table.modules.ajax.setParams(params, true);\n  }\n\n  table.modules.ajax.sendRequest().then(function (data) {\n    _this15._setDataActual(data, true);\n  }).catch(function (e) {});\n}; //choose the path to refresh data after a filter update\n\n\nRowManager.prototype.filterRefresh = function () {\n  var table = this.table,\n      options = table.options,\n      left = this.scrollLeft;\n\n  if (options.ajaxFiltering) {\n    if (options.pagination == \"remote\" && table.modExists(\"page\")) {\n      table.modules.page.reset(true);\n      table.modules.page.setPage(1).then(function () {}).catch(function () {});\n    } else if (options.ajaxProgressiveLoad) {\n      table.modules.ajax.loadData().then(function () {}).catch(function () {});\n    } else {\n      //assume data is url, make ajax call to url to get data\n      this._genRemoteRequest();\n    }\n  } else {\n    this.refreshActiveData(\"filter\");\n  }\n\n  this.scrollHorizontal(left);\n}; //choose the path to refresh data after a sorter update\n\n\nRowManager.prototype.sorterRefresh = function (loadOrignalData) {\n  var table = this.table,\n      options = this.table.options,\n      left = this.scrollLeft;\n\n  if (options.ajaxSorting) {\n    if ((options.pagination == \"remote\" || options.progressiveLoad) && table.modExists(\"page\")) {\n      table.modules.page.reset(true);\n      table.modules.page.setPage(1).then(function () {}).catch(function () {});\n    } else if (options.ajaxProgressiveLoad) {\n      table.modules.ajax.loadData().then(function () {}).catch(function () {});\n    } else {\n      //assume data is url, make ajax call to url to get data\n      this._genRemoteRequest();\n    }\n  } else {\n    this.refreshActiveData(loadOrignalData ? \"filter\" : \"sort\");\n  }\n\n  this.scrollHorizontal(left);\n};\n\nRowManager.prototype.scrollHorizontal = function (left) {\n  this.scrollLeft = left;\n  this.element.scrollLeft = left;\n\n  if (this.table.options.groupBy) {\n    this.table.modules.groupRows.scrollHeaders(left);\n  }\n\n  if (this.table.modExists(\"columnCalcs\")) {\n    this.table.modules.columnCalcs.scrollHorizontal(left);\n  }\n}; //set active data set\n\n\nRowManager.prototype.refreshActiveData = function (stage, skipStage, renderInPosition) {\n  var self = this,\n      table = this.table,\n      cascadeOrder = [\"all\", \"filter\", \"sort\", \"display\", \"freeze\", \"group\", \"tree\", \"page\"],\n      displayIndex;\n\n  if (this.redrawBlock) {\n    if (!this.redrawBlockRestoreConfig || cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage)) {\n      this.redrawBlockRestoreConfig = {\n        stage: stage,\n        skipStage: skipStage,\n        renderInPosition: renderInPosition\n      };\n    }\n\n    return;\n  } else {\n    if (self.table.modExists(\"edit\")) {\n      self.table.modules.edit.cancelEdit();\n    }\n\n    if (!stage) {\n      stage = \"all\";\n    }\n\n    if (table.options.selectable && !table.options.selectablePersistence && table.modExists(\"selectRow\")) {\n      table.modules.selectRow.deselectRows();\n    } //cascade through data refresh stages\n\n\n    switch (stage) {\n      case \"all\":\n      case \"filter\":\n        if (!skipStage) {\n          if (table.modExists(\"filter\")) {\n            self.setActiveRows(table.modules.filter.filter(self.rows));\n          } else {\n            self.setActiveRows(self.rows.slice(0));\n          }\n        } else {\n          skipStage = false;\n        }\n\n      case \"sort\":\n        if (!skipStage) {\n          if (table.modExists(\"sort\")) {\n            table.modules.sort.sort(this.activeRows);\n          }\n        } else {\n          skipStage = false;\n        } //regenerate row numbers for row number formatter if in use\n\n\n        this.regenerateRowNumbers();\n      //generic stage to allow for pipeline trigger after the data manipulation stage\n\n      case \"display\":\n        this.resetDisplayRows();\n\n      case \"freeze\":\n        if (!skipStage) {\n          if (this.table.modExists(\"frozenRows\")) {\n            if (table.modules.frozenRows.isFrozen()) {\n              if (!table.modules.frozenRows.getDisplayIndex()) {\n                table.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex());\n              }\n\n              displayIndex = table.modules.frozenRows.getDisplayIndex();\n              displayIndex = self.setDisplayRows(table.modules.frozenRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n              if (displayIndex !== true) {\n                table.modules.frozenRows.setDisplayIndex(displayIndex);\n              }\n            }\n          }\n        } else {\n          skipStage = false;\n        }\n\n      case \"group\":\n        if (!skipStage) {\n          if (table.options.groupBy && table.modExists(\"groupRows\")) {\n            if (!table.modules.groupRows.getDisplayIndex()) {\n              table.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex());\n            }\n\n            displayIndex = table.modules.groupRows.getDisplayIndex();\n            displayIndex = self.setDisplayRows(table.modules.groupRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n            if (displayIndex !== true) {\n              table.modules.groupRows.setDisplayIndex(displayIndex);\n            }\n          }\n        } else {\n          skipStage = false;\n        }\n\n      case \"tree\":\n        if (!skipStage) {\n          if (table.options.dataTree && table.modExists(\"dataTree\")) {\n            if (!table.modules.dataTree.getDisplayIndex()) {\n              table.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex());\n            }\n\n            displayIndex = table.modules.dataTree.getDisplayIndex();\n            displayIndex = self.setDisplayRows(table.modules.dataTree.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n            if (displayIndex !== true) {\n              table.modules.dataTree.setDisplayIndex(displayIndex);\n            }\n          }\n        } else {\n          skipStage = false;\n        }\n\n        if (table.options.pagination && table.modExists(\"page\") && !renderInPosition) {\n          if (table.modules.page.getMode() == \"local\") {\n            table.modules.page.reset();\n          }\n        }\n\n      case \"page\":\n        if (!skipStage) {\n          if (table.options.pagination && table.modExists(\"page\")) {\n            if (!table.modules.page.getDisplayIndex()) {\n              table.modules.page.setDisplayIndex(this.getNextDisplayIndex());\n            }\n\n            displayIndex = table.modules.page.getDisplayIndex();\n\n            if (table.modules.page.getMode() == \"local\") {\n              table.modules.page.setMaxRows(this.getDisplayRows(displayIndex - 1).length);\n            }\n\n            displayIndex = self.setDisplayRows(table.modules.page.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n            if (displayIndex !== true) {\n              table.modules.page.setDisplayIndex(displayIndex);\n            }\n          }\n        } else {\n          skipStage = false;\n        }\n\n    }\n\n    if (Tabulator.prototype.helpers.elVisible(self.element)) {\n      if (renderInPosition) {\n        self.reRenderInPosition();\n      } else {\n        if (stage === \"all\" && this.table.options.virtualDomHoz) {\n          this.table.vdomHoz.dataChange();\n        }\n\n        self.renderTable();\n\n        if (table.options.layoutColumnsOnNewData) {\n          self.table.columnManager.redraw(true);\n        }\n      }\n    }\n\n    if (table.modExists(\"columnCalcs\")) {\n      table.modules.columnCalcs.recalc(this.activeRows);\n    }\n  }\n}; //regenerate row numbers for row number formatter if in use\n\n\nRowManager.prototype.regenerateRowNumbers = function () {\n  var _this16 = this;\n\n  if (this.rowNumColumn) {\n    this.activeRows.forEach(function (row) {\n      var cell = row.getCell(_this16.rowNumColumn);\n\n      if (cell) {\n        cell._generateContents();\n      }\n    });\n  }\n};\n\nRowManager.prototype.setActiveRows = function (activeRows) {\n  this.activeRows = activeRows;\n  this.activeRowsCount = this.activeRows.length;\n}; //reset display rows array\n\n\nRowManager.prototype.resetDisplayRows = function () {\n  this.displayRows = [];\n  this.displayRows.push(this.activeRows.slice(0));\n  this.displayRowsCount = this.displayRows[0].length;\n\n  if (this.table.modExists(\"frozenRows\")) {\n    this.table.modules.frozenRows.setDisplayIndex(0);\n  }\n\n  if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n    this.table.modules.groupRows.setDisplayIndex(0);\n  }\n\n  if (this.table.options.pagination && this.table.modExists(\"page\")) {\n    this.table.modules.page.setDisplayIndex(0);\n  }\n};\n\nRowManager.prototype.getNextDisplayIndex = function () {\n  return this.displayRows.length;\n}; //set display row pipeline data\n\n\nRowManager.prototype.setDisplayRows = function (displayRows, index) {\n  var output = true;\n\n  if (index && typeof this.displayRows[index] != \"undefined\") {\n    this.displayRows[index] = displayRows;\n    output = true;\n  } else {\n    this.displayRows.push(displayRows);\n    output = index = this.displayRows.length - 1;\n  }\n\n  if (index == this.displayRows.length - 1) {\n    this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n  }\n\n  return output;\n};\n\nRowManager.prototype.getDisplayRows = function (index) {\n  if (typeof index == \"undefined\") {\n    return this.displayRows.length ? this.displayRows[this.displayRows.length - 1] : [];\n  } else {\n    return this.displayRows[index] || [];\n  }\n};\n\nRowManager.prototype.getVisibleRows = function (viewable) {\n  var topEdge = this.element.scrollTop,\n      bottomEdge = this.element.clientHeight + topEdge,\n      topFound = false,\n      topRow = 0,\n      bottomRow = 0,\n      rows = this.getDisplayRows();\n\n  if (viewable) {\n    this.getDisplayRows();\n\n    for (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n      if (rows[i]) {\n        if (!topFound) {\n          if (topEdge - rows[i].getElement().offsetTop >= 0) {\n            topRow = i;\n          } else {\n            topFound = true;\n\n            if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n              bottomRow = i;\n            } else {\n              break;\n            }\n          }\n        } else {\n          if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n            bottomRow = i;\n          } else {\n            break;\n          }\n        }\n      }\n    }\n  } else {\n    topRow = this.vDomTop;\n    bottomRow = this.vDomBottom;\n  }\n\n  return rows.slice(topRow, bottomRow + 1);\n}; //repeat action accross display rows\n\n\nRowManager.prototype.displayRowIterator = function (callback) {\n  this.displayRows.forEach(callback);\n  this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n}; //return only actual rows (not group headers etc)\n\n\nRowManager.prototype.getRows = function (active) {\n  var rows;\n\n  switch (active) {\n    case \"active\":\n      rows = this.activeRows;\n      break;\n\n    case \"display\":\n      rows = this.table.rowManager.getDisplayRows();\n      break;\n\n    case \"visible\":\n      rows = this.getVisibleRows(true);\n      break;\n\n    case \"selected\":\n      rows = this.table.modules.selectRow.selectedRows;\n      break;\n\n    default:\n      rows = this.rows;\n  }\n\n  return rows;\n}; ///////////////// Table Rendering /////////////////\n//trigger rerender of table in current position\n\n\nRowManager.prototype.reRenderInPosition = function (callback) {\n  if (this.getRenderMode() == \"virtual\") {\n    if (this.redrawBlock) {\n      if (callback) {\n        callback();\n      } else {\n        this.redrawBlockRederInPosition = true;\n      }\n    } else {\n      var scrollTop = this.element.scrollTop;\n      var topRow = false;\n      var topOffset = false;\n      var left = this.scrollLeft;\n      var rows = this.getDisplayRows();\n\n      for (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n        if (rows[i]) {\n          var diff = scrollTop - rows[i].getElement().offsetTop;\n\n          if (topOffset === false || Math.abs(diff) < topOffset) {\n            topOffset = diff;\n            topRow = i;\n          } else {\n            break;\n          }\n        }\n      }\n\n      if (callback) {\n        callback();\n      }\n\n      this._virtualRenderFill(topRow === false ? this.displayRowsCount - 1 : topRow, true, topOffset || 0);\n\n      this.scrollHorizontal(left);\n    }\n  } else {\n    this.renderTable();\n\n    if (callback) {\n      callback();\n    }\n  }\n};\n\nRowManager.prototype.setRenderMode = function () {\n  if (this.table.options.virtualDom) {\n    this.renderMode = \"virtual\";\n\n    if (this.table.element.clientHeight || this.table.options.height) {\n      this.fixedHeight = true;\n    } else {\n      this.fixedHeight = false;\n    }\n  } else {\n    this.renderMode = \"classic\";\n  }\n};\n\nRowManager.prototype.getRenderMode = function () {\n  return this.renderMode;\n};\n\nRowManager.prototype.renderTable = function () {\n  this.table.options.renderStarted.call(this.table);\n  this.element.scrollTop = 0;\n\n  switch (this.renderMode) {\n    case \"classic\":\n      this._simpleRender();\n\n      break;\n\n    case \"virtual\":\n      this._virtualRenderFill();\n\n      break;\n  }\n\n  if (this.firstRender) {\n    if (this.displayRowsCount) {\n      this.firstRender = false;\n      this.table.modules.layout.layout();\n    } else {\n      this.renderEmptyScroll();\n    }\n  }\n\n  if (this.table.modExists(\"frozenColumns\")) {\n    this.table.modules.frozenColumns.layout();\n  }\n\n  if (!this.displayRowsCount) {\n    if (this.table.options.placeholder) {\n      this.table.options.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n      this.getElement().appendChild(this.table.options.placeholder);\n      this.table.options.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n    }\n  }\n\n  this.table.options.renderComplete.call(this.table);\n}; //simple render on heightless table\n\n\nRowManager.prototype._simpleRender = function () {\n  this._clearVirtualDom();\n\n  if (this.displayRowsCount) {\n    this.checkClassicModeGroupHeaderWidth();\n  } else {\n    this.renderEmptyScroll();\n  }\n};\n\nRowManager.prototype.checkClassicModeGroupHeaderWidth = function () {\n  var self = this,\n      element = this.tableElement,\n      onlyGroupHeaders = true;\n  self.getDisplayRows().forEach(function (row, index) {\n    self.styleRow(row, index);\n    element.appendChild(row.getElement());\n    row.initialize(true);\n\n    if (row.type !== \"group\") {\n      onlyGroupHeaders = false;\n    }\n  });\n\n  if (onlyGroupHeaders) {\n    element.style.minWidth = self.table.columnManager.getWidth() + \"px\";\n  } else {\n    element.style.minWidth = \"\";\n  }\n}; //show scrollbars on empty table div\n\n\nRowManager.prototype.renderEmptyScroll = function () {\n  if (this.table.options.placeholder) {\n    this.tableElement.style.display = \"none\";\n  } else {\n    this.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\"; // this.tableElement.style.minHeight = \"1px\";\n    // this.tableElement.style.visibility = \"hidden\";\n  }\n};\n\nRowManager.prototype._clearVirtualDom = function () {\n  var element = this.tableElement;\n\n  if (this.table.options.placeholder && this.table.options.placeholder.parentNode) {\n    this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);\n  } // element.children.detach();\n\n\n  while (element.firstChild) {\n    element.removeChild(element.firstChild);\n  }\n\n  element.style.paddingTop = \"\";\n  element.style.paddingBottom = \"\";\n  element.style.minWidth = \"\";\n  element.style.minHeight = \"\";\n  element.style.display = \"\";\n  element.style.visibility = \"\";\n  this.scrollTop = 0;\n  this.scrollLeft = 0;\n  this.vDomTop = 0;\n  this.vDomBottom = 0;\n  this.vDomTopPad = 0;\n  this.vDomBottomPad = 0;\n};\n\nRowManager.prototype.styleRow = function (row, index) {\n  var rowEl = row.getElement();\n\n  if (index % 2) {\n    rowEl.classList.add(\"tabulator-row-even\");\n    rowEl.classList.remove(\"tabulator-row-odd\");\n  } else {\n    rowEl.classList.add(\"tabulator-row-odd\");\n    rowEl.classList.remove(\"tabulator-row-even\");\n  }\n}; //full virtual render\n\n\nRowManager.prototype._virtualRenderFill = function (position, forceMove, offset) {\n  var self = this,\n      element = self.tableElement,\n      holder = self.element,\n      topPad = 0,\n      rowsHeight = 0,\n      topPadHeight = 0,\n      i = 0,\n      onlyGroupHeaders = true,\n      rows = self.getDisplayRows();\n  position = position || 0;\n  offset = offset || 0;\n\n  if (!position) {\n    self._clearVirtualDom();\n  } else {\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    } //check if position is too close to bottom of table\n\n\n    var heightOccupied = (self.displayRowsCount - position + 1) * self.vDomRowHeight;\n\n    if (heightOccupied < self.height) {\n      position -= Math.ceil((self.height - heightOccupied) / self.vDomRowHeight);\n\n      if (position < 0) {\n        position = 0;\n      }\n    } //calculate initial pad\n\n\n    topPad = Math.min(Math.max(Math.floor(self.vDomWindowBuffer / self.vDomRowHeight), self.vDomWindowMinMarginRows), position);\n    position -= topPad;\n  }\n\n  if (self.displayRowsCount && Tabulator.prototype.helpers.elVisible(self.element)) {\n    self.vDomTop = position;\n    self.vDomBottom = position - 1;\n\n    while ((rowsHeight <= self.height + self.vDomWindowBuffer || i < self.vDomWindowMinTotalRows) && self.vDomBottom < self.displayRowsCount - 1) {\n      var index = self.vDomBottom + 1,\n          row = rows[index],\n          rowHeight = 0;\n      self.styleRow(row, index);\n      element.appendChild(row.getElement());\n      row.initialize();\n\n      if (!row.heightInitialized) {\n        row.normalizeHeight(true);\n      } // if(!row.initialized){\n      // \trow.initialize(true);\n      // }else{\n      // \tif(!row.heightInitialized){\n      // \t\trow.normalizeHeight(true);\n      // \t}\n      // }\n\n\n      rowHeight = row.getHeight();\n\n      if (i < topPad) {\n        topPadHeight += rowHeight;\n      } else {\n        rowsHeight += rowHeight;\n      }\n\n      if (rowHeight > this.vDomWindowBuffer) {\n        this.vDomWindowBuffer = rowHeight * 2;\n      }\n\n      if (row.type !== \"group\") {\n        onlyGroupHeaders = false;\n      }\n\n      self.vDomBottom++;\n      i++;\n    }\n\n    if (!position) {\n      this.vDomTopPad = 0; //adjust rowheight to match average of rendered elements\n\n      self.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\n      self.vDomBottomPad = self.vDomRowHeight * (self.displayRowsCount - self.vDomBottom - 1);\n      self.vDomScrollHeight = topPadHeight + rowsHeight + self.vDomBottomPad - self.height;\n    } else {\n      self.vDomTopPad = !forceMove ? self.scrollTop - topPadHeight : self.vDomRowHeight * this.vDomTop + offset;\n      self.vDomBottomPad = self.vDomBottom == self.displayRowsCount - 1 ? 0 : Math.max(self.vDomScrollHeight - self.vDomTopPad - rowsHeight - topPadHeight, 0);\n    }\n\n    element.style.paddingTop = self.vDomTopPad + \"px\";\n    element.style.paddingBottom = self.vDomBottomPad + \"px\";\n\n    if (forceMove) {\n      this.scrollTop = self.vDomTopPad + topPadHeight + offset - (this.element.scrollWidth > this.element.clientWidth ? this.element.offsetHeight - this.element.clientHeight : 0);\n    }\n\n    this.scrollTop = Math.min(this.scrollTop, this.element.scrollHeight - this.height); //adjust for horizontal scrollbar if present (and not at top of table)\n\n    if (this.element.scrollWidth > this.element.offsetWidth && forceMove) {\n      this.scrollTop += this.element.offsetHeight - this.element.clientHeight;\n    }\n\n    this.vDomScrollPosTop = this.scrollTop;\n    this.vDomScrollPosBottom = this.scrollTop;\n    holder.scrollTop = this.scrollTop;\n    element.style.minWidth = onlyGroupHeaders ? self.table.columnManager.getWidth() + \"px\" : \"\";\n\n    if (self.table.options.groupBy) {\n      if (self.table.modules.layout.getMode() != \"fitDataFill\" && self.displayRowsCount == self.table.modules.groupRows.countGroups()) {\n        self.tableElement.style.minWidth = self.table.columnManager.getWidth();\n      }\n    }\n  } else {\n    this.renderEmptyScroll();\n  }\n\n  if (!this.fixedHeight) {\n    this.adjustTableSize();\n  }\n}; //handle vertical scrolling\n\n\nRowManager.prototype.scrollVertical = function (dir) {\n  var topDiff = this.scrollTop - this.vDomScrollPosTop;\n  var bottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n  var margin = this.vDomWindowBuffer * 2;\n\n  if (-topDiff > margin || bottomDiff > margin) {\n    //if big scroll redraw table;\n    var left = this.scrollLeft;\n\n    this._virtualRenderFill(Math.floor(this.element.scrollTop / this.element.scrollHeight * this.displayRowsCount));\n\n    this.scrollHorizontal(left);\n  } else {\n    if (dir) {\n      //scrolling up\n      if (topDiff < 0) {\n        this._addTopRow(-topDiff);\n      }\n\n      if (bottomDiff < 0) {\n        //hide bottom row if needed\n        if (this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer) {\n          this._removeBottomRow(-bottomDiff);\n        } else {\n          this.vDomScrollPosBottom = this.scrollTop;\n        }\n      }\n    } else {\n      //scrolling down\n      if (topDiff >= 0) {\n        //hide top row if needed\n        if (this.scrollTop > this.vDomWindowBuffer) {\n          this._removeTopRow(topDiff);\n        } else {\n          this.vDomScrollPosTop = this.scrollTop;\n        }\n      }\n\n      if (bottomDiff >= 0) {\n        this._addBottomRow(bottomDiff);\n      }\n    }\n  }\n};\n\nRowManager.prototype._addTopRow = function (topDiff) {\n  var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var table = this.tableElement,\n      rows = this.getDisplayRows();\n\n  if (this.vDomTop) {\n    var index = this.vDomTop - 1,\n        topRow = rows[index],\n        topRowHeight = topRow.getHeight() || this.vDomRowHeight; //hide top row if needed\n\n    if (topDiff >= topRowHeight) {\n      this.styleRow(topRow, index);\n      table.insertBefore(topRow.getElement(), table.firstChild);\n\n      if (!topRow.initialized || !topRow.heightInitialized) {\n        this.vDomTopNewRows.push(topRow);\n\n        if (!topRow.heightInitialized) {\n          topRow.clearCellHeight();\n        }\n      }\n\n      topRow.initialize();\n      this.vDomTopPad -= topRowHeight;\n\n      if (this.vDomTopPad < 0) {\n        this.vDomTopPad = index * this.vDomRowHeight;\n      }\n\n      if (!index) {\n        this.vDomTopPad = 0;\n      }\n\n      table.style.paddingTop = this.vDomTopPad + \"px\";\n      this.vDomScrollPosTop -= topRowHeight;\n      this.vDomTop--;\n    }\n\n    topDiff = -(this.scrollTop - this.vDomScrollPosTop);\n\n    if (topRow.getHeight() > this.vDomWindowBuffer) {\n      this.vDomWindowBuffer = topRow.getHeight() * 2;\n    }\n\n    if (i < this.vDomMaxRenderChain && this.vDomTop && topDiff >= (rows[this.vDomTop - 1].getHeight() || this.vDomRowHeight)) {\n      this._addTopRow(topDiff, i + 1);\n    } else {\n      this._quickNormalizeRowHeight(this.vDomTopNewRows);\n    }\n  }\n};\n\nRowManager.prototype._removeTopRow = function (topDiff) {\n  var table = this.tableElement,\n      topRow = this.getDisplayRows()[this.vDomTop],\n      topRowHeight = topRow.getHeight() || this.vDomRowHeight;\n\n  if (topDiff >= topRowHeight) {\n    var rowEl = topRow.getElement();\n    rowEl.parentNode.removeChild(rowEl);\n    this.vDomTopPad += topRowHeight;\n    table.style.paddingTop = this.vDomTopPad + \"px\";\n    this.vDomScrollPosTop += this.vDomTop ? topRowHeight : topRowHeight + this.vDomWindowBuffer;\n    this.vDomTop++;\n    topDiff = this.scrollTop - this.vDomScrollPosTop;\n\n    this._removeTopRow(topDiff);\n  }\n};\n\nRowManager.prototype._addBottomRow = function (bottomDiff) {\n  var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var table = this.tableElement,\n      rows = this.getDisplayRows();\n\n  if (this.vDomBottom < this.displayRowsCount - 1) {\n    var index = this.vDomBottom + 1,\n        bottomRow = rows[index],\n        bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight; //hide bottom row if needed\n\n    if (bottomDiff >= bottomRowHeight) {\n      this.styleRow(bottomRow, index);\n      table.appendChild(bottomRow.getElement());\n\n      if (!bottomRow.initialized || !bottomRow.heightInitialized) {\n        this.vDomBottomNewRows.push(bottomRow);\n\n        if (!bottomRow.heightInitialized) {\n          bottomRow.clearCellHeight();\n        }\n      }\n\n      bottomRow.initialize();\n      this.vDomBottomPad -= bottomRowHeight;\n\n      if (this.vDomBottomPad < 0 || index == this.displayRowsCount - 1) {\n        this.vDomBottomPad = 0;\n      }\n\n      table.style.paddingBottom = this.vDomBottomPad + \"px\";\n      this.vDomScrollPosBottom += bottomRowHeight;\n      this.vDomBottom++;\n    }\n\n    bottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n\n    if (bottomRow.getHeight() > this.vDomWindowBuffer) {\n      this.vDomWindowBuffer = bottomRow.getHeight() * 2;\n    }\n\n    if (i < this.vDomMaxRenderChain && this.vDomBottom < this.displayRowsCount - 1 && bottomDiff >= (rows[this.vDomBottom + 1].getHeight() || this.vDomRowHeight)) {\n      this._addBottomRow(bottomDiff, i + 1);\n    } else {\n      this._quickNormalizeRowHeight(this.vDomBottomNewRows);\n    }\n  }\n};\n\nRowManager.prototype._removeBottomRow = function (bottomDiff) {\n  var table = this.tableElement,\n      bottomRow = this.getDisplayRows()[this.vDomBottom],\n      bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\n\n  if (bottomDiff >= bottomRowHeight) {\n    var rowEl = bottomRow.getElement();\n\n    if (rowEl.parentNode) {\n      rowEl.parentNode.removeChild(rowEl);\n    }\n\n    this.vDomBottomPad += bottomRowHeight;\n\n    if (this.vDomBottomPad < 0) {\n      this.vDomBottomPad = 0;\n    }\n\n    table.style.paddingBottom = this.vDomBottomPad + \"px\";\n    this.vDomScrollPosBottom -= bottomRowHeight;\n    this.vDomBottom--;\n    bottomDiff = -(this.scrollTop - this.vDomScrollPosBottom);\n\n    this._removeBottomRow(bottomDiff);\n  }\n};\n\nRowManager.prototype._quickNormalizeRowHeight = function (rows) {\n  rows.forEach(function (row) {\n    row.calcHeight();\n  });\n  rows.forEach(function (row) {\n    row.setCellHeight();\n  });\n  rows.length = 0;\n}; //normalize height of active rows\n\n\nRowManager.prototype.normalizeHeight = function () {\n  this.activeRows.forEach(function (row) {\n    row.normalizeHeight();\n  });\n}; //adjust the height of the table holder to fit in the Tabulator element\n\n\nRowManager.prototype.adjustTableSize = function () {\n  var initialHeight = this.element.clientHeight,\n      modExists;\n\n  if (this.renderMode === \"virtual\") {\n    var otherHeight = Math.floor(this.columnManager.getElement().offsetHeight + (this.table.footerManager && !this.table.footerManager.external ? this.table.footerManager.getElement().offsetHeight : 0));\n\n    if (this.fixedHeight) {\n      this.element.style.minHeight = \"calc(100% - \" + otherHeight + \"px)\";\n      this.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\n      this.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\n    } else {\n      this.element.style.height = \"\";\n      this.element.style.height = Math.floor(this.table.element.clientHeight) - otherHeight + \"px\";\n      this.element.scrollTop = this.scrollTop;\n    }\n\n    this.height = this.element.clientHeight;\n    this.vDomWindowBuffer = this.table.options.virtualDomBuffer || this.height; //check if the table has changed size when dealing with variable height tables\n\n    if (!this.fixedHeight && Math.floor(initialHeight) != Math.floor(this.element.clientHeight)) {\n      modExists = this.table.modExists(\"resizeTable\");\n\n      if (modExists && !this.table.modules.resizeTable.autoResize || !modExists) {\n        this.redraw();\n      }\n    }\n  }\n}; //renitialize all rows\n\n\nRowManager.prototype.reinitialize = function () {\n  this.rows.forEach(function (row) {\n    row.reinitialize(true);\n  });\n}; //prevent table from being redrawn\n\n\nRowManager.prototype.blockRedraw = function () {\n  this.redrawBlock = true;\n  this.redrawBlockRestoreConfig = false;\n}; //restore table redrawing\n\n\nRowManager.prototype.restoreRedraw = function () {\n  this.redrawBlock = false;\n\n  if (this.redrawBlockRestoreConfig) {\n    this.refreshActiveData(this.redrawBlockRestoreConfig.stage, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n    this.redrawBlockRestoreConfig = false;\n  } else {\n    if (this.redrawBlockRederInPosition) {\n      this.reRenderInPosition();\n    }\n  }\n\n  this.redrawBlockRederInPosition = false;\n}; //redraw table\n\n\nRowManager.prototype.redraw = function (force) {\n  var pos = 0,\n      left = this.scrollLeft;\n  this.adjustTableSize();\n  this.table.tableWidth = this.table.element.clientWidth;\n\n  if (!force) {\n    if (this.renderMode == \"classic\") {\n      if (this.table.options.groupBy) {\n        this.refreshActiveData(\"group\", false, false);\n      } else {\n        this._simpleRender();\n      }\n    } else {\n      this.reRenderInPosition();\n      this.scrollHorizontal(left);\n    }\n\n    if (!this.displayRowsCount) {\n      if (this.table.options.placeholder) {\n        this.getElement().appendChild(this.table.options.placeholder);\n      }\n    }\n  } else {\n    this.renderTable();\n  }\n};\n\nRowManager.prototype.resetScroll = function () {\n  this.element.scrollLeft = 0;\n  this.element.scrollTop = 0;\n\n  if (this.table.browser === \"ie\") {\n    var event = document.createEvent(\"Event\");\n    event.initEvent(\"scroll\", false, true);\n    this.element.dispatchEvent(event);\n  } else {\n    this.element.dispatchEvent(new Event('scroll'));\n  }\n};\n\nvar VDomHoz = function VDomHoz(table) {\n  this.table = table;\n  this.element = this.table.rowManager.tableElement;\n  this.holderEl = this.table.rowManager.element;\n  this.leftCol = 0;\n  this.rightCol = 0;\n  this.scrollLeft = 0;\n  this.vDomScrollPosLeft = 0;\n  this.vDomScrollPosRight = 0;\n  this.vDomPadLeft = 0;\n  this.vDomPadRight = 0;\n  this.fitDataColAvg = 0;\n  this.window = 200; //pixel margin to make column visible before it is shown on screen\n\n  this.initialized = false;\n  this.columns = [];\n\n  if (this.compatabilityCheck()) {\n    this.initialize();\n  }\n};\n\nVDomHoz.prototype.compatabilityCheck = function () {\n  var options = this.table.options,\n      frozen = false,\n      ok = true;\n\n  if (options.layout == \"fitDataTable\") {\n    console.warn(\"Horizontal Vitrual DOM is not compatible with fitDataTable layout mode\");\n    ok = false;\n  }\n\n  if (options.responsiveLayout) {\n    console.warn(\"Horizontal Vitrual DOM is not compatible with responsive columns\");\n    ok = false;\n  }\n\n  if (this.table.rtl) {\n    console.warn(\"Horizontal Vitrual DOM is not currently compatible with RTL text direction\");\n    ok = false;\n  } // if(options.rowFormatter){\n  // \tconsole.warn(\"Horizontal Vitrual DOM is not compatible with row formatters\");\n  // \tok = false;\n  // }\n\n\n  if (options.columns) {\n    frozen = options.columns.find(function (col) {\n      return col.frozen;\n    });\n\n    if (frozen) {\n      console.warn(\"Horizontal Vitrual DOM is not compatible with frozen columns\");\n      ok = false;\n    }\n  }\n\n  if (!ok) {\n    options.virtualDomHoz = false;\n  }\n\n  return ok;\n};\n\nVDomHoz.prototype.initialize = function () {\n  var _this17 = this;\n\n  this.holderEl.addEventListener(\"scroll\", function () {\n    var left = _this17.holderEl.scrollLeft;\n\n    if (_this17.scrollLeft != left) {\n      _this17.scrollLeft = left;\n\n      _this17.scroll(left - (_this17.vDomScrollPosLeft + _this17.window));\n    }\n  });\n};\n\nVDomHoz.prototype.deinitialize = function () {\n  this.initialized = false;\n};\n\nVDomHoz.prototype.clear = function () {\n  this.columns = [];\n  this.leftCol = -1;\n  this.rightCol = 0;\n  this.vDomScrollPosLeft = 0;\n  this.vDomScrollPosRight = 0;\n  this.vDomPadLeft = 0;\n  this.vDomPadRight = 0;\n};\n\nVDomHoz.prototype.dataChange = function () {\n  var change = false,\n      collsWidth = 0,\n      colEnd = 0,\n      group,\n      row,\n      rowEl;\n\n  if (this.table.options.layout === \"fitData\") {\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (!column.definition.width && column.visible) {\n        change = true;\n      }\n    });\n\n    if (change) {\n      if (change && this.table.rowManager.getDisplayRows().length) {\n        // this.table.vdomHoz.deinitialize();\n        this.vDomScrollPosRight = this.scrollLeft + this.holderEl.clientWidth + this.window;\n\n        if (this.table.options.groupBy) {\n          group = this.table.modules.groupRows.getGroups(false)[0];\n          row = group.getRows(false)[0];\n        } else {\n          row = this.table.rowManager.getDisplayRows()[0];\n        }\n\n        if (row) {\n          rowEl = row.getElement();\n          row.generateCells();\n          this.element.appendChild(rowEl);\n\n          for (var colEnd = 0; colEnd < row.cells.length; colEnd++) {\n            var cell = row.cells[colEnd];\n            rowEl.appendChild(cell.getElement());\n            cell.column.reinitializeWidth();\n            collsWidth += cell.column.getWidth();\n\n            if (collsWidth > this.vDomScrollPosRight) {\n              break;\n            }\n          }\n\n          rowEl.parentNode.removeChild(rowEl);\n          this.fitDataColAvg = Math.floor(collsWidth / (colEnd + 1));\n\n          for (colEnd; colEnd < this.table.columnManager.columnsByIndex.length; colEnd++) {\n            this.table.columnManager.columnsByIndex[colEnd].setWidth(this.fitDataColAvg);\n          }\n\n          this.reinitialize(false, true);\n        }\n      }\n    }\n  } else {\n    if (this.table.options.layout === \"fitColumns\") {\n      this.table.modules.layout.layout();\n      this.table.vdomHoz.reinitialize(false, true);\n    }\n  }\n};\n\nVDomHoz.prototype.fitDataLayoutOverride = function () {\n  for (var _i5 = this.leftCol; _i5 <= this.rightCol; _i5++) {\n    this.columns[_i5].reinitializeWidth();\n  }\n};\n\nVDomHoz.prototype.reinitialize = function (update, blockRedraw) {\n  var _this18 = this;\n\n  var old = {\n    cols: this.columns,\n    leftCol: this.leftCol,\n    rightCol: this.rightCol\n  };\n\n  if (update && !this.initialized) {\n    return;\n  }\n\n  this.clear();\n  this.scrollLeft = this.holderEl.scrollLeft;\n  this.vDomScrollPosLeft = this.scrollLeft - this.window;\n  this.vDomScrollPosRight = this.scrollLeft + this.holderEl.clientWidth + this.window;\n  var colPos = 0;\n  this.table.columnManager.columnsByIndex.forEach(function (column) {\n    var config = {};\n\n    if (column.visible) {\n      var width = column.getWidth();\n      config.leftPos = colPos;\n      config.rightPos = colPos + width;\n\n      if (colPos + width > _this18.vDomScrollPosLeft && colPos < _this18.vDomScrollPosRight) {\n        //column is visible\n        if (_this18.leftCol == -1) {\n          _this18.leftCol = _this18.columns.length;\n          _this18.vDomPadLeft = colPos;\n        }\n\n        _this18.rightCol = _this18.columns.length;\n      } else {\n        // column is hidden\n        if (_this18.leftCol !== -1) {\n          _this18.vDomPadRight += width;\n        }\n      }\n\n      _this18.columns.push(column);\n\n      column.modules.vdomHoz = config;\n      colPos += width;\n    }\n  });\n  this.element.style.paddingLeft = this.vDomPadLeft + \"px\";\n  this.element.style.paddingRight = this.vDomPadRight + \"px\";\n  this.initialized = true;\n\n  if (!blockRedraw) {\n    if (!update || this.reinitChanged(old)) {\n      this.renitializeRows();\n    }\n  }\n\n  this.holderEl.scrollLeft = this.scrollLeft;\n};\n\nVDomHoz.prototype.reinitChanged = function (old) {\n  var _this19 = this;\n\n  var match = true;\n\n  if (old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol) {\n    return true;\n  }\n\n  old.cols.forEach(function (col, i) {\n    if (col !== _this19.columns[i]) {\n      match = false;\n    }\n  });\n  return !match;\n};\n\nVDomHoz.prototype.renitializeRows = function () {\n  var _this20 = this;\n\n  var rows = this.table.rowManager.getVisibleRows();\n  rows.forEach(function (row) {\n    _this20.reinitializeRow(row, true);\n  });\n};\n\nVDomHoz.prototype.scroll = function (diff) {\n  this.vDomScrollPosLeft += diff;\n  this.vDomScrollPosRight += diff;\n\n  if (diff > this.holderEl.clientWidth * .8) {\n    this.reinitialize();\n  } else {\n    if (diff > 0) {\n      //scroll right\n      this.addColRight();\n      this.removeColLeft();\n    } else {\n      //scroll left\n      this.addColLeft();\n      this.removeColRight();\n    }\n  }\n};\n\nVDomHoz.prototype.colPositionAdjust = function (start, end, diff) {\n  for (var _i6 = start; _i6 < end; _i6++) {\n    var column = this.columns[_i6];\n    column.modules.vdomHoz.leftPos -= diff;\n    column.modules.vdomHoz.rightPos -= diff;\n  }\n};\n\nVDomHoz.prototype.addColRight = function () {\n  var column = this.columns[this.rightCol + 1],\n      rows,\n      oldWidth,\n      widthDiff;\n\n  if (column && column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight) {\n    rows = this.table.rowManager.getVisibleRows();\n    rows.forEach(function (row) {\n      if (row.type !== \"group\") {\n        var cell = row.getCell(column);\n        row.getElement().appendChild(cell.getElement());\n        cell.cellRendered();\n      }\n    });\n\n    if (this.fitDataColAvg) {\n      oldWidth = column.getWidth();\n\n      if (oldWidth === this.fitDataColAvg) {\n        column.reinitializeWidth();\n        widthDiff = oldWidth - column.getWidth();\n\n        if (widthDiff) {\n          column.modules.vdomHoz.rightPos -= widthDiff;\n          this.colPositionAdjust(this.rightCol + 1, this.columns.length, widthDiff);\n        }\n      }\n    }\n\n    this.rightCol++;\n\n    if (this.rightCol >= this.columns.length - 1) {\n      this.vDomPadRight = 0;\n    } else {\n      this.vDomPadRight -= column.getWidth();\n    }\n\n    this.element.style.paddingRight = this.vDomPadRight + \"px\";\n    this.addColRight();\n  }\n};\n\nVDomHoz.prototype.addColLeft = function () {\n  var column = this.columns[this.leftCol - 1],\n      rows;\n\n  if (column && column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft) {\n    var rows = this.table.rowManager.getVisibleRows();\n    rows.forEach(function (row) {\n      if (row.type !== \"group\") {\n        var cell = row.getCell(column);\n        row.getElement().prepend(cell.getElement());\n        cell.cellRendered();\n      }\n    });\n\n    if (!this.leftCol) {\n      this.vDomPadLeft = 0;\n    } else {\n      this.vDomPadLeft -= column.getWidth();\n    }\n\n    this.element.style.paddingLeft = this.vDomPadLeft + \"px\";\n    this.leftCol--;\n    this.addColLeft();\n  }\n};\n\nVDomHoz.prototype.removeColRight = function (column) {\n  var column = this.columns[this.rightCol],\n      rows;\n\n  if (column && column.modules.vdomHoz.leftPos > this.vDomScrollPosRight) {\n    rows = this.table.rowManager.getVisibleRows();\n    column.modules.vdomHoz.visible = false;\n    rows.forEach(function (row) {\n      if (row.type !== \"group\") {\n        var cell = row.getCell(column);\n        row.getElement().removeChild(cell.getElement());\n      }\n    });\n    this.vDomPadRight += column.getWidth();\n    this.element.style.paddingRight = this.vDomPadRight + \"px\";\n    this.rightCol--;\n    this.removeColRight();\n  }\n};\n\nVDomHoz.prototype.removeColLeft = function () {\n  var column = this.columns[this.leftCol],\n      rows;\n\n  if (column && column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft) {\n    rows = this.table.rowManager.getVisibleRows();\n    rows.forEach(function (row) {\n      if (row.type !== \"group\") {\n        var cell = row.getCell(column);\n        row.getElement().removeChild(cell.getElement());\n      }\n    });\n    this.vDomPadLeft += column.getWidth();\n    this.element.style.paddingLeft = this.vDomPadLeft + \"px\";\n    this.leftCol++;\n    this.removeColLeft();\n  }\n};\n\nVDomHoz.prototype.initializeRow = function (row) {\n  if (row.type !== \"group\") {\n    row.modules.vdomHoz = {\n      leftCol: this.leftCol,\n      rightCol: this.rightCol\n    };\n\n    for (var _i7 = this.leftCol; _i7 <= this.rightCol; _i7++) {\n      var column = this.columns[_i7];\n\n      if (column.visible) {\n        var cell = row.getCell(column);\n        row.element.appendChild(cell.getElement());\n        cell.cellRendered();\n      }\n    }\n  }\n};\n\nVDomHoz.prototype.reinitializeRow = function (row, force) {\n  if (row.type !== \"group\") {\n    if (force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol) {\n      while (row.element.firstChild) {\n        row.element.removeChild(row.element.firstChild);\n      }\n\n      this.initializeRow(row);\n    }\n  }\n}; //public row object\n\n\nvar RowComponent = function RowComponent(row) {\n  this._row = row;\n};\n\nRowComponent.prototype.getData = function (transform) {\n  return this._row.getData(transform);\n};\n\nRowComponent.prototype.getElement = function () {\n  return this._row.getElement();\n};\n\nRowComponent.prototype.getCells = function () {\n  var cells = [];\n\n  this._row.getCells().forEach(function (cell) {\n    cells.push(cell.getComponent());\n  });\n\n  return cells;\n};\n\nRowComponent.prototype.getCell = function (column) {\n  var cell = this._row.getCell(column);\n\n  return cell ? cell.getComponent() : false;\n};\n\nRowComponent.prototype.getIndex = function () {\n  return this._row.getData(\"data\")[this._row.table.options.index];\n};\n\nRowComponent.prototype.getPosition = function (active) {\n  return this._row.table.rowManager.getRowPosition(this._row, active);\n};\n\nRowComponent.prototype.delete = function () {\n  return this._row.delete();\n};\n\nRowComponent.prototype.scrollTo = function () {\n  return this._row.table.rowManager.scrollToRow(this._row);\n};\n\nRowComponent.prototype.pageTo = function () {\n  if (this._row.table.modExists(\"page\", true)) {\n    return this._row.table.modules.page.setPageToRow(this._row);\n  }\n};\n\nRowComponent.prototype.move = function (to, after) {\n  this._row.moveToRow(to, after);\n};\n\nRowComponent.prototype.update = function (data) {\n  return this._row.updateData(data);\n};\n\nRowComponent.prototype.normalizeHeight = function () {\n  this._row.normalizeHeight(true);\n};\n\nRowComponent.prototype.select = function () {\n  this._row.table.modules.selectRow.selectRows(this._row);\n};\n\nRowComponent.prototype.deselect = function () {\n  this._row.table.modules.selectRow.deselectRows(this._row);\n};\n\nRowComponent.prototype.toggleSelect = function () {\n  this._row.table.modules.selectRow.toggleRow(this._row);\n};\n\nRowComponent.prototype.isSelected = function () {\n  return this._row.table.modules.selectRow.isRowSelected(this._row);\n};\n\nRowComponent.prototype._getSelf = function () {\n  return this._row;\n};\n\nRowComponent.prototype.validate = function () {\n  return this._row.validate();\n};\n\nRowComponent.prototype.freeze = function () {\n  if (this._row.table.modExists(\"frozenRows\", true)) {\n    this._row.table.modules.frozenRows.freezeRow(this._row);\n  }\n};\n\nRowComponent.prototype.unfreeze = function () {\n  if (this._row.table.modExists(\"frozenRows\", true)) {\n    this._row.table.modules.frozenRows.unfreezeRow(this._row);\n  }\n};\n\nRowComponent.prototype.isFrozen = function () {\n  if (this._row.table.modExists(\"frozenRows\", true)) {\n    var index = this._row.table.modules.frozenRows.rows.indexOf(this._row);\n\n    return index > -1;\n  }\n\n  return false;\n};\n\nRowComponent.prototype.treeCollapse = function () {\n  if (this._row.table.modExists(\"dataTree\", true)) {\n    this._row.table.modules.dataTree.collapseRow(this._row);\n  }\n};\n\nRowComponent.prototype.treeExpand = function () {\n  if (this._row.table.modExists(\"dataTree\", true)) {\n    this._row.table.modules.dataTree.expandRow(this._row);\n  }\n};\n\nRowComponent.prototype.treeToggle = function () {\n  if (this._row.table.modExists(\"dataTree\", true)) {\n    this._row.table.modules.dataTree.toggleRow(this._row);\n  }\n};\n\nRowComponent.prototype.getTreeParent = function () {\n  if (this._row.table.modExists(\"dataTree\", true)) {\n    return this._row.table.modules.dataTree.getTreeParent(this._row);\n  }\n\n  return false;\n};\n\nRowComponent.prototype.getTreeChildren = function () {\n  if (this._row.table.modExists(\"dataTree\", true)) {\n    return this._row.table.modules.dataTree.getTreeChildren(this._row, true);\n  }\n\n  return false;\n};\n\nRowComponent.prototype.addTreeChild = function (data, pos, index) {\n  if (this._row.table.modExists(\"dataTree\", true)) {\n    return this._row.table.modules.dataTree.addTreeChildRow(this._row, data, pos, index);\n  }\n\n  return false;\n};\n\nRowComponent.prototype.reformat = function () {\n  return this._row.reinitialize();\n};\n\nRowComponent.prototype.getGroup = function () {\n  return this._row.getGroup().getComponent();\n};\n\nRowComponent.prototype.getTable = function () {\n  return this._row.table;\n};\n\nRowComponent.prototype.getNextRow = function () {\n  var row = this._row.nextRow();\n\n  return row ? row.getComponent() : row;\n};\n\nRowComponent.prototype.getPrevRow = function () {\n  var row = this._row.prevRow();\n\n  return row ? row.getComponent() : row;\n};\n\nvar Row = function Row(data, parent) {\n  var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"row\";\n  this.table = parent.table;\n  this.parent = parent;\n  this.data = {};\n  this.type = type; //type of element\n\n  this.element = this.createElement();\n  this.modules = {}; //hold module variables;\n\n  this.cells = [];\n  this.height = 0; //hold element height\n\n  this.heightStyled = \"\"; //hold element height prestyled to improve render efficiency\n\n  this.manualHeight = false; //user has manually set row height\n\n  this.outerHeight = 0; //holde lements outer height\n\n  this.initialized = false; //element has been rendered\n\n  this.heightInitialized = false; //element has resized cells to fit\n\n  this.component = null;\n  this.setData(data);\n  this.generateElement();\n};\n\nRow.prototype.createElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-row\");\n  el.setAttribute(\"role\", \"row\");\n  return el;\n};\n\nRow.prototype.getElement = function () {\n  return this.element;\n};\n\nRow.prototype.detachElement = function () {\n  if (this.element && this.element.parentNode) {\n    this.element.parentNode.removeChild(this.element);\n  }\n};\n\nRow.prototype.generateElement = function () {\n  var self = this,\n      dblTap,\n      tapHold,\n      tap; //set row selection characteristics\n\n  if (self.table.options.selectable !== false && self.table.modExists(\"selectRow\")) {\n    self.table.modules.selectRow.initializeRow(this);\n  } //setup movable rows\n\n\n  if (self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n    self.table.modules.moveRow.initializeRow(this);\n  } //setup data tree\n\n\n  if (self.table.options.dataTree !== false && self.table.modExists(\"dataTree\")) {\n    self.table.modules.dataTree.initializeRow(this);\n  } //setup column colapse container\n\n\n  if (self.table.options.responsiveLayout === \"collapse\" && self.table.modExists(\"responsiveLayout\")) {\n    self.table.modules.responsiveLayout.initializeRow(this);\n  } //set column menu\n\n\n  if ((self.table.options.rowContextMenu || self.table.options.rowClickMenu) && this.table.modExists(\"menu\")) {\n    self.table.modules.menu.initializeRow(this);\n  } //handle row click events\n\n\n  if (self.table.options.rowClick) {\n    self.element.addEventListener(\"click\", function (e) {\n      self.table.options.rowClick(e, self.getComponent());\n    });\n  }\n\n  if (self.table.options.rowDblClick) {\n    self.element.addEventListener(\"dblclick\", function (e) {\n      self.table.options.rowDblClick(e, self.getComponent());\n    });\n  }\n\n  if (self.table.options.rowContext) {\n    self.element.addEventListener(\"contextmenu\", function (e) {\n      self.table.options.rowContext(e, self.getComponent());\n    });\n  } //handle mouse events\n\n\n  if (self.table.options.rowMouseEnter) {\n    self.element.addEventListener(\"mouseenter\", function (e) {\n      self.table.options.rowMouseEnter(e, self.getComponent());\n    });\n  }\n\n  if (self.table.options.rowMouseLeave) {\n    self.element.addEventListener(\"mouseleave\", function (e) {\n      self.table.options.rowMouseLeave(e, self.getComponent());\n    });\n  }\n\n  if (self.table.options.rowMouseOver) {\n    self.element.addEventListener(\"mouseover\", function (e) {\n      self.table.options.rowMouseOver(e, self.getComponent());\n    });\n  }\n\n  if (self.table.options.rowMouseOut) {\n    self.element.addEventListener(\"mouseout\", function (e) {\n      self.table.options.rowMouseOut(e, self.getComponent());\n    });\n  }\n\n  if (self.table.options.rowMouseMove) {\n    self.element.addEventListener(\"mousemove\", function (e) {\n      self.table.options.rowMouseMove(e, self.getComponent());\n    });\n  }\n\n  if (self.table.options.rowTap) {\n    tap = false;\n    self.element.addEventListener(\"touchstart\", function (e) {\n      tap = true;\n    }, {\n      passive: true\n    });\n    self.element.addEventListener(\"touchend\", function (e) {\n      if (tap) {\n        self.table.options.rowTap(e, self.getComponent());\n      }\n\n      tap = false;\n    });\n  }\n\n  if (self.table.options.rowDblTap) {\n    dblTap = null;\n    self.element.addEventListener(\"touchend\", function (e) {\n      if (dblTap) {\n        clearTimeout(dblTap);\n        dblTap = null;\n        self.table.options.rowDblTap(e, self.getComponent());\n      } else {\n        dblTap = setTimeout(function () {\n          clearTimeout(dblTap);\n          dblTap = null;\n        }, 300);\n      }\n    });\n  }\n\n  if (self.table.options.rowTapHold) {\n    tapHold = null;\n    self.element.addEventListener(\"touchstart\", function (e) {\n      clearTimeout(tapHold);\n      tapHold = setTimeout(function () {\n        clearTimeout(tapHold);\n        tapHold = null;\n        tap = false;\n        self.table.options.rowTapHold(e, self.getComponent());\n      }, 1000);\n    }, {\n      passive: true\n    });\n    self.element.addEventListener(\"touchend\", function (e) {\n      clearTimeout(tapHold);\n      tapHold = null;\n    });\n  }\n};\n\nRow.prototype.generateCells = function () {\n  this.cells = this.table.columnManager.generateCells(this);\n}; //functions to setup on first render\n\n\nRow.prototype.initialize = function (force) {\n  var _this21 = this;\n\n  if (!this.initialized || force) {\n    this.deleteCells();\n\n    while (this.element.firstChild) {\n      this.element.removeChild(this.element.firstChild);\n    } //handle frozen cells\n\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.layoutRow(this);\n    }\n\n    this.generateCells();\n\n    if (this.table.options.virtualDomHoz && this.table.vdomHoz.initialized) {\n      this.table.vdomHoz.initializeRow(this);\n    } else {\n      this.cells.forEach(function (cell) {\n        _this21.element.appendChild(cell.getElement());\n\n        cell.cellRendered();\n      });\n    }\n\n    if (force) {\n      this.normalizeHeight();\n    } //setup movable rows\n\n\n    if (this.table.options.dataTree && this.table.modExists(\"dataTree\")) {\n      this.table.modules.dataTree.layoutRow(this);\n    } //setup column colapse container\n\n\n    if (this.table.options.responsiveLayout === \"collapse\" && this.table.modExists(\"responsiveLayout\")) {\n      this.table.modules.responsiveLayout.layoutRow(this);\n    }\n\n    if (this.table.options.rowFormatter) {\n      this.table.options.rowFormatter(this.getComponent());\n    } //set resizable handles\n\n\n    if (this.table.options.resizableRows && this.table.modExists(\"resizeRows\")) {\n      this.table.modules.resizeRows.initializeRow(this);\n    }\n\n    this.initialized = true;\n  } else {\n    if (this.table.options.virtualDomHoz) {\n      this.table.vdomHoz.reinitializeRow(this);\n    }\n  }\n};\n\nRow.prototype.reinitializeHeight = function () {\n  this.heightInitialized = false;\n\n  if (this.element.offsetParent !== null) {\n    this.normalizeHeight(true);\n  }\n};\n\nRow.prototype.reinitialize = function (children) {\n  this.initialized = false;\n  this.heightInitialized = false;\n\n  if (!this.manualHeight) {\n    this.height = 0;\n    this.heightStyled = \"\";\n  }\n\n  if (this.element.offsetParent !== null) {\n    this.initialize(true);\n  }\n\n  if (this.table.options.dataTree && this.table.modExists(\"dataTree\", true)) {\n    this.table.modules.dataTree.getTreeChildren(this, false, true).forEach(function (child) {\n      child.reinitialize(true);\n    });\n  }\n}; //get heights when doing bulk row style calcs in virtual DOM\n\n\nRow.prototype.calcHeight = function (force) {\n  var maxHeight = 0,\n      minHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n  this.cells.forEach(function (cell) {\n    var height = cell.getHeight();\n\n    if (height > maxHeight) {\n      maxHeight = height;\n    }\n  });\n\n  if (force) {\n    this.height = Math.max(maxHeight, minHeight);\n  } else {\n    this.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n  }\n\n  this.heightStyled = this.height ? this.height + \"px\" : \"\";\n  this.outerHeight = this.element.offsetHeight;\n}; //set of cells\n\n\nRow.prototype.setCellHeight = function () {\n  this.cells.forEach(function (cell) {\n    cell.setHeight();\n  });\n  this.heightInitialized = true;\n};\n\nRow.prototype.clearCellHeight = function () {\n  this.cells.forEach(function (cell) {\n    cell.clearHeight();\n  });\n}; //normalize the height of elements in the row\n\n\nRow.prototype.normalizeHeight = function (force) {\n  if (force) {\n    this.clearCellHeight();\n  }\n\n  this.calcHeight(force);\n  this.setCellHeight();\n}; // Row.prototype.setHeight = function(height){\n// \tthis.height = height;\n// \tthis.setCellHeight();\n// };\n//set height of rows\n\n\nRow.prototype.setHeight = function (height, force) {\n  if (this.height != height || force) {\n    this.manualHeight = true;\n    this.height = height;\n    this.heightStyled = height ? height + \"px\" : \"\";\n    this.setCellHeight(); // this.outerHeight = this.element.outerHeight();\n\n    this.outerHeight = this.element.offsetHeight;\n  }\n}; //return rows outer height\n\n\nRow.prototype.getHeight = function () {\n  return this.outerHeight;\n}; //return rows outer Width\n\n\nRow.prototype.getWidth = function () {\n  return this.element.offsetWidth;\n}; //////////////// Cell Management /////////////////\n\n\nRow.prototype.deleteCell = function (cell) {\n  var index = this.cells.indexOf(cell);\n\n  if (index > -1) {\n    this.cells.splice(index, 1);\n  }\n}; //////////////// Data Management /////////////////\n\n\nRow.prototype.setData = function (data) {\n  if (this.table.modExists(\"mutator\")) {\n    data = this.table.modules.mutator.transformRow(data, \"data\");\n  }\n\n  this.data = data;\n\n  if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n    this.table.modules.reactiveData.watchRow(this);\n  }\n}; //update the rows data\n\n\nRow.prototype.updateData = function (updatedData) {\n  var _this22 = this;\n\n  var visible = Tabulator.prototype.helpers.elVisible(this.element),\n      tempData = {},\n      newRowData;\n  return new Promise(function (resolve, reject) {\n    if (typeof updatedData === \"string\") {\n      updatedData = JSON.parse(updatedData);\n    }\n\n    if (_this22.table.options.reactiveData && _this22.table.modExists(\"reactiveData\", true)) {\n      _this22.table.modules.reactiveData.block();\n    } //mutate incomming data if needed\n\n\n    if (_this22.table.modExists(\"mutator\")) {\n      tempData = Object.assign(tempData, _this22.data);\n      tempData = Object.assign(tempData, updatedData);\n      newRowData = _this22.table.modules.mutator.transformRow(tempData, \"data\", updatedData);\n    } else {\n      newRowData = updatedData;\n    } //set data\n\n\n    for (var attrname in newRowData) {\n      _this22.data[attrname] = newRowData[attrname];\n    }\n\n    if (_this22.table.options.reactiveData && _this22.table.modExists(\"reactiveData\", true)) {\n      _this22.table.modules.reactiveData.unblock();\n    } //update affected cells only\n\n\n    for (var attrname in updatedData) {\n      var columns = _this22.table.columnManager.getColumnsByFieldRoot(attrname);\n\n      columns.forEach(function (column) {\n        var cell = _this22.getCell(column.getField());\n\n        if (cell) {\n          var value = column.getFieldValue(newRowData);\n\n          if (cell.getValue() != value) {\n            cell.setValueProcessData(value);\n\n            if (visible) {\n              cell.cellRendered();\n            }\n          }\n        }\n      });\n    }\n\n    if (_this22.table.options.groupUpdateOnCellEdit && _this22.table.options.groupBy && _this22.table.modExists(\"groupRows\")) {\n      _this22.table.modules.groupRows.reassignRowToGroup(_this22.row);\n    } //Partial reinitialization if visible\n\n\n    if (visible) {\n      _this22.normalizeHeight(true);\n\n      if (_this22.table.options.rowFormatter) {\n        _this22.table.options.rowFormatter(_this22.getComponent());\n      }\n    } else {\n      _this22.initialized = false;\n      _this22.height = 0;\n      _this22.heightStyled = \"\";\n    }\n\n    if (_this22.table.options.dataTree !== false && _this22.table.modExists(\"dataTree\") && _this22.table.modules.dataTree.redrawNeeded(updatedData)) {\n      _this22.table.modules.dataTree.initializeRow(_this22);\n\n      _this22.table.modules.dataTree.layoutRow(_this22);\n\n      _this22.table.rowManager.refreshActiveData(\"tree\", false, true);\n    } //this.reinitialize();\n\n\n    _this22.table.options.rowUpdated.call(_this22.table, _this22.getComponent());\n\n    if (_this22.table.options.dataChanged) {\n      _this22.table.options.dataChanged.call(_this22.table, _this22.table.rowManager.getData());\n    }\n\n    resolve();\n  });\n};\n\nRow.prototype.getData = function (transform) {\n  if (transform) {\n    if (this.table.modExists(\"accessor\")) {\n      return this.table.modules.accessor.transformRow(this, transform);\n    }\n  }\n\n  return this.data;\n};\n\nRow.prototype.getCell = function (column) {\n  var match = false;\n  column = this.table.columnManager.findColumn(column);\n  match = this.cells.find(function (cell) {\n    return cell.column === column;\n  });\n  return match;\n};\n\nRow.prototype.getCellIndex = function (findCell) {\n  return this.cells.findIndex(function (cell) {\n    return cell === findCell;\n  });\n};\n\nRow.prototype.findNextEditableCell = function (index) {\n  var nextCell = false;\n\n  if (index < this.cells.length - 1) {\n    for (var i = index + 1; i < this.cells.length; i++) {\n      var cell = this.cells[i];\n\n      if (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n        var allowEdit = true;\n\n        if (typeof cell.column.modules.edit.check == \"function\") {\n          allowEdit = cell.column.modules.edit.check(cell.getComponent());\n        }\n\n        if (allowEdit) {\n          nextCell = cell;\n          break;\n        }\n      }\n    }\n  }\n\n  return nextCell;\n};\n\nRow.prototype.findPrevEditableCell = function (index) {\n  var prevCell = false;\n\n  if (index > 0) {\n    for (var i = index - 1; i >= 0; i--) {\n      var cell = this.cells[i],\n          allowEdit = true;\n\n      if (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n        if (typeof cell.column.modules.edit.check == \"function\") {\n          allowEdit = cell.column.modules.edit.check(cell.getComponent());\n        }\n\n        if (allowEdit) {\n          prevCell = cell;\n          break;\n        }\n      }\n    }\n  }\n\n  return prevCell;\n};\n\nRow.prototype.getCells = function () {\n  return this.cells;\n};\n\nRow.prototype.nextRow = function () {\n  var row = this.table.rowManager.nextDisplayRow(this, true);\n  return row || false;\n};\n\nRow.prototype.prevRow = function () {\n  var row = this.table.rowManager.prevDisplayRow(this, true);\n  return row || false;\n};\n\nRow.prototype.moveToRow = function (to, before) {\n  var toRow = this.table.rowManager.findRow(to);\n\n  if (toRow) {\n    this.table.rowManager.moveRowActual(this, toRow, !before);\n    this.table.rowManager.refreshActiveData(\"display\", false, true);\n  } else {\n    console.warn(\"Move Error - No matching row found:\", to);\n  }\n};\n\nRow.prototype.validate = function () {\n  var invalid = [];\n  this.cells.forEach(function (cell) {\n    if (!cell.validate()) {\n      invalid.push(cell.getComponent());\n    }\n  });\n  return invalid.length ? invalid : true;\n}; ///////////////////// Actions  /////////////////////\n\n\nRow.prototype.delete = function () {\n  var _this23 = this;\n\n  return new Promise(function (resolve, reject) {\n    var index, rows;\n\n    if (_this23.table.options.history && _this23.table.modExists(\"history\")) {\n      if (_this23.table.options.groupBy && _this23.table.modExists(\"groupRows\")) {\n        rows = _this23.getGroup().rows;\n        index = rows.indexOf(_this23);\n\n        if (index) {\n          index = rows[index - 1];\n        }\n      } else {\n        index = _this23.table.rowManager.getRowIndex(_this23);\n\n        if (index) {\n          index = _this23.table.rowManager.rows[index - 1];\n        }\n      }\n\n      _this23.table.modules.history.action(\"rowDelete\", _this23, {\n        data: _this23.getData(),\n        pos: !index,\n        index: index\n      });\n    }\n\n    _this23.deleteActual();\n\n    resolve();\n  });\n};\n\nRow.prototype.deleteActual = function (blockRedraw) {\n  var index = this.table.rowManager.getRowIndex(this);\n  this.detatchModules(); // if(this.table.options.dataTree && this.table.modExists(\"dataTree\")){\n  // \tthis.table.modules.dataTree.collapseRow(this, true);\n  // }\n  //remove any reactive data watchers from row object\n\n  if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {} // this.table.modules.reactiveData.unwatchRow(this);\n  //remove from group\n\n\n  if (this.modules.group) {\n    this.modules.group.removeRow(this);\n  }\n\n  this.table.rowManager.deleteRow(this, blockRedraw);\n  this.deleteCells();\n  this.initialized = false;\n  this.heightInitialized = false;\n  this.element = false;\n\n  if (this.table.options.dataTree && this.table.modExists(\"dataTree\", true)) {\n    this.table.modules.dataTree.rowDelete(this);\n  } //recalc column calculations if present\n\n\n  if (this.table.modExists(\"columnCalcs\")) {\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.columnCalcs.recalcRowGroup(this);\n    } else {\n      this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n    }\n  }\n};\n\nRow.prototype.detatchModules = function () {\n  //deselect row if it is selected\n  if (this.table.modExists(\"selectRow\")) {\n    this.table.modules.selectRow._deselectRow(this, true);\n  } //cancel edit if row is currently being edited\n\n\n  if (this.table.modExists(\"edit\")) {\n    if (this.table.modules.edit.currentCell.row === this) {\n      this.table.modules.edit.cancelEdit();\n    }\n  }\n\n  if (this.table.modExists(\"frozenRows\")) {\n    this.table.modules.frozenRows.detachRow(this);\n  }\n};\n\nRow.prototype.deleteCells = function () {\n  var cellCount = this.cells.length;\n\n  for (var _i8 = 0; _i8 < cellCount; _i8++) {\n    this.cells[0].delete();\n  }\n};\n\nRow.prototype.wipe = function () {\n  this.detatchModules();\n  this.deleteCells();\n\n  while (this.element.firstChild) {\n    this.element.removeChild(this.element.firstChild);\n  }\n\n  this.element = false;\n  this.modules = {};\n\n  if (this.element.parentNode) {\n    this.element.parentNode.removeChild(this.element);\n  }\n};\n\nRow.prototype.getGroup = function () {\n  return this.modules.group || false;\n}; //////////////// Object Generation /////////////////\n\n\nRow.prototype.getComponent = function () {\n  if (!this.component) {\n    this.component = new RowComponent(this);\n  }\n\n  return this.component;\n}; //public row object\n\n\nvar CellComponent = function CellComponent(cell) {\n  this._cell = cell;\n};\n\nCellComponent.prototype.getValue = function () {\n  return this._cell.getValue();\n};\n\nCellComponent.prototype.getOldValue = function () {\n  return this._cell.getOldValue();\n};\n\nCellComponent.prototype.getInitialValue = function () {\n  return this._cell.initialValue;\n};\n\nCellComponent.prototype.getElement = function () {\n  return this._cell.getElement();\n};\n\nCellComponent.prototype.getRow = function () {\n  return this._cell.row.getComponent();\n};\n\nCellComponent.prototype.getData = function () {\n  return this._cell.row.getData();\n};\n\nCellComponent.prototype.getField = function () {\n  return this._cell.column.getField();\n};\n\nCellComponent.prototype.getColumn = function () {\n  return this._cell.column.getComponent();\n};\n\nCellComponent.prototype.setValue = function (value, mutate) {\n  if (typeof mutate == \"undefined\") {\n    mutate = true;\n  }\n\n  this._cell.setValue(value, mutate);\n};\n\nCellComponent.prototype.restoreOldValue = function () {\n  this._cell.setValueActual(this._cell.getOldValue());\n};\n\nCellComponent.prototype.restoreInitialValue = function () {\n  this._cell.setValueActual(this._cell.initialValue);\n};\n\nCellComponent.prototype.edit = function (force) {\n  return this._cell.edit(force);\n};\n\nCellComponent.prototype.cancelEdit = function () {\n  this._cell.cancelEdit();\n};\n\nCellComponent.prototype.isEdited = function () {\n  return !!this._cell.modules.edit && this._cell.modules.edit.edited;\n};\n\nCellComponent.prototype.clearEdited = function () {\n  if (self.table.modExists(\"edit\", true)) {\n    this._cell.table.modules.edit.clearEdited(this._cell);\n  }\n};\n\nCellComponent.prototype.isValid = function () {\n  return this._cell.modules.validate ? !this._cell.modules.validate.invalid : true;\n};\n\nCellComponent.prototype.validate = function () {\n  return this._cell.validate();\n};\n\nCellComponent.prototype.clearValidation = function () {\n  if (this._cell.table.modExists(\"validate\", true)) {\n    this._cell.table.modules.validate.clearValidation(this._cell);\n  }\n};\n\nCellComponent.prototype.nav = function () {\n  return this._cell.nav();\n};\n\nCellComponent.prototype.checkHeight = function () {\n  this._cell.checkHeight();\n};\n\nCellComponent.prototype.getTable = function () {\n  return this._cell.table;\n};\n\nCellComponent.prototype._getSelf = function () {\n  return this._cell;\n};\n\nvar Cell = function Cell(column, row) {\n  this.table = column.table;\n  this.column = column;\n  this.row = row;\n  this.element = null;\n  this.value = null;\n  this.initialValue;\n  this.oldValue = null;\n  this.modules = {};\n  this.height = null;\n  this.width = null;\n  this.minWidth = null;\n  this.component = null;\n  this.loaded = false; //track if the cell has been added to the DOM yet\n\n  this.build();\n}; //////////////// Setup Functions /////////////////\n//generate element\n\n\nCell.prototype.build = function () {\n  this.generateElement();\n  this.setWidth();\n\n  this._configureCell();\n\n  this.setValueActual(this.column.getFieldValue(this.row.data));\n  this.initialValue = this.value;\n};\n\nCell.prototype.generateElement = function () {\n  this.element = document.createElement('div');\n  this.element.className = \"tabulator-cell\";\n  this.element.setAttribute(\"role\", \"gridcell\");\n  this.element = this.element;\n};\n\nCell.prototype._configureCell = function () {\n  var self = this,\n      cellEvents = self.column.cellEvents,\n      element = self.element,\n      field = this.column.getField(),\n      vertAligns = {\n    top: \"flex-start\",\n    bottom: \"flex-end\",\n    middle: \"center\"\n  },\n      hozAligns = {\n    left: \"flex-start\",\n    right: \"flex-end\",\n    center: \"center\"\n  }; //set text alignment\n\n  element.style.textAlign = self.column.hozAlign;\n\n  if (self.column.vertAlign) {\n    element.style.display = \"inline-flex\";\n    element.style.alignItems = vertAligns[self.column.vertAlign] || \"\";\n\n    if (self.column.hozAlign) {\n      element.style.justifyContent = hozAligns[self.column.hozAlign] || \"\";\n    }\n  }\n\n  if (field) {\n    element.setAttribute(\"tabulator-field\", field);\n  } //add class to cell if needed\n\n\n  if (self.column.definition.cssClass) {\n    var classNames = self.column.definition.cssClass.split(\" \");\n    classNames.forEach(function (className) {\n      element.classList.add(className);\n    });\n  } //update tooltip on mouse enter\n\n\n  if (this.table.options.tooltipGenerationMode === \"hover\") {\n    element.addEventListener(\"mouseenter\", function (e) {\n      self._generateTooltip();\n    });\n  }\n\n  self._bindClickEvents(cellEvents);\n\n  self._bindTouchEvents(cellEvents);\n\n  self._bindMouseEvents(cellEvents);\n\n  if (self.column.modules.edit) {\n    self.table.modules.edit.bindEditor(self);\n  }\n\n  if (self.column.definition.rowHandle && self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n    self.table.modules.moveRow.initializeCell(self);\n  } //hide cell if not visible\n\n\n  if (!self.column.visible) {\n    self.hide();\n  }\n};\n\nCell.prototype._bindClickEvents = function (cellEvents) {\n  var self = this,\n      element = self.element; //set event bindings\n\n  if (cellEvents.cellClick || self.table.options.cellClick) {\n    element.addEventListener(\"click\", function (e) {\n      var component = self.getComponent();\n\n      if (cellEvents.cellClick) {\n        cellEvents.cellClick.call(self.table, e, component);\n      }\n\n      if (self.table.options.cellClick) {\n        self.table.options.cellClick.call(self.table, e, component);\n      }\n    });\n  }\n\n  if (cellEvents.cellDblClick || this.table.options.cellDblClick) {\n    element.addEventListener(\"dblclick\", function (e) {\n      var component = self.getComponent();\n\n      if (cellEvents.cellDblClick) {\n        cellEvents.cellDblClick.call(self.table, e, component);\n      }\n\n      if (self.table.options.cellDblClick) {\n        self.table.options.cellDblClick.call(self.table, e, component);\n      }\n    });\n  } else {\n    element.addEventListener(\"dblclick\", function (e) {\n      if (self.table.modExists(\"edit\")) {\n        if (self.table.modules.edit.currentCell === self) {\n          return; //prevent instant selection of editor content\n        }\n      }\n\n      e.preventDefault();\n\n      try {\n        if (document.selection) {\n          // IE\n          var range = document.body.createTextRange();\n          range.moveToElementText(self.element);\n          range.select();\n        } else if (window.getSelection) {\n          var range = document.createRange();\n          range.selectNode(self.element);\n          window.getSelection().removeAllRanges();\n          window.getSelection().addRange(range);\n        }\n      } catch (e) {}\n    });\n  }\n\n  if (cellEvents.cellContext || this.table.options.cellContext) {\n    element.addEventListener(\"contextmenu\", function (e) {\n      var component = self.getComponent();\n\n      if (cellEvents.cellContext) {\n        cellEvents.cellContext.call(self.table, e, component);\n      }\n\n      if (self.table.options.cellContext) {\n        self.table.options.cellContext.call(self.table, e, component);\n      }\n    });\n  }\n};\n\nCell.prototype._bindMouseEvents = function (cellEvents) {\n  var self = this,\n      element = self.element;\n\n  if (cellEvents.cellMouseEnter || self.table.options.cellMouseEnter) {\n    element.addEventListener(\"mouseenter\", function (e) {\n      var component = self.getComponent();\n\n      if (cellEvents.cellMouseEnter) {\n        cellEvents.cellMouseEnter.call(self.table, e, component);\n      }\n\n      if (self.table.options.cellMouseEnter) {\n        self.table.options.cellMouseEnter.call(self.table, e, component);\n      }\n    });\n  }\n\n  if (cellEvents.cellMouseLeave || self.table.options.cellMouseLeave) {\n    element.addEventListener(\"mouseleave\", function (e) {\n      var component = self.getComponent();\n\n      if (cellEvents.cellMouseLeave) {\n        cellEvents.cellMouseLeave.call(self.table, e, component);\n      }\n\n      if (self.table.options.cellMouseLeave) {\n        self.table.options.cellMouseLeave.call(self.table, e, component);\n      }\n    });\n  }\n\n  if (cellEvents.cellMouseOver || self.table.options.cellMouseOver) {\n    element.addEventListener(\"mouseover\", function (e) {\n      var component = self.getComponent();\n\n      if (cellEvents.cellMouseOver) {\n        cellEvents.cellMouseOver.call(self.table, e, component);\n      }\n\n      if (self.table.options.cellMouseOver) {\n        self.table.options.cellMouseOver.call(self.table, e, component);\n      }\n    });\n  }\n\n  if (cellEvents.cellMouseOut || self.table.options.cellMouseOut) {\n    element.addEventListener(\"mouseout\", function (e) {\n      var component = self.getComponent();\n\n      if (cellEvents.cellMouseOut) {\n        cellEvents.cellMouseOut.call(self.table, e, component);\n      }\n\n      if (self.table.options.cellMouseOut) {\n        self.table.options.cellMouseOut.call(self.table, e, component);\n      }\n    });\n  }\n\n  if (cellEvents.cellMouseMove || self.table.options.cellMouseMove) {\n    element.addEventListener(\"mousemove\", function (e) {\n      var component = self.getComponent();\n\n      if (cellEvents.cellMouseMove) {\n        cellEvents.cellMouseMove.call(self.table, e, component);\n      }\n\n      if (self.table.options.cellMouseMove) {\n        self.table.options.cellMouseMove.call(self.table, e, component);\n      }\n    });\n  }\n};\n\nCell.prototype._bindTouchEvents = function (cellEvents) {\n  var self = this,\n      element = self.element,\n      dblTap,\n      tapHold,\n      tap;\n\n  if (cellEvents.cellTap || this.table.options.cellTap) {\n    tap = false;\n    element.addEventListener(\"touchstart\", function (e) {\n      tap = true;\n    }, {\n      passive: true\n    });\n    element.addEventListener(\"touchend\", function (e) {\n      if (tap) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellTap) {\n          cellEvents.cellTap.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellTap) {\n          self.table.options.cellTap.call(self.table, e, component);\n        }\n      }\n\n      tap = false;\n    });\n  }\n\n  if (cellEvents.cellDblTap || this.table.options.cellDblTap) {\n    dblTap = null;\n    element.addEventListener(\"touchend\", function (e) {\n      if (dblTap) {\n        clearTimeout(dblTap);\n        dblTap = null;\n        var component = self.getComponent();\n\n        if (cellEvents.cellDblTap) {\n          cellEvents.cellDblTap.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellDblTap) {\n          self.table.options.cellDblTap.call(self.table, e, component);\n        }\n      } else {\n        dblTap = setTimeout(function () {\n          clearTimeout(dblTap);\n          dblTap = null;\n        }, 300);\n      }\n    });\n  }\n\n  if (cellEvents.cellTapHold || this.table.options.cellTapHold) {\n    tapHold = null;\n    element.addEventListener(\"touchstart\", function (e) {\n      clearTimeout(tapHold);\n      tapHold = setTimeout(function () {\n        clearTimeout(tapHold);\n        tapHold = null;\n        tap = false;\n        var component = self.getComponent();\n\n        if (cellEvents.cellTapHold) {\n          cellEvents.cellTapHold.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellTapHold) {\n          self.table.options.cellTapHold.call(self.table, e, component);\n        }\n      }, 1000);\n    }, {\n      passive: true\n    });\n    element.addEventListener(\"touchend\", function (e) {\n      clearTimeout(tapHold);\n      tapHold = null;\n    });\n  }\n}; //generate cell contents\n\n\nCell.prototype._generateContents = function () {\n  var val;\n\n  if (this.table.modExists(\"format\")) {\n    val = this.table.modules.format.formatValue(this);\n  } else {\n    val = this.element.innerHTML = this.value;\n  }\n\n  switch (typeof val === 'undefined' ? 'undefined' : _typeof(val)) {\n    case \"object\":\n      if (val instanceof Node) {\n        //clear previous cell contents\n        while (this.element.firstChild) {\n          this.element.removeChild(this.element.firstChild);\n        }\n\n        this.element.appendChild(val);\n      } else {\n        this.element.innerHTML = \"\";\n\n        if (val != null) {\n          console.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n        }\n      }\n\n      break;\n\n    case \"undefined\":\n    case \"null\":\n      this.element.innerHTML = \"\";\n      break;\n\n    default:\n      this.element.innerHTML = val;\n  }\n};\n\nCell.prototype.cellRendered = function () {\n  if (this.table.modExists(\"format\") && this.table.modules.format.cellRendered) {\n    this.table.modules.format.cellRendered(this);\n  }\n}; //generate tooltip text\n\n\nCell.prototype._generateTooltip = function () {\n  var tooltip = this.column.tooltip;\n\n  if (tooltip) {\n    if (tooltip === true) {\n      tooltip = this.value;\n    } else if (typeof tooltip == \"function\") {\n      tooltip = tooltip(this.getComponent());\n\n      if (tooltip === false) {\n        tooltip = \"\";\n      }\n    }\n\n    if (typeof tooltip === \"undefined\") {\n      tooltip = \"\";\n    }\n\n    this.element.setAttribute(\"title\", tooltip);\n  } else {\n    this.element.setAttribute(\"title\", \"\");\n  }\n}; //////////////////// Getters ////////////////////\n\n\nCell.prototype.getElement = function () {\n  if (!this.loaded) {\n    this.loaded = true;\n    this.layoutElement();\n  }\n\n  return this.element;\n};\n\nCell.prototype.getValue = function () {\n  return this.value;\n};\n\nCell.prototype.getOldValue = function () {\n  return this.oldValue;\n}; //////////////////// Actions ////////////////////\n\n\nCell.prototype.setValue = function (value, mutate) {\n  var changed = this.setValueProcessData(value, mutate),\n      component;\n\n  if (changed) {\n    if (this.table.options.history && this.table.modExists(\"history\")) {\n      this.table.modules.history.action(\"cellEdit\", this, {\n        oldValue: this.oldValue,\n        newValue: this.value\n      });\n    }\n\n    component = this.getComponent();\n\n    if (this.column.cellEvents.cellEdited) {\n      this.column.cellEvents.cellEdited.call(this.table, component);\n    }\n\n    if (this.table.options.groupUpdateOnCellEdit && this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.reassignRowToGroup(this.row);\n    }\n\n    this.cellRendered();\n    this.table.options.cellEdited.call(this.table, component);\n\n    if (this.table.options.dataChanged) {\n      this.table.options.dataChanged.call(this.table, this.table.rowManager.getData());\n    }\n  }\n};\n\nCell.prototype.setValueProcessData = function (value, mutate) {\n  var changed = false;\n\n  if (this.value != value) {\n    changed = true;\n\n    if (mutate) {\n      if (this.column.modules.mutate) {\n        value = this.table.modules.mutator.transformCell(this, value);\n      }\n    }\n  }\n\n  this.setValueActual(value);\n\n  if (changed && this.table.modExists(\"columnCalcs\")) {\n    if (this.column.definition.topCalc || this.column.definition.bottomCalc) {\n      if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n        if (this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\") {\n          this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n        }\n\n        if (this.table.options.columnCalcs != \"table\") {\n          this.table.modules.columnCalcs.recalcRowGroup(this.row);\n        }\n      } else {\n        this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n      }\n    }\n  }\n\n  return changed;\n};\n\nCell.prototype.setValueActual = function (value) {\n  this.oldValue = this.value;\n  this.value = value;\n\n  if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n    this.table.modules.reactiveData.block();\n  }\n\n  this.column.setFieldValue(this.row.data, value);\n\n  if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n    this.table.modules.reactiveData.unblock();\n  }\n\n  if (this.loaded) {\n    this.layoutElement();\n  }\n};\n\nCell.prototype.layoutElement = function () {\n  this._generateContents();\n\n  this._generateTooltip(); //set resizable handles\n\n\n  if (this.table.options.resizableColumns && this.table.modExists(\"resizeColumns\") && this.row.type === \"row\") {\n    this.table.modules.resizeColumns.initializeColumn(\"cell\", this.column, this.element);\n  }\n\n  if ((this.column.definition.contextMenu || this.column.definition.clickMenu) && this.table.modExists(\"menu\")) {\n    this.table.modules.menu.initializeCell(this);\n  } //handle frozen cells\n\n\n  if (this.table.modExists(\"frozenColumns\")) {\n    this.table.modules.frozenColumns.layoutElement(this.element, this.column);\n  }\n};\n\nCell.prototype.setWidth = function () {\n  this.width = this.column.width;\n  this.element.style.width = this.column.widthStyled;\n};\n\nCell.prototype.clearWidth = function () {\n  this.width = \"\";\n  this.element.style.width = \"\";\n};\n\nCell.prototype.getWidth = function () {\n  return this.width || this.element.offsetWidth;\n};\n\nCell.prototype.setMinWidth = function () {\n  this.minWidth = this.column.minWidth;\n  this.element.style.minWidth = this.column.minWidthStyled;\n};\n\nCell.prototype.checkHeight = function () {\n  // var height = this.element.css(\"height\");\n  this.row.reinitializeHeight();\n};\n\nCell.prototype.clearHeight = function () {\n  this.element.style.height = \"\";\n  this.height = null;\n};\n\nCell.prototype.setHeight = function () {\n  this.height = this.row.height;\n  this.element.style.height = this.row.heightStyled;\n};\n\nCell.prototype.getHeight = function () {\n  return this.height || this.element.offsetHeight;\n};\n\nCell.prototype.show = function () {\n  this.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n};\n\nCell.prototype.hide = function () {\n  this.element.style.display = \"none\";\n};\n\nCell.prototype.edit = function (force) {\n  if (this.table.modExists(\"edit\", true)) {\n    return this.table.modules.edit.editCell(this, force);\n  }\n};\n\nCell.prototype.cancelEdit = function () {\n  if (this.table.modExists(\"edit\", true)) {\n    var editing = this.table.modules.edit.getCurrentCell();\n\n    if (editing && editing._getSelf() === this) {\n      this.table.modules.edit.cancelEdit();\n    } else {\n      console.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n    }\n  }\n};\n\nCell.prototype.validate = function () {\n  if (this.column.modules.validate && this.table.modExists(\"validate\", true)) {\n    var valid = this.table.modules.validate.validate(this.column.modules.validate, this, this.getValue());\n    return valid === true;\n  } else {\n    return true;\n  }\n};\n\nCell.prototype.delete = function () {\n  if (!this.table.rowManager.redrawBlock && this.element.parentNode) {\n    this.element.parentNode.removeChild(this.element);\n  }\n\n  if (this.modules.validate && this.modules.validate.invalid) {\n    this.table.modules.validate.clearValidation(this);\n  }\n\n  if (this.modules.edit && this.modules.edit.edited) {\n    this.table.modules.edit.clearEdited(this);\n  }\n\n  if (this.table.options.history) {\n    this.table.modules.history.clearComponentHistory(this);\n  }\n\n  this.element = false;\n  this.column.deleteCell(this);\n  this.row.deleteCell(this);\n  this.calcs = {};\n}; //////////////// Navigation /////////////////\n\n\nCell.prototype.nav = function () {\n  var self = this,\n      nextCell = false,\n      index = this.row.getCellIndex(this);\n  return {\n    next: function next() {\n      var nextCell = this.right(),\n          nextRow;\n\n      if (!nextCell) {\n        nextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n        if (nextRow) {\n          nextCell = nextRow.findNextEditableCell(-1);\n\n          if (nextCell) {\n            nextCell.edit();\n            return true;\n          }\n        }\n      } else {\n        return true;\n      }\n\n      return false;\n    },\n    prev: function prev() {\n      var nextCell = this.left(),\n          prevRow;\n\n      if (!nextCell) {\n        prevRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n        if (prevRow) {\n          nextCell = prevRow.findPrevEditableCell(prevRow.cells.length);\n\n          if (nextCell) {\n            nextCell.edit();\n            return true;\n          }\n        }\n      } else {\n        return true;\n      }\n\n      return false;\n    },\n    left: function left() {\n      nextCell = self.row.findPrevEditableCell(index);\n\n      if (nextCell) {\n        nextCell.edit();\n        return true;\n      } else {\n        return false;\n      }\n    },\n    right: function right() {\n      nextCell = self.row.findNextEditableCell(index);\n\n      if (nextCell) {\n        nextCell.edit();\n        return true;\n      } else {\n        return false;\n      }\n    },\n    up: function up() {\n      var nextRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n      if (nextRow) {\n        nextRow.cells[index].edit();\n      }\n    },\n    down: function down() {\n      var nextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n      if (nextRow) {\n        nextRow.cells[index].edit();\n      }\n    }\n  };\n};\n\nCell.prototype.getIndex = function () {\n  this.row.getCellIndex(this);\n}; //////////////// Object Generation /////////////////\n\n\nCell.prototype.getComponent = function () {\n  if (!this.component) {\n    this.component = new CellComponent(this);\n  }\n\n  return this.component;\n};\n\nvar FooterManager = function FooterManager(table) {\n  this.table = table;\n  this.active = false;\n  this.element = this.createElement(); //containing element\n\n  this.external = false;\n  this.links = [];\n\n  this._initialize();\n};\n\nFooterManager.prototype.createElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-footer\");\n  return el;\n};\n\nFooterManager.prototype._initialize = function (element) {\n  if (this.table.options.footerElement) {\n    switch (_typeof(this.table.options.footerElement)) {\n      case \"string\":\n        if (this.table.options.footerElement[0] === \"<\") {\n          this.element.innerHTML = this.table.options.footerElement;\n        } else {\n          this.external = true;\n          this.element = document.querySelector(this.table.options.footerElement);\n        }\n\n        break;\n\n      default:\n        this.element = this.table.options.footerElement;\n        break;\n    }\n  }\n};\n\nFooterManager.prototype.getElement = function () {\n  return this.element;\n};\n\nFooterManager.prototype.append = function (element, parent) {\n  this.activate(parent);\n  this.element.appendChild(element);\n  this.table.rowManager.adjustTableSize();\n};\n\nFooterManager.prototype.prepend = function (element, parent) {\n  this.activate(parent);\n  this.element.insertBefore(element, this.element.firstChild);\n  this.table.rowManager.adjustTableSize();\n};\n\nFooterManager.prototype.remove = function (element) {\n  element.parentNode.removeChild(element);\n  this.deactivate();\n};\n\nFooterManager.prototype.deactivate = function (force) {\n  if (!this.element.firstChild || force) {\n    if (!this.external) {\n      this.element.parentNode.removeChild(this.element);\n    }\n\n    this.active = false;\n  } // this.table.rowManager.adjustTableSize();\n\n};\n\nFooterManager.prototype.activate = function (parent) {\n  if (!this.active) {\n    this.active = true;\n\n    if (!this.external) {\n      this.table.element.appendChild(this.getElement());\n      this.table.element.style.display = '';\n    }\n  }\n\n  if (parent) {\n    this.links.push(parent);\n  }\n};\n\nFooterManager.prototype.redraw = function () {\n  this.links.forEach(function (link) {\n    link.footerRedraw();\n  });\n};\n\nvar Tabulator = function Tabulator(element, options) {\n  this.options = {};\n  this.columnManager = null; // hold Column Manager\n\n  this.rowManager = null; //hold Row Manager\n\n  this.footerManager = null; //holder Footer Manager\n\n  this.vdomHoz = null; //holder horizontal virtual dom\n\n  this.browser = \"\"; //hold current browser type\n\n  this.browserSlow = false; //handle reduced functionality for slower browsers\n\n  this.browserMobile = false; //check if running on moble, prevent resize cancelling edit on keyboard appearence\n\n  this.rtl = false; //check if the table is in RTL mode\n\n  this.modules = {}; //hold all modules bound to this table\n\n  if (this.initializeElement(element)) {\n    this.initializeOptions(options || {});\n\n    this._create();\n  }\n\n  Tabulator.prototype.comms.register(this); //register table for inderdevice communication\n}; //default setup options\n\n\nTabulator.prototype.defaultOptions = {\n  height: false,\n  //height of tabulator\n  minHeight: false,\n  //minimum height of tabulator\n  maxHeight: false,\n  //maximum height of tabulator\n  layout: \"fitData\",\n  ///layout type \"fitColumns\" | \"fitData\"\n  layoutColumnsOnNewData: false,\n  //update column widths on setData\n  columnMinWidth: 40,\n  //minimum global width for a column\n  columnHeaderVertAlign: \"top\",\n  //vertical alignment of column headers\n  columnVertAlign: false,\n  // DEPRECATED - Left to allow warning\n  resizableColumns: true,\n  //resizable columns\n  resizableRows: false,\n  //resizable rows\n  autoResize: true,\n  //auto resize table\n  columns: [],\n  //store for colum header info\n  cellHozAlign: \"\",\n  //horizontal align columns\n  cellVertAlign: \"\",\n  //vertical align columns\n  headerHozAlign: \"\",\n  //horizontal header alignment\n  data: [],\n  //default starting data\n  autoColumns: false,\n  //build columns from data row structure\n  autoColumnsDefinitions: false,\n  reactiveData: false,\n  //enable data reactivity\n  nestedFieldSeparator: \".\",\n  //seperatpr for nested data\n  tooltips: false,\n  //Tool tip value\n  tooltipsHeader: false,\n  //Tool tip for headers\n  tooltipGenerationMode: \"load\",\n  //when to generate tooltips\n  initialSort: false,\n  //initial sorting criteria\n  initialFilter: false,\n  //initial filtering criteria\n  initialHeaderFilter: false,\n  //initial header filtering criteria\n  columnHeaderSortMulti: true,\n  //multiple or single column sorting\n  sortOrderReverse: false,\n  //reverse internal sort ordering\n  headerSort: true,\n  //set default global header sort\n  headerSortTristate: false,\n  //set default tristate header sorting\n  headerSortElement: \"<div class='tabulator-arrow'></div>\",\n  //header sort element\n  footerElement: false,\n  //hold footer element\n  index: \"id\",\n  //filed for row index\n  textDirection: \"auto\",\n  keybindings: [],\n  //array for keybindings\n  tabEndNewRow: false,\n  //create new row when tab to end of table\n  invalidOptionWarnings: true,\n  //allow toggling of invalid option warnings\n  clipboard: false,\n  //enable clipboard\n  clipboardCopyStyled: true,\n  //formatted table data\n  clipboardCopyConfig: false,\n  //clipboard config\n  clipboardCopyFormatter: false,\n  //DEPRICATED - REMOVE in 5.0\n  clipboardCopyRowRange: \"active\",\n  //restrict clipboard to visible rows only\n  clipboardPasteParser: \"table\",\n  //convert pasted clipboard data to rows\n  clipboardPasteAction: \"insert\",\n  //how to insert pasted data into the table\n  clipboardCopied: function clipboardCopied() {},\n  //data has been copied to the clipboard\n  clipboardPasted: function clipboardPasted() {},\n  //data has been pasted into the table\n  clipboardPasteError: function clipboardPasteError() {},\n  //data has not successfully been pasted into the table\n  downloadDataFormatter: false,\n  //function to manipulate table data before it is downloaded\n  downloadReady: function downloadReady(data, blob) {\n    return blob;\n  },\n  //function to manipulate download data\n  downloadComplete: false,\n  //function to manipulate download data\n  downloadConfig: {},\n  //download config\n  downloadRowRange: \"active\",\n  //restrict download to active rows only\n  dataTree: false,\n  //enable data tree\n  dataTreeFilter: true,\n  //filter child rows\n  dataTreeSort: true,\n  //sort child rows\n  dataTreeElementColumn: false,\n  dataTreeBranchElement: true,\n  //show data tree branch element\n  dataTreeChildIndent: 9,\n  //data tree child indent in px\n  dataTreeChildField: \"_children\",\n  //data tre column field to look for child rows\n  dataTreeCollapseElement: false,\n  //data tree row collapse element\n  dataTreeExpandElement: false,\n  //data tree row expand element\n  dataTreeStartExpanded: false,\n  dataTreeRowExpanded: function dataTreeRowExpanded() {},\n  //row has been expanded\n  dataTreeRowCollapsed: function dataTreeRowCollapsed() {},\n  //row has been collapsed\n  dataTreeChildColumnCalcs: false,\n  //include visible data tree rows in column calculations\n  dataTreeSelectPropagate: false,\n  //seleccting a parent row selects its children\n  printAsHtml: false,\n  //enable print as html\n  printFormatter: false,\n  //printing page formatter\n  printHeader: false,\n  //page header contents\n  printFooter: false,\n  //page footer contents\n  printCopyStyle: true,\n  //DEPRICATED - REMOVE in 5.0\n  printStyled: true,\n  //enable print as html styling\n  printVisibleRows: true,\n  //DEPRICATED - REMOVE in 5.0\n  printRowRange: \"visible\",\n  //restrict print to visible rows only\n  printConfig: {},\n  //print config options\n  addRowPos: \"bottom\",\n  //position to insert blank rows, top|bottom\n  selectable: \"highlight\",\n  //highlight rows on hover\n  selectableRangeMode: \"drag\",\n  //highlight rows on hover\n  selectableRollingSelection: true,\n  //roll selection once maximum number of selectable rows is reached\n  selectablePersistence: true,\n  // maintain selection when table view is updated\n  selectableCheck: function selectableCheck(data, row) {\n    return true;\n  },\n  //check wheather row is selectable\n  headerFilterLiveFilterDelay: 300,\n  //delay before updating column after user types in header filter\n  headerFilterPlaceholder: false,\n  //placeholder text to display in header filters\n  headerVisible: true,\n  //hide header\n  history: false,\n  //enable edit history\n  locale: false,\n  //current system language\n  langs: {},\n  virtualDom: true,\n  //enable DOM virtualization\n  virtualDomBuffer: 0,\n  // set virtual DOM buffer size\n  virtualDomHoz: false,\n  //enable horizontal DOM virtualization\n  persistentLayout: false,\n  //DEPRICATED - REMOVE in 5.0\n  persistentSort: false,\n  //DEPRICATED - REMOVE in 5.0\n  persistentFilter: false,\n  //DEPRICATED - REMOVE in 5.0\n  persistenceID: \"\",\n  //key for persistent storage\n  persistenceMode: true,\n  //mode for storing persistence information\n  persistenceReaderFunc: false,\n  //function for handling persistence data reading\n  persistenceWriterFunc: false,\n  //function for handling persistence data writing\n  persistence: false,\n  responsiveLayout: false,\n  //responsive layout flags\n  responsiveLayoutCollapseStartOpen: true,\n  //start showing collapsed data\n  responsiveLayoutCollapseUseFormatters: true,\n  //responsive layout collapse formatter\n  responsiveLayoutCollapseFormatter: false,\n  //responsive layout collapse formatter\n  pagination: false,\n  //set pagination type\n  paginationSize: false,\n  //set number of rows to a page\n  paginationInitialPage: 1,\n  //initail page to show on load\n  paginationButtonCount: 5,\n  // set count of page button\n  paginationSizeSelector: false,\n  //add pagination size selector element\n  paginationElement: false,\n  //element to hold pagination numbers\n  paginationDataSent: {},\n  //pagination data sent to the server\n  paginationDataReceived: {},\n  //pagination data received from the server\n  paginationAddRow: \"page\",\n  //add rows on table or page\n  ajaxURL: false,\n  //url for ajax loading\n  ajaxURLGenerator: false,\n  ajaxParams: {},\n  //params for ajax loading\n  ajaxConfig: \"get\",\n  //ajax request type\n  ajaxContentType: \"form\",\n  //ajax request type\n  ajaxRequestFunc: false,\n  //promise function\n  ajaxLoader: true,\n  //show loader\n  ajaxLoaderLoading: false,\n  //loader element\n  ajaxLoaderError: false,\n  //loader element\n  ajaxFiltering: false,\n  ajaxSorting: false,\n  ajaxProgressiveLoad: false,\n  //progressive loading\n  ajaxProgressiveLoadDelay: 0,\n  //delay between requests\n  ajaxProgressiveLoadScrollMargin: 0,\n  //margin before scroll begins\n  groupBy: false,\n  //enable table grouping and set field to group by\n  groupStartOpen: true,\n  //starting state of group\n  groupValues: false,\n  groupUpdateOnCellEdit: false,\n  groupHeader: false,\n  //header generation function\n  groupHeaderPrint: null,\n  groupHeaderClipboard: null,\n  groupHeaderHtmlOutput: null,\n  groupHeaderDownload: null,\n  htmlOutputConfig: false,\n  //html outypu config\n  movableColumns: false,\n  //enable movable columns\n  movableRows: false,\n  //enable movable rows\n  movableRowsConnectedTables: false,\n  //tables for movable rows to be connected to\n  movableRowsConnectedElements: false,\n  //other elements for movable rows to be connected to\n  movableRowsSender: false,\n  movableRowsReceiver: \"insert\",\n  movableRowsSendingStart: function movableRowsSendingStart() {},\n  movableRowsSent: function movableRowsSent() {},\n  movableRowsSentFailed: function movableRowsSentFailed() {},\n  movableRowsSendingStop: function movableRowsSendingStop() {},\n  movableRowsReceivingStart: function movableRowsReceivingStart() {},\n  movableRowsReceived: function movableRowsReceived() {},\n  movableRowsReceivedFailed: function movableRowsReceivedFailed() {},\n  movableRowsReceivingStop: function movableRowsReceivingStop() {},\n  movableRowsElementDrop: function movableRowsElementDrop() {},\n  scrollToRowPosition: \"top\",\n  scrollToRowIfVisible: true,\n  scrollToColumnPosition: \"left\",\n  scrollToColumnIfVisible: true,\n  rowFormatter: false,\n  rowFormatterPrint: null,\n  rowFormatterClipboard: null,\n  rowFormatterHtmlOutput: null,\n  placeholder: false,\n  //table building callbacks\n  tableBuilding: function tableBuilding() {},\n  tableBuilt: function tableBuilt() {},\n  //render callbacks\n  renderStarted: function renderStarted() {},\n  renderComplete: function renderComplete() {},\n  //row callbacks\n  rowClick: false,\n  rowDblClick: false,\n  rowContext: false,\n  rowTap: false,\n  rowDblTap: false,\n  rowTapHold: false,\n  rowMouseEnter: false,\n  rowMouseLeave: false,\n  rowMouseOver: false,\n  rowMouseOut: false,\n  rowMouseMove: false,\n  rowContextMenu: false,\n  rowClickMenu: false,\n  rowAdded: function rowAdded() {},\n  rowDeleted: function rowDeleted() {},\n  rowMoved: function rowMoved() {},\n  rowUpdated: function rowUpdated() {},\n  rowSelectionChanged: function rowSelectionChanged() {},\n  rowSelected: function rowSelected() {},\n  rowDeselected: function rowDeselected() {},\n  rowResized: function rowResized() {},\n  //cell callbacks\n  //row callbacks\n  cellClick: false,\n  cellDblClick: false,\n  cellContext: false,\n  cellTap: false,\n  cellDblTap: false,\n  cellTapHold: false,\n  cellMouseEnter: false,\n  cellMouseLeave: false,\n  cellMouseOver: false,\n  cellMouseOut: false,\n  cellMouseMove: false,\n  cellEditing: function cellEditing() {},\n  cellEdited: function cellEdited() {},\n  cellEditCancelled: function cellEditCancelled() {},\n  //column callbacks\n  columnMoved: false,\n  columnResized: function columnResized() {},\n  columnTitleChanged: function columnTitleChanged() {},\n  columnVisibilityChanged: function columnVisibilityChanged() {},\n  //HTML iport callbacks\n  htmlImporting: function htmlImporting() {},\n  htmlImported: function htmlImported() {},\n  //data callbacks\n  dataLoading: function dataLoading() {},\n  dataLoaded: function dataLoaded() {},\n  dataEdited: false,\n  //DEPRECATED\n  dataChanged: false,\n  //ajax callbacks\n  ajaxRequesting: function ajaxRequesting() {},\n  ajaxResponse: false,\n  ajaxError: function ajaxError() {},\n  //filtering callbacks\n  dataFiltering: false,\n  dataFiltered: false,\n  //sorting callbacks\n  dataSorting: function dataSorting() {},\n  dataSorted: function dataSorted() {},\n  //grouping callbacks\n  groupToggleElement: \"arrow\",\n  groupClosedShowCalcs: false,\n  dataGrouping: function dataGrouping() {},\n  dataGrouped: false,\n  groupVisibilityChanged: function groupVisibilityChanged() {},\n  groupClick: false,\n  groupDblClick: false,\n  groupContext: false,\n  groupContextMenu: false,\n  groupClickMenu: false,\n  groupTap: false,\n  groupDblTap: false,\n  groupTapHold: false,\n  columnCalcs: true,\n  //pagination callbacks\n  pageLoaded: function pageLoaded() {},\n  //localization callbacks\n  localized: function localized() {},\n  //validation callbacks\n  validationMode: \"blocking\",\n  validationFailed: function validationFailed() {},\n  //history callbacks\n  historyUndo: function historyUndo() {},\n  historyRedo: function historyRedo() {},\n  //scroll callbacks\n  scrollHorizontal: function scrollHorizontal() {},\n  scrollVertical: function scrollVertical() {}\n};\n\nTabulator.prototype.initializeOptions = function (options) {\n  //warn user if option is not available\n  if (options.invalidOptionWarnings !== false) {\n    for (var key in options) {\n      if (typeof this.defaultOptions[key] === \"undefined\") {\n        console.warn(\"Invalid table constructor option:\", key);\n      }\n    }\n  } //assign options to table\n\n\n  for (var key in this.defaultOptions) {\n    if (key in options) {\n      this.options[key] = options[key];\n    } else {\n      if (Array.isArray(this.defaultOptions[key])) {\n        this.options[key] = [];\n      } else if (_typeof(this.defaultOptions[key]) === \"object\" && this.defaultOptions[key] !== null) {\n        this.options[key] = {};\n      } else {\n        this.options[key] = this.defaultOptions[key];\n      }\n    }\n  }\n};\n\nTabulator.prototype.initializeElement = function (element) {\n  if (typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement) {\n    this.element = element;\n    return true;\n  } else if (typeof element === \"string\") {\n    this.element = document.querySelector(element);\n\n    if (this.element) {\n      return true;\n    } else {\n      console.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n      return false;\n    }\n  } else {\n    console.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n    return false;\n  }\n};\n\nTabulator.prototype.rtlCheck = function () {\n  var style = window.getComputedStyle(this.element);\n\n  switch (this.options.textDirection) {\n    case \"auto\":\n      if (style.direction !== \"rtl\") {\n        break;\n      }\n\n      ;\n\n    case \"rtl\":\n      this.element.classList.add(\"tabulator-rtl\");\n      this.rtl = true;\n      break;\n\n    case \"ltr\":\n      this.element.classList.add(\"tabulator-ltr\");\n\n    default:\n      this.rtl = false;\n  }\n}; //convert depricated functionality to new functions\n\n\nTabulator.prototype._mapDepricatedFunctionality = function () {\n  //map depricated persistance setup options\n  if (this.options.persistentLayout || this.options.persistentSort || this.options.persistentFilter) {\n    if (!this.options.persistence) {\n      this.options.persistence = {};\n    }\n  }\n\n  if (this.options.dataEdited) {\n    console.warn(\"DEPRECATION WARNING - dataEdited option has been deprecated, please use the dataChanged option instead\");\n    this.options.dataChanged = this.options.dataEdited;\n  }\n\n  if (this.options.downloadDataFormatter) {\n    console.warn(\"DEPRECATION WARNING - downloadDataFormatter option has been deprecated\");\n  }\n\n  if (typeof this.options.clipboardCopyHeader !== \"undefined\") {\n    this.options.columnHeaders = this.options.clipboardCopyHeader;\n    console.warn(\"DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option\");\n  }\n\n  if (this.options.printVisibleRows !== true) {\n    console.warn(\"printVisibleRows option is deprecated, you should now use the printRowRange option\");\n    this.options.persistence.printRowRange = \"active\";\n  }\n\n  if (this.options.printCopyStyle !== true) {\n    console.warn(\"printCopyStyle option is deprecated, you should now use the printStyled option\");\n    this.options.persistence.printStyled = this.options.printCopyStyle;\n  }\n\n  if (this.options.persistentLayout) {\n    console.warn(\"persistentLayout option is deprecated, you should now use the persistence option\");\n\n    if (this.options.persistence !== true && typeof this.options.persistence.columns === \"undefined\") {\n      this.options.persistence.columns = true;\n    }\n  }\n\n  if (this.options.persistentSort) {\n    console.warn(\"persistentSort option is deprecated, you should now use the persistence option\");\n\n    if (this.options.persistence !== true && typeof this.options.persistence.sort === \"undefined\") {\n      this.options.persistence.sort = true;\n    }\n  }\n\n  if (this.options.persistentFilter) {\n    console.warn(\"persistentFilter option is deprecated, you should now use the persistence option\");\n\n    if (this.options.persistence !== true && typeof this.options.persistence.filter === \"undefined\") {\n      this.options.persistence.filter = true;\n    }\n  }\n\n  if (this.options.columnVertAlign) {\n    console.warn(\"columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option\");\n    this.options.columnHeaderVertAlign = this.options.columnVertAlign;\n  }\n};\n\nTabulator.prototype._clearSelection = function () {\n  this.element.classList.add(\"tabulator-block-select\");\n\n  if (window.getSelection) {\n    if (window.getSelection().empty) {\n      // Chrome\n      window.getSelection().empty();\n    } else if (window.getSelection().removeAllRanges) {\n      // Firefox\n      window.getSelection().removeAllRanges();\n    }\n  } else if (document.selection) {\n    // IE?\n    document.selection.empty();\n  }\n\n  this.element.classList.remove(\"tabulator-block-select\");\n}; //concreate table\n\n\nTabulator.prototype._create = function () {\n  this._clearObjectPointers();\n\n  this._mapDepricatedFunctionality();\n\n  this.bindModules();\n  this.rtlCheck();\n\n  if (this.element.tagName === \"TABLE\") {\n    if (this.modExists(\"htmlTableImport\", true)) {\n      this.modules.htmlTableImport.parseTable();\n    }\n  }\n\n  this.columnManager = new ColumnManager(this);\n  this.rowManager = new RowManager(this);\n  this.footerManager = new FooterManager(this);\n  this.columnManager.setRowManager(this.rowManager);\n  this.rowManager.setColumnManager(this.columnManager);\n\n  if (this.options.virtualDomHoz) {\n    this.vdomHoz = new VDomHoz(this);\n  }\n\n  this._buildElement();\n\n  this._loadInitialData();\n}; //clear pointers to objects in default config object\n\n\nTabulator.prototype._clearObjectPointers = function () {\n  this.options.columns = this.options.columns.slice(0);\n\n  if (!this.options.reactiveData) {\n    this.options.data = this.options.data.slice(0);\n  }\n}; //build tabulator element\n\n\nTabulator.prototype._buildElement = function () {\n  var _this24 = this;\n\n  var element = this.element,\n      mod = this.modules,\n      options = this.options;\n  options.tableBuilding.call(this);\n  element.classList.add(\"tabulator\");\n  element.setAttribute(\"role\", \"grid\"); //empty element\n\n  while (element.firstChild) {\n    element.removeChild(element.firstChild);\n  } //set table height\n\n\n  if (options.height) {\n    options.height = isNaN(options.height) ? options.height : options.height + \"px\";\n    element.style.height = options.height;\n  } //set table min height\n\n\n  if (options.minHeight !== false) {\n    options.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n    element.style.minHeight = options.minHeight;\n  } //set table maxHeight\n\n\n  if (options.maxHeight !== false) {\n    options.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n    element.style.maxHeight = options.maxHeight;\n  }\n\n  this.columnManager.initialize();\n  this.rowManager.initialize();\n\n  this._detectBrowser();\n\n  if (this.modExists(\"layout\", true)) {\n    mod.layout.initialize(options.layout);\n  } //set localization\n\n\n  mod.localize.initialize();\n\n  if (options.headerFilterPlaceholder !== false) {\n    mod.localize.setHeaderFilterPlaceholder(options.headerFilterPlaceholder);\n  }\n\n  for (var locale in options.langs) {\n    mod.localize.installLang(locale, options.langs[locale]);\n  }\n\n  mod.localize.setLocale(options.locale); //configure placeholder element\n\n  if (typeof options.placeholder == \"string\") {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-placeholder\");\n    var span = document.createElement(\"span\");\n    span.innerHTML = options.placeholder;\n    el.appendChild(span);\n    options.placeholder = el;\n  } //build table elements\n\n\n  element.appendChild(this.columnManager.getElement());\n  element.appendChild(this.rowManager.getElement());\n\n  if (options.footerElement) {\n    this.footerManager.activate();\n  }\n\n  if (options.persistence && this.modExists(\"persistence\", true)) {\n    mod.persistence.initialize();\n  }\n\n  if (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.columns) {\n    options.columns = mod.persistence.load(\"columns\", options.columns);\n  }\n\n  if (options.movableRows && this.modExists(\"moveRow\")) {\n    mod.moveRow.initialize();\n  }\n\n  if (options.autoColumns && this.options.data) {\n    this.columnManager.generateColumnsFromRowData(this.options.data);\n  }\n\n  if (this.modExists(\"columnCalcs\")) {\n    mod.columnCalcs.initialize();\n  }\n\n  this.columnManager.setColumns(options.columns);\n\n  if (options.dataTree && this.modExists(\"dataTree\", true)) {\n    mod.dataTree.initialize();\n  }\n\n  if (this.modExists(\"frozenRows\")) {\n    this.modules.frozenRows.initialize();\n  }\n\n  if ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort || options.initialSort) && this.modExists(\"sort\", true)) {\n    var sorters = [];\n\n    if (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort) {\n      sorters = mod.persistence.load(\"sort\");\n\n      if (sorters === false && options.initialSort) {\n        sorters = options.initialSort;\n      }\n    } else if (options.initialSort) {\n      sorters = options.initialSort;\n    }\n\n    mod.sort.setSort(sorters);\n  }\n\n  if ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter || options.initialFilter) && this.modExists(\"filter\", true)) {\n    var filters = [];\n\n    if (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter) {\n      filters = mod.persistence.load(\"filter\");\n\n      if (filters === false && options.initialFilter) {\n        filters = options.initialFilter;\n      }\n    } else if (options.initialFilter) {\n      filters = options.initialFilter;\n    }\n\n    mod.filter.setFilter(filters);\n  }\n\n  if (options.initialHeaderFilter && this.modExists(\"filter\", true)) {\n    options.initialHeaderFilter.forEach(function (item) {\n      var column = _this24.columnManager.findColumn(item.field);\n\n      if (column) {\n        mod.filter.setHeaderFilterValue(column, item.value);\n      } else {\n        console.warn(\"Column Filter Error - No matching column found:\", item.field);\n        return false;\n      }\n    });\n  }\n\n  if (this.modExists(\"ajax\")) {\n    mod.ajax.initialize();\n  }\n\n  if (options.pagination && this.modExists(\"page\", true)) {\n    mod.page.initialize();\n  }\n\n  if (options.groupBy && this.modExists(\"groupRows\", true)) {\n    mod.groupRows.initialize();\n  }\n\n  if (this.modExists(\"keybindings\")) {\n    mod.keybindings.initialize();\n  }\n\n  if (this.modExists(\"selectRow\")) {\n    mod.selectRow.clearSelectionData(true);\n  }\n\n  if (options.autoResize && this.modExists(\"resizeTable\")) {\n    mod.resizeTable.initialize();\n  }\n\n  if (this.modExists(\"clipboard\")) {\n    mod.clipboard.initialize();\n  }\n\n  if (options.printAsHtml && this.modExists(\"print\")) {\n    mod.print.initialize();\n  }\n\n  options.tableBuilt.call(this);\n};\n\nTabulator.prototype._loadInitialData = function () {\n  var self = this;\n\n  if (self.options.pagination && self.modExists(\"page\")) {\n    self.modules.page.reset(true, true);\n\n    if (self.options.pagination == \"local\") {\n      if (self.options.data.length) {\n        self.rowManager.setData(self.options.data, false, true);\n      } else {\n        if ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n          self.modules.ajax.loadData(false, true).then(function () {}).catch(function () {\n            if (self.options.paginationInitialPage) {\n              self.modules.page.setPage(self.options.paginationInitialPage);\n            }\n          });\n          return;\n        } else {\n          self.rowManager.setData(self.options.data, false, true);\n        }\n      }\n\n      if (self.options.paginationInitialPage) {\n        self.modules.page.setPage(self.options.paginationInitialPage);\n      }\n    } else {\n      if (self.options.ajaxURL) {\n        self.modules.page.setPage(self.options.paginationInitialPage).then(function () {}).catch(function () {});\n      } else {\n        self.rowManager.setData([], false, true);\n      }\n    }\n  } else {\n    if (self.options.data.length) {\n      self.rowManager.setData(self.options.data);\n    } else {\n      if ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n        self.modules.ajax.loadData(false, true).then(function () {}).catch(function () {});\n      } else {\n        self.rowManager.setData(self.options.data, false, true);\n      }\n    }\n  }\n}; //deconstructor\n\n\nTabulator.prototype.destroy = function () {\n  var element = this.element;\n  Tabulator.prototype.comms.deregister(this); //deregister table from inderdevice communication\n\n  if (this.options.reactiveData && this.modExists(\"reactiveData\", true)) {\n    this.modules.reactiveData.unwatchData();\n  } //clear row data\n\n\n  this.rowManager.rows.forEach(function (row) {\n    row.wipe();\n  });\n  this.rowManager.rows = [];\n  this.rowManager.activeRows = [];\n  this.rowManager.displayRows = []; //clear event bindings\n\n  if (this.options.autoResize && this.modExists(\"resizeTable\")) {\n    this.modules.resizeTable.clearBindings();\n  }\n\n  if (this.modExists(\"keybindings\")) {\n    this.modules.keybindings.clearBindings();\n  } //clear DOM\n\n\n  while (element.firstChild) {\n    element.removeChild(element.firstChild);\n  }\n\n  element.classList.remove(\"tabulator\");\n};\n\nTabulator.prototype._detectBrowser = function () {\n  var ua = navigator.userAgent || navigator.vendor || window.opera;\n\n  if (ua.indexOf(\"Trident\") > -1) {\n    this.browser = \"ie\";\n    this.browserSlow = true;\n  } else if (ua.indexOf(\"Edge\") > -1) {\n    this.browser = \"edge\";\n    this.browserSlow = true;\n  } else if (ua.indexOf(\"Firefox\") > -1) {\n    this.browser = \"firefox\";\n    this.browserSlow = false;\n  } else {\n    this.browser = \"other\";\n    this.browserSlow = false;\n  }\n\n  this.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(ua.substr(0, 4));\n}; ////////////////// Data Handling //////////////////\n//block table redrawing\n\n\nTabulator.prototype.blockRedraw = function () {\n  return this.rowManager.blockRedraw();\n}; //restore table redrawing\n\n\nTabulator.prototype.restoreRedraw = function () {\n  return this.rowManager.restoreRedraw();\n}; //local data from local file\n\n\nTabulator.prototype.setDataFromLocalFile = function (extensions) {\n  var _this25 = this;\n\n  return new Promise(function (resolve, reject) {\n    var input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = extensions || \".json,application/json\";\n    input.addEventListener(\"change\", function (e) {\n      var file = input.files[0],\n          reader = new FileReader(),\n          data;\n      reader.readAsText(file);\n\n      reader.onload = function (e) {\n        try {\n          data = JSON.parse(reader.result);\n        } catch (e) {\n          console.warn(\"File Load Error - File contents is invalid JSON\", e);\n          reject(e);\n          return;\n        }\n\n        _this25.setData(data).then(function (data) {\n          resolve(data);\n        }).catch(function (err) {\n          resolve(err);\n        });\n      };\n\n      reader.onerror = function (e) {\n        console.warn(\"File Load Error - Unable to read file\");\n        reject();\n      };\n    });\n    input.click();\n  });\n}; //load data\n\n\nTabulator.prototype.setData = function (data, params, config) {\n  if (this.modExists(\"ajax\")) {\n    this.modules.ajax.blockActiveRequest();\n  }\n\n  return this._setData(data, params, config, false, true);\n};\n\nTabulator.prototype._setData = function (data, params, config, inPosition, columnsChanged) {\n  var self = this;\n\n  if (typeof data === \"string\") {\n    if (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0) {\n      //data is a json encoded string\n      return self.rowManager.setData(JSON.parse(data), inPosition, columnsChanged);\n    } else {\n      if (self.modExists(\"ajax\", true)) {\n        if (params) {\n          self.modules.ajax.setParams(params);\n        }\n\n        if (config) {\n          self.modules.ajax.setConfig(config);\n        }\n\n        self.modules.ajax.setUrl(data);\n\n        if (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n          self.modules.page.reset(true, true);\n          return self.modules.page.setPage(1);\n        } else {\n          //assume data is url, make ajax call to url to get data\n          return self.modules.ajax.loadData(inPosition, columnsChanged);\n        }\n      }\n    }\n  } else {\n    if (data) {\n      //asume data is already an object\n      return self.rowManager.setData(data, inPosition, columnsChanged);\n    } else {\n      //no data provided, check if ajaxURL is present;\n      if (self.modExists(\"ajax\") && (self.modules.ajax.getUrl || self.options.ajaxURLGenerator)) {\n        if (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n          self.modules.page.reset(true, true);\n          return self.modules.page.setPage(1);\n        } else {\n          return self.modules.ajax.loadData(inPosition, columnsChanged);\n        }\n      } else {\n        //empty data\n        return self.rowManager.setData([], inPosition, columnsChanged);\n      }\n    }\n  }\n}; //clear data\n\n\nTabulator.prototype.clearData = function () {\n  if (this.modExists(\"ajax\")) {\n    this.modules.ajax.blockActiveRequest();\n  }\n\n  this.rowManager.clearData();\n}; //get table data array\n\n\nTabulator.prototype.getData = function (active) {\n  if (active === true) {\n    console.warn(\"passing a boolean to the getData function is deprecated, you should now pass the string 'active'\");\n    active = \"active\";\n  }\n\n  return this.rowManager.getData(active);\n}; //get table data array count\n\n\nTabulator.prototype.getDataCount = function (active) {\n  if (active === true) {\n    console.warn(\"passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'\");\n    active = \"active\";\n  }\n\n  return this.rowManager.getDataCount(active);\n}; //search for specific row components\n\n\nTabulator.prototype.searchRows = function (field, type, value) {\n  if (this.modExists(\"filter\", true)) {\n    return this.modules.filter.search(\"rows\", field, type, value);\n  }\n}; //search for specific data\n\n\nTabulator.prototype.searchData = function (field, type, value) {\n  if (this.modExists(\"filter\", true)) {\n    return this.modules.filter.search(\"data\", field, type, value);\n  }\n}; //get table html\n\n\nTabulator.prototype.getHtml = function (visible, style, config) {\n  if (this.modExists(\"export\", true)) {\n    return this.modules.export.getHtml(visible, style, config);\n  }\n}; //get print html\n\n\nTabulator.prototype.print = function (visible, style, config) {\n  if (this.modExists(\"print\", true)) {\n    return this.modules.print.printFullscreen(visible, style, config);\n  }\n}; //retrieve Ajax URL\n\n\nTabulator.prototype.getAjaxUrl = function () {\n  if (this.modExists(\"ajax\", true)) {\n    return this.modules.ajax.getUrl();\n  }\n}; //replace data, keeping table in position with same sort\n\n\nTabulator.prototype.replaceData = function (data, params, config) {\n  if (this.modExists(\"ajax\")) {\n    this.modules.ajax.blockActiveRequest();\n  }\n\n  return this._setData(data, params, config, true);\n}; //update table data\n\n\nTabulator.prototype.updateData = function (data) {\n  var _this26 = this;\n\n  var self = this;\n  var responses = 0;\n  return new Promise(function (resolve, reject) {\n    if (_this26.modExists(\"ajax\")) {\n      _this26.modules.ajax.blockActiveRequest();\n    }\n\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n\n    if (data) {\n      data.forEach(function (item) {\n        var row = self.rowManager.findRow(item[self.options.index]);\n\n        if (row) {\n          responses++;\n          row.updateData(item).then(function () {\n            responses--;\n\n            if (!responses) {\n              resolve();\n            }\n          });\n        }\n      });\n    } else {\n      console.warn(\"Update Error - No data provided\");\n      reject(\"Update Error - No data provided\");\n    }\n  });\n};\n\nTabulator.prototype.addData = function (data, pos, index) {\n  var _this27 = this;\n\n  return new Promise(function (resolve, reject) {\n    if (_this27.modExists(\"ajax\")) {\n      _this27.modules.ajax.blockActiveRequest();\n    }\n\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n\n    if (data) {\n      _this27.rowManager.addRows(data, pos, index).then(function (rows) {\n        var output = [];\n        rows.forEach(function (row) {\n          output.push(row.getComponent());\n        });\n        resolve(output);\n      });\n    } else {\n      console.warn(\"Update Error - No data provided\");\n      reject(\"Update Error - No data provided\");\n    }\n  });\n}; //update table data\n\n\nTabulator.prototype.updateOrAddData = function (data) {\n  var _this28 = this;\n\n  var self = this,\n      rows = [],\n      responses = 0;\n  return new Promise(function (resolve, reject) {\n    if (_this28.modExists(\"ajax\")) {\n      _this28.modules.ajax.blockActiveRequest();\n    }\n\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n\n    if (data) {\n      data.forEach(function (item) {\n        var row = self.rowManager.findRow(item[self.options.index]);\n        responses++;\n\n        if (row) {\n          row.updateData(item).then(function () {\n            responses--;\n            rows.push(row.getComponent());\n\n            if (!responses) {\n              resolve(rows);\n            }\n          });\n        } else {\n          self.rowManager.addRows(item).then(function (newRows) {\n            responses--;\n            rows.push(newRows[0].getComponent());\n\n            if (!responses) {\n              resolve(rows);\n            }\n          });\n        }\n      });\n    } else {\n      console.warn(\"Update Error - No data provided\");\n      reject(\"Update Error - No data provided\");\n    }\n  });\n}; //get row object\n\n\nTabulator.prototype.getRow = function (index) {\n  var row = this.rowManager.findRow(index);\n\n  if (row) {\n    return row.getComponent();\n  } else {\n    console.warn(\"Find Error - No matching row found:\", index);\n    return false;\n  }\n}; //get row object\n\n\nTabulator.prototype.getRowFromPosition = function (position, active) {\n  var row = this.rowManager.getRowFromPosition(position, active);\n\n  if (row) {\n    return row.getComponent();\n  } else {\n    console.warn(\"Find Error - No matching row found:\", position);\n    return false;\n  }\n}; //delete row from table\n\n\nTabulator.prototype.deleteRow = function (index) {\n  var _this29 = this;\n\n  return new Promise(function (resolve, reject) {\n    var self = _this29,\n        count = 0,\n        successCount = 0,\n        foundRows = [];\n\n    function doneCheck() {\n      count++;\n\n      if (count == index.length) {\n        if (successCount) {\n          self.rowManager.reRenderInPosition();\n          resolve();\n        }\n      }\n    }\n\n    if (!Array.isArray(index)) {\n      index = [index];\n    } //find matching rows\n\n\n    index.forEach(function (item) {\n      var row = _this29.rowManager.findRow(item, true);\n\n      if (row) {\n        foundRows.push(row);\n      } else {\n        console.warn(\"Delete Error - No matching row found:\", item);\n        reject(\"Delete Error - No matching row found\");\n        doneCheck();\n      }\n    }); //sort rows into correct order to ensure smooth delete from table\n\n    foundRows.sort(function (a, b) {\n      return _this29.rowManager.rows.indexOf(a) > _this29.rowManager.rows.indexOf(b) ? 1 : -1;\n    });\n    foundRows.forEach(function (row) {\n      row.delete().then(function () {\n        successCount++;\n        doneCheck();\n      }).catch(function (err) {\n        doneCheck();\n        reject(err);\n      });\n    });\n  });\n}; //add row to table\n\n\nTabulator.prototype.addRow = function (data, pos, index) {\n  var _this30 = this;\n\n  return new Promise(function (resolve, reject) {\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n\n    _this30.rowManager.addRows(data, pos, index).then(function (rows) {\n      //recalc column calculations if present\n      if (_this30.modExists(\"columnCalcs\")) {\n        _this30.modules.columnCalcs.recalc(_this30.rowManager.activeRows);\n      }\n\n      resolve(rows[0].getComponent());\n    });\n  });\n}; //update a row if it exitsts otherwise create it\n\n\nTabulator.prototype.updateOrAddRow = function (index, data) {\n  var _this31 = this;\n\n  return new Promise(function (resolve, reject) {\n    var row = _this31.rowManager.findRow(index);\n\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n\n    if (row) {\n      row.updateData(data).then(function () {\n        //recalc column calculations if present\n        if (_this31.modExists(\"columnCalcs\")) {\n          _this31.modules.columnCalcs.recalc(_this31.rowManager.activeRows);\n        }\n\n        resolve(row.getComponent());\n      }).catch(function (err) {\n        reject(err);\n      });\n    } else {\n      row = _this31.rowManager.addRows(data).then(function (rows) {\n        //recalc column calculations if present\n        if (_this31.modExists(\"columnCalcs\")) {\n          _this31.modules.columnCalcs.recalc(_this31.rowManager.activeRows);\n        }\n\n        resolve(rows[0].getComponent());\n      }).catch(function (err) {\n        reject(err);\n      });\n    }\n  });\n}; //update row data\n\n\nTabulator.prototype.updateRow = function (index, data) {\n  var _this32 = this;\n\n  return new Promise(function (resolve, reject) {\n    var row = _this32.rowManager.findRow(index);\n\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n\n    if (row) {\n      row.updateData(data).then(function () {\n        resolve(row.getComponent());\n      }).catch(function (err) {\n        reject(err);\n      });\n    } else {\n      console.warn(\"Update Error - No matching row found:\", index);\n      reject(\"Update Error - No matching row found\");\n    }\n  });\n}; //scroll to row in DOM\n\n\nTabulator.prototype.scrollToRow = function (index, position, ifVisible) {\n  var _this33 = this;\n\n  return new Promise(function (resolve, reject) {\n    var row = _this33.rowManager.findRow(index);\n\n    if (row) {\n      _this33.rowManager.scrollToRow(row, position, ifVisible).then(function () {\n        resolve();\n      }).catch(function (err) {\n        reject(err);\n      });\n    } else {\n      console.warn(\"Scroll Error - No matching row found:\", index);\n      reject(\"Scroll Error - No matching row found\");\n    }\n  });\n};\n\nTabulator.prototype.moveRow = function (from, to, after) {\n  var fromRow = this.rowManager.findRow(from);\n\n  if (fromRow) {\n    fromRow.moveToRow(to, after);\n  } else {\n    console.warn(\"Move Error - No matching row found:\", from);\n  }\n};\n\nTabulator.prototype.getRows = function (active) {\n  if (active === true) {\n    console.warn(\"passing a boolean to the getRows function is deprecated, you should now pass the string 'active'\");\n    active = \"active\";\n  }\n\n  return this.rowManager.getComponents(active);\n}; //get position of row in table\n\n\nTabulator.prototype.getRowPosition = function (index, active) {\n  var row = this.rowManager.findRow(index);\n\n  if (row) {\n    return this.rowManager.getRowPosition(row, active);\n  } else {\n    console.warn(\"Position Error - No matching row found:\", index);\n    return false;\n  }\n}; //copy table data to clipboard\n\n\nTabulator.prototype.copyToClipboard = function (selector) {\n  if (this.modExists(\"clipboard\", true)) {\n    this.modules.clipboard.copy(selector);\n  }\n}; /////////////// Column Functions  ///////////////\n\n\nTabulator.prototype.setColumns = function (definition) {\n  this.columnManager.setColumns(definition);\n};\n\nTabulator.prototype.getColumns = function (structured) {\n  return this.columnManager.getComponents(structured);\n};\n\nTabulator.prototype.getColumn = function (field) {\n  var col = this.columnManager.findColumn(field);\n\n  if (col) {\n    return col.getComponent();\n  } else {\n    console.warn(\"Find Error - No matching column found:\", field);\n    return false;\n  }\n};\n\nTabulator.prototype.getColumnDefinitions = function () {\n  return this.columnManager.getDefinitionTree();\n};\n\nTabulator.prototype.getColumnLayout = function () {\n  if (this.modExists(\"persistence\", true)) {\n    return this.modules.persistence.parseColumns(this.columnManager.getColumns());\n  }\n};\n\nTabulator.prototype.setColumnLayout = function (layout) {\n  if (this.modExists(\"persistence\", true)) {\n    this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns, layout));\n    return true;\n  }\n\n  return false;\n};\n\nTabulator.prototype.showColumn = function (field) {\n  var column = this.columnManager.findColumn(field);\n\n  if (column) {\n    column.show();\n\n    if (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n      this.modules.responsiveLayout.update();\n    }\n  } else {\n    console.warn(\"Column Show Error - No matching column found:\", field);\n    return false;\n  }\n};\n\nTabulator.prototype.hideColumn = function (field) {\n  var column = this.columnManager.findColumn(field);\n\n  if (column) {\n    column.hide();\n\n    if (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n      this.modules.responsiveLayout.update();\n    }\n  } else {\n    console.warn(\"Column Hide Error - No matching column found:\", field);\n    return false;\n  }\n};\n\nTabulator.prototype.toggleColumn = function (field) {\n  var column = this.columnManager.findColumn(field);\n\n  if (column) {\n    if (column.visible) {\n      column.hide();\n    } else {\n      column.show();\n    }\n  } else {\n    console.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n    return false;\n  }\n};\n\nTabulator.prototype.addColumn = function (definition, before, field) {\n  var _this34 = this;\n\n  return new Promise(function (resolve, reject) {\n    var column = _this34.columnManager.findColumn(field);\n\n    _this34.columnManager.addColumn(definition, before, column).then(function (column) {\n      resolve(column.getComponent());\n    }).catch(function (err) {\n      reject(err);\n    });\n  });\n};\n\nTabulator.prototype.deleteColumn = function (field) {\n  var _this35 = this;\n\n  return new Promise(function (resolve, reject) {\n    var column = _this35.columnManager.findColumn(field);\n\n    if (column) {\n      column.delete().then(function () {\n        resolve();\n      }).catch(function (err) {\n        reject(err);\n      });\n    } else {\n      console.warn(\"Column Delete Error - No matching column found:\", field);\n      reject();\n    }\n  });\n};\n\nTabulator.prototype.updateColumnDefinition = function (field, definition) {\n  var _this36 = this;\n\n  return new Promise(function (resolve, reject) {\n    var column = _this36.columnManager.findColumn(field);\n\n    if (column) {\n      column.updateDefinition(definition).then(function (col) {\n        resolve(col);\n      }).catch(function (err) {\n        reject(err);\n      });\n    } else {\n      console.warn(\"Column Update Error - No matching column found:\", field);\n      reject();\n    }\n  });\n};\n\nTabulator.prototype.moveColumn = function (from, to, after) {\n  var fromColumn = this.columnManager.findColumn(from);\n  var toColumn = this.columnManager.findColumn(to);\n\n  if (fromColumn) {\n    if (toColumn) {\n      this.columnManager.moveColumn(fromColumn, toColumn, after);\n    } else {\n      console.warn(\"Move Error - No matching column found:\", toColumn);\n    }\n  } else {\n    console.warn(\"Move Error - No matching column found:\", from);\n  }\n}; //scroll to column in DOM\n\n\nTabulator.prototype.scrollToColumn = function (field, position, ifVisible) {\n  var _this37 = this;\n\n  return new Promise(function (resolve, reject) {\n    var column = _this37.columnManager.findColumn(field);\n\n    if (column) {\n      _this37.columnManager.scrollToColumn(column, position, ifVisible).then(function () {\n        resolve();\n      }).catch(function (err) {\n        reject(err);\n      });\n    } else {\n      console.warn(\"Scroll Error - No matching column found:\", field);\n      reject(\"Scroll Error - No matching column found\");\n    }\n  });\n}; //////////// Localization Functions  ////////////\n\n\nTabulator.prototype.setLocale = function (locale) {\n  this.modules.localize.setLocale(locale);\n};\n\nTabulator.prototype.getLocale = function () {\n  return this.modules.localize.getLocale();\n};\n\nTabulator.prototype.getLang = function (locale) {\n  return this.modules.localize.getLang(locale);\n}; //////////// General Public Functions ////////////\n//redraw list without updating data\n\n\nTabulator.prototype.redraw = function (force) {\n  this.columnManager.redraw(force);\n  this.rowManager.redraw(force);\n};\n\nTabulator.prototype.setHeight = function (height) {\n  if (this.rowManager.renderMode !== \"classic\") {\n    this.options.height = isNaN(height) ? height : height + \"px\";\n    this.element.style.height = this.options.height;\n    this.rowManager.setRenderMode();\n    this.rowManager.redraw();\n  } else {\n    console.warn(\"setHeight function is not available in classic render mode\");\n  }\n}; ///////////////////// Sorting ////////////////////\n//trigger sort\n\n\nTabulator.prototype.setSort = function (sortList, dir) {\n  if (this.modExists(\"sort\", true)) {\n    this.modules.sort.setSort(sortList, dir);\n    this.rowManager.sorterRefresh();\n  }\n};\n\nTabulator.prototype.getSorters = function () {\n  if (this.modExists(\"sort\", true)) {\n    return this.modules.sort.getSort();\n  }\n};\n\nTabulator.prototype.clearSort = function () {\n  if (this.modExists(\"sort\", true)) {\n    this.modules.sort.clear();\n    this.rowManager.sorterRefresh();\n  }\n}; ///////////////////// Filtering ////////////////////\n//set standard filters\n\n\nTabulator.prototype.setFilter = function (field, type, value, params) {\n  if (this.modExists(\"filter\", true)) {\n    this.modules.filter.setFilter(field, type, value, params);\n    this.rowManager.filterRefresh();\n  }\n}; //add filter to array\n\n\nTabulator.prototype.addFilter = function (field, type, value, params) {\n  if (this.modExists(\"filter\", true)) {\n    this.modules.filter.addFilter(field, type, value, params);\n    this.rowManager.filterRefresh();\n  }\n}; //get all filters\n\n\nTabulator.prototype.getFilters = function (all) {\n  if (this.modExists(\"filter\", true)) {\n    return this.modules.filter.getFilters(all);\n  }\n};\n\nTabulator.prototype.setHeaderFilterFocus = function (field) {\n  if (this.modExists(\"filter\", true)) {\n    var column = this.columnManager.findColumn(field);\n\n    if (column) {\n      this.modules.filter.setHeaderFilterFocus(column);\n    } else {\n      console.warn(\"Column Filter Focus Error - No matching column found:\", field);\n      return false;\n    }\n  }\n};\n\nTabulator.prototype.getHeaderFilterValue = function (field) {\n  if (this.modExists(\"filter\", true)) {\n    var column = this.columnManager.findColumn(field);\n\n    if (column) {\n      return this.modules.filter.getHeaderFilterValue(column);\n    } else {\n      console.warn(\"Column Filter Error - No matching column found:\", field);\n    }\n  }\n};\n\nTabulator.prototype.setHeaderFilterValue = function (field, value) {\n  if (this.modExists(\"filter\", true)) {\n    var column = this.columnManager.findColumn(field);\n\n    if (column) {\n      this.modules.filter.setHeaderFilterValue(column, value);\n    } else {\n      console.warn(\"Column Filter Error - No matching column found:\", field);\n      return false;\n    }\n  }\n};\n\nTabulator.prototype.getHeaderFilters = function () {\n  if (this.modExists(\"filter\", true)) {\n    return this.modules.filter.getHeaderFilters();\n  }\n}; //remove filter from array\n\n\nTabulator.prototype.removeFilter = function (field, type, value) {\n  if (this.modExists(\"filter\", true)) {\n    this.modules.filter.removeFilter(field, type, value);\n    this.rowManager.filterRefresh();\n  }\n}; //clear filters\n\n\nTabulator.prototype.clearFilter = function (all) {\n  if (this.modExists(\"filter\", true)) {\n    this.modules.filter.clearFilter(all);\n    this.rowManager.filterRefresh();\n  }\n}; //clear header filters\n\n\nTabulator.prototype.clearHeaderFilter = function () {\n  if (this.modExists(\"filter\", true)) {\n    this.modules.filter.clearHeaderFilter();\n    this.rowManager.filterRefresh();\n  }\n}; ///////////////////// select ////////////////////\n\n\nTabulator.prototype.selectRow = function (rows) {\n  if (this.modExists(\"selectRow\", true)) {\n    if (rows === true) {\n      console.warn(\"passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'\");\n      rows = \"active\";\n    }\n\n    this.modules.selectRow.selectRows(rows);\n  }\n};\n\nTabulator.prototype.deselectRow = function (rows) {\n  if (this.modExists(\"selectRow\", true)) {\n    this.modules.selectRow.deselectRows(rows);\n  }\n};\n\nTabulator.prototype.toggleSelectRow = function (row) {\n  if (this.modExists(\"selectRow\", true)) {\n    this.modules.selectRow.toggleRow(row);\n  }\n};\n\nTabulator.prototype.getSelectedRows = function () {\n  if (this.modExists(\"selectRow\", true)) {\n    return this.modules.selectRow.getSelectedRows();\n  }\n};\n\nTabulator.prototype.getSelectedData = function () {\n  if (this.modExists(\"selectRow\", true)) {\n    return this.modules.selectRow.getSelectedData();\n  }\n}; ///////////////////// validation  ////////////////////\n\n\nTabulator.prototype.getInvalidCells = function () {\n  if (this.modExists(\"validate\", true)) {\n    return this.modules.validate.getInvalidCells();\n  }\n};\n\nTabulator.prototype.clearCellValidation = function (cells) {\n  var _this38 = this;\n\n  if (this.modExists(\"validate\", true)) {\n    if (!cells) {\n      cells = this.modules.validate.getInvalidCells();\n    }\n\n    if (!Array.isArray(cells)) {\n      cells = [cells];\n    }\n\n    cells.forEach(function (cell) {\n      _this38.modules.validate.clearValidation(cell._getSelf());\n    });\n  }\n};\n\nTabulator.prototype.validate = function (cells) {\n  var output = []; //clear row data\n\n  this.rowManager.rows.forEach(function (row) {\n    var valid = row.validate();\n\n    if (valid !== true) {\n      output = output.concat(valid);\n    }\n  });\n  return output.length ? output : true;\n}; //////////// Pagination Functions  ////////////\n\n\nTabulator.prototype.setMaxPage = function (max) {\n  if (this.options.pagination && this.modExists(\"page\")) {\n    this.modules.page.setMaxPage(max);\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.setPage = function (page) {\n  if (this.options.pagination && this.modExists(\"page\")) {\n    return this.modules.page.setPage(page);\n  } else {\n    return new Promise(function (resolve, reject) {\n      reject();\n    });\n  }\n};\n\nTabulator.prototype.setPageToRow = function (row) {\n  var _this39 = this;\n\n  return new Promise(function (resolve, reject) {\n    if (_this39.options.pagination && _this39.modExists(\"page\")) {\n      row = _this39.rowManager.findRow(row);\n\n      if (row) {\n        _this39.modules.page.setPageToRow(row).then(function () {\n          resolve();\n        }).catch(function () {\n          reject();\n        });\n      } else {\n        reject();\n      }\n    } else {\n      reject();\n    }\n  });\n};\n\nTabulator.prototype.setPageSize = function (size) {\n  if (this.options.pagination && this.modExists(\"page\")) {\n    this.modules.page.setPageSize(size);\n    this.modules.page.setPage(1).then(function () {}).catch(function () {});\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.getPageSize = function () {\n  if (this.options.pagination && this.modExists(\"page\", true)) {\n    return this.modules.page.getPageSize();\n  }\n};\n\nTabulator.prototype.previousPage = function () {\n  if (this.options.pagination && this.modExists(\"page\")) {\n    this.modules.page.previousPage();\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.nextPage = function () {\n  if (this.options.pagination && this.modExists(\"page\")) {\n    this.modules.page.nextPage();\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.getPage = function () {\n  if (this.options.pagination && this.modExists(\"page\")) {\n    return this.modules.page.getPage();\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.getPageMax = function () {\n  if (this.options.pagination && this.modExists(\"page\")) {\n    return this.modules.page.getPageMax();\n  } else {\n    return false;\n  }\n}; ///////////////// Grouping Functions ///////////////\n\n\nTabulator.prototype.setGroupBy = function (groups) {\n  if (this.modExists(\"groupRows\", true)) {\n    this.options.groupBy = groups;\n    this.modules.groupRows.initialize();\n    this.rowManager.refreshActiveData(\"display\");\n\n    if (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n      this.modules.persistence.save(\"group\");\n    }\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.setGroupValues = function (groupValues) {\n  if (this.modExists(\"groupRows\", true)) {\n    this.options.groupValues = groupValues;\n    this.modules.groupRows.initialize();\n    this.rowManager.refreshActiveData(\"display\");\n\n    if (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n      this.modules.persistence.save(\"group\");\n    }\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.setGroupStartOpen = function (values) {\n  if (this.modExists(\"groupRows\", true)) {\n    this.options.groupStartOpen = values;\n    this.modules.groupRows.initialize();\n\n    if (this.options.groupBy) {\n      this.rowManager.refreshActiveData(\"group\");\n\n      if (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n        this.modules.persistence.save(\"group\");\n      }\n    } else {\n      console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n    }\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.setGroupHeader = function (values) {\n  if (this.modExists(\"groupRows\", true)) {\n    this.options.groupHeader = values;\n    this.modules.groupRows.initialize();\n\n    if (this.options.groupBy) {\n      this.rowManager.refreshActiveData(\"group\");\n\n      if (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n        this.modules.persistence.save(\"group\");\n      }\n    } else {\n      console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n    }\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.getGroups = function (values) {\n  if (this.modExists(\"groupRows\", true)) {\n    return this.modules.groupRows.getGroups(true);\n  } else {\n    return false;\n  }\n}; // get grouped table data in the same format as getData()\n\n\nTabulator.prototype.getGroupedData = function () {\n  if (this.modExists(\"groupRows\", true)) {\n    return this.options.groupBy ? this.modules.groupRows.getGroupedData() : this.getData();\n  }\n};\n\nTabulator.prototype.getEditedCells = function () {\n  if (this.modExists(\"edit\", true)) {\n    return this.modules.edit.getEditedCells();\n  }\n};\n\nTabulator.prototype.clearCellEdited = function (cells) {\n  var _this40 = this;\n\n  if (this.modExists(\"edit\", true)) {\n    if (!cells) {\n      cells = this.modules.edit.getEditedCells();\n    }\n\n    if (!Array.isArray(cells)) {\n      cells = [cells];\n    }\n\n    cells.forEach(function (cell) {\n      _this40.modules.edit.clearEdited(cell._getSelf());\n    });\n  }\n}; ///////////////// Column Calculation Functions ///////////////\n\n\nTabulator.prototype.getCalcResults = function () {\n  if (this.modExists(\"columnCalcs\", true)) {\n    return this.modules.columnCalcs.getResults();\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.recalc = function () {\n  if (this.modExists(\"columnCalcs\", true)) {\n    this.modules.columnCalcs.recalcAll(this.rowManager.activeRows);\n  }\n}; /////////////// Navigation Management //////////////\n\n\nTabulator.prototype.navigatePrev = function () {\n  var cell = false;\n\n  if (this.modExists(\"edit\", true)) {\n    cell = this.modules.edit.currentCell;\n\n    if (cell) {\n      return cell.nav().prev();\n    }\n  }\n\n  return false;\n};\n\nTabulator.prototype.navigateNext = function () {\n  var cell = false;\n\n  if (this.modExists(\"edit\", true)) {\n    cell = this.modules.edit.currentCell;\n\n    if (cell) {\n      return cell.nav().next();\n    }\n  }\n\n  return false;\n};\n\nTabulator.prototype.navigateLeft = function () {\n  var cell = false;\n\n  if (this.modExists(\"edit\", true)) {\n    cell = this.modules.edit.currentCell;\n\n    if (cell) {\n      e.preventDefault();\n      return cell.nav().left();\n    }\n  }\n\n  return false;\n};\n\nTabulator.prototype.navigateRight = function () {\n  var cell = false;\n\n  if (this.modExists(\"edit\", true)) {\n    cell = this.modules.edit.currentCell;\n\n    if (cell) {\n      e.preventDefault();\n      return cell.nav().right();\n    }\n  }\n\n  return false;\n};\n\nTabulator.prototype.navigateUp = function () {\n  var cell = false;\n\n  if (this.modExists(\"edit\", true)) {\n    cell = this.modules.edit.currentCell;\n\n    if (cell) {\n      e.preventDefault();\n      return cell.nav().up();\n    }\n  }\n\n  return false;\n};\n\nTabulator.prototype.navigateDown = function () {\n  var cell = false;\n\n  if (this.modExists(\"edit\", true)) {\n    cell = this.modules.edit.currentCell;\n\n    if (cell) {\n      e.preventDefault();\n      return cell.nav().down();\n    }\n  }\n\n  return false;\n}; /////////////// History Management //////////////\n\n\nTabulator.prototype.undo = function () {\n  if (this.options.history && this.modExists(\"history\", true)) {\n    return this.modules.history.undo();\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.redo = function () {\n  if (this.options.history && this.modExists(\"history\", true)) {\n    return this.modules.history.redo();\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.getHistoryUndoSize = function () {\n  if (this.options.history && this.modExists(\"history\", true)) {\n    return this.modules.history.getHistoryUndoSize();\n  } else {\n    return false;\n  }\n};\n\nTabulator.prototype.getHistoryRedoSize = function () {\n  if (this.options.history && this.modExists(\"history\", true)) {\n    return this.modules.history.getHistoryRedoSize();\n  } else {\n    return false;\n  }\n}; /////////////// Download Management //////////////\n\n\nTabulator.prototype.download = function (type, filename, options, active) {\n  if (this.modExists(\"download\", true)) {\n    this.modules.download.download(type, filename, options, active);\n  }\n};\n\nTabulator.prototype.downloadToTab = function (type, filename, options, active) {\n  if (this.modExists(\"download\", true)) {\n    this.modules.download.download(type, filename, options, active, true);\n  }\n}; /////////// Inter Table Communications ///////////\n\n\nTabulator.prototype.tableComms = function (table, module, action, data) {\n  this.modules.comms.receive(table, module, action, data);\n}; ////////////// Extension Management //////////////\n//object to hold module\n\n\nTabulator.prototype.moduleBindings = {}; //extend module\n\nTabulator.prototype.extendModule = function (name, property, values) {\n  if (Tabulator.prototype.moduleBindings[name]) {\n    var source = Tabulator.prototype.moduleBindings[name].prototype[property];\n\n    if (source) {\n      if ((typeof values === 'undefined' ? 'undefined' : _typeof(values)) == \"object\") {\n        for (var key in values) {\n          source[key] = values[key];\n        }\n      } else {\n        console.warn(\"Module Error - Invalid value type, it must be an object\");\n      }\n    } else {\n      console.warn(\"Module Error - property does not exist:\", property);\n    }\n  } else {\n    console.warn(\"Module Error - module does not exist:\", name);\n  }\n}; //add module to tabulator\n\n\nTabulator.prototype.registerModule = function (name, module) {\n  var self = this;\n  Tabulator.prototype.moduleBindings[name] = module;\n}; //ensure that module are bound to instantiated function\n\n\nTabulator.prototype.bindModules = function () {\n  this.modules = {};\n\n  for (var name in Tabulator.prototype.moduleBindings) {\n    this.modules[name] = new Tabulator.prototype.moduleBindings[name](this);\n  }\n}; //Check for module\n\n\nTabulator.prototype.modExists = function (plugin, required) {\n  if (this.modules[plugin]) {\n    return true;\n  } else {\n    if (required) {\n      console.error(\"Tabulator Module Not Installed: \" + plugin);\n    }\n\n    return false;\n  }\n};\n\nTabulator.prototype.helpers = {\n  elVisible: function elVisible(el) {\n    return !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n  },\n  elOffset: function elOffset(el) {\n    var box = el.getBoundingClientRect();\n    return {\n      top: box.top + window.pageYOffset - document.documentElement.clientTop,\n      left: box.left + window.pageXOffset - document.documentElement.clientLeft\n    };\n  },\n  deepClone: function deepClone(obj) {\n    var clone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n\n    for (var i in obj) {\n      if (obj[i] != null && _typeof(obj[i]) === \"object\") {\n        if (obj[i] instanceof Date) {\n          clone[i] = new Date(obj[i]);\n        } else {\n          clone[i] = this.deepClone(obj[i]);\n        }\n      }\n    }\n\n    return clone;\n  }\n};\nTabulator.prototype.comms = {\n  tables: [],\n  register: function register(table) {\n    Tabulator.prototype.comms.tables.push(table);\n  },\n  deregister: function deregister(table) {\n    var index = Tabulator.prototype.comms.tables.indexOf(table);\n\n    if (index > -1) {\n      Tabulator.prototype.comms.tables.splice(index, 1);\n    }\n  },\n  lookupTable: function lookupTable(query, silent) {\n    var results = [],\n        matches,\n        match;\n\n    if (typeof query === \"string\") {\n      matches = document.querySelectorAll(query);\n\n      if (matches.length) {\n        for (var i = 0; i < matches.length; i++) {\n          match = Tabulator.prototype.comms.matchElement(matches[i]);\n\n          if (match) {\n            results.push(match);\n          }\n        }\n      }\n    } else if (typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement || query instanceof Tabulator) {\n      match = Tabulator.prototype.comms.matchElement(query);\n\n      if (match) {\n        results.push(match);\n      }\n    } else if (Array.isArray(query)) {\n      query.forEach(function (item) {\n        results = results.concat(Tabulator.prototype.comms.lookupTable(item));\n      });\n    } else {\n      if (!silent) {\n        console.warn(\"Table Connection Error - Invalid Selector\", query);\n      }\n    }\n\n    return results;\n  },\n  matchElement: function matchElement(element) {\n    return Tabulator.prototype.comms.tables.find(function (table) {\n      return element instanceof Tabulator ? table === element : table.element === element;\n    });\n  }\n};\n\nTabulator.prototype.findTable = function (query) {\n  var results = Tabulator.prototype.comms.lookupTable(query, true);\n  return Array.isArray(results) && !results.length ? false : results;\n};\n\nvar Layout = function Layout(table) {\n  this.table = table;\n  this.mode = null;\n}; //initialize layout system\n\n\nLayout.prototype.initialize = function (layout) {\n  if (this.modes[layout]) {\n    this.mode = layout;\n  } else {\n    console.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n    this.mode = 'fitData';\n  }\n\n  this.table.element.setAttribute(\"tabulator-layout\", this.mode);\n};\n\nLayout.prototype.getMode = function () {\n  return this.mode;\n}; //trigger table layout\n\n\nLayout.prototype.layout = function () {\n  this.modes[this.mode].call(this, this.table.columnManager.columnsByIndex);\n}; //layout render functions\n\n\nLayout.prototype.modes = {\n  //resize columns to fit data they contain\n  \"fitData\": function fitData(columns) {\n    if (this.table.options.virtualDomHoz) {\n      this.table.vdomHoz.fitDataLayoutOverride();\n    } else {\n      columns.forEach(function (column) {\n        column.reinitializeWidth();\n      });\n    }\n\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.update();\n    }\n  },\n  //resize columns to fit data they contain and stretch row to fill table\n  \"fitDataFill\": function fitDataFill(columns) {\n    columns.forEach(function (column) {\n      column.reinitializeWidth();\n    });\n\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.update();\n    }\n  },\n  //resize columns to fit data they contain\n  \"fitDataTable\": function fitDataTable(columns) {\n    columns.forEach(function (column) {\n      column.reinitializeWidth();\n    });\n\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.update();\n    }\n  },\n  //resize columns to fit data the contain and stretch last column to fill table\n  \"fitDataStretch\": function fitDataStretch(columns) {\n    var _this41 = this;\n\n    var colsWidth = 0,\n        tableWidth = this.table.rowManager.element.clientWidth,\n        gap = 0,\n        lastCol = false;\n    columns.forEach(function (column, i) {\n      if (!column.widthFixed) {\n        column.reinitializeWidth();\n      }\n\n      if (_this41.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible) {\n        lastCol = column;\n      }\n\n      if (column.visible) {\n        colsWidth += column.getWidth();\n      }\n    });\n\n    if (lastCol) {\n      gap = tableWidth - colsWidth + lastCol.getWidth();\n\n      if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        lastCol.setWidth(0);\n        this.table.modules.responsiveLayout.update();\n      }\n\n      if (gap > 0) {\n        lastCol.setWidth(gap);\n      } else {\n        lastCol.reinitializeWidth();\n      }\n    } else {\n      if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.update();\n      }\n    }\n  },\n  //resize columns to fit\n  \"fitColumns\": function fitColumns(columns) {\n    var self = this;\n    var totalWidth = self.table.element.clientWidth; //table element width\n\n    var fixedWidth = 0; //total width of columns with a defined width\n\n    var flexWidth = 0; //total width available to flexible columns\n\n    var flexGrowUnits = 0; //total number of widthGrow blocks accross all columns\n\n    var flexColWidth = 0; //desired width of flexible columns\n\n    var flexColumns = []; //array of flexible width columns\n\n    var fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\n    var flexShrinkUnits = 0; //total number of widthShrink blocks accross all columns\n\n    var overflowWidth = 0; //horizontal overflow width\n\n    var gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n    function calcWidth(width) {\n      var colWidth;\n\n      if (typeof width == \"string\") {\n        if (width.indexOf(\"%\") > -1) {\n          colWidth = totalWidth / 100 * parseInt(width);\n        } else {\n          colWidth = parseInt(width);\n        }\n      } else {\n        colWidth = width;\n      }\n\n      return colWidth;\n    } //ensure columns resize to take up the correct amount of space\n\n\n    function scaleColumns(columns, freeSpace, colWidth, shrinkCols) {\n      var oversizeCols = [],\n          oversizeSpace = 0,\n          remainingSpace = 0,\n          nextColWidth = 0,\n          gap = 0,\n          changeUnits = 0,\n          undersizeCols = [];\n\n      function calcGrow(col) {\n        return colWidth * (col.column.definition.widthGrow || 1);\n      }\n\n      function calcShrink(col) {\n        return calcWidth(col.width) - colWidth * (col.column.definition.widthShrink || 0);\n      }\n\n      columns.forEach(function (col, i) {\n        var width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\n        if (col.column.minWidth >= width) {\n          oversizeCols.push(col);\n        } else {\n          undersizeCols.push(col);\n          changeUnits += shrinkCols ? col.column.definition.widthShrink || 1 : col.column.definition.widthGrow || 1;\n        }\n      });\n\n      if (oversizeCols.length) {\n        oversizeCols.forEach(function (col) {\n          oversizeSpace += shrinkCols ? col.width - col.column.minWidth : col.column.minWidth;\n          col.width = col.column.minWidth;\n        });\n        remainingSpace = freeSpace - oversizeSpace;\n        nextColWidth = changeUnits ? Math.floor(remainingSpace / changeUnits) : remainingSpace;\n        gap = remainingSpace - nextColWidth * changeUnits;\n        gap += scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n      } else {\n        gap = changeUnits ? freeSpace - Math.floor(freeSpace / changeUnits) * changeUnits : freeSpace;\n        undersizeCols.forEach(function (column) {\n          column.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n        });\n      }\n\n      return gap;\n    }\n\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.update();\n    } //adjust for vertical scrollbar if present\n\n\n    if (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\n      totalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n    }\n\n    columns.forEach(function (column) {\n      var width, minWidth, colWidth;\n\n      if (column.visible) {\n        width = column.definition.width;\n        minWidth = parseInt(column.minWidth);\n\n        if (width) {\n          colWidth = calcWidth(width);\n          fixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n          if (column.definition.widthShrink) {\n            fixedShrinkColumns.push({\n              column: column,\n              width: colWidth > minWidth ? colWidth : minWidth\n            });\n            flexShrinkUnits += column.definition.widthShrink;\n          }\n        } else {\n          flexColumns.push({\n            column: column,\n            width: 0\n          });\n          flexGrowUnits += column.definition.widthGrow || 1;\n        }\n      }\n    }); //calculate available space\n\n    flexWidth = totalWidth - fixedWidth; //calculate correct column size\n\n    flexColWidth = Math.floor(flexWidth / flexGrowUnits); //generate column widths\n\n    var gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false); //increase width of last column to account for rounding errors\n\n    if (flexColumns.length && gapFill > 0) {\n      flexColumns[flexColumns.length - 1].width += +gapFill;\n    } //caculate space for columns to be shrunk into\n\n\n    flexColumns.forEach(function (col) {\n      flexWidth -= col.width;\n    });\n    overflowWidth = Math.abs(gapFill) + flexWidth; //shrink oversize columns if there is no available space\n\n    if (overflowWidth > 0 && flexShrinkUnits) {\n      gapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n    } //decrease width of last column to account for rounding errors\n\n\n    if (fixedShrinkColumns.length) {\n      fixedShrinkColumns[fixedShrinkColumns.length - 1].width -= gapFill;\n    }\n\n    flexColumns.forEach(function (col) {\n      col.column.setWidth(col.width);\n    });\n    fixedShrinkColumns.forEach(function (col) {\n      col.column.setWidth(col.width);\n    });\n  }\n};\nTabulator.prototype.registerModule(\"layout\", Layout);\n\nvar Localize = function Localize(table) {\n  this.table = table; //hold Tabulator object\n\n  this.locale = \"default\"; //current locale\n\n  this.lang = false; //current language\n\n  this.bindings = {}; //update events to call when locale is changed\n\n  this.langList = {};\n};\n\nLocalize.prototype.initialize = function () {\n  this.langList = Tabulator.prototype.helpers.deepClone(this.langs);\n}; //set header placehoder\n\n\nLocalize.prototype.setHeaderFilterPlaceholder = function (placeholder) {\n  this.langList.default.headerFilters.default = placeholder;\n}; //set header filter placeholder by column\n\n\nLocalize.prototype.setHeaderFilterColumnPlaceholder = function (column, placeholder) {\n  this.langList.default.headerFilters.columns[column] = placeholder;\n\n  if (this.lang && !this.lang.headerFilters.columns[column]) {\n    this.lang.headerFilters.columns[column] = placeholder;\n  }\n}; //setup a lang description object\n\n\nLocalize.prototype.installLang = function (locale, lang) {\n  if (this.langList[locale]) {\n    this._setLangProp(this.langList[locale], lang);\n  } else {\n    this.langList[locale] = lang;\n  }\n};\n\nLocalize.prototype._setLangProp = function (lang, values) {\n  for (var key in values) {\n    if (lang[key] && _typeof(lang[key]) == \"object\") {\n      this._setLangProp(lang[key], values[key]);\n    } else {\n      lang[key] = values[key];\n    }\n  }\n}; //set current locale\n\n\nLocalize.prototype.setLocale = function (desiredLocale) {\n  var self = this;\n  desiredLocale = desiredLocale || \"default\"; //fill in any matching languge values\n\n  function traverseLang(trans, path) {\n    for (var prop in trans) {\n      if (_typeof(trans[prop]) == \"object\") {\n        if (!path[prop]) {\n          path[prop] = {};\n        }\n\n        traverseLang(trans[prop], path[prop]);\n      } else {\n        path[prop] = trans[prop];\n      }\n    }\n  } //determing correct locale to load\n\n\n  if (desiredLocale === true && navigator.language) {\n    //get local from system\n    desiredLocale = navigator.language.toLowerCase();\n  }\n\n  if (desiredLocale) {\n    //if locale is not set, check for matching top level locale else use default\n    if (!self.langList[desiredLocale]) {\n      var prefix = desiredLocale.split(\"-\")[0];\n\n      if (self.langList[prefix]) {\n        console.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n        desiredLocale = prefix;\n      } else {\n        console.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n        desiredLocale = \"default\";\n      }\n    }\n  }\n\n  self.locale = desiredLocale; //load default lang template\n\n  self.lang = Tabulator.prototype.helpers.deepClone(self.langList.default || {});\n\n  if (desiredLocale != \"default\") {\n    traverseLang(self.langList[desiredLocale], self.lang);\n  }\n\n  self.table.options.localized.call(self.table, self.locale, self.lang);\n\n  self._executeBindings();\n}; //get current locale\n\n\nLocalize.prototype.getLocale = function (locale) {\n  return self.locale;\n}; //get lang object for given local or current if none provided\n\n\nLocalize.prototype.getLang = function (locale) {\n  return locale ? this.langList[locale] : this.lang;\n}; //get text for current locale\n\n\nLocalize.prototype.getText = function (path, value) {\n  var path = value ? path + \"|\" + value : path,\n      pathArray = path.split(\"|\"),\n      text = this._getLangElement(pathArray, this.locale); // if(text === false){\n  // \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n  // }\n\n\n  return text || \"\";\n}; //traverse langs object and find localized copy\n\n\nLocalize.prototype._getLangElement = function (path, locale) {\n  var self = this;\n  var root = self.lang;\n  path.forEach(function (level) {\n    var rootPath;\n\n    if (root) {\n      rootPath = root[level];\n\n      if (typeof rootPath != \"undefined\") {\n        root = rootPath;\n      } else {\n        root = false;\n      }\n    }\n  });\n  return root;\n}; //set update binding\n\n\nLocalize.prototype.bind = function (path, callback) {\n  if (!this.bindings[path]) {\n    this.bindings[path] = [];\n  }\n\n  this.bindings[path].push(callback);\n  callback(this.getText(path), this.lang);\n}; //itterate through bindings and trigger updates\n\n\nLocalize.prototype._executeBindings = function () {\n  var self = this;\n\n  var _loop = function _loop(path) {\n    self.bindings[path].forEach(function (binding) {\n      binding(self.getText(path), self.lang);\n    });\n  };\n\n  for (var path in self.bindings) {\n    _loop(path);\n  }\n}; //Localized text listings\n\n\nLocalize.prototype.langs = {\n  \"default\": {\n    //hold default locale text\n    \"groups\": {\n      \"item\": \"item\",\n      \"items\": \"items\"\n    },\n    \"columns\": {},\n    \"ajax\": {\n      \"loading\": \"Loading\",\n      \"error\": \"Error\"\n    },\n    \"pagination\": {\n      \"page_size\": \"Page Size\",\n      \"page_title\": \"Show Page\",\n      \"first\": \"First\",\n      \"first_title\": \"First Page\",\n      \"last\": \"Last\",\n      \"last_title\": \"Last Page\",\n      \"prev\": \"Prev\",\n      \"prev_title\": \"Prev Page\",\n      \"next\": \"Next\",\n      \"next_title\": \"Next Page\",\n      \"all\": \"All\"\n    },\n    \"headerFilters\": {\n      \"default\": \"filter column...\",\n      \"columns\": {}\n    }\n  }\n};\nTabulator.prototype.registerModule(\"localize\", Localize);\n\nvar Comms = function Comms(table) {\n  this.table = table;\n};\n\nComms.prototype.getConnections = function (selectors) {\n  var self = this,\n      connections = [],\n      connection;\n  connection = Tabulator.prototype.comms.lookupTable(selectors);\n  connection.forEach(function (con) {\n    if (self.table !== con) {\n      connections.push(con);\n    }\n  });\n  return connections;\n};\n\nComms.prototype.send = function (selectors, module, action, data) {\n  var self = this,\n      connections = this.getConnections(selectors);\n  connections.forEach(function (connection) {\n    connection.tableComms(self.table.element, module, action, data);\n  });\n\n  if (!connections.length && selectors) {\n    console.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n  }\n};\n\nComms.prototype.receive = function (table, module, action, data) {\n  if (this.table.modExists(module)) {\n    return this.table.modules[module].commsReceived(table, action, data);\n  } else {\n    console.warn(\"Inter-table Comms Error - no such module:\", module);\n  }\n};\n\nTabulator.prototype.registerModule(\"comms\", Comms);\n\nvar Accessor = function Accessor(table) {\n  this.table = table; //hold Tabulator object\n\n  this.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n}; //initialize column accessor\n\n\nAccessor.prototype.initializeColumn = function (column) {\n  var self = this,\n      match = false,\n      config = {};\n  this.allowedTypes.forEach(function (type) {\n    var key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n        accessor;\n\n    if (column.definition[key]) {\n      accessor = self.lookupAccessor(column.definition[key]);\n\n      if (accessor) {\n        match = true;\n        config[key] = {\n          accessor: accessor,\n          params: column.definition[key + \"Params\"] || {}\n        };\n      }\n    }\n  });\n\n  if (match) {\n    column.modules.accessor = config;\n  }\n};\n\nAccessor.prototype.lookupAccessor = function (value) {\n  var accessor = false; //set column accessor\n\n  switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n    case \"string\":\n      if (this.accessors[value]) {\n        accessor = this.accessors[value];\n      } else {\n        console.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n      }\n\n      break;\n\n    case \"function\":\n      accessor = value;\n      break;\n  }\n\n  return accessor;\n}; //apply accessor to row\n\n\nAccessor.prototype.transformRow = function (row, type) {\n  var key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n      rowComponent = row.getComponent(); //clone data object with deep copy to isolate internal data from returned result\n\n  var data = Tabulator.prototype.helpers.deepClone(row.data || {});\n  this.table.columnManager.traverse(function (column) {\n    var value, accessor, params, colCompnent;\n\n    if (column.modules.accessor) {\n      accessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n      if (accessor) {\n        value = column.getFieldValue(data);\n\n        if (value != \"undefined\") {\n          colCompnent = column.getComponent();\n          params = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colCompnent, rowComponent) : accessor.params;\n          column.setFieldValue(data, accessor.accessor(value, data, type, params, colCompnent, rowComponent));\n        }\n      }\n    }\n  });\n  return data;\n}, //default accessors\nAccessor.prototype.accessors = {};\nTabulator.prototype.registerModule(\"accessor\", Accessor);\n\nvar Ajax = function Ajax(table) {\n  this.table = table; //hold Tabulator object\n\n  this.config = false; //hold config object for ajax request\n\n  this.url = \"\"; //request URL\n\n  this.urlGenerator = false;\n  this.params = false; //request parameters\n\n  this.loaderElement = this.createLoaderElement(); //loader message div\n\n  this.msgElement = this.createMsgElement(); //message element\n\n  this.loadingElement = false;\n  this.errorElement = false;\n  this.loaderPromise = false;\n  this.progressiveLoad = false;\n  this.loading = false;\n  this.requestOrder = 0; //prevent requests comming out of sequence if overridden by another load request\n}; //initialize setup options\n\n\nAjax.prototype.initialize = function () {\n  var template;\n  this.loaderElement.appendChild(this.msgElement);\n\n  if (this.table.options.ajaxLoaderLoading) {\n    if (typeof this.table.options.ajaxLoaderLoading == \"string\") {\n      template = document.createElement('template');\n      template.innerHTML = this.table.options.ajaxLoaderLoading.trim();\n      this.loadingElement = template.content.firstChild;\n    } else {\n      this.loadingElement = this.table.options.ajaxLoaderLoading;\n    }\n  }\n\n  this.loaderPromise = this.table.options.ajaxRequestFunc || this.defaultLoaderPromise;\n  this.urlGenerator = this.table.options.ajaxURLGenerator || this.defaultURLGenerator;\n\n  if (this.table.options.ajaxLoaderError) {\n    if (typeof this.table.options.ajaxLoaderError == \"string\") {\n      template = document.createElement('template');\n      template.innerHTML = this.table.options.ajaxLoaderError.trim();\n      this.errorElement = template.content.firstChild;\n    } else {\n      this.errorElement = this.table.options.ajaxLoaderError;\n    }\n  }\n\n  if (this.table.options.ajaxParams) {\n    this.setParams(this.table.options.ajaxParams);\n  }\n\n  if (this.table.options.ajaxConfig) {\n    this.setConfig(this.table.options.ajaxConfig);\n  }\n\n  if (this.table.options.ajaxURL) {\n    this.setUrl(this.table.options.ajaxURL);\n  }\n\n  if (this.table.options.ajaxProgressiveLoad) {\n    if (this.table.options.pagination) {\n      this.progressiveLoad = false;\n      console.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n    } else {\n      if (this.table.modExists(\"page\")) {\n        this.progressiveLoad = this.table.options.ajaxProgressiveLoad;\n        this.table.modules.page.initializeProgressive(this.progressiveLoad);\n      } else {\n        console.error(\"Pagination plugin is required for progressive ajax loading\");\n      }\n    }\n  }\n};\n\nAjax.prototype.createLoaderElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-loader\");\n  return el;\n};\n\nAjax.prototype.createMsgElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-loader-msg\");\n  el.setAttribute(\"role\", \"alert\");\n  return el;\n}; //set ajax params\n\n\nAjax.prototype.setParams = function (params, update) {\n  if (update) {\n    this.params = this.params || {};\n\n    for (var key in params) {\n      this.params[key] = params[key];\n    }\n  } else {\n    this.params = params;\n  }\n};\n\nAjax.prototype.getParams = function () {\n  return this.params || {};\n}; //load config object\n\n\nAjax.prototype.setConfig = function (config) {\n  this._loadDefaultConfig();\n\n  if (typeof config == \"string\") {\n    this.config.method = config;\n  } else {\n    for (var key in config) {\n      this.config[key] = config[key];\n    }\n  }\n}; //create config object from default\n\n\nAjax.prototype._loadDefaultConfig = function (force) {\n  var self = this;\n\n  if (!self.config || force) {\n    self.config = {}; //load base config from defaults\n\n    for (var key in self.defaultConfig) {\n      self.config[key] = self.defaultConfig[key];\n    }\n  }\n}; //set request url\n\n\nAjax.prototype.setUrl = function (url) {\n  this.url = url;\n}; //get request url\n\n\nAjax.prototype.getUrl = function () {\n  return this.url;\n}; //lstandard loading function\n\n\nAjax.prototype.loadData = function (inPosition, columnsChanged) {\n  var self = this;\n\n  if (this.progressiveLoad) {\n    return this._loadDataProgressive();\n  } else {\n    return this._loadDataStandard(inPosition, columnsChanged);\n  }\n};\n\nAjax.prototype.nextPage = function (diff) {\n  var margin;\n\n  if (!this.loading) {\n    margin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.getElement().clientHeight * 2;\n\n    if (diff < margin) {\n      this.table.modules.page.nextPage().then(function () {}).catch(function () {});\n    }\n  }\n};\n\nAjax.prototype.blockActiveRequest = function () {\n  this.requestOrder++;\n};\n\nAjax.prototype._loadDataProgressive = function () {\n  this.table.rowManager.setData([]);\n  return this.table.modules.page.setPage(1);\n};\n\nAjax.prototype._loadDataStandard = function (inPosition, columnsChanged) {\n  var _this42 = this;\n\n  return new Promise(function (resolve, reject) {\n    _this42.sendRequest(inPosition).then(function (data) {\n      _this42.table.rowManager.setData(data, inPosition, columnsChanged).then(function () {\n        resolve();\n      }).catch(function (e) {\n        reject(e);\n      });\n    }).catch(function (e) {\n      reject(e);\n    });\n  });\n};\n\nAjax.prototype.generateParamsList = function (data, prefix) {\n  var self = this,\n      output = [];\n  prefix = prefix || \"\";\n\n  if (Array.isArray(data)) {\n    data.forEach(function (item, i) {\n      output = output.concat(self.generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n    });\n  } else if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === \"object\") {\n    for (var key in data) {\n      output = output.concat(self.generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n    }\n  } else {\n    output.push({\n      key: prefix,\n      value: data\n    });\n  }\n\n  return output;\n};\n\nAjax.prototype.serializeParams = function (params) {\n  var output = this.generateParamsList(params),\n      encoded = [];\n  output.forEach(function (item) {\n    encoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n  });\n  return encoded.join(\"&\");\n}; //send ajax request\n\n\nAjax.prototype.sendRequest = function (silent) {\n  var _this43 = this;\n\n  var self = this,\n      url = self.url,\n      requestNo,\n      esc,\n      query;\n  self.requestOrder++;\n  requestNo = self.requestOrder;\n\n  self._loadDefaultConfig();\n\n  return new Promise(function (resolve, reject) {\n    if (self.table.options.ajaxRequesting.call(_this43.table, self.url, self.params) !== false) {\n      self.loading = true;\n\n      if (!silent) {\n        self.showLoader();\n      }\n\n      _this43.loaderPromise(url, self.config, self.params).then(function (data) {\n        if (requestNo === self.requestOrder) {\n          if (self.table.options.ajaxResponse) {\n            data = self.table.options.ajaxResponse.call(self.table, self.url, self.params, data);\n          }\n\n          resolve(data);\n          self.hideLoader();\n          self.loading = false;\n        } else {\n          console.warn(\"Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made\");\n        }\n      }).catch(function (error) {\n        console.error(\"Ajax Load Error: \", error);\n        self.table.options.ajaxError.call(self.table, error);\n        self.showError();\n        setTimeout(function () {\n          self.hideLoader();\n        }, 3000);\n        self.loading = false;\n        reject();\n      });\n    } else {\n      reject();\n    }\n  });\n};\n\nAjax.prototype.showLoader = function () {\n  var shouldLoad = typeof this.table.options.ajaxLoader === \"function\" ? this.table.options.ajaxLoader() : this.table.options.ajaxLoader;\n\n  if (shouldLoad) {\n    this.hideLoader();\n\n    while (this.msgElement.firstChild) {\n      this.msgElement.removeChild(this.msgElement.firstChild);\n    }\n\n    this.msgElement.classList.remove(\"tabulator-error\");\n    this.msgElement.classList.add(\"tabulator-loading\");\n\n    if (this.loadingElement) {\n      this.msgElement.appendChild(this.loadingElement);\n    } else {\n      this.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|loading\");\n    }\n\n    this.table.element.appendChild(this.loaderElement);\n  }\n};\n\nAjax.prototype.showError = function () {\n  this.hideLoader();\n\n  while (this.msgElement.firstChild) {\n    this.msgElement.removeChild(this.msgElement.firstChild);\n  }\n\n  this.msgElement.classList.remove(\"tabulator-loading\");\n  this.msgElement.classList.add(\"tabulator-error\");\n\n  if (this.errorElement) {\n    this.msgElement.appendChild(this.errorElement);\n  } else {\n    this.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|error\");\n  }\n\n  this.table.element.appendChild(this.loaderElement);\n};\n\nAjax.prototype.hideLoader = function () {\n  if (this.loaderElement.parentNode) {\n    this.loaderElement.parentNode.removeChild(this.loaderElement);\n  }\n}; //default ajax config object\n\n\nAjax.prototype.defaultConfig = {\n  method: \"GET\"\n};\n\nAjax.prototype.defaultURLGenerator = function (url, config, params) {\n  if (url) {\n    if (params && Object.keys(params).length) {\n      if (!config.method || config.method.toLowerCase() == \"get\") {\n        config.method = \"get\";\n        url += (url.includes(\"?\") ? \"&\" : \"?\") + this.serializeParams(params);\n      }\n    }\n  }\n\n  return url;\n};\n\nAjax.prototype.defaultLoaderPromise = function (url, config, params) {\n  var self = this,\n      contentType;\n  return new Promise(function (resolve, reject) {\n    //set url\n    url = self.urlGenerator(url, config, params); //set body content if not GET request\n\n    if (config.method.toUpperCase() != \"GET\") {\n      contentType = _typeof(self.table.options.ajaxContentType) === \"object\" ? self.table.options.ajaxContentType : self.contentTypeFormatters[self.table.options.ajaxContentType];\n\n      if (contentType) {\n        for (var key in contentType.headers) {\n          if (!config.headers) {\n            config.headers = {};\n          }\n\n          if (typeof config.headers[key] === \"undefined\") {\n            config.headers[key] = contentType.headers[key];\n          }\n        }\n\n        config.body = contentType.body.call(self, url, config, params);\n      } else {\n        console.warn(\"Ajax Error - Invalid ajaxContentType value:\", self.table.options.ajaxContentType);\n      }\n    }\n\n    if (url) {\n      //configure headers\n      if (typeof config.headers === \"undefined\") {\n        config.headers = {};\n      }\n\n      if (typeof config.headers.Accept === \"undefined\") {\n        config.headers.Accept = \"application/json\";\n      }\n\n      if (typeof config.headers[\"X-Requested-With\"] === \"undefined\") {\n        config.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n      }\n\n      if (typeof config.mode === \"undefined\") {\n        config.mode = \"cors\";\n      }\n\n      if (config.mode == \"cors\") {\n        if (typeof config.headers[\"Access-Control-Allow-Origin\"] === \"undefined\") {\n          config.headers[\"Access-Control-Allow-Origin\"] = window.location.origin;\n        }\n\n        if (typeof config.credentials === \"undefined\") {\n          config.credentials = 'same-origin';\n        }\n      } else {\n        if (typeof config.credentials === \"undefined\") {\n          config.credentials = 'include';\n        }\n      } //send request\n\n\n      fetch(url, config).then(function (response) {\n        if (response.ok) {\n          response.json().then(function (data) {\n            resolve(data);\n          }).catch(function (error) {\n            reject(error);\n            console.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n          });\n        } else {\n          console.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n          reject(response);\n        }\n      }).catch(function (error) {\n        console.error(\"Ajax Load Error - Connection Error: \", error);\n        reject(error);\n      });\n    } else {\n      console.warn(\"Ajax Load Error - No URL Set\");\n      resolve([]);\n    }\n  });\n};\n\nAjax.prototype.contentTypeFormatters = {\n  \"json\": {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: function body(url, config, params) {\n      return JSON.stringify(params);\n    }\n  },\n  \"form\": {\n    headers: {},\n    body: function body(url, config, params) {\n      var output = this.generateParamsList(params),\n          form = new FormData();\n      output.forEach(function (item) {\n        form.append(item.key, item.value);\n      });\n      return form;\n    }\n  }\n};\nTabulator.prototype.registerModule(\"ajax\", Ajax); //public calc object\n\nvar CalcComponent = function CalcComponent(row) {\n  this._row = row;\n};\n\nCalcComponent.prototype.getData = function (transform) {\n  return this._row.getData(transform);\n};\n\nCalcComponent.prototype.getElement = function () {\n  return this._row.getElement();\n};\n\nCalcComponent.prototype.getTable = function () {\n  return this._row.table;\n};\n\nCalcComponent.prototype.getCells = function () {\n  var cells = [];\n\n  this._row.getCells().forEach(function (cell) {\n    cells.push(cell.getComponent());\n  });\n\n  return cells;\n};\n\nCalcComponent.prototype.getCell = function (column) {\n  var cell = this._row.getCell(column);\n\n  return cell ? cell.getComponent() : false;\n};\n\nCalcComponent.prototype._getSelf = function () {\n  return this._row;\n};\n\nvar ColumnCalcs = function ColumnCalcs(table) {\n  this.table = table; //hold Tabulator object\n\n  this.topCalcs = [];\n  this.botCalcs = [];\n  this.genColumn = false;\n  this.topElement = this.createElement();\n  this.botElement = this.createElement();\n  this.topRow = false;\n  this.botRow = false;\n  this.topInitialized = false;\n  this.botInitialized = false;\n  this.initialize();\n};\n\nColumnCalcs.prototype.createElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-calcs-holder\");\n  return el;\n};\n\nColumnCalcs.prototype.initialize = function () {\n  this.genColumn = new Column({\n    field: \"value\"\n  }, this);\n}; //dummy functions to handle being mock column manager\n\n\nColumnCalcs.prototype.registerColumnField = function () {}; //initialize column calcs\n\n\nColumnCalcs.prototype.initializeColumn = function (column) {\n  var def = column.definition;\n  var config = {\n    topCalcParams: def.topCalcParams || {},\n    botCalcParams: def.bottomCalcParams || {}\n  };\n\n  if (def.topCalc) {\n    switch (_typeof(def.topCalc)) {\n      case \"string\":\n        if (this.calculations[def.topCalc]) {\n          config.topCalc = this.calculations[def.topCalc];\n        } else {\n          console.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n        }\n\n        break;\n\n      case \"function\":\n        config.topCalc = def.topCalc;\n        break;\n    }\n\n    if (config.topCalc) {\n      column.modules.columnCalcs = config;\n      this.topCalcs.push(column);\n\n      if (this.table.options.columnCalcs != \"group\") {\n        this.initializeTopRow();\n      }\n    }\n  }\n\n  if (def.bottomCalc) {\n    switch (_typeof(def.bottomCalc)) {\n      case \"string\":\n        if (this.calculations[def.bottomCalc]) {\n          config.botCalc = this.calculations[def.bottomCalc];\n        } else {\n          console.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n        }\n\n        break;\n\n      case \"function\":\n        config.botCalc = def.bottomCalc;\n        break;\n    }\n\n    if (config.botCalc) {\n      column.modules.columnCalcs = config;\n      this.botCalcs.push(column);\n\n      if (this.table.options.columnCalcs != \"group\") {\n        this.initializeBottomRow();\n      }\n    }\n  }\n};\n\nColumnCalcs.prototype.removeCalcs = function () {\n  var changed = false;\n\n  if (this.topInitialized) {\n    this.topInitialized = false;\n    this.topElement.parentNode.removeChild(this.topElement);\n    changed = true;\n  }\n\n  if (this.botInitialized) {\n    this.botInitialized = false;\n    this.table.footerManager.remove(this.botElement);\n    changed = true;\n  }\n\n  if (changed) {\n    this.table.rowManager.adjustTableSize();\n  }\n};\n\nColumnCalcs.prototype.initializeTopRow = function () {\n  if (!this.topInitialized) {\n    // this.table.columnManager.headersElement.after(this.topElement);\n    this.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n    this.topInitialized = true;\n  }\n};\n\nColumnCalcs.prototype.initializeBottomRow = function () {\n  if (!this.botInitialized) {\n    this.table.footerManager.prepend(this.botElement);\n    this.botInitialized = true;\n  }\n};\n\nColumnCalcs.prototype.scrollHorizontal = function (left) {\n  var hozAdjust = 0,\n      scrollWidth = this.table.columnManager.getElement().scrollWidth - this.table.element.clientWidth;\n\n  if (this.botInitialized && this.botRow) {\n    this.botRow.getElement().style.marginLeft = -left + \"px\";\n  }\n};\n\nColumnCalcs.prototype.recalc = function (rows) {\n  var data, row;\n\n  if (this.topInitialized || this.botInitialized) {\n    data = this.rowsToData(rows);\n\n    if (this.topInitialized) {\n      if (this.topRow) {\n        this.topRow.deleteCells();\n      }\n\n      row = this.generateRow(\"top\", this.rowsToData(rows));\n      this.topRow = row;\n\n      while (this.topElement.firstChild) {\n        this.topElement.removeChild(this.topElement.firstChild);\n      }\n\n      this.topElement.appendChild(row.getElement());\n      row.initialize(true);\n    }\n\n    if (this.botInitialized) {\n      if (this.botRow) {\n        this.botRow.deleteCells();\n      }\n\n      row = this.generateRow(\"bottom\", this.rowsToData(rows));\n      this.botRow = row;\n\n      while (this.botElement.firstChild) {\n        this.botElement.removeChild(this.botElement.firstChild);\n      }\n\n      this.botElement.appendChild(row.getElement());\n      row.initialize(true);\n    }\n\n    this.table.rowManager.adjustTableSize(); //set resizable handles\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.layout();\n    }\n  }\n};\n\nColumnCalcs.prototype.recalcRowGroup = function (row) {\n  this.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n};\n\nColumnCalcs.prototype.recalcAll = function () {\n  var _this44 = this;\n\n  if (this.topCalcs.length || this.botCalcs.length) {\n    if (this.table.options.columnCalcs !== \"group\") {\n      this.recalc(this.table.rowManager.activeRows);\n    }\n\n    if (this.table.options.groupBy && this.table.options.columnCalcs !== \"table\") {\n      var groups = table.modules.groupRows.getChildGroups();\n      groups.forEach(function (group) {\n        _this44.recalcGroup(group);\n      });\n    }\n  }\n};\n\nColumnCalcs.prototype.recalcGroup = function (group) {\n  var data, rowData;\n\n  if (group) {\n    if (group.calcs) {\n      if (group.calcs.bottom) {\n        data = this.rowsToData(group.rows);\n        rowData = this.generateRowData(\"bottom\", data);\n        group.calcs.bottom.updateData(rowData);\n        group.calcs.bottom.reinitialize();\n      }\n\n      if (group.calcs.top) {\n        data = this.rowsToData(group.rows);\n        rowData = this.generateRowData(\"top\", data);\n        group.calcs.top.updateData(rowData);\n        group.calcs.top.reinitialize();\n      }\n    }\n  }\n}; //generate top stats row\n\n\nColumnCalcs.prototype.generateTopRow = function (rows) {\n  return this.generateRow(\"top\", this.rowsToData(rows));\n}; //generate bottom stats row\n\n\nColumnCalcs.prototype.generateBottomRow = function (rows) {\n  return this.generateRow(\"bottom\", this.rowsToData(rows));\n};\n\nColumnCalcs.prototype.rowsToData = function (rows) {\n  var _this45 = this;\n\n  var data = [];\n  rows.forEach(function (row) {\n    data.push(row.getData());\n\n    if (_this45.table.options.dataTree && _this45.table.options.dataTreeChildColumnCalcs) {\n      if (row.modules.dataTree.open) {\n        var children = _this45.rowsToData(_this45.table.modules.dataTree.getFilteredTreeChildren(row));\n\n        data = data.concat(children);\n      }\n    }\n  });\n  return data;\n}; //generate stats row\n\n\nColumnCalcs.prototype.generateRow = function (pos, data) {\n  var self = this,\n      rowData = this.generateRowData(pos, data),\n      row;\n\n  if (self.table.modExists(\"mutator\")) {\n    self.table.modules.mutator.disable();\n  }\n\n  row = new Row(rowData, this, \"calc\");\n\n  if (self.table.modExists(\"mutator\")) {\n    self.table.modules.mutator.enable();\n  }\n\n  row.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n  row.component = false;\n\n  row.getComponent = function () {\n    if (!this.component) {\n      this.component = new CalcComponent(this);\n    }\n\n    return this.component;\n  };\n\n  row.generateCells = function () {\n    var cells = [];\n    self.table.columnManager.columnsByIndex.forEach(function (column) {\n      //set field name of mock column\n      self.genColumn.setField(column.getField());\n      self.genColumn.hozAlign = column.hozAlign;\n\n      if (column.definition[pos + \"CalcFormatter\"] && self.table.modExists(\"format\")) {\n        self.genColumn.modules.format = {\n          formatter: self.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n          params: column.definition[pos + \"CalcFormatterParams\"] || {}\n        };\n      } else {\n        self.genColumn.modules.format = {\n          formatter: self.table.modules.format.getFormatter(\"plaintext\"),\n          params: {}\n        };\n      } //ensure css class defintion is replicated to calculation cell\n\n\n      self.genColumn.definition.cssClass = column.definition.cssClass; //generate cell and assign to correct column\n\n      var cell = new Cell(self.genColumn, row);\n      cell.getElement();\n      cell.column = column;\n      cell.setWidth();\n      column.cells.push(cell);\n      cells.push(cell);\n\n      if (!column.visible) {\n        cell.hide();\n      }\n    });\n    this.cells = cells;\n  };\n\n  return row;\n}; //generate stats row\n\n\nColumnCalcs.prototype.generateRowData = function (pos, data) {\n  var rowData = {},\n      calcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n      type = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n      params,\n      paramKey;\n  calcs.forEach(function (column) {\n    var values = [];\n\n    if (column.modules.columnCalcs && column.modules.columnCalcs[type]) {\n      data.forEach(function (item) {\n        values.push(column.getFieldValue(item));\n      });\n      paramKey = type + \"Params\";\n      params = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n      column.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n    }\n  });\n  return rowData;\n};\n\nColumnCalcs.prototype.hasTopCalcs = function () {\n  return !!this.topCalcs.length;\n};\n\nColumnCalcs.prototype.hasBottomCalcs = function () {\n  return !!this.botCalcs.length;\n}; //handle table redraw\n\n\nColumnCalcs.prototype.redraw = function () {\n  if (this.topRow) {\n    this.topRow.normalizeHeight(true);\n  }\n\n  if (this.botRow) {\n    this.botRow.normalizeHeight(true);\n  }\n}; //return the calculated\n\n\nColumnCalcs.prototype.getResults = function () {\n  var self = this,\n      results = {},\n      groups;\n\n  if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n    groups = this.table.modules.groupRows.getGroups(true);\n    groups.forEach(function (group) {\n      results[group.getKey()] = self.getGroupResults(group);\n    });\n  } else {\n    results = {\n      top: this.topRow ? this.topRow.getData() : {},\n      bottom: this.botRow ? this.botRow.getData() : {}\n    };\n  }\n\n  return results;\n}; //get results from a group\n\n\nColumnCalcs.prototype.getGroupResults = function (group) {\n  var self = this,\n      groupObj = group._getSelf(),\n      subGroups = group.getSubGroups(),\n      subGroupResults = {},\n      results = {};\n\n  subGroups.forEach(function (subgroup) {\n    subGroupResults[subgroup.getKey()] = self.getGroupResults(subgroup);\n  });\n  results = {\n    top: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n    bottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n    groups: subGroupResults\n  };\n  return results;\n}; //default calculations\n\n\nColumnCalcs.prototype.calculations = {\n  \"avg\": function avg(values, data, calcParams) {\n    var output = 0,\n        precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n    if (values.length) {\n      output = values.reduce(function (sum, value) {\n        value = Number(value);\n        return sum + value;\n      });\n      output = output / values.length;\n      output = precision !== false ? output.toFixed(precision) : output;\n    }\n\n    return parseFloat(output).toString();\n  },\n  \"max\": function max(values, data, calcParams) {\n    var output = null,\n        precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n    values.forEach(function (value) {\n      value = Number(value);\n\n      if (value > output || output === null) {\n        output = value;\n      }\n    });\n    return output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n  },\n  \"min\": function min(values, data, calcParams) {\n    var output = null,\n        precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n    values.forEach(function (value) {\n      value = Number(value);\n\n      if (value < output || output === null) {\n        output = value;\n      }\n    });\n    return output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n  },\n  \"sum\": function sum(values, data, calcParams) {\n    var output = 0,\n        precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n    if (values.length) {\n      values.forEach(function (value) {\n        value = Number(value);\n        output += !isNaN(value) ? Number(value) : 0;\n      });\n    }\n\n    return precision !== false ? output.toFixed(precision) : output;\n  },\n  \"concat\": function concat(values, data, calcParams) {\n    var output = 0;\n\n    if (values.length) {\n      output = values.reduce(function (sum, value) {\n        return String(sum) + String(value);\n      });\n    }\n\n    return output;\n  },\n  \"count\": function count(values, data, calcParams) {\n    var output = 0;\n\n    if (values.length) {\n      values.forEach(function (value) {\n        if (value) {\n          output++;\n        }\n      });\n    }\n\n    return output;\n  }\n};\nTabulator.prototype.registerModule(\"columnCalcs\", ColumnCalcs);\n\nvar Clipboard = function Clipboard(table) {\n  this.table = table;\n  this.mode = true;\n\n  this.pasteParser = function () {};\n\n  this.pasteAction = function () {};\n\n  this.customSelection = false;\n  this.rowRange = false;\n  this.blocked = true; //block copy actions not originating from this command\n};\n\nClipboard.prototype.initialize = function () {\n  var _this46 = this;\n\n  this.mode = this.table.options.clipboard;\n  this.rowRange = this.table.options.clipboardCopyRowRange;\n\n  if (this.mode === true || this.mode === \"copy\") {\n    this.table.element.addEventListener(\"copy\", function (e) {\n      var plain, html, list;\n\n      if (!_this46.blocked) {\n        e.preventDefault();\n\n        if (_this46.customSelection) {\n          plain = _this46.customSelection;\n\n          if (_this46.table.options.clipboardCopyFormatter) {\n            plain = _this46.table.options.clipboardCopyFormatter(\"plain\", plain);\n          }\n        } else {\n          var list = _this46.table.modules.export.generateExportList(_this46.rowRange, _this46.table.options.clipboardCopyStyled, _this46.table.options.clipboardCopyConfig, \"clipboard\");\n\n          html = _this46.table.modules.export.genereateHTMLTable(list);\n          plain = html ? _this46.generatePlainContent(list) : \"\";\n\n          if (_this46.table.options.clipboardCopyFormatter) {\n            plain = _this46.table.options.clipboardCopyFormatter(\"plain\", plain);\n            html = _this46.table.options.clipboardCopyFormatter(\"html\", html);\n          }\n        }\n\n        if (window.clipboardData && window.clipboardData.setData) {\n          window.clipboardData.setData('Text', plain);\n        } else if (e.clipboardData && e.clipboardData.setData) {\n          e.clipboardData.setData('text/plain', plain);\n\n          if (html) {\n            e.clipboardData.setData('text/html', html);\n          }\n        } else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n          e.originalEvent.clipboardData.setData('text/plain', plain);\n\n          if (html) {\n            e.originalEvent.clipboardData.setData('text/html', html);\n          }\n        }\n\n        _this46.table.options.clipboardCopied.call(_this46.table, plain, html);\n\n        _this46.reset();\n      }\n    });\n  }\n\n  if (this.mode === true || this.mode === \"paste\") {\n    this.table.element.addEventListener(\"paste\", function (e) {\n      _this46.paste(e);\n    });\n  }\n\n  this.setPasteParser(this.table.options.clipboardPasteParser);\n  this.setPasteAction(this.table.options.clipboardPasteAction);\n};\n\nClipboard.prototype.reset = function () {\n  this.blocked = false;\n  this.originalSelectionText = \"\";\n};\n\nClipboard.prototype.generatePlainContent = function (list) {\n  var output = [];\n  list.forEach(function (row) {\n    var rowData = [];\n    row.columns.forEach(function (col) {\n      var value = \"\";\n\n      if (col) {\n        if (row.type === \"group\") {\n          col.value = col.component.getKey();\n        }\n\n        if (col.value === null) {\n          value = \"\";\n        } else {\n          switch (_typeof(col.value)) {\n            case \"object\":\n              value = JSON.stringify(col.value);\n              break;\n\n            case \"undefined\":\n              value = \"\";\n              break;\n\n            default:\n              value = col.value;\n          }\n        }\n      }\n\n      rowData.push(value);\n    });\n    output.push(rowData.join(\"\\t\"));\n  });\n  return output.join(\"\\n\");\n};\n\nClipboard.prototype.copy = function (range, internal) {\n  var range, sel, textRange;\n  this.blocked = false;\n  this.customSelection = false;\n\n  if (this.mode === true || this.mode === \"copy\") {\n    this.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n    if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n      range = document.createRange();\n      range.selectNodeContents(this.table.element);\n      sel = window.getSelection();\n\n      if (sel.toString() && internal) {\n        this.customSelection = sel.toString();\n      }\n\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n      textRange = document.body.createTextRange();\n      textRange.moveToElementText(this.table.element);\n      textRange.select();\n    }\n\n    document.execCommand('copy');\n\n    if (sel) {\n      sel.removeAllRanges();\n    }\n  }\n}; //PASTE EVENT HANDLING\n\n\nClipboard.prototype.setPasteAction = function (action) {\n  switch (typeof action === 'undefined' ? 'undefined' : _typeof(action)) {\n    case \"string\":\n      this.pasteAction = this.pasteActions[action];\n\n      if (!this.pasteAction) {\n        console.warn(\"Clipboard Error - No such paste action found:\", action);\n      }\n\n      break;\n\n    case \"function\":\n      this.pasteAction = action;\n      break;\n  }\n};\n\nClipboard.prototype.setPasteParser = function (parser) {\n  switch (typeof parser === 'undefined' ? 'undefined' : _typeof(parser)) {\n    case \"string\":\n      this.pasteParser = this.pasteParsers[parser];\n\n      if (!this.pasteParser) {\n        console.warn(\"Clipboard Error - No such paste parser found:\", parser);\n      }\n\n      break;\n\n    case \"function\":\n      this.pasteParser = parser;\n      break;\n  }\n};\n\nClipboard.prototype.paste = function (e) {\n  var data, rowData, rows;\n\n  if (this.checkPaseOrigin(e)) {\n    data = this.getPasteData(e);\n    rowData = this.pasteParser.call(this, data);\n\n    if (rowData) {\n      e.preventDefault();\n\n      if (this.table.modExists(\"mutator\")) {\n        rowData = this.mutateData(rowData);\n      }\n\n      rows = this.pasteAction.call(this, rowData);\n      this.table.options.clipboardPasted.call(this.table, data, rowData, rows);\n    } else {\n      this.table.options.clipboardPasteError.call(this.table, data);\n    }\n  }\n};\n\nClipboard.prototype.mutateData = function (data) {\n  var self = this,\n      output = [];\n\n  if (Array.isArray(data)) {\n    data.forEach(function (row) {\n      output.push(self.table.modules.mutator.transformRow(row, \"clipboard\"));\n    });\n  } else {\n    output = data;\n  }\n\n  return output;\n};\n\nClipboard.prototype.checkPaseOrigin = function (e) {\n  var valid = true;\n\n  if (e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell) {\n    valid = false;\n  }\n\n  return valid;\n};\n\nClipboard.prototype.getPasteData = function (e) {\n  var data;\n\n  if (window.clipboardData && window.clipboardData.getData) {\n    data = window.clipboardData.getData('Text');\n  } else if (e.clipboardData && e.clipboardData.getData) {\n    data = e.clipboardData.getData('text/plain');\n  } else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n    data = e.originalEvent.clipboardData.getData('text/plain');\n  }\n\n  return data;\n};\n\nClipboard.prototype.pasteParsers = {\n  table: function table(clipboard) {\n    var data = [],\n        success = false,\n        headerFindSuccess = true,\n        columns = this.table.columnManager.columns,\n        columnMap = [],\n        rows = []; //get data from clipboard into array of columns and rows.\n\n    clipboard = clipboard.split(\"\\n\");\n    clipboard.forEach(function (row) {\n      data.push(row.split(\"\\t\"));\n    });\n\n    if (data.length && !(data.length === 1 && data[0].length < 2)) {\n      success = true; //check if headers are present by title\n\n      data[0].forEach(function (value) {\n        var column = columns.find(function (column) {\n          return value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n        });\n\n        if (column) {\n          columnMap.push(column);\n        } else {\n          headerFindSuccess = false;\n        }\n      }); //check if column headers are present by field\n\n      if (!headerFindSuccess) {\n        headerFindSuccess = true;\n        columnMap = [];\n        data[0].forEach(function (value) {\n          var column = columns.find(function (column) {\n            return value && column.field && value.trim() && column.field.trim() === value.trim();\n          });\n\n          if (column) {\n            columnMap.push(column);\n          } else {\n            headerFindSuccess = false;\n          }\n        });\n\n        if (!headerFindSuccess) {\n          columnMap = this.table.columnManager.columnsByIndex;\n        }\n      } //remove header row if found\n\n\n      if (headerFindSuccess) {\n        data.shift();\n      }\n\n      data.forEach(function (item) {\n        var row = {};\n        item.forEach(function (value, i) {\n          if (columnMap[i]) {\n            row[columnMap[i].field] = value;\n          }\n        });\n        rows.push(row);\n      });\n      return rows;\n    } else {\n      return false;\n    }\n  }\n};\nClipboard.prototype.pasteActions = {\n  replace: function replace(rows) {\n    return this.table.setData(rows);\n  },\n  update: function update(rows) {\n    return this.table.updateOrAddData(rows);\n  },\n  insert: function insert(rows) {\n    return this.table.addData(rows);\n  }\n};\nTabulator.prototype.registerModule(\"clipboard\", Clipboard);\n\nvar DataTree = function DataTree(table) {\n  this.table = table;\n  this.indent = 10;\n  this.field = \"\";\n  this.collapseEl = null;\n  this.expandEl = null;\n  this.branchEl = null;\n  this.elementField = false;\n\n  this.startOpen = function () {};\n\n  this.displayIndex = 0;\n};\n\nDataTree.prototype.initialize = function () {\n  var dummyEl = null,\n      firstCol = this.table.columnManager.getFirstVisibileColumn(),\n      options = this.table.options;\n  this.field = options.dataTreeChildField;\n  this.indent = options.dataTreeChildIndent;\n  this.elementField = options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\n  if (options.dataTreeBranchElement) {\n    if (options.dataTreeBranchElement === true) {\n      this.branchEl = document.createElement(\"div\");\n      this.branchEl.classList.add(\"tabulator-data-tree-branch\");\n    } else {\n      if (typeof options.dataTreeBranchElement === \"string\") {\n        dummyEl = document.createElement(\"div\");\n        dummyEl.innerHTML = options.dataTreeBranchElement;\n        this.branchEl = dummyEl.firstChild;\n      } else {\n        this.branchEl = options.dataTreeBranchElement;\n      }\n    }\n  }\n\n  if (options.dataTreeCollapseElement) {\n    if (typeof options.dataTreeCollapseElement === \"string\") {\n      dummyEl = document.createElement(\"div\");\n      dummyEl.innerHTML = options.dataTreeCollapseElement;\n      this.collapseEl = dummyEl.firstChild;\n    } else {\n      this.collapseEl = options.dataTreeCollapseElement;\n    }\n  } else {\n    this.collapseEl = document.createElement(\"div\");\n    this.collapseEl.classList.add(\"tabulator-data-tree-control\");\n    this.collapseEl.tabIndex = 0;\n    this.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n  }\n\n  if (options.dataTreeExpandElement) {\n    if (typeof options.dataTreeExpandElement === \"string\") {\n      dummyEl = document.createElement(\"div\");\n      dummyEl.innerHTML = options.dataTreeExpandElement;\n      this.expandEl = dummyEl.firstChild;\n    } else {\n      this.expandEl = options.dataTreeExpandElement;\n    }\n  } else {\n    this.expandEl = document.createElement(\"div\");\n    this.expandEl.classList.add(\"tabulator-data-tree-control\");\n    this.expandEl.tabIndex = 0;\n    this.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n  }\n\n  switch (_typeof(options.dataTreeStartExpanded)) {\n    case \"boolean\":\n      this.startOpen = function (row, index) {\n        return options.dataTreeStartExpanded;\n      };\n\n      break;\n\n    case \"function\":\n      this.startOpen = options.dataTreeStartExpanded;\n      break;\n\n    default:\n      this.startOpen = function (row, index) {\n        return options.dataTreeStartExpanded[index];\n      };\n\n      break;\n  }\n};\n\nDataTree.prototype.initializeRow = function (row) {\n  var childArray = row.getData()[this.field];\n  var isArray = Array.isArray(childArray);\n  var children = isArray || !isArray && (typeof childArray === 'undefined' ? 'undefined' : _typeof(childArray)) === \"object\" && childArray !== null;\n\n  if (!children && row.modules.dataTree && row.modules.dataTree.branchEl) {\n    row.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n  }\n\n  if (!children && row.modules.dataTree && row.modules.dataTree.controlEl) {\n    row.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n  }\n\n  row.modules.dataTree = {\n    index: row.modules.dataTree ? row.modules.dataTree.index : 0,\n    open: children ? row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0) : false,\n    controlEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n    branchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n    parent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n    children: children\n  };\n};\n\nDataTree.prototype.layoutRow = function (row) {\n  var cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n      el = cell.getElement(),\n      config = row.modules.dataTree;\n\n  if (config.branchEl) {\n    if (config.branchEl.parentNode) {\n      config.branchEl.parentNode.removeChild(config.branchEl);\n    }\n\n    config.branchEl = false;\n  }\n\n  if (config.controlEl) {\n    if (config.controlEl.parentNode) {\n      config.controlEl.parentNode.removeChild(config.controlEl);\n    }\n\n    config.controlEl = false;\n  }\n\n  this.generateControlElement(row, el);\n  row.element.classList.add(\"tabulator-tree-level-\" + config.index);\n\n  if (config.index) {\n    if (this.branchEl) {\n      config.branchEl = this.branchEl.cloneNode(true);\n      el.insertBefore(config.branchEl, el.firstChild);\n\n      if (this.table.rtl) {\n        config.branchEl.style.marginRight = (config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1) + config.index * this.indent + \"px\";\n      } else {\n        config.branchEl.style.marginLeft = (config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1) + config.index * this.indent + \"px\";\n      }\n    } else {\n      if (this.table.rtl) {\n        el.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + config.index * this.indent + \"px\";\n      } else {\n        el.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + config.index * this.indent + \"px\";\n      }\n    }\n  }\n};\n\nDataTree.prototype.generateControlElement = function (row, el) {\n  var _this47 = this;\n\n  var config = row.modules.dataTree,\n      el = el || row.getCells()[0].getElement(),\n      oldControl = config.controlEl;\n\n  if (config.children !== false) {\n    if (config.open) {\n      config.controlEl = this.collapseEl.cloneNode(true);\n      config.controlEl.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n\n        _this47.collapseRow(row);\n      });\n    } else {\n      config.controlEl = this.expandEl.cloneNode(true);\n      config.controlEl.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n\n        _this47.expandRow(row);\n      });\n    }\n\n    config.controlEl.addEventListener(\"mousedown\", function (e) {\n      e.stopPropagation();\n    });\n\n    if (oldControl && oldControl.parentNode === el) {\n      oldControl.parentNode.replaceChild(config.controlEl, oldControl);\n    } else {\n      el.insertBefore(config.controlEl, el.firstChild);\n    }\n  }\n};\n\nDataTree.prototype.setDisplayIndex = function (index) {\n  this.displayIndex = index;\n};\n\nDataTree.prototype.getDisplayIndex = function () {\n  return this.displayIndex;\n};\n\nDataTree.prototype.getRows = function (rows) {\n  var _this48 = this;\n\n  var output = [];\n  rows.forEach(function (row, i) {\n    var config, children;\n    output.push(row);\n\n    if (row instanceof Row) {\n      config = row.modules.dataTree.children;\n\n      if (!config.index && config.children !== false) {\n        children = _this48.getChildren(row);\n        children.forEach(function (child) {\n          output.push(child);\n        });\n      }\n    }\n  });\n  return output;\n};\n\nDataTree.prototype.getChildren = function (row) {\n  var _this49 = this;\n\n  var config = row.modules.dataTree,\n      children = [],\n      output = [];\n\n  if (config.children !== false && config.open) {\n    if (!Array.isArray(config.children)) {\n      config.children = this.generateChildren(row);\n    }\n\n    if (this.table.modExists(\"filter\") && this.table.options.dataTreeFilter) {\n      children = this.table.modules.filter.filter(config.children);\n    } else {\n      children = config.children;\n    }\n\n    if (this.table.modExists(\"sort\") && this.table.options.dataTreeSort) {\n      this.table.modules.sort.sort(children);\n    }\n\n    children.forEach(function (child) {\n      output.push(child);\n\n      var subChildren = _this49.getChildren(child);\n\n      subChildren.forEach(function (sub) {\n        output.push(sub);\n      });\n    });\n  }\n\n  return output;\n};\n\nDataTree.prototype.generateChildren = function (row) {\n  var _this50 = this;\n\n  var children = [];\n  var childArray = row.getData()[this.field];\n\n  if (!Array.isArray(childArray)) {\n    childArray = [childArray];\n  }\n\n  childArray.forEach(function (childData) {\n    var childRow = new Row(childData || {}, _this50.table.rowManager);\n    childRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n    childRow.modules.dataTree.parent = row;\n\n    if (childRow.modules.dataTree.children) {\n      childRow.modules.dataTree.open = _this50.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n    }\n\n    children.push(childRow);\n  });\n  return children;\n};\n\nDataTree.prototype.expandRow = function (row, silent) {\n  var config = row.modules.dataTree;\n\n  if (config.children !== false) {\n    config.open = true;\n    row.reinitialize();\n    this.table.rowManager.refreshActiveData(\"tree\", false, true);\n    this.table.options.dataTreeRowExpanded(row.getComponent(), row.modules.dataTree.index);\n  }\n};\n\nDataTree.prototype.collapseRow = function (row) {\n  var config = row.modules.dataTree;\n\n  if (config.children !== false) {\n    config.open = false;\n    row.reinitialize();\n    this.table.rowManager.refreshActiveData(\"tree\", false, true);\n    this.table.options.dataTreeRowCollapsed(row.getComponent(), row.modules.dataTree.index);\n  }\n};\n\nDataTree.prototype.toggleRow = function (row) {\n  var config = row.modules.dataTree;\n\n  if (config.children !== false) {\n    if (config.open) {\n      this.collapseRow(row);\n    } else {\n      this.expandRow(row);\n    }\n  }\n};\n\nDataTree.prototype.getTreeParent = function (row) {\n  return row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n};\n\nDataTree.prototype.getFilteredTreeChildren = function (row) {\n  var config = row.modules.dataTree,\n      output = [],\n      children;\n\n  if (config.children) {\n    if (!Array.isArray(config.children)) {\n      config.children = this.generateChildren(row);\n    }\n\n    if (this.table.modExists(\"filter\") && this.table.options.dataTreeFilter) {\n      children = this.table.modules.filter.filter(config.children);\n    } else {\n      children = config.children;\n    }\n\n    children.forEach(function (childRow) {\n      if (childRow instanceof Row) {\n        output.push(childRow);\n      }\n    });\n  }\n\n  return output;\n};\n\nDataTree.prototype.rowDelete = function (row) {\n  var parent = row.modules.dataTree.parent,\n      childIndex;\n\n  if (parent) {\n    childIndex = this.findChildIndex(row, parent);\n\n    if (childIndex !== false) {\n      parent.data[this.field].splice(childIndex, 1);\n    }\n\n    if (!parent.data[this.field].length) {\n      delete parent.data[this.field];\n    }\n\n    this.initializeRow(parent);\n    this.layoutRow(parent);\n  }\n\n  this.table.rowManager.refreshActiveData(\"tree\", false, true);\n};\n\nDataTree.prototype.addTreeChildRow = function (row, data, top, index) {\n  var childIndex = false;\n\n  if (typeof data === \"string\") {\n    data = JSON.parse(data);\n  }\n\n  if (!Array.isArray(row.data[this.field])) {\n    row.data[this.field] = [];\n    row.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n  }\n\n  if (typeof index !== \"undefined\") {\n    childIndex = this.findChildIndex(index, row);\n\n    if (childIndex !== false) {\n      row.data[this.field].splice(top ? childIndex : childIndex + 1, 0, data);\n    }\n  }\n\n  if (childIndex === false) {\n    if (top) {\n      row.data[this.field].unshift(data);\n    } else {\n      row.data[this.field].push(data);\n    }\n  }\n\n  this.initializeRow(row);\n  this.layoutRow(row);\n  this.table.rowManager.refreshActiveData(\"tree\", false, true);\n};\n\nDataTree.prototype.findChildIndex = function (subject, parent) {\n  var _this51 = this;\n\n  var match = false;\n\n  if ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n    if (subject instanceof Row) {\n      //subject is row element\n      match = subject.data;\n    } else if (subject instanceof RowComponent) {\n      //subject is public row component\n      match = subject._getSelf().data;\n    } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n      if (parent.modules.dataTree) {\n        match = parent.modules.dataTree.children.find(function (childRow) {\n          return childRow instanceof Row ? childRow.element === subject : false;\n        });\n\n        if (match) {\n          match = match.data;\n        }\n      }\n    }\n  } else if (typeof subject == \"undefined\" || subject === null) {\n    match = false;\n  } else {\n    //subject should be treated as the index of the row\n    match = parent.data[this.field].find(function (row) {\n      return row.data[_this51.table.options.index] == subject;\n    });\n  }\n\n  if (match) {\n    if (Array.isArray(parent.data[this.field])) {\n      match = parent.data[this.field].indexOf(match);\n    }\n\n    if (match == -1) {\n      match = false;\n    }\n  } //catch all for any other type of input\n\n\n  return match;\n};\n\nDataTree.prototype.getTreeChildren = function (row, component, recurse) {\n  var _this52 = this;\n\n  var config = row.modules.dataTree,\n      output = [];\n\n  if (config.children) {\n    if (!Array.isArray(config.children)) {\n      config.children = this.generateChildren(row);\n    }\n\n    config.children.forEach(function (childRow) {\n      if (childRow instanceof Row) {\n        output.push(component ? childRow.getComponent() : childRow);\n\n        if (recurse) {\n          output = output.concat(_this52.getTreeChildren(childRow, component, recurse));\n        }\n      }\n    });\n  }\n\n  return output;\n};\n\nDataTree.prototype.checkForRestyle = function (cell) {\n  if (!cell.row.cells.indexOf(cell)) {\n    cell.row.reinitialize();\n  }\n};\n\nDataTree.prototype.getChildField = function () {\n  return this.field;\n};\n\nDataTree.prototype.redrawNeeded = function (data) {\n  return (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n};\n\nTabulator.prototype.registerModule(\"dataTree\", DataTree);\n\nvar Download = function Download(table) {\n  this.table = table; //hold Tabulator object\n}; //trigger file download\n\n\nDownload.prototype.download = function (type, filename, options, range, interceptCallback) {\n  var self = this,\n      downloadFunc = false;\n\n  function buildLink(data, mime) {\n    if (interceptCallback) {\n      if (interceptCallback === true) {\n        self.triggerDownload(data, mime, type, filename, true);\n      } else {\n        interceptCallback(data);\n      }\n    } else {\n      self.triggerDownload(data, mime, type, filename);\n    }\n  }\n\n  if (typeof type == \"function\") {\n    downloadFunc = type;\n  } else {\n    if (self.downloaders[type]) {\n      downloadFunc = self.downloaders[type];\n    } else {\n      console.warn(\"Download Error - No such download type found: \", type);\n    }\n  }\n\n  if (downloadFunc) {\n    var list = this.generateExportList(range);\n    downloadFunc.call(this.table, list, options || {}, buildLink);\n  }\n};\n\nDownload.prototype.generateExportList = function (range) {\n  var list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\"); //assign group header formatter\n\n  var groupHeader = this.table.options.groupHeaderDownload;\n\n  if (groupHeader && !Array.isArray(groupHeader)) {\n    groupHeader = [groupHeader];\n  }\n\n  list.forEach(function (row) {\n    var group;\n\n    if (row.type === \"group\") {\n      group = row.columns[0];\n\n      if (groupHeader && groupHeader[row.indent]) {\n        group.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n      }\n    }\n  });\n  return list;\n};\n\nDownload.prototype.triggerDownload = function (data, mime, type, filename, newTab) {\n  var element = document.createElement('a'),\n      blob = new Blob([data], {\n    type: mime\n  }),\n      filename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n  blob = this.table.options.downloadReady.call(this.table, data, blob);\n\n  if (blob) {\n    if (newTab) {\n      window.open(window.URL.createObjectURL(blob));\n    } else {\n      if (navigator.msSaveOrOpenBlob) {\n        navigator.msSaveOrOpenBlob(blob, filename);\n      } else {\n        element.setAttribute('href', window.URL.createObjectURL(blob)); //set file title\n\n        element.setAttribute('download', filename); //trigger download\n\n        element.style.display = 'none';\n        document.body.appendChild(element);\n        element.click(); //remove temporary link element\n\n        document.body.removeChild(element);\n      }\n    }\n\n    if (this.table.options.downloadComplete) {\n      this.table.options.downloadComplete();\n    }\n  }\n};\n\nDownload.prototype.commsReceived = function (table, action, data) {\n  switch (action) {\n    case \"intercept\":\n      this.download(data.type, \"\", data.options, data.active, data.intercept);\n      break;\n  }\n}; //downloaders\n\n\nDownload.prototype.downloaders = {\n  csv: function csv(list, options, setFileContents) {\n    var delimiter = options && options.delimiter ? options.delimiter : \",\",\n        fileContents = [],\n        headers = [];\n    list.forEach(function (row) {\n      var item = [];\n\n      switch (row.type) {\n        case \"group\":\n          console.warn(\"Download Warning - CSV downloader cannot process row groups\");\n          break;\n\n        case \"calc\":\n          console.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n          break;\n\n        case \"header\":\n          row.columns.forEach(function (col, i) {\n            if (col && col.depth === 1) {\n              headers[i] = typeof col.value == \"undefined\" || col.value === null ? \"\" : '\"' + String(col.value).split('\"').join('\"\"') + '\"';\n            }\n          });\n          break;\n\n        case \"row\":\n          row.columns.forEach(function (col) {\n            if (col) {\n              switch (_typeof(col.value)) {\n                case \"object\":\n                  col.value = JSON.stringify(col.value);\n                  break;\n\n                case \"undefined\":\n                case \"null\":\n                  col.value = \"\";\n                  break;\n              }\n\n              item.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n            }\n          });\n          fileContents.push(item.join(delimiter));\n          break;\n      }\n    });\n\n    if (headers.length) {\n      fileContents.unshift(headers.join(delimiter));\n    }\n\n    fileContents = fileContents.join(\"\\n\");\n\n    if (options.bom) {\n      fileContents = '\\uFEFF' + fileContents;\n    }\n\n    setFileContents(fileContents, \"text/csv\");\n  },\n  json: function json(list, options, setFileContents) {\n    var fileContents = [];\n    list.forEach(function (row) {\n      var item = {};\n\n      switch (row.type) {\n        case \"header\":\n          break;\n\n        case \"group\":\n          console.warn(\"Download Warning - JSON downloader cannot process row groups\");\n          break;\n\n        case \"calc\":\n          console.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n          break;\n\n        case \"row\":\n          row.columns.forEach(function (col) {\n            if (col) {\n              item[col.component.getField()] = col.value;\n            }\n          });\n          fileContents.push(item);\n          break;\n      }\n    });\n    fileContents = JSON.stringify(fileContents, null, '\\t');\n    setFileContents(fileContents, \"application/json\");\n  },\n  pdf: function pdf(list, options, setFileContents) {\n    var header = [],\n        body = [],\n        autoTableParams = {},\n        rowGroupStyles = options.rowGroupStyles || {\n      fontStyle: \"bold\",\n      fontSize: 12,\n      cellPadding: 6,\n      fillColor: 220\n    },\n        rowCalcStyles = options.rowCalcStyles || {\n      fontStyle: \"bold\",\n      fontSize: 10,\n      cellPadding: 4,\n      fillColor: 232\n    },\n        jsPDFParams = options.jsPDF || {},\n        title = options && options.title ? options.title : \"\";\n\n    if (!jsPDFParams.orientation) {\n      jsPDFParams.orientation = options.orientation || \"landscape\";\n    }\n\n    if (!jsPDFParams.unit) {\n      jsPDFParams.unit = \"pt\";\n    } //parse row list\n\n\n    list.forEach(function (row) {\n      var item = {};\n\n      switch (row.type) {\n        case \"header\":\n          header.push(parseRow(row));\n          break;\n\n        case \"group\":\n          body.push(parseRow(row, rowGroupStyles));\n          break;\n\n        case \"calc\":\n          body.push(parseRow(row, rowCalcStyles));\n          break;\n\n        case \"row\":\n          body.push(parseRow(row));\n          break;\n      }\n    });\n\n    function parseRow(row, styles) {\n      var rowData = [];\n      row.columns.forEach(function (col) {\n        var cell;\n\n        if (col) {\n          switch (_typeof(col.value)) {\n            case \"object\":\n              col.value = JSON.stringify(col.value);\n              break;\n\n            case \"undefined\":\n            case \"null\":\n              col.value = \"\";\n              break;\n          }\n\n          cell = {\n            content: col.value,\n            colSpan: col.width,\n            rowSpan: col.height\n          };\n\n          if (styles) {\n            cell.styles = styles;\n          }\n\n          rowData.push(cell);\n        } else {\n          rowData.push(\"\");\n        }\n      });\n      return rowData;\n    } //configure PDF\n\n\n    var doc = new jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n    if (options && options.autoTable) {\n      if (typeof options.autoTable === \"function\") {\n        autoTableParams = options.autoTable(doc) || {};\n      } else {\n        autoTableParams = options.autoTable;\n      }\n    }\n\n    if (title) {\n      autoTableParams.addPageContent = function (data) {\n        doc.text(title, 40, 30);\n      };\n    }\n\n    autoTableParams.head = header;\n    autoTableParams.body = body;\n    doc.autoTable(autoTableParams);\n\n    if (options && options.documentProcessing) {\n      options.documentProcessing(doc);\n    }\n\n    setFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n  },\n  xlsx: function xlsx(list, options, setFileContents) {\n    var self = this,\n        sheetName = options.sheetName || \"Sheet1\",\n        workbook = XLSX.utils.book_new(),\n        output;\n    workbook.SheetNames = [];\n    workbook.Sheets = {};\n\n    function generateSheet() {\n      var rows = [],\n          merges = [],\n          worksheet = {},\n          range = {\n        s: {\n          c: 0,\n          r: 0\n        },\n        e: {\n          c: list[0] ? list[0].columns.reduce(function (a, b) {\n            return a + (b && b.width ? b.width : 1);\n          }, 0) : 0,\n          r: list.length\n        }\n      }; //parse row list\n\n      list.forEach(function (row, i) {\n        var rowData = [];\n        row.columns.forEach(function (col, j) {\n          if (col) {\n            rowData.push(!(col.value instanceof Date) && _typeof(col.value) === \"object\" ? JSON.stringify(col.value) : col.value);\n\n            if (col.width > 1 || col.height > -1) {\n              merges.push({\n                s: {\n                  r: i,\n                  c: j\n                },\n                e: {\n                  r: i + col.height - 1,\n                  c: j + col.width - 1\n                }\n              });\n            }\n          } else {\n            rowData.push(\"\");\n          }\n        });\n        rows.push(rowData);\n      }); //convert rows to worksheet\n\n      XLSX.utils.sheet_add_aoa(worksheet, rows);\n      worksheet['!ref'] = XLSX.utils.encode_range(range);\n\n      if (merges.length) {\n        worksheet[\"!merges\"] = merges;\n      }\n\n      return worksheet;\n    }\n\n    if (options.sheetOnly) {\n      setFileContents(generateSheet());\n      return;\n    }\n\n    if (options.sheets) {\n      for (var sheet in options.sheets) {\n        if (options.sheets[sheet] === true) {\n          workbook.SheetNames.push(sheet);\n          workbook.Sheets[sheet] = generateSheet();\n        } else {\n          workbook.SheetNames.push(sheet);\n          this.modules.comms.send(options.sheets[sheet], \"download\", \"intercept\", {\n            type: \"xlsx\",\n            options: {\n              sheetOnly: true\n            },\n            active: self.active,\n            intercept: function intercept(data) {\n              workbook.Sheets[sheet] = data;\n            }\n          });\n        }\n      }\n    } else {\n      workbook.SheetNames.push(sheetName);\n      workbook.Sheets[sheetName] = generateSheet();\n    }\n\n    if (options.documentProcessing) {\n      workbook = options.documentProcessing(workbook);\n    } //convert workbook to binary array\n\n\n    function s2ab(s) {\n      var buf = new ArrayBuffer(s.length);\n      var view = new Uint8Array(buf);\n\n      for (var i = 0; i != s.length; ++i) {\n        view[i] = s.charCodeAt(i) & 0xFF;\n      }\n\n      return buf;\n    }\n\n    output = XLSX.write(workbook, {\n      bookType: 'xlsx',\n      bookSST: true,\n      type: 'binary'\n    });\n    setFileContents(s2ab(output), \"application/octet-stream\");\n  },\n  html: function html(list, options, setFileContents) {\n    if (this.modExists(\"export\", true)) {\n      setFileContents(this.modules.export.genereateHTMLTable(list), \"text/html\");\n    }\n  }\n};\nTabulator.prototype.registerModule(\"download\", Download);\n\nvar Edit = function Edit(table) {\n  this.table = table; //hold Tabulator object\n\n  this.currentCell = false; //hold currently editing cell\n\n  this.mouseClick = false; //hold mousedown state to prevent click binding being overriden by editor opening\n\n  this.recursionBlock = false; //prevent focus recursion\n\n  this.invalidEdit = false;\n  this.editedCells = [];\n}; //initialize column editor\n\n\nEdit.prototype.initializeColumn = function (column) {\n  var self = this,\n      config = {\n    editor: false,\n    blocked: false,\n    check: column.definition.editable,\n    params: column.definition.editorParams || {}\n  }; //set column editor\n\n  switch (_typeof(column.definition.editor)) {\n    case \"string\":\n      if (column.definition.editor === \"tick\") {\n        column.definition.editor = \"tickCross\";\n        console.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n      }\n\n      if (self.editors[column.definition.editor]) {\n        config.editor = self.editors[column.definition.editor];\n      } else {\n        console.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n      }\n\n      break;\n\n    case \"function\":\n      config.editor = column.definition.editor;\n      break;\n\n    case \"boolean\":\n      if (column.definition.editor === true) {\n        if (typeof column.definition.formatter !== \"function\") {\n          if (column.definition.formatter === \"tick\") {\n            column.definition.formatter = \"tickCross\";\n            console.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n          }\n\n          if (self.editors[column.definition.formatter]) {\n            config.editor = self.editors[column.definition.formatter];\n          } else {\n            config.editor = self.editors[\"input\"];\n          }\n        } else {\n          console.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n        }\n      }\n\n      break;\n  }\n\n  if (config.editor) {\n    column.modules.edit = config;\n  }\n};\n\nEdit.prototype.getCurrentCell = function () {\n  return this.currentCell ? this.currentCell.getComponent() : false;\n};\n\nEdit.prototype.clearEditor = function (cancel) {\n  var cell = this.currentCell,\n      cellEl;\n  this.invalidEdit = false;\n\n  if (cell) {\n    this.currentCell = false;\n    cellEl = cell.getElement();\n\n    if (cancel) {\n      cell.validate();\n    } else {\n      cellEl.classList.remove(\"tabulator-validation-fail\");\n    }\n\n    cellEl.classList.remove(\"tabulator-editing\");\n\n    while (cellEl.firstChild) {\n      cellEl.removeChild(cellEl.firstChild);\n    }\n\n    cell.row.getElement().classList.remove(\"tabulator-row-editing\");\n  }\n};\n\nEdit.prototype.cancelEdit = function () {\n  if (this.currentCell) {\n    var cell = this.currentCell;\n    var component = this.currentCell.getComponent();\n    this.clearEditor(true);\n    cell.setValueActual(cell.getValue());\n    cell.cellRendered();\n\n    if (cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight) {\n      cell.row.normalizeHeight(true);\n    }\n\n    if (cell.column.cellEvents.cellEditCancelled) {\n      cell.column.cellEvents.cellEditCancelled.call(this.table, component);\n    }\n\n    this.table.options.cellEditCancelled.call(this.table, component);\n  }\n}; //return a formatted value for a cell\n\n\nEdit.prototype.bindEditor = function (cell) {\n  var self = this,\n      element = cell.getElement();\n  element.setAttribute(\"tabindex\", 0);\n  element.addEventListener(\"click\", function (e) {\n    if (!element.classList.contains(\"tabulator-editing\")) {\n      element.focus({\n        preventScroll: true\n      });\n    }\n  });\n  element.addEventListener(\"mousedown\", function (e) {\n    if (e.button === 2) {\n      e.preventDefault();\n    } else {\n      self.mouseClick = true;\n    }\n  });\n  element.addEventListener(\"focus\", function (e) {\n    if (!self.recursionBlock) {\n      self.edit(cell, e, false);\n    }\n  });\n};\n\nEdit.prototype.focusCellNoEvent = function (cell, block) {\n  this.recursionBlock = true;\n\n  if (!(block && this.table.browser === \"ie\")) {\n    cell.getElement().focus({\n      preventScroll: true\n    });\n  }\n\n  this.recursionBlock = false;\n};\n\nEdit.prototype.editCell = function (cell, forceEdit) {\n  this.focusCellNoEvent(cell);\n  this.edit(cell, false, forceEdit);\n};\n\nEdit.prototype.focusScrollAdjust = function (cell) {\n  if (this.table.rowManager.getRenderMode() == \"virtual\") {\n    var topEdge = this.table.rowManager.element.scrollTop,\n        bottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n        rowEl = cell.row.getElement(),\n        offset = rowEl.offsetTop;\n\n    if (rowEl.offsetTop < topEdge) {\n      this.table.rowManager.element.scrollTop -= topEdge - rowEl.offsetTop;\n    } else {\n      if (rowEl.offsetTop + rowEl.offsetHeight > bottomEdge) {\n        this.table.rowManager.element.scrollTop += rowEl.offsetTop + rowEl.offsetHeight - bottomEdge;\n      }\n    }\n\n    var leftEdge = this.table.rowManager.element.scrollLeft,\n        rightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n        cellEl = cell.getElement(),\n        offset = cellEl.offsetLeft;\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      leftEdge += parseInt(this.table.modules.frozenColumns.leftMargin);\n      rightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin);\n    }\n\n    if (cellEl.offsetLeft < leftEdge) {\n      this.table.rowManager.element.scrollLeft -= leftEdge - cellEl.offsetLeft;\n    } else {\n      if (cellEl.offsetLeft + cellEl.offsetWidth > rightEdge) {\n        this.table.rowManager.element.scrollLeft += cellEl.offsetLeft + cellEl.offsetWidth - rightEdge;\n      }\n    }\n  }\n};\n\nEdit.prototype.edit = function (cell, e, forceEdit) {\n  var self = this,\n      allowEdit = true,\n      rendered = function rendered() {},\n      element = cell.getElement(),\n      cellEditor,\n      component,\n      params; //prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\n\n  if (this.currentCell) {\n    if (!this.invalidEdit) {\n      this.cancelEdit();\n    }\n\n    return;\n  } //handle successfull value change\n\n\n  function success(value) {\n    if (self.currentCell === cell) {\n      var valid = true;\n\n      if (cell.column.modules.validate && self.table.modExists(\"validate\") && self.table.options.validationMode != \"manual\") {\n        valid = self.table.modules.validate.validate(cell.column.modules.validate, cell, value);\n      }\n\n      if (valid === true || self.table.options.validationMode === \"highlight\") {\n        self.clearEditor();\n\n        if (!cell.modules.edit) {\n          cell.modules.edit = {};\n        }\n\n        cell.modules.edit.edited = true;\n\n        if (self.editedCells.indexOf(cell) == -1) {\n          self.editedCells.push(cell);\n        }\n\n        cell.setValue(value, true);\n\n        if (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n          self.table.modules.dataTree.checkForRestyle(cell);\n        }\n\n        if (valid !== true) {\n          element.classList.add(\"tabulator-validation-fail\");\n          self.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\n          return false;\n        }\n\n        return true;\n      } else {\n        self.invalidEdit = true;\n        element.classList.add(\"tabulator-validation-fail\");\n        self.focusCellNoEvent(cell, true);\n        rendered();\n        self.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\n        return false;\n      }\n    } else {// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n    }\n  } //handle aborted edit\n\n\n  function cancel() {\n    if (self.currentCell === cell) {\n      self.cancelEdit();\n\n      if (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n        self.table.modules.dataTree.checkForRestyle(cell);\n      }\n    } else {// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n    }\n  }\n\n  function onRendered(callback) {\n    rendered = callback;\n  }\n\n  if (!cell.column.modules.edit.blocked) {\n    if (e) {\n      e.stopPropagation();\n    }\n\n    switch (_typeof(cell.column.modules.edit.check)) {\n      case \"function\":\n        allowEdit = cell.column.modules.edit.check(cell.getComponent());\n        break;\n\n      case \"boolean\":\n        allowEdit = cell.column.modules.edit.check;\n        break;\n    }\n\n    if (allowEdit || forceEdit) {\n      self.cancelEdit();\n      self.currentCell = cell;\n      this.focusScrollAdjust(cell);\n      component = cell.getComponent();\n\n      if (this.mouseClick) {\n        this.mouseClick = false;\n\n        if (cell.column.cellEvents.cellClick) {\n          cell.column.cellEvents.cellClick.call(this.table, e, component);\n        }\n      }\n\n      if (cell.column.cellEvents.cellEditing) {\n        cell.column.cellEvents.cellEditing.call(this.table, component);\n      }\n\n      self.table.options.cellEditing.call(this.table, component);\n      params = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n      cellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params); //if editor returned, add to DOM, if false, abort edit\n\n      if (cellEditor !== false) {\n        if (cellEditor instanceof Node) {\n          element.classList.add(\"tabulator-editing\");\n          cell.row.getElement().classList.add(\"tabulator-row-editing\");\n\n          while (element.firstChild) {\n            element.removeChild(element.firstChild);\n          }\n\n          element.appendChild(cellEditor); //trigger onRendered Callback\n\n          rendered(); //prevent editing from triggering rowClick event\n\n          var children = element.children;\n\n          for (var i = 0; i < children.length; i++) {\n            children[i].addEventListener(\"click\", function (e) {\n              e.stopPropagation();\n            });\n          }\n        } else {\n          console.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n          element.blur();\n          return false;\n        }\n      } else {\n        element.blur();\n        return false;\n      }\n\n      return true;\n    } else {\n      this.mouseClick = false;\n      element.blur();\n      return false;\n    }\n  } else {\n    this.mouseClick = false;\n    element.blur();\n    return false;\n  }\n};\n\nEdit.prototype.maskInput = function (el, options) {\n  var mask = options.mask,\n      maskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n      maskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n      maskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\",\n      success = false;\n\n  function fillSymbols(index) {\n    var symbol = mask[index];\n\n    if (typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber) {\n      el.value = el.value + \"\" + symbol;\n      fillSymbols(index + 1);\n    }\n  }\n\n  el.addEventListener(\"keydown\", function (e) {\n    var index = el.value.length,\n        char = e.key;\n\n    if (e.keyCode > 46) {\n      if (index >= mask.length) {\n        e.preventDefault();\n        e.stopPropagation();\n        success = false;\n        return false;\n      } else {\n        switch (mask[index]) {\n          case maskLetter:\n            if (char.toUpperCase() == char.toLowerCase()) {\n              e.preventDefault();\n              e.stopPropagation();\n              success = false;\n              return false;\n            }\n\n            break;\n\n          case maskNumber:\n            if (isNaN(char)) {\n              e.preventDefault();\n              e.stopPropagation();\n              success = false;\n              return false;\n            }\n\n            break;\n\n          case maskWildcard:\n            break;\n\n          default:\n            if (char !== mask[index]) {\n              e.preventDefault();\n              e.stopPropagation();\n              success = false;\n              return false;\n            }\n\n        }\n      }\n\n      success = true;\n    }\n\n    return;\n  });\n  el.addEventListener(\"keyup\", function (e) {\n    if (e.keyCode > 46) {\n      if (options.maskAutoFill) {\n        fillSymbols(el.value.length);\n      }\n    }\n  });\n\n  if (!el.placeholder) {\n    el.placeholder = mask;\n  }\n\n  if (options.maskAutoFill) {\n    fillSymbols(el.value.length);\n  }\n};\n\nEdit.prototype.getEditedCells = function () {\n  var output = [];\n  this.editedCells.forEach(function (cell) {\n    output.push(cell.getComponent());\n  });\n  return output;\n};\n\nEdit.prototype.clearEdited = function (cell) {\n  var editIndex;\n\n  if (cell.modules.validate && cell.modules.edit && cell.modules.edit.edited) {\n    cell.modules.validate.invalid = false;\n    editIndex = this.editedCells.indexOf(cell);\n\n    if (editIndex > -1) {\n      this.editedCells.splice(editIndex, 1);\n    }\n  }\n}; //default data editors\n\n\nEdit.prototype.editors = {\n  //input element\n  input: function input(cell, onRendered, success, cancel, editorParams) {\n    //create and style input\n    var cellValue = cell.getValue(),\n        input = document.createElement(\"input\");\n    input.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n    input.style.padding = \"4px\";\n    input.style.width = \"100%\";\n    input.style.boxSizing = \"border-box\";\n\n    if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n      for (var key in editorParams.elementAttributes) {\n        if (key.charAt(0) == \"+\") {\n          key = key.slice(1);\n          input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n        } else {\n          input.setAttribute(key, editorParams.elementAttributes[key]);\n        }\n      }\n    }\n\n    input.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n    onRendered(function () {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n    });\n\n    function onChange(e) {\n      if ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n        if (success(input.value)) {\n          cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n        }\n      } else {\n        cancel();\n      }\n    } //submit new value on blur or change\n\n\n    input.addEventListener(\"change\", onChange);\n    input.addEventListener(\"blur\", onChange); //submit new value on enter\n\n    input.addEventListener(\"keydown\", function (e) {\n      switch (e.keyCode) {\n        // case 9:\n        case 13:\n          onChange(e);\n          break;\n\n        case 27:\n          cancel();\n          break;\n\n        case 35:\n        case 36:\n          e.stopPropagation();\n          break;\n      }\n    });\n\n    if (editorParams.mask) {\n      this.table.modules.edit.maskInput(input, editorParams);\n    }\n\n    return input;\n  },\n  //resizable text area element\n  textarea: function textarea(cell, onRendered, success, cancel, editorParams) {\n    var self = this,\n        cellValue = cell.getValue(),\n        vertNav = editorParams.verticalNavigation || \"hybrid\",\n        value = String(cellValue !== null && typeof cellValue !== \"undefined\" ? cellValue : \"\"),\n        count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\n        input = document.createElement(\"textarea\"),\n        scrollHeight = 0; //create and style input\n\n    input.style.display = \"block\";\n    input.style.padding = \"2px\";\n    input.style.height = \"100%\";\n    input.style.width = \"100%\";\n    input.style.boxSizing = \"border-box\";\n    input.style.whiteSpace = \"pre-wrap\";\n    input.style.resize = \"none\";\n\n    if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n      for (var key in editorParams.elementAttributes) {\n        if (key.charAt(0) == \"+\") {\n          key = key.slice(1);\n          input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n        } else {\n          input.setAttribute(key, editorParams.elementAttributes[key]);\n        }\n      }\n    }\n\n    input.value = value;\n    onRendered(function () {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n      input.scrollHeight;\n      input.style.height = input.scrollHeight + \"px\";\n      cell.getRow().normalizeHeight();\n    });\n\n    function onChange(e) {\n      if ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n        if (success(input.value)) {\n          cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n        }\n\n        setTimeout(function () {\n          cell.getRow().normalizeHeight();\n        }, 300);\n      } else {\n        cancel();\n      }\n    } //submit new value on blur or change\n\n\n    input.addEventListener(\"change\", onChange);\n    input.addEventListener(\"blur\", onChange);\n    input.addEventListener(\"keyup\", function () {\n      input.style.height = \"\";\n      var heightNow = input.scrollHeight;\n      input.style.height = heightNow + \"px\";\n\n      if (heightNow != scrollHeight) {\n        scrollHeight = heightNow;\n        cell.getRow().normalizeHeight();\n      }\n    });\n    input.addEventListener(\"keydown\", function (e) {\n      switch (e.keyCode) {\n        case 27:\n          cancel();\n          break;\n\n        case 38:\n          //up arrow\n          if (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart) {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n          }\n\n          break;\n\n        case 40:\n          //down arrow\n          if (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart !== input.value.length) {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n          }\n\n          break;\n\n        case 35:\n        case 36:\n          e.stopPropagation();\n          break;\n      }\n    });\n\n    if (editorParams.mask) {\n      this.table.modules.edit.maskInput(input, editorParams);\n    }\n\n    return input;\n  },\n  //input element with type of number\n  number: function number(cell, onRendered, success, cancel, editorParams) {\n    var cellValue = cell.getValue(),\n        vertNav = editorParams.verticalNavigation || \"editor\",\n        input = document.createElement(\"input\");\n    input.setAttribute(\"type\", \"number\");\n\n    if (typeof editorParams.max != \"undefined\") {\n      input.setAttribute(\"max\", editorParams.max);\n    }\n\n    if (typeof editorParams.min != \"undefined\") {\n      input.setAttribute(\"min\", editorParams.min);\n    }\n\n    if (typeof editorParams.step != \"undefined\") {\n      input.setAttribute(\"step\", editorParams.step);\n    } //create and style input\n\n\n    input.style.padding = \"4px\";\n    input.style.width = \"100%\";\n    input.style.boxSizing = \"border-box\";\n\n    if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n      for (var key in editorParams.elementAttributes) {\n        if (key.charAt(0) == \"+\") {\n          key = key.slice(1);\n          input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n        } else {\n          input.setAttribute(key, editorParams.elementAttributes[key]);\n        }\n      }\n    }\n\n    input.value = cellValue;\n\n    var blurFunc = function blurFunc(e) {\n      onChange();\n    };\n\n    onRendered(function () {\n      //submit new value on blur\n      input.removeEventListener(\"blur\", blurFunc);\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\"; //submit new value on blur\n\n      input.addEventListener(\"blur\", blurFunc);\n    });\n\n    function onChange() {\n      var value = input.value;\n\n      if (!isNaN(value) && value !== \"\") {\n        value = Number(value);\n      }\n\n      if (value !== cellValue) {\n        if (success(value)) {\n          cellValue = value; //persist value if successfully validated incase editor is used as header filter\n        }\n      } else {\n        cancel();\n      }\n    } //submit new value on enter\n\n\n    input.addEventListener(\"keydown\", function (e) {\n      switch (e.keyCode) {\n        case 13:\n          // case 9:\n          onChange();\n          break;\n\n        case 27:\n          cancel();\n          break;\n\n        case 38: //up arrow\n\n        case 40:\n          //down arrow\n          if (vertNav == \"editor\") {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n          }\n\n          break;\n\n        case 35:\n        case 36:\n          e.stopPropagation();\n          break;\n      }\n    });\n\n    if (editorParams.mask) {\n      this.table.modules.edit.maskInput(input, editorParams);\n    }\n\n    return input;\n  },\n  //input element with type of number\n  range: function range(cell, onRendered, success, cancel, editorParams) {\n    var cellValue = cell.getValue(),\n        input = document.createElement(\"input\");\n    input.setAttribute(\"type\", \"range\");\n\n    if (typeof editorParams.max != \"undefined\") {\n      input.setAttribute(\"max\", editorParams.max);\n    }\n\n    if (typeof editorParams.min != \"undefined\") {\n      input.setAttribute(\"min\", editorParams.min);\n    }\n\n    if (typeof editorParams.step != \"undefined\") {\n      input.setAttribute(\"step\", editorParams.step);\n    } //create and style input\n\n\n    input.style.padding = \"4px\";\n    input.style.width = \"100%\";\n    input.style.boxSizing = \"border-box\";\n\n    if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n      for (var key in editorParams.elementAttributes) {\n        if (key.charAt(0) == \"+\") {\n          key = key.slice(1);\n          input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n        } else {\n          input.setAttribute(key, editorParams.elementAttributes[key]);\n        }\n      }\n    }\n\n    input.value = cellValue;\n    onRendered(function () {\n      input.focus({\n        preventScroll: true\n      });\n      input.style.height = \"100%\";\n    });\n\n    function onChange() {\n      var value = input.value;\n\n      if (!isNaN(value) && value !== \"\") {\n        value = Number(value);\n      }\n\n      if (value != cellValue) {\n        if (success(value)) {\n          cellValue = value; //persist value if successfully validated incase editor is used as header filter\n        }\n      } else {\n        cancel();\n      }\n    } //submit new value on blur\n\n\n    input.addEventListener(\"blur\", function (e) {\n      onChange();\n    }); //submit new value on enter\n\n    input.addEventListener(\"keydown\", function (e) {\n      switch (e.keyCode) {\n        case 13:\n          // case 9:\n          onChange();\n          break;\n\n        case 27:\n          cancel();\n          break;\n      }\n    });\n    return input;\n  },\n  //select\n  select: function select(cell, onRendered, success, cancel, editorParams) {\n    var _this53 = this;\n\n    var self = this,\n        cellEl = cell.getElement(),\n        initialValue = cell.getValue(),\n        vertNav = editorParams.verticalNavigation || \"editor\",\n        initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? Array.isArray(initialValue) ? initialValue : [initialValue] : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : [],\n        input = document.createElement(\"input\"),\n        listEl = document.createElement(\"div\"),\n        multiselect = editorParams.multiselect,\n        dataItems = [],\n        currentItem = {},\n        displayItems = [],\n        currentItems = [],\n        blurable = true,\n        blockListShow = false;\n\n    if (Array.isArray(editorParams) || !Array.isArray(editorParams) && (typeof editorParams === 'undefined' ? 'undefined' : _typeof(editorParams)) === \"object\" && !editorParams.values) {\n      console.warn(\"DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object\");\n      editorParams = {\n        values: editorParams\n      };\n    }\n\n    function getUniqueColumnValues(field) {\n      var output = {},\n          data = self.table.getData(),\n          column;\n\n      if (field) {\n        column = self.table.columnManager.getColumnByField(field);\n      } else {\n        column = cell.getColumn()._getSelf();\n      }\n\n      if (column) {\n        data.forEach(function (row) {\n          var val = column.getFieldValue(row);\n\n          if (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n            output[val] = true;\n          }\n        });\n\n        if (editorParams.sortValuesList) {\n          if (editorParams.sortValuesList == \"asc\") {\n            output = Object.keys(output).sort();\n          } else {\n            output = Object.keys(output).sort().reverse();\n          }\n        } else {\n          output = Object.keys(output);\n        }\n      } else {\n        console.warn(\"unable to find matching column to create select lookup list:\", field);\n      }\n\n      return output;\n    }\n\n    function parseItems(inputValues, curentValues) {\n      var dataList = [];\n      var displayList = [];\n\n      function processComplexListItem(item) {\n        var item = {\n          label: item.label,\n          value: item.value,\n          itemParams: item.itemParams,\n          elementAttributes: item.elementAttributes,\n          element: false\n        }; // if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n        // \tsetCurrentItem(item);\n        // }\n\n        if (curentValues.indexOf(item.value) > -1) {\n          setItem(item);\n        }\n\n        dataList.push(item);\n        displayList.push(item);\n        return item;\n      }\n\n      if (typeof inputValues == \"function\") {\n        inputValues = inputValues(cell);\n      }\n\n      if (Array.isArray(inputValues)) {\n        inputValues.forEach(function (value) {\n          var item;\n\n          if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\") {\n            if (value.options) {\n              item = {\n                label: value.label,\n                group: true,\n                itemParams: value.itemParams,\n                elementAttributes: value.elementAttributes,\n                element: false\n              };\n              displayList.push(item);\n              value.options.forEach(function (item) {\n                processComplexListItem(item);\n              });\n            } else {\n              processComplexListItem(value);\n            }\n          } else {\n            item = {\n              label: value,\n              value: value,\n              element: false\n            }; // if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n            // \tsetCurrentItem(item);\n            // }\n\n            if (curentValues.indexOf(item.value) > -1) {\n              setItem(item);\n            }\n\n            dataList.push(item);\n            displayList.push(item);\n          }\n        });\n      } else {\n        for (var key in inputValues) {\n          var item = {\n            label: inputValues[key],\n            value: key,\n            element: false\n          }; // if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n          // \tsetCurrentItem(item);\n          // }\n\n          if (curentValues.indexOf(item.value) > -1) {\n            setItem(item);\n          }\n\n          dataList.push(item);\n          displayList.push(item);\n        }\n      }\n\n      dataItems = dataList;\n      displayItems = displayList;\n      fillList();\n    }\n\n    function fillList() {\n      while (listEl.firstChild) {\n        listEl.removeChild(listEl.firstChild);\n      }\n\n      displayItems.forEach(function (item) {\n        var el = item.element;\n\n        if (!el) {\n          el = document.createElement(\"div\");\n          item.label = editorParams.listItemFormatter ? editorParams.listItemFormatter(item.value, item.label, cell, el, item.itemParams) : item.label;\n\n          if (item.group) {\n            el.classList.add(\"tabulator-edit-select-list-group\");\n            el.tabIndex = 0;\n            el.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n          } else {\n            el.classList.add(\"tabulator-edit-select-list-item\");\n            el.tabIndex = 0;\n            el.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n            el.addEventListener(\"click\", function () {\n              blockListShow = true;\n              setTimeout(function () {\n                blockListShow = false;\n              }, 10); // setCurrentItem(item);\n              // chooseItem();\n\n              if (multiselect) {\n                toggleItem(item);\n                input.focus();\n              } else {\n                chooseItem(item);\n              }\n            }); // if(item === currentItem){\n            // \tel.classList.add(\"active\");\n            // }\n\n            if (currentItems.indexOf(item) > -1) {\n              el.classList.add(\"active\");\n            }\n          }\n\n          if (item.elementAttributes && _typeof(item.elementAttributes) == \"object\") {\n            for (var key in item.elementAttributes) {\n              if (key.charAt(0) == \"+\") {\n                key = key.slice(1);\n                el.setAttribute(key, input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n              } else {\n                el.setAttribute(key, item.elementAttributes[key]);\n              }\n            }\n          }\n\n          el.addEventListener(\"mousedown\", function () {\n            blurable = false;\n            setTimeout(function () {\n              blurable = true;\n            }, 10);\n          });\n          item.element = el;\n        }\n\n        listEl.appendChild(el);\n      });\n    }\n\n    function setCurrentItem(item, active) {\n      if (!multiselect && currentItem && currentItem.element) {\n        currentItem.element.classList.remove(\"active\");\n      }\n\n      if (currentItem && currentItem.element) {\n        currentItem.element.classList.remove(\"focused\");\n      }\n\n      currentItem = item;\n\n      if (item.element) {\n        item.element.classList.add(\"focused\");\n\n        if (active) {\n          item.element.classList.add(\"active\");\n        }\n      }\n    } // function chooseItem(){\n    // \thideList();\n    // \tif(initialValue !== currentItem.value){\n    // \t\tinitialValue = currentItem.value;\n    // \t\tsuccess(currentItem.value);\n    // \t}else{\n    // \t\tcancel();\n    // \t}\n    // }\n\n\n    function setItem(item) {\n      var index = currentItems.indexOf(item);\n\n      if (index == -1) {\n        currentItems.push(item);\n        setCurrentItem(item, true);\n      }\n\n      fillInput();\n    }\n\n    function unsetItem(index) {\n      var item = currentItems[index];\n\n      if (index > -1) {\n        currentItems.splice(index, 1);\n\n        if (item.element) {\n          item.element.classList.remove(\"active\");\n        }\n      }\n    }\n\n    function toggleItem(item) {\n      if (!item) {\n        item = currentItem;\n      }\n\n      var index = currentItems.indexOf(item);\n\n      if (index > -1) {\n        unsetItem(index);\n      } else {\n        if (multiselect !== true && currentItems.length >= multiselect) {\n          unsetItem(0);\n        }\n\n        setItem(item);\n      }\n\n      fillInput();\n    }\n\n    function chooseItem(item) {\n      hideList();\n\n      if (!item) {\n        item = currentItem;\n      }\n\n      if (item) {\n        input.value = item.label;\n        success(item.value);\n      }\n\n      initialDisplayValue = input.value;\n    }\n\n    function chooseItems(silent) {\n      if (!silent) {\n        hideList();\n      }\n\n      var output = [];\n      currentItems.forEach(function (item) {\n        output.push(item.value);\n      });\n      initialDisplayValue = input.value;\n      success(output);\n    }\n\n    function fillInput() {\n      var output = [];\n      currentItems.forEach(function (item) {\n        output.push(item.label);\n      });\n      input.value = output.join(\", \");\n\n      if (self.currentCell === false) {\n        chooseItems(true);\n      }\n    }\n\n    function unsetItems() {\n      var len = currentItems.length;\n\n      for (var _i9 = 0; _i9 < len; _i9++) {\n        unsetItem(0);\n      }\n    }\n\n    function cancelItem() {\n      hideList();\n      cancel();\n    }\n\n    function showList() {\n      currentItems = [];\n\n      if (!listEl.parentNode) {\n        if (editorParams.values === true) {\n          parseItems(getUniqueColumnValues(), initialDisplayValue);\n        } else if (typeof editorParams.values === \"string\") {\n          parseItems(getUniqueColumnValues(editorParams.values), initialDisplayValue);\n        } else {\n          parseItems(editorParams.values || [], initialDisplayValue);\n        }\n\n        var offset = Tabulator.prototype.helpers.elOffset(cellEl);\n        listEl.style.minWidth = cellEl.offsetWidth + \"px\";\n        listEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n        listEl.style.left = offset.left + \"px\";\n        listEl.addEventListener(\"mousedown\", function (e) {\n          blurable = false;\n          setTimeout(function () {\n            blurable = true;\n          }, 10);\n        });\n        document.body.appendChild(listEl);\n      }\n    }\n\n    function hideList() {\n      if (listEl.parentNode) {\n        listEl.parentNode.removeChild(listEl);\n      }\n\n      removeScrollListener();\n    }\n\n    function removeScrollListener() {\n      self.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n    } //style input\n\n\n    input.setAttribute(\"type\", \"text\");\n    input.style.padding = \"4px\";\n    input.style.width = \"100%\";\n    input.style.boxSizing = \"border-box\";\n    input.style.cursor = \"default\";\n    input.readOnly = this.currentCell != false;\n\n    if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n      for (var key in editorParams.elementAttributes) {\n        if (key.charAt(0) == \"+\") {\n          key = key.slice(1);\n          input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n        } else {\n          input.setAttribute(key, editorParams.elementAttributes[key]);\n        }\n      }\n    }\n\n    input.value = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : \"\"; // if(editorParams.values === true){\n    // \tparseItems(getUniqueColumnValues(), initialValue);\n    // }else if(typeof editorParams.values === \"string\"){\n    // \tparseItems(getUniqueColumnValues(editorParams.values), initialValue);\n    // }else{\n    // \tparseItems(editorParams.values || [], initialValue);\n    // }\n\n    input.addEventListener(\"search\", function (e) {\n      if (!input.value) {\n        unsetItems();\n        chooseItems();\n      }\n    }); //allow key based navigation\n\n    input.addEventListener(\"keydown\", function (e) {\n      var index;\n\n      switch (e.keyCode) {\n        case 38:\n          //up arrow\n          index = dataItems.indexOf(currentItem);\n\n          if (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            e.preventDefault();\n\n            if (index > 0) {\n              setCurrentItem(dataItems[index - 1], !multiselect);\n            }\n          }\n\n          break;\n\n        case 40:\n          //down arrow\n          index = dataItems.indexOf(currentItem);\n\n          if (vertNav == \"editor\" || vertNav == \"hybrid\" && index < dataItems.length - 1) {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            e.preventDefault();\n\n            if (index < dataItems.length - 1) {\n              if (index == -1) {\n                setCurrentItem(dataItems[0], !multiselect);\n              } else {\n                setCurrentItem(dataItems[index + 1], !multiselect);\n              }\n            }\n          }\n\n          break;\n\n        case 37: //left arrow\n\n        case 39:\n          //right arrow\n          e.stopImmediatePropagation();\n          e.stopPropagation();\n          e.preventDefault();\n          break;\n\n        case 13:\n          //enter\n          // chooseItem();\n          if (multiselect) {\n            toggleItem();\n          } else {\n            chooseItem();\n          }\n\n          break;\n\n        case 27:\n          //escape\n          cancelItem();\n          break;\n\n        case 9:\n          //tab\n          break;\n\n        default:\n          if (self.currentCell === false) {\n            e.preventDefault();\n          }\n\n      }\n    });\n    input.addEventListener(\"blur\", function (e) {\n      if (blurable) {\n        if (multiselect) {\n          chooseItems();\n        } else {\n          cancelItem();\n        }\n      }\n    });\n    input.addEventListener(\"focus\", function (e) {\n      if (!blockListShow) {\n        showList();\n      }\n    }); //style list element\n\n    listEl = document.createElement(\"div\");\n    listEl.classList.add(\"tabulator-edit-select-list\");\n    onRendered(function () {\n      input.style.height = \"100%\";\n      input.focus({\n        preventScroll: true\n      });\n    });\n    setTimeout(function () {\n      _this53.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\n    }, 10);\n    return input;\n  },\n  //autocomplete\n  autocomplete: function autocomplete(cell, onRendered, success, cancel, editorParams) {\n    var _this54 = this;\n\n    var self = this,\n        cellEl = cell.getElement(),\n        initialValue = cell.getValue(),\n        vertNav = editorParams.verticalNavigation || \"editor\",\n        initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\",\n        input = document.createElement(\"input\"),\n        listEl = document.createElement(\"div\"),\n        allItems = [],\n        displayItems = [],\n        values = [],\n        currentItem = false,\n        blurable = true,\n        uniqueColumnValues = false; //style input\n\n    input.setAttribute(\"type\", \"search\");\n    input.style.padding = \"4px\";\n    input.style.width = \"100%\";\n    input.style.boxSizing = \"border-box\";\n\n    if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n      for (var key in editorParams.elementAttributes) {\n        if (key.charAt(0) == \"+\") {\n          key = key.slice(1);\n          input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n        } else {\n          input.setAttribute(key, editorParams.elementAttributes[key]);\n        }\n      }\n    } //style list element\n\n\n    listEl.classList.add(\"tabulator-edit-select-list\");\n    listEl.addEventListener(\"mousedown\", function (e) {\n      blurable = false;\n      setTimeout(function () {\n        blurable = true;\n      }, 10);\n    });\n\n    function genUniqueColumnValues() {\n      if (editorParams.values === true) {\n        uniqueColumnValues = getUniqueColumnValues();\n      } else if (typeof editorParams.values === \"string\") {\n        uniqueColumnValues = getUniqueColumnValues(editorParams.values);\n      }\n    }\n\n    function getUniqueColumnValues(field) {\n      var output = {},\n          data = self.table.getData(),\n          column;\n\n      if (field) {\n        column = self.table.columnManager.getColumnByField(field);\n      } else {\n        column = cell.getColumn()._getSelf();\n      }\n\n      if (column) {\n        data.forEach(function (row) {\n          var val = column.getFieldValue(row);\n\n          if (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n            output[val] = true;\n          }\n        });\n\n        if (editorParams.sortValuesList) {\n          if (editorParams.sortValuesList == \"asc\") {\n            output = Object.keys(output).sort();\n          } else {\n            output = Object.keys(output).sort().reverse();\n          }\n        } else {\n          output = Object.keys(output);\n        }\n      } else {\n        console.warn(\"unable to find matching column to create autocomplete lookup list:\", field);\n      }\n\n      return output;\n    }\n\n    function filterList(term, intialLoad) {\n      var matches = [],\n          values,\n          items,\n          searchEl; //lookup base values list\n\n      if (uniqueColumnValues) {\n        values = uniqueColumnValues;\n      } else {\n        values = editorParams.values || [];\n      }\n\n      if (editorParams.searchFunc) {\n        matches = editorParams.searchFunc(term, values);\n\n        if (matches instanceof Promise) {\n          addNotice(typeof editorParams.searchingPlaceholder !== \"undefined\" ? editorParams.searchingPlaceholder : \"Searching...\");\n          matches.then(function (result) {\n            fillListIfNotEmpty(parseItems(result), intialLoad);\n          }).catch(function (err) {\n            console.err(\"error in autocomplete search promise:\", err);\n          });\n        } else {\n          fillListIfNotEmpty(parseItems(matches), intialLoad);\n        }\n      } else {\n        items = parseItems(values);\n\n        if (term === \"\") {\n          if (editorParams.showListOnEmpty) {\n            matches = items;\n          }\n        } else {\n          items.forEach(function (item) {\n            if (item.value !== null || typeof item.value !== \"undefined\") {\n              if (String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1) {\n                matches.push(item);\n              }\n            }\n          });\n        }\n\n        fillListIfNotEmpty(matches, intialLoad);\n      }\n    }\n\n    function addNotice(notice) {\n      var searchEl = document.createElement(\"div\");\n      clearList();\n\n      if (notice !== false) {\n        searchEl.classList.add(\"tabulator-edit-select-list-notice\");\n        searchEl.tabIndex = 0;\n\n        if (notice instanceof Node) {\n          searchEl.appendChild(notice);\n        } else {\n          searchEl.innerHTML = notice;\n        }\n\n        listEl.appendChild(searchEl);\n      }\n    }\n\n    function parseItems(inputValues) {\n      var itemList = [];\n\n      if (Array.isArray(inputValues)) {\n        inputValues.forEach(function (value) {\n          var item = {};\n\n          if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\") {\n            item.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value.value, value.label) : value.label;\n            item.value = value.value;\n          } else {\n            item.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value;\n            item.value = value;\n          }\n\n          itemList.push(item);\n        });\n      } else {\n        for (var key in inputValues) {\n          var item = {\n            title: editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\n            value: key\n          };\n          itemList.push(item);\n        }\n      }\n\n      return itemList;\n    }\n\n    function clearList() {\n      while (listEl.firstChild) {\n        listEl.removeChild(listEl.firstChild);\n      }\n    }\n\n    function fillListIfNotEmpty(items, intialLoad) {\n      if (items.length) {\n        fillList(items, intialLoad);\n      } else {\n        if (editorParams.emptyPlaceholder) {\n          addNotice(editorParams.emptyPlaceholder);\n        }\n      }\n    }\n\n    function fillList(items, intialLoad) {\n      var current = false;\n      clearList();\n      displayItems = items;\n      displayItems.forEach(function (item) {\n        var el = item.element;\n\n        if (!el) {\n          el = document.createElement(\"div\");\n          el.classList.add(\"tabulator-edit-select-list-item\");\n          el.tabIndex = 0;\n          el.innerHTML = item.title;\n          el.addEventListener(\"click\", function (e) {\n            setCurrentItem(item);\n            chooseItem();\n          });\n          el.addEventListener(\"mousedown\", function (e) {\n            blurable = false;\n            setTimeout(function () {\n              blurable = true;\n            }, 10);\n          });\n          item.element = el;\n\n          if (intialLoad && item.value == initialValue) {\n            input.value = item.title;\n            item.element.classList.add(\"active\");\n            current = true;\n          }\n\n          if (item === currentItem) {\n            item.element.classList.add(\"active\");\n            current = true;\n          }\n        }\n\n        listEl.appendChild(el);\n      });\n\n      if (!current) {\n        setCurrentItem(false);\n      }\n    }\n\n    function chooseItem() {\n      hideList();\n\n      if (currentItem) {\n        if (initialValue !== currentItem.value) {\n          initialValue = currentItem.value;\n          input.value = currentItem.title;\n          success(currentItem.value);\n        } else {\n          cancel();\n        }\n      } else {\n        if (editorParams.freetext) {\n          initialValue = input.value;\n          success(input.value);\n        } else {\n          if (editorParams.allowEmpty && input.value === \"\") {\n            initialValue = input.value;\n            success(input.value);\n          } else {\n            cancel();\n          }\n        }\n      }\n    }\n\n    function showList() {\n      if (!listEl.parentNode) {\n        while (listEl.firstChild) {\n          listEl.removeChild(listEl.firstChild);\n        }\n\n        var offset = Tabulator.prototype.helpers.elOffset(cellEl);\n        listEl.style.minWidth = cellEl.offsetWidth + \"px\";\n        listEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n        listEl.style.left = offset.left + \"px\";\n        document.body.appendChild(listEl);\n      }\n    }\n\n    function setCurrentItem(item, showInputValue) {\n      if (currentItem && currentItem.element) {\n        currentItem.element.classList.remove(\"active\");\n      }\n\n      currentItem = item;\n\n      if (item && item.element) {\n        item.element.classList.add(\"active\");\n      }\n    }\n\n    function hideList() {\n      if (listEl.parentNode) {\n        listEl.parentNode.removeChild(listEl);\n      }\n\n      removeScrollListener();\n    }\n\n    function cancelItem() {\n      hideList();\n      cancel();\n    }\n\n    function removeScrollListener() {\n      self.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n    } //allow key based navigation\n\n\n    input.addEventListener(\"keydown\", function (e) {\n      var index;\n\n      switch (e.keyCode) {\n        case 38:\n          //up arrow\n          index = displayItems.indexOf(currentItem);\n\n          if (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            e.preventDefault();\n\n            if (index > 0) {\n              setCurrentItem(displayItems[index - 1]);\n            } else {\n              setCurrentItem(false);\n            }\n          }\n\n          break;\n\n        case 40:\n          //down arrow\n          index = displayItems.indexOf(currentItem);\n\n          if (vertNav == \"editor\" || vertNav == \"hybrid\" && index < displayItems.length - 1) {\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            e.preventDefault();\n\n            if (index < displayItems.length - 1) {\n              if (index == -1) {\n                setCurrentItem(displayItems[0]);\n              } else {\n                setCurrentItem(displayItems[index + 1]);\n              }\n            }\n          }\n\n          break;\n\n        case 37: //left arrow\n\n        case 39:\n          //right arrow\n          e.stopImmediatePropagation();\n          e.stopPropagation(); // e.preventDefault();\n\n          break;\n\n        case 13:\n          //enter\n          chooseItem();\n          break;\n\n        case 27:\n          //escape\n          cancelItem();\n          break;\n\n        case 36: //home\n\n        case 35:\n          //end\n          //prevent table navigation while using input element\n          e.stopImmediatePropagation();\n          break;\n      }\n    });\n    input.addEventListener(\"keyup\", function (e) {\n      switch (e.keyCode) {\n        case 38: //up arrow\n\n        case 37: //left arrow\n\n        case 39: //up arrow\n\n        case 40: //right arrow\n\n        case 13: //enter\n\n        case 27:\n          //escape\n          break;\n\n        default:\n          filterList(input.value);\n      }\n    });\n    input.addEventListener(\"search\", function (e) {\n      filterList(input.value);\n    });\n    input.addEventListener(\"blur\", function (e) {\n      if (blurable) {\n        chooseItem();\n      }\n    });\n    input.addEventListener(\"focus\", function (e) {\n      var value = initialDisplayValue;\n      genUniqueColumnValues();\n      showList();\n      input.value = value;\n      filterList(value, true);\n    });\n    onRendered(function () {\n      input.style.height = \"100%\";\n      input.focus({\n        preventScroll: true\n      });\n    });\n\n    if (editorParams.mask) {\n      this.table.modules.edit.maskInput(input, editorParams);\n    }\n\n    setTimeout(function () {\n      _this54.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\n    }, 10);\n    genUniqueColumnValues();\n    input.value = initialDisplayValue;\n    filterList(initialDisplayValue, true);\n    return input;\n  },\n  //star rating\n  star: function star(cell, onRendered, success, cancel, editorParams) {\n    var self = this,\n        element = cell.getElement(),\n        value = cell.getValue(),\n        maxStars = element.getElementsByTagName(\"svg\").length || 5,\n        size = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n        stars = [],\n        starsHolder = document.createElement(\"div\"),\n        star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"); //change star type\n\n    function starChange(val) {\n      stars.forEach(function (star, i) {\n        if (i < val) {\n          if (self.table.browser == \"ie\") {\n            star.setAttribute(\"class\", \"tabulator-star-active\");\n          } else {\n            star.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n          }\n\n          star.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n        } else {\n          if (self.table.browser == \"ie\") {\n            star.setAttribute(\"class\", \"tabulator-star-inactive\");\n          } else {\n            star.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n          }\n\n          star.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n        }\n      });\n    } //build stars\n\n\n    function buildStar(i) {\n      var starHolder = document.createElement(\"span\");\n      var nextStar = star.cloneNode(true);\n      stars.push(nextStar);\n      starHolder.addEventListener(\"mouseenter\", function (e) {\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        starChange(i);\n      });\n      starHolder.addEventListener(\"mousemove\", function (e) {\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n      });\n      starHolder.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        success(i);\n        element.blur();\n      });\n      starHolder.appendChild(nextStar);\n      starsHolder.appendChild(starHolder);\n    } //handle keyboard navigation value change\n\n\n    function changeValue(val) {\n      value = val;\n      starChange(val);\n    } //style cell\n\n\n    element.style.whiteSpace = \"nowrap\";\n    element.style.overflow = \"hidden\";\n    element.style.textOverflow = \"ellipsis\"; //style holding element\n\n    starsHolder.style.verticalAlign = \"middle\";\n    starsHolder.style.display = \"inline-block\";\n    starsHolder.style.padding = \"4px\"; //style star\n\n    star.setAttribute(\"width\", size);\n    star.setAttribute(\"height\", size);\n    star.setAttribute(\"viewBox\", \"0 0 512 512\");\n    star.setAttribute(\"xml:space\", \"preserve\");\n    star.style.padding = \"0 1px\";\n\n    if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n      for (var key in editorParams.elementAttributes) {\n        if (key.charAt(0) == \"+\") {\n          key = key.slice(1);\n          starsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n        } else {\n          starsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n        }\n      }\n    } //create correct number of stars\n\n\n    for (var i = 1; i <= maxStars; i++) {\n      buildStar(i);\n    } //ensure value does not exceed number of stars\n\n\n    value = Math.min(parseInt(value), maxStars); // set initial styling of stars\n\n    starChange(value);\n    starsHolder.addEventListener(\"mousemove\", function (e) {\n      starChange(0);\n    });\n    starsHolder.addEventListener(\"click\", function (e) {\n      success(0);\n    });\n    element.addEventListener(\"blur\", function (e) {\n      cancel();\n    }); //allow key based navigation\n\n    element.addEventListener(\"keydown\", function (e) {\n      switch (e.keyCode) {\n        case 39:\n          //right arrow\n          changeValue(value + 1);\n          break;\n\n        case 37:\n          //left arrow\n          changeValue(value - 1);\n          break;\n\n        case 13:\n          //enter\n          success(value);\n          break;\n\n        case 27:\n          //escape\n          cancel();\n          break;\n      }\n    });\n    return starsHolder;\n  },\n  //draggable progress bar\n  progress: function progress(cell, onRendered, success, cancel, editorParams) {\n    var element = cell.getElement(),\n        max = typeof editorParams.max === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"max\") || 100 : editorParams.max,\n        min = typeof editorParams.min === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"min\") || 0 : editorParams.min,\n        percent = (max - min) / 100,\n        value = cell.getValue() || 0,\n        handle = document.createElement(\"div\"),\n        bar = document.createElement(\"div\"),\n        mouseDrag,\n        mouseDragWidth; //set new value\n\n    function updateValue() {\n      var calcVal = percent * Math.round(bar.offsetWidth / (element.clientWidth / 100)) + min;\n      success(calcVal);\n      element.setAttribute(\"aria-valuenow\", calcVal);\n      element.setAttribute(\"aria-label\", value);\n    } //style handle\n\n\n    handle.style.position = \"absolute\";\n    handle.style.right = \"0\";\n    handle.style.top = \"0\";\n    handle.style.bottom = \"0\";\n    handle.style.width = \"5px\";\n    handle.classList.add(\"tabulator-progress-handle\"); //style bar\n\n    bar.style.display = \"inline-block\";\n    bar.style.position = \"relative\"; // bar.style.top = \"8px\";\n    // bar.style.bottom = \"8px\";\n    // bar.style.left = \"4px\";\n    // bar.style.marginRight = \"4px\";\n\n    bar.style.height = \"100%\";\n    bar.style.backgroundColor = \"#488CE9\";\n    bar.style.maxWidth = \"100%\";\n    bar.style.minWidth = \"0%\";\n\n    if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n      for (var key in editorParams.elementAttributes) {\n        if (key.charAt(0) == \"+\") {\n          key = key.slice(1);\n          bar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n        } else {\n          bar.setAttribute(key, editorParams.elementAttributes[key]);\n        }\n      }\n    } //style cell\n\n\n    element.style.padding = \"4px 4px\"; //make sure value is in range\n\n    value = Math.min(parseFloat(value), max);\n    value = Math.max(parseFloat(value), min); //workout percentage\n\n    value = Math.round((value - min) / percent); // bar.style.right = value + \"%\";\n\n    bar.style.width = value + \"%\";\n    element.setAttribute(\"aria-valuemin\", min);\n    element.setAttribute(\"aria-valuemax\", max);\n    bar.appendChild(handle);\n    handle.addEventListener(\"mousedown\", function (e) {\n      mouseDrag = e.screenX;\n      mouseDragWidth = bar.offsetWidth;\n    });\n    handle.addEventListener(\"mouseover\", function () {\n      handle.style.cursor = \"ew-resize\";\n    });\n    element.addEventListener(\"mousemove\", function (e) {\n      if (mouseDrag) {\n        bar.style.width = mouseDragWidth + e.screenX - mouseDrag + \"px\";\n      }\n    });\n    element.addEventListener(\"mouseup\", function (e) {\n      if (mouseDrag) {\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        mouseDrag = false;\n        mouseDragWidth = false;\n        updateValue();\n      }\n    }); //allow key based navigation\n\n    element.addEventListener(\"keydown\", function (e) {\n      switch (e.keyCode) {\n        case 39:\n          //right arrow\n          e.preventDefault();\n          bar.style.width = bar.clientWidth + element.clientWidth / 100 + \"px\";\n          break;\n\n        case 37:\n          //left arrow\n          e.preventDefault();\n          bar.style.width = bar.clientWidth - element.clientWidth / 100 + \"px\";\n          break;\n\n        case 9: //tab\n\n        case 13:\n          //enter\n          updateValue();\n          break;\n\n        case 27:\n          //escape\n          cancel();\n          break;\n      }\n    });\n    element.addEventListener(\"blur\", function () {\n      cancel();\n    });\n    return bar;\n  },\n  //checkbox\n  tickCross: function tickCross(cell, onRendered, success, cancel, editorParams) {\n    var value = cell.getValue(),\n        input = document.createElement(\"input\"),\n        tristate = editorParams.tristate,\n        indetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n        indetermState = false;\n    input.setAttribute(\"type\", \"checkbox\");\n    input.style.marginTop = \"5px\";\n    input.style.boxSizing = \"border-box\";\n\n    if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n      for (var key in editorParams.elementAttributes) {\n        if (key.charAt(0) == \"+\") {\n          key = key.slice(1);\n          input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n        } else {\n          input.setAttribute(key, editorParams.elementAttributes[key]);\n        }\n      }\n    }\n\n    input.value = value;\n\n    if (tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")) {\n      indetermState = true;\n      input.indeterminate = true;\n    }\n\n    if (this.table.browser != \"firefox\") {\n      //prevent blur issue on mac firefox\n      onRendered(function () {\n        input.focus({\n          preventScroll: true\n        });\n      });\n    }\n\n    input.checked = value === true || value === \"true\" || value === \"True\" || value === 1;\n    onRendered(function () {\n      input.focus();\n    });\n\n    function setValue(blur) {\n      if (tristate) {\n        if (!blur) {\n          if (input.checked && !indetermState) {\n            input.checked = false;\n            input.indeterminate = true;\n            indetermState = true;\n            return indetermValue;\n          } else {\n            indetermState = false;\n            return input.checked;\n          }\n        } else {\n          if (indetermState) {\n            return indetermValue;\n          } else {\n            return input.checked;\n          }\n        }\n      } else {\n        return input.checked;\n      }\n    } //submit new value on blur\n\n\n    input.addEventListener(\"change\", function (e) {\n      success(setValue());\n    });\n    input.addEventListener(\"blur\", function (e) {\n      success(setValue(true));\n    }); //submit new value on enter\n\n    input.addEventListener(\"keydown\", function (e) {\n      if (e.keyCode == 13) {\n        success(setValue());\n      }\n\n      if (e.keyCode == 27) {\n        cancel();\n      }\n    });\n    return input;\n  }\n};\nTabulator.prototype.registerModule(\"edit\", Edit);\n\nvar ExportRow = function ExportRow(type, columns, component, indent) {\n  this.type = type;\n  this.columns = columns;\n  this.component = component || false;\n  this.indent = indent || 0;\n};\n\nvar ExportColumn = function ExportColumn(value, component, width, height, depth) {\n  this.value = value;\n  this.component = component || false;\n  this.width = width;\n  this.height = height;\n  this.depth = depth;\n};\n\nvar Export = function Export(table) {\n  this.table = table; //hold Tabulator object\n\n  this.config = {};\n  this.cloneTableStyle = true;\n  this.colVisProp = \"\";\n};\n\nExport.prototype.generateExportList = function (config, style, range, colVisProp) {\n  this.cloneTableStyle = style;\n  this.config = config || {};\n  this.colVisProp = colVisProp;\n  var headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\n  var body = this.bodyToExportRows(this.rowLookup(range));\n  return headers.concat(body);\n};\n\nExport.prototype.genereateTable = function (config, style, range, colVisProp) {\n  var list = this.generateExportList(config, style, range, colVisProp);\n  return this.genereateTableElement(list);\n};\n\nExport.prototype.rowLookup = function (range) {\n  var _this55 = this;\n\n  var rows = [];\n\n  if (typeof range == \"function\") {\n    range.call(this.table).forEach(function (row) {\n      row = _this55.table.rowManager.findRow(row);\n\n      if (row) {\n        rows.push(row);\n      }\n    });\n  } else {\n    switch (range) {\n      case true:\n      case \"visible\":\n        rows = this.table.rowManager.getVisibleRows(true);\n        break;\n\n      case \"all\":\n        rows = this.table.rowManager.rows;\n        break;\n\n      case \"selected\":\n        rows = this.table.modules.selectRow.selectedRows;\n        break;\n\n      case \"active\":\n      default:\n        if (this.table.options.pagination) {\n          rows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\n        } else {\n          rows = this.table.rowManager.getDisplayRows();\n        }\n\n    }\n  }\n\n  return Object.assign([], rows);\n};\n\nExport.prototype.generateColumnGroupHeaders = function () {\n  var _this56 = this;\n\n  var output = [];\n  var columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n  columns.forEach(function (column) {\n    var colData = _this56.processColumnGroup(column);\n\n    if (colData) {\n      output.push(colData);\n    }\n  });\n  return output;\n};\n\nExport.prototype.processColumnGroup = function (column) {\n  var _this57 = this;\n\n  var subGroups = column.columns,\n      maxDepth = 0,\n      title = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\n  var groupData = {\n    title: title,\n    column: column,\n    depth: 1\n  };\n\n  if (subGroups.length) {\n    groupData.subGroups = [];\n    groupData.width = 0;\n    subGroups.forEach(function (subGroup) {\n      var subGroupData = _this57.processColumnGroup(subGroup);\n\n      if (subGroupData) {\n        groupData.width += subGroupData.width;\n        groupData.subGroups.push(subGroupData);\n\n        if (subGroupData.depth > maxDepth) {\n          maxDepth = subGroupData.depth;\n        }\n      }\n    });\n    groupData.depth += maxDepth;\n\n    if (!groupData.width) {\n      return false;\n    }\n  } else {\n    if (this.columnVisCheck(column)) {\n      groupData.width = 1;\n    } else {\n      return false;\n    }\n  }\n\n  return groupData;\n};\n\nExport.prototype.columnVisCheck = function (column) {\n  return column.definition[this.colVisProp] !== false && (column.visible || !column.visible && column.definition[this.colVisProp]);\n};\n\nExport.prototype.headersToExportRows = function (columns) {\n  var headers = [],\n      headerDepth = 0,\n      exportRows = [];\n\n  function parseColumnGroup(column, level) {\n    var depth = headerDepth - level;\n\n    if (typeof headers[level] === \"undefined\") {\n      headers[level] = [];\n    }\n\n    column.height = column.subGroups ? 1 : depth - column.depth + 1;\n    headers[level].push(column);\n\n    if (column.height > 1) {\n      for (var _i10 = 1; _i10 < column.height; _i10++) {\n        if (typeof headers[level + _i10] === \"undefined\") {\n          headers[level + _i10] = [];\n        }\n\n        headers[level + _i10].push(false);\n      }\n    }\n\n    if (column.width > 1) {\n      for (var _i11 = 1; _i11 < column.width; _i11++) {\n        headers[level].push(false);\n      }\n    }\n\n    if (column.subGroups) {\n      column.subGroups.forEach(function (subGroup) {\n        parseColumnGroup(subGroup, level + 1);\n      });\n    }\n  } //calculate maximum header debth\n\n\n  columns.forEach(function (column) {\n    if (column.depth > headerDepth) {\n      headerDepth = column.depth;\n    }\n  });\n  columns.forEach(function (column) {\n    parseColumnGroup(column, 0);\n  });\n  headers.forEach(function (header) {\n    var columns = [];\n    header.forEach(function (col) {\n      if (col) {\n        columns.push(new ExportColumn(col.title, col.column.getComponent(), col.width, col.height, col.depth));\n      } else {\n        columns.push(null);\n      }\n    });\n    exportRows.push(new ExportRow(\"header\", columns));\n  });\n  return exportRows;\n};\n\nExport.prototype.bodyToExportRows = function (rows) {\n  var _this58 = this;\n\n  var columns = [];\n  var exportRows = [];\n  this.table.columnManager.columnsByIndex.forEach(function (column) {\n    if (_this58.columnVisCheck(column)) {\n      columns.push(column.getComponent());\n    }\n  });\n\n  if (this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")) {\n    if (this.table.modules.columnCalcs.topInitialized) {\n      rows.unshift(this.table.modules.columnCalcs.topRow);\n    }\n\n    if (this.table.modules.columnCalcs.botInitialized) {\n      rows.push(this.table.modules.columnCalcs.botRow);\n    }\n  }\n\n  rows = rows.filter(function (row) {\n    switch (row.type) {\n      case \"group\":\n        return _this58.config.rowGroups !== false;\n        break;\n\n      case \"calc\":\n        return _this58.config.columnCalcs !== false;\n        break;\n\n      case \"row\":\n        return !(_this58.table.options.dataTree && _this58.config.dataTree === false && row.modules.dataTree.parent);\n        break;\n    }\n\n    return true;\n  });\n  rows.forEach(function (row, i) {\n    var rowData = row.getData(_this58.colVisProp);\n    var exportCols = [];\n    var indent = 0;\n\n    switch (row.type) {\n      case \"group\":\n        indent = row.level;\n        exportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n        break;\n\n      case \"calc\":\n      case \"row\":\n        columns.forEach(function (col) {\n          exportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n        });\n\n        if (_this58.table.options.dataTree && _this58.config.dataTree !== false) {\n          indent = row.modules.dataTree.index;\n        }\n\n        break;\n    }\n\n    exportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n  });\n  return exportRows;\n};\n\nExport.prototype.genereateTableElement = function (list) {\n  var _this59 = this;\n\n  var table = document.createElement(\"table\"),\n      headerEl = document.createElement(\"thead\"),\n      bodyEl = document.createElement(\"tbody\"),\n      styles = this.lookupTableStyles(),\n      rowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\n      setup = {};\n  setup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\n  if (this.table.options.dataTree && this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")) {\n    setup.treeElementField = this.table.modules.dataTree.elementField;\n  } //assign group header formatter\n\n\n  setup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n\n  if (setup.groupHeader && !Array.isArray(setup.groupHeader)) {\n    setup.groupHeader = [setup.groupHeader];\n  }\n\n  table.classList.add(\"tabulator-print-table\");\n  this.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n  if (list.length > 1000) {\n    console.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n  }\n\n  list.forEach(function (row, i) {\n    switch (row.type) {\n      case \"header\":\n        headerEl.appendChild(_this59.genereateHeaderElement(row, setup, styles));\n        break;\n\n      case \"group\":\n        bodyEl.appendChild(_this59.genereateGroupElement(row, setup, styles));\n        break;\n\n      case \"calc\":\n        bodyEl.appendChild(_this59.genereateCalcElement(row, setup, styles));\n        break;\n\n      case \"row\":\n        var rowEl = _this59.genereateRowElement(row, setup, styles);\n\n        _this59.mapElementStyles(i % 2 && styles.evenRow ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\n        bodyEl.appendChild(rowEl);\n        break;\n    }\n  });\n\n  if (headerEl.innerHTML) {\n    table.appendChild(headerEl);\n  }\n\n  table.appendChild(bodyEl);\n  this.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n  return table;\n};\n\nExport.prototype.lookupTableStyles = function () {\n  var styles = {}; //lookup row styles\n\n  if (this.cloneTableStyle && window.getComputedStyle) {\n    styles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n    styles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n    styles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n    styles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n    styles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\n    if (styles.firstRow) {\n      styles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n      styles.firstCell = styles.styleCells[0];\n      styles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n    }\n  }\n\n  return styles;\n};\n\nExport.prototype.genereateHeaderElement = function (row, setup, styles) {\n  var _this60 = this;\n\n  var rowEl = document.createElement(\"tr\");\n  row.columns.forEach(function (column) {\n    if (column) {\n      var cellEl = document.createElement(\"th\");\n      var classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n      cellEl.colSpan = column.width;\n      cellEl.rowSpan = column.height;\n      cellEl.innerHTML = column.value;\n\n      if (_this60.cloneTableStyle) {\n        cellEl.style.boxSizing = \"border-box\";\n      }\n\n      classNames.forEach(function (className) {\n        cellEl.classList.add(className);\n      });\n\n      _this60.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n      _this60.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\n      if (column.component._column.visible) {\n        _this60.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n      } else {\n        if (column.component._column.definition.width) {\n          cellEl.style.width = column.component._column.definition.width + \"px\";\n        }\n      }\n\n      if (column.component._column.parent) {\n        _this60.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n      }\n\n      rowEl.appendChild(cellEl);\n    }\n  });\n  return rowEl;\n};\n\nExport.prototype.genereateGroupElement = function (row, setup, styles) {\n  var rowEl = document.createElement(\"tr\"),\n      cellEl = document.createElement(\"td\"),\n      group = row.columns[0];\n  rowEl.classList.add(\"tabulator-print-table-row\");\n\n  if (setup.groupHeader && setup.groupHeader[row.indent]) {\n    group.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n  } else {\n    if (setup.groupHeader === false) {\n      group.value = group.value;\n    } else {\n      group.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n    }\n  }\n\n  cellEl.colSpan = group.width;\n  cellEl.innerHTML = group.value;\n  rowEl.classList.add(\"tabulator-print-table-group\");\n  rowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\n  if (group.component.isVisible()) {\n    rowEl.classList.add(\"tabulator-group-visible\");\n  }\n\n  this.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n  this.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n  rowEl.appendChild(cellEl);\n  return rowEl;\n};\n\nExport.prototype.genereateCalcElement = function (row, setup, styles) {\n  var rowEl = this.genereateRowElement(row, setup, styles);\n  rowEl.classList.add(\"tabulator-print-table-calcs\");\n  this.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n  return rowEl;\n};\n\nExport.prototype.genereateRowElement = function (row, setup, styles) {\n  var _this61 = this;\n\n  var rowEl = document.createElement(\"tr\");\n  rowEl.classList.add(\"tabulator-print-table-row\");\n  row.columns.forEach(function (col) {\n    if (col) {\n      var cellEl = document.createElement(\"td\"),\n          column = col.component._column,\n          value = col.value;\n      var cellWrapper = {\n        modules: {},\n        getValue: function getValue() {\n          return value;\n        },\n        getField: function getField() {\n          return column.definition.field;\n        },\n        getElement: function getElement() {\n          return cellEl;\n        },\n        getColumn: function getColumn() {\n          return column.getComponent();\n        },\n        getData: function getData() {\n          return row.component.getData();\n        },\n        getRow: function getRow() {\n          return row.component;\n        },\n        getComponent: function getComponent() {\n          return cellWrapper;\n        },\n        column: column\n      };\n      var classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n      classNames.forEach(function (className) {\n        cellEl.classList.add(className);\n      });\n\n      if (_this61.table.modExists(\"format\") && _this61.config.formatCells !== false) {\n        value = _this61.table.modules.format.formatExportValue(cellWrapper, _this61.colVisProp);\n      } else {\n        switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n          case \"object\":\n            value = JSON.stringify(value);\n            break;\n\n          case \"undefined\":\n          case \"null\":\n            value = \"\";\n            break;\n\n          default:\n            value = value;\n        }\n      }\n\n      if (value instanceof Node) {\n        cellEl.appendChild(value);\n      } else {\n        cellEl.innerHTML = value;\n      }\n\n      if (styles.firstCell) {\n        _this61.mapElementStyles(styles.firstCell, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n        if (column.definition.align) {\n          cellEl.style.textAlign = column.definition.align;\n        }\n      }\n\n      if (_this61.table.options.dataTree && _this61.config.dataTree !== false) {\n        if (setup.treeElementField && setup.treeElementField == column.field || !setup.treeElementField && i == 0) {\n          if (row.component._row.modules.dataTree.controlEl) {\n            cellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n          }\n\n          if (row.component._row.modules.dataTree.branchEl) {\n            cellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n          }\n        }\n      }\n\n      rowEl.appendChild(cellEl);\n\n      if (cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback) {\n        cellWrapper.modules.format.renderedCallback();\n      }\n\n      if (setup.rowFormatter && _this61.config.formatCells !== false) {\n        setup.rowFormatter(row.component);\n      }\n    }\n  });\n  return rowEl;\n};\n\nExport.prototype.genereateHTMLTable = function (list) {\n  var holder = document.createElement(\"div\");\n  holder.appendChild(this.genereateTableElement(list));\n  return holder.innerHTML;\n};\n\nExport.prototype.getHtml = function (visible, style, config, colVisProp) {\n  var list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n  return this.genereateHTMLTable(list);\n};\n\nExport.prototype.mapElementStyles = function (from, to, props) {\n  if (this.cloneTableStyle && from && to) {\n    var lookup = {\n      \"background-color\": \"backgroundColor\",\n      \"color\": \"fontColor\",\n      \"width\": \"width\",\n      \"font-weight\": \"fontWeight\",\n      \"font-family\": \"fontFamily\",\n      \"font-size\": \"fontSize\",\n      \"text-align\": \"textAlign\",\n      \"border-top\": \"borderTop\",\n      \"border-left\": \"borderLeft\",\n      \"border-right\": \"borderRight\",\n      \"border-bottom\": \"borderBottom\",\n      \"padding-top\": \"paddingTop\",\n      \"padding-left\": \"paddingLeft\",\n      \"padding-right\": \"paddingRight\",\n      \"padding-bottom\": \"paddingBottom\"\n    };\n\n    if (window.getComputedStyle) {\n      var fromStyle = window.getComputedStyle(from);\n      props.forEach(function (prop) {\n        to.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n      });\n    }\n  }\n};\n\nTabulator.prototype.registerModule(\"export\", Export);\n\nvar Filter = function Filter(table) {\n  this.table = table; //hold Tabulator object\n\n  this.filterList = []; //hold filter list\n\n  this.headerFilters = {}; //hold column filters\n\n  this.headerFilterColumns = []; //hold columns that use header filters\n\n  this.prevHeaderFilterChangeCheck = \"\";\n  this.prevHeaderFilterChangeCheck = \"{}\";\n  this.changed = false; //has filtering changed since last render\n}; //initialize column header filter\n\n\nFilter.prototype.initializeColumn = function (column, value) {\n  var self = this,\n      field = column.getField(),\n      params; //handle successfull value change\n\n  function success(value) {\n    var filterType = column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\" || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n        type = \"\",\n        filterChangeCheck = \"\",\n        filterFunc;\n\n    if (typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value) {\n      column.modules.filter.prevSuccess = value;\n\n      if (!column.modules.filter.emptyFunc(value)) {\n        column.modules.filter.value = value;\n\n        switch (_typeof(column.definition.headerFilterFunc)) {\n          case \"string\":\n            if (self.filters[column.definition.headerFilterFunc]) {\n              type = column.definition.headerFilterFunc;\n\n              filterFunc = function filterFunc(data) {\n                var params = column.definition.headerFilterFuncParams || {};\n                var fieldVal = column.getFieldValue(data);\n                params = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n                return self.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n              };\n            } else {\n              console.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n            }\n\n            break;\n\n          case \"function\":\n            filterFunc = function filterFunc(data) {\n              var params = column.definition.headerFilterFuncParams || {};\n              var fieldVal = column.getFieldValue(data);\n              params = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n              return column.definition.headerFilterFunc(value, fieldVal, data, params);\n            };\n\n            type = filterFunc;\n            break;\n        }\n\n        if (!filterFunc) {\n          switch (filterType) {\n            case \"partial\":\n              filterFunc = function filterFunc(data) {\n                var colVal = column.getFieldValue(data);\n\n                if (typeof colVal !== 'undefined' && colVal !== null) {\n                  return String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n                } else {\n                  return false;\n                }\n              };\n\n              type = \"like\";\n              break;\n\n            default:\n              filterFunc = function filterFunc(data) {\n                return column.getFieldValue(data) == value;\n              };\n\n              type = \"=\";\n          }\n        }\n\n        self.headerFilters[field] = {\n          value: value,\n          func: filterFunc,\n          type: type,\n          params: params || {}\n        };\n      } else {\n        delete self.headerFilters[field];\n      }\n\n      filterChangeCheck = JSON.stringify(self.headerFilters);\n\n      if (self.prevHeaderFilterChangeCheck !== filterChangeCheck) {\n        self.prevHeaderFilterChangeCheck = filterChangeCheck;\n        self.changed = true;\n        self.table.rowManager.filterRefresh();\n      }\n    }\n\n    return true;\n  }\n\n  column.modules.filter = {\n    success: success,\n    attrType: false,\n    tagType: false,\n    emptyFunc: false\n  };\n  this.generateHeaderFilterElement(column);\n};\n\nFilter.prototype.generateHeaderFilterElement = function (column, initialValue, reinitialize) {\n  var _this62 = this;\n\n  var self = this,\n      success = column.modules.filter.success,\n      field = column.getField(),\n      filterElement,\n      editor,\n      editorElement,\n      cellWrapper,\n      typingTimer,\n      searchTrigger,\n      params; //handle aborted edit\n\n  function cancel() {}\n\n  if (column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode) {\n    column.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n  }\n\n  if (field) {\n    //set empty value function\n    column.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function (value) {\n      return !value && value !== \"0\";\n    };\n\n    filterElement = document.createElement(\"div\");\n    filterElement.classList.add(\"tabulator-header-filter\"); //set column editor\n\n    switch (_typeof(column.definition.headerFilter)) {\n      case \"string\":\n        if (self.table.modules.edit.editors[column.definition.headerFilter]) {\n          editor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n          if ((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n            column.modules.filter.emptyFunc = function (value) {\n              return value !== true && value !== false;\n            };\n          }\n        } else {\n          console.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n        }\n\n        break;\n\n      case \"function\":\n        editor = column.definition.headerFilter;\n        break;\n\n      case \"boolean\":\n        if (column.modules.edit && column.modules.edit.editor) {\n          editor = column.modules.edit.editor;\n        } else {\n          if (column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]) {\n            editor = self.table.modules.edit.editors[column.definition.formatter];\n\n            if ((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n              column.modules.filter.emptyFunc = function (value) {\n                return value !== true && value !== false;\n              };\n            }\n          } else {\n            editor = self.table.modules.edit.editors[\"input\"];\n          }\n        }\n\n        break;\n    }\n\n    if (editor) {\n      cellWrapper = {\n        getValue: function getValue() {\n          return typeof initialValue !== \"undefined\" ? initialValue : \"\";\n        },\n        getField: function getField() {\n          return column.definition.field;\n        },\n        getElement: function getElement() {\n          return filterElement;\n        },\n        getColumn: function getColumn() {\n          return column.getComponent();\n        },\n        getRow: function getRow() {\n          return {\n            normalizeHeight: function normalizeHeight() {}\n          };\n        }\n      };\n      params = column.definition.headerFilterParams || {};\n      params = typeof params === \"function\" ? params.call(self.table) : params;\n      editorElement = editor.call(this.table.modules.edit, cellWrapper, function () {}, success, cancel, params);\n\n      if (!editorElement) {\n        console.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n        return;\n      }\n\n      if (!(editorElement instanceof Node)) {\n        console.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n        return;\n      } //set Placeholder Text\n\n\n      if (field) {\n        self.table.modules.localize.bind(\"headerFilters|columns|\" + column.definition.field, function (value) {\n          editorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : self.table.modules.localize.getText(\"headerFilters|default\"));\n        });\n      } else {\n        self.table.modules.localize.bind(\"headerFilters|default\", function (value) {\n          editorElement.setAttribute(\"placeholder\", typeof self.column.definition.headerFilterPlaceholder !== \"undefined\" && self.column.definition.headerFilterPlaceholder ? self.column.definition.headerFilterPlaceholder : value);\n        });\n      } //focus on element on click\n\n\n      editorElement.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        editorElement.focus();\n      });\n      editorElement.addEventListener(\"focus\", function (e) {\n        var left = _this62.table.columnManager.element.scrollLeft;\n\n        if (left !== _this62.table.rowManager.element.scrollLeft) {\n          _this62.table.rowManager.scrollHorizontal(left);\n\n          _this62.table.columnManager.scrollHorizontal(left);\n        }\n      }); //live update filters as user types\n\n      typingTimer = false;\n\n      searchTrigger = function searchTrigger(e) {\n        if (typingTimer) {\n          clearTimeout(typingTimer);\n        }\n\n        typingTimer = setTimeout(function () {\n          success(editorElement.value);\n        }, self.table.options.headerFilterLiveFilterDelay);\n      };\n\n      column.modules.filter.headerElement = editorElement;\n      column.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\";\n      column.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n      if (column.definition.headerFilterLiveFilter !== false) {\n        if (!(column.definition.headerFilter === 'autocomplete' || column.definition.headerFilter === 'tickCross' || (column.definition.editor === 'autocomplete' || column.definition.editor === 'tickCross') && column.definition.headerFilter === true)) {\n          editorElement.addEventListener(\"keyup\", searchTrigger);\n          editorElement.addEventListener(\"search\", searchTrigger); //update number filtered columns on change\n\n          if (column.modules.filter.attrType == \"number\") {\n            editorElement.addEventListener(\"change\", function (e) {\n              success(editorElement.value);\n            });\n          } //change text inputs to search inputs to allow for clearing of field\n\n\n          if (column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\") {\n            editorElement.setAttribute(\"type\", \"search\"); // editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n          }\n        } //prevent input and select elements from propegating click to column sorters etc\n\n\n        if (column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\") {\n          editorElement.addEventListener(\"mousedown\", function (e) {\n            e.stopPropagation();\n          });\n        }\n      }\n\n      filterElement.appendChild(editorElement);\n      column.contentElement.appendChild(filterElement);\n\n      if (!reinitialize) {\n        self.headerFilterColumns.push(column);\n      }\n    }\n  } else {\n    console.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n  }\n}; //hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\n\nFilter.prototype.hideHeaderFilterElements = function () {\n  this.headerFilterColumns.forEach(function (column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      column.modules.filter.headerElement.style.display = 'none';\n    }\n  });\n}; //show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\n\nFilter.prototype.showHeaderFilterElements = function () {\n  this.headerFilterColumns.forEach(function (column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      column.modules.filter.headerElement.style.display = '';\n    }\n  });\n}; //programatically set focus of header filter\n\n\nFilter.prototype.setHeaderFilterFocus = function (column) {\n  if (column.modules.filter && column.modules.filter.headerElement) {\n    column.modules.filter.headerElement.focus();\n  } else {\n    console.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n  }\n}; //programmatically get value of header filter\n\n\nFilter.prototype.getHeaderFilterValue = function (column) {\n  if (column.modules.filter && column.modules.filter.headerElement) {\n    return column.modules.filter.headerElement.value;\n  } else {\n    console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n  }\n}; //programatically set value of header filter\n\n\nFilter.prototype.setHeaderFilterValue = function (column, value) {\n  if (column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      this.generateHeaderFilterElement(column, value, true);\n      column.modules.filter.success(value);\n    } else {\n      console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n    }\n  }\n};\n\nFilter.prototype.reloadHeaderFilter = function (column) {\n  if (column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      this.generateHeaderFilterElement(column, column.modules.filter.value, true);\n    } else {\n      console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n    }\n  }\n}; //check if the filters has changed since last use\n\n\nFilter.prototype.hasChanged = function () {\n  var changed = this.changed;\n  this.changed = false;\n  return changed;\n}; //set standard filters\n\n\nFilter.prototype.setFilter = function (field, type, value, params) {\n  var self = this;\n  self.filterList = [];\n\n  if (!Array.isArray(field)) {\n    field = [{\n      field: field,\n      type: type,\n      value: value,\n      params: params\n    }];\n  }\n\n  self.addFilter(field);\n}; //add filter to array\n\n\nFilter.prototype.addFilter = function (field, type, value, params) {\n  var self = this;\n\n  if (!Array.isArray(field)) {\n    field = [{\n      field: field,\n      type: type,\n      value: value,\n      params: params\n    }];\n  }\n\n  field.forEach(function (filter) {\n    filter = self.findFilter(filter);\n\n    if (filter) {\n      self.filterList.push(filter);\n      self.changed = true;\n    }\n  });\n\n  if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n    this.table.modules.persistence.save(\"filter\");\n  }\n};\n\nFilter.prototype.findFilter = function (filter) {\n  var self = this,\n      column;\n\n  if (Array.isArray(filter)) {\n    return this.findSubFilters(filter);\n  }\n\n  var filterFunc = false;\n\n  if (typeof filter.field == \"function\") {\n    filterFunc = function filterFunc(data) {\n      return filter.field(data, filter.type || {}); // pass params to custom filter function\n    };\n  } else {\n    if (self.filters[filter.type]) {\n      column = self.table.columnManager.getColumnByField(filter.field);\n\n      if (column) {\n        filterFunc = function filterFunc(data) {\n          return self.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n        };\n      } else {\n        filterFunc = function filterFunc(data) {\n          return self.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n        };\n      }\n    } else {\n      console.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n    }\n  }\n\n  filter.func = filterFunc;\n  return filter.func ? filter : false;\n};\n\nFilter.prototype.findSubFilters = function (filters) {\n  var self = this,\n      output = [];\n  filters.forEach(function (filter) {\n    filter = self.findFilter(filter);\n\n    if (filter) {\n      output.push(filter);\n    }\n  });\n  return output.length ? output : false;\n}; //get all filters\n\n\nFilter.prototype.getFilters = function (all, ajax) {\n  var output = [];\n\n  if (all) {\n    output = this.getHeaderFilters();\n  }\n\n  if (ajax) {\n    output.forEach(function (item) {\n      if (typeof item.type == \"function\") {\n        item.type = \"function\";\n      }\n    });\n  }\n\n  output = output.concat(this.filtersToArray(this.filterList, ajax));\n  return output;\n}; //filter to Object\n\n\nFilter.prototype.filtersToArray = function (filterList, ajax) {\n  var _this63 = this;\n\n  var output = [];\n  filterList.forEach(function (filter) {\n    var item;\n\n    if (Array.isArray(filter)) {\n      output.push(_this63.filtersToArray(filter, ajax));\n    } else {\n      item = {\n        field: filter.field,\n        type: filter.type,\n        value: filter.value\n      };\n\n      if (ajax) {\n        if (typeof item.type == \"function\") {\n          item.type = \"function\";\n        }\n      }\n\n      output.push(item);\n    }\n  });\n  return output;\n}; //get all filters\n\n\nFilter.prototype.getHeaderFilters = function () {\n  var self = this,\n      output = [];\n\n  for (var key in this.headerFilters) {\n    output.push({\n      field: key,\n      type: this.headerFilters[key].type,\n      value: this.headerFilters[key].value\n    });\n  }\n\n  return output;\n}; //remove filter from array\n\n\nFilter.prototype.removeFilter = function (field, type, value) {\n  var self = this;\n\n  if (!Array.isArray(field)) {\n    field = [{\n      field: field,\n      type: type,\n      value: value\n    }];\n  }\n\n  field.forEach(function (filter) {\n    var index = -1;\n\n    if (_typeof(filter.field) == \"object\") {\n      index = self.filterList.findIndex(function (element) {\n        return filter === element;\n      });\n    } else {\n      index = self.filterList.findIndex(function (element) {\n        return filter.field === element.field && filter.type === element.type && filter.value === element.value;\n      });\n    }\n\n    if (index > -1) {\n      self.filterList.splice(index, 1);\n      self.changed = true;\n    } else {\n      console.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n    }\n  });\n\n  if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n    this.table.modules.persistence.save(\"filter\");\n  }\n}; //clear filters\n\n\nFilter.prototype.clearFilter = function (all) {\n  this.filterList = [];\n\n  if (all) {\n    this.clearHeaderFilter();\n  }\n\n  this.changed = true;\n\n  if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n    this.table.modules.persistence.save(\"filter\");\n  }\n}; //clear header filters\n\n\nFilter.prototype.clearHeaderFilter = function () {\n  var self = this;\n  this.headerFilters = {};\n  self.prevHeaderFilterChangeCheck = \"{}\";\n  this.headerFilterColumns.forEach(function (column) {\n    column.modules.filter.value = null;\n    column.modules.filter.prevSuccess = undefined;\n    self.reloadHeaderFilter(column);\n  });\n  this.changed = true;\n}; //search data and return matching rows\n\n\nFilter.prototype.search = function (searchType, field, type, value) {\n  var self = this,\n      activeRows = [],\n      filterList = [];\n\n  if (!Array.isArray(field)) {\n    field = [{\n      field: field,\n      type: type,\n      value: value\n    }];\n  }\n\n  field.forEach(function (filter) {\n    filter = self.findFilter(filter);\n\n    if (filter) {\n      filterList.push(filter);\n    }\n  });\n  this.table.rowManager.rows.forEach(function (row) {\n    var match = true;\n    filterList.forEach(function (filter) {\n      if (!self.filterRecurse(filter, row.getData())) {\n        match = false;\n      }\n    });\n\n    if (match) {\n      activeRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n    }\n  });\n  return activeRows;\n}; //filter row array\n\n\nFilter.prototype.filter = function (rowList, filters) {\n  var self = this,\n      activeRows = [],\n      activeRowComponents = [];\n\n  if (self.table.options.dataFiltering) {\n    self.table.options.dataFiltering.call(self.table, self.getFilters());\n  }\n\n  if (!self.table.options.ajaxFiltering && (self.filterList.length || Object.keys(self.headerFilters).length)) {\n    rowList.forEach(function (row) {\n      if (self.filterRow(row)) {\n        activeRows.push(row);\n      }\n    });\n  } else {\n    activeRows = rowList.slice(0);\n  }\n\n  if (self.table.options.dataFiltered) {\n    activeRows.forEach(function (row) {\n      activeRowComponents.push(row.getComponent());\n    });\n    self.table.options.dataFiltered.call(self.table, self.getFilters(), activeRowComponents);\n  }\n\n  return activeRows;\n}; //filter individual row\n\n\nFilter.prototype.filterRow = function (row, filters) {\n  var self = this,\n      match = true,\n      data = row.getData();\n  self.filterList.forEach(function (filter) {\n    if (!self.filterRecurse(filter, data)) {\n      match = false;\n    }\n  });\n\n  for (var field in self.headerFilters) {\n    if (!self.headerFilters[field].func(data)) {\n      match = false;\n    }\n  }\n\n  return match;\n};\n\nFilter.prototype.filterRecurse = function (filter, data) {\n  var self = this,\n      match = false;\n\n  if (Array.isArray(filter)) {\n    filter.forEach(function (subFilter) {\n      if (self.filterRecurse(subFilter, data)) {\n        match = true;\n      }\n    });\n  } else {\n    match = filter.func(data);\n  }\n\n  return match;\n}; //list of available filters\n\n\nFilter.prototype.filters = {\n  //equal to\n  \"=\": function _(filterVal, rowVal, rowData, filterParams) {\n    return rowVal == filterVal ? true : false;\n  },\n  //less than\n  \"<\": function _(filterVal, rowVal, rowData, filterParams) {\n    return rowVal < filterVal ? true : false;\n  },\n  //less than or equal to\n  \"<=\": function _(filterVal, rowVal, rowData, filterParams) {\n    return rowVal <= filterVal ? true : false;\n  },\n  //greater than\n  \">\": function _(filterVal, rowVal, rowData, filterParams) {\n    return rowVal > filterVal ? true : false;\n  },\n  //greater than or equal to\n  \">=\": function _(filterVal, rowVal, rowData, filterParams) {\n    return rowVal >= filterVal ? true : false;\n  },\n  //not equal to\n  \"!=\": function _(filterVal, rowVal, rowData, filterParams) {\n    return rowVal != filterVal ? true : false;\n  },\n  \"regex\": function regex(filterVal, rowVal, rowData, filterParams) {\n    if (typeof filterVal == \"string\") {\n      filterVal = new RegExp(filterVal);\n    }\n\n    return filterVal.test(rowVal);\n  },\n  //contains the string\n  \"like\": function like(filterVal, rowVal, rowData, filterParams) {\n    if (filterVal === null || typeof filterVal === \"undefined\") {\n      return rowVal === filterVal ? true : false;\n    } else {\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\n        return String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n      } else {\n        return false;\n      }\n    }\n  },\n  //contains the keywords\n  \"keywords\": function keywords(filterVal, rowVal, rowData, filterParams) {\n    var keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n        value = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n        matches = [];\n    keywords.forEach(function (keyword) {\n      if (value.includes(keyword)) {\n        matches.push(true);\n      }\n    });\n    return filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n  },\n  //starts with the string\n  \"starts\": function starts(filterVal, rowVal, rowData, filterParams) {\n    if (filterVal === null || typeof filterVal === \"undefined\") {\n      return rowVal === filterVal ? true : false;\n    } else {\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\n        return String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n      } else {\n        return false;\n      }\n    }\n  },\n  //ends with the string\n  \"ends\": function ends(filterVal, rowVal, rowData, filterParams) {\n    if (filterVal === null || typeof filterVal === \"undefined\") {\n      return rowVal === filterVal ? true : false;\n    } else {\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\n        return String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n      } else {\n        return false;\n      }\n    }\n  },\n  //in array\n  \"in\": function _in(filterVal, rowVal, rowData, filterParams) {\n    if (Array.isArray(filterVal)) {\n      return filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n    } else {\n      console.warn(\"Filter Error - filter value is not an array:\", filterVal);\n      return false;\n    }\n  }\n};\nTabulator.prototype.registerModule(\"filter\", Filter);\n\nvar Format = function Format(table) {\n  this.table = table; //hold Tabulator object\n}; //initialize column formatter\n\n\nFormat.prototype.initializeColumn = function (column) {\n  column.modules.format = this.lookupFormatter(column, \"\");\n\n  if (typeof column.definition.formatterPrint !== \"undefined\") {\n    column.modules.format.print = this.lookupFormatter(column, \"Print\");\n  }\n\n  if (typeof column.definition.formatterClipboard !== \"undefined\") {\n    column.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n  }\n\n  if (typeof column.definition.formatterHtmlOutput !== \"undefined\") {\n    column.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n  }\n};\n\nFormat.prototype.lookupFormatter = function (column, type) {\n  var config = {\n    params: column.definition[\"formatter\" + type + \"Params\"] || {}\n  },\n      formatter = column.definition[\"formatter\" + type]; //set column formatter\n\n  switch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n    case \"string\":\n      if (formatter === \"tick\") {\n        formatter = \"tickCross\";\n\n        if (typeof config.params.crossElement == \"undefined\") {\n          config.params.crossElement = false;\n        }\n\n        console.warn(\"DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false\");\n      }\n\n      if (this.formatters[formatter]) {\n        config.formatter = this.formatters[formatter];\n      } else {\n        console.warn(\"Formatter Error - No such formatter found: \", formatter);\n        config.formatter = this.formatters.plaintext;\n      }\n\n      break;\n\n    case \"function\":\n      config.formatter = formatter;\n      break;\n\n    default:\n      config.formatter = this.formatters.plaintext;\n      break;\n  }\n\n  return config;\n};\n\nFormat.prototype.cellRendered = function (cell) {\n  if (cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered) {\n    cell.modules.format.renderedCallback();\n    cell.modules.format.rendered = true;\n  }\n}; //return a formatted value for a cell\n\n\nFormat.prototype.formatValue = function (cell) {\n  var component = cell.getComponent(),\n      params = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\n  function onRendered(callback) {\n    if (!cell.modules.format) {\n      cell.modules.format = {};\n    }\n\n    cell.modules.format.renderedCallback = callback;\n    cell.modules.format.rendered = false;\n  }\n\n  return cell.column.modules.format.formatter.call(this, component, params, onRendered);\n};\n\nFormat.prototype.formatExportValue = function (cell, type) {\n  var formatter = cell.column.modules.format[type],\n      params;\n\n  if (formatter) {\n    var onRendered = function onRendered(callback) {\n      if (!cell.modules.format) {\n        cell.modules.format = {};\n      }\n\n      cell.modules.format.renderedCallback = callback;\n      cell.modules.format.rendered = false;\n    };\n\n    params = typeof formatter.params === \"function\" ? formatter.params(component) : formatter.params;\n    return formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n  } else {\n    return this.formatValue(cell);\n  }\n};\n\nFormat.prototype.sanitizeHTML = function (value) {\n  if (value) {\n    var entityMap = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;',\n      '/': '&#x2F;',\n      '`': '&#x60;',\n      '=': '&#x3D;'\n    };\n    return String(value).replace(/[&<>\"'`=\\/]/g, function (s) {\n      return entityMap[s];\n    });\n  } else {\n    return value;\n  }\n};\n\nFormat.prototype.emptyToSpace = function (value) {\n  return value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n}; //get formatter for cell\n\n\nFormat.prototype.getFormatter = function (formatter) {\n  var formatter;\n\n  switch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n    case \"string\":\n      if (this.formatters[formatter]) {\n        formatter = this.formatters[formatter];\n      } else {\n        console.warn(\"Formatter Error - No such formatter found: \", formatter);\n        formatter = this.formatters.plaintext;\n      }\n\n      break;\n\n    case \"function\":\n      formatter = formatter;\n      break;\n\n    default:\n      formatter = this.formatters.plaintext;\n      break;\n  }\n\n  return formatter;\n}; //default data formatters\n\n\nFormat.prototype.formatters = {\n  //plain text value\n  plaintext: function plaintext(cell, formatterParams, onRendered) {\n    return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n  },\n  //html text value\n  html: function html(cell, formatterParams, onRendered) {\n    return cell.getValue();\n  },\n  //multiline text area\n  textarea: function textarea(cell, formatterParams, onRendered) {\n    cell.getElement().style.whiteSpace = \"pre-wrap\";\n    return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n  },\n  //currency formatting\n  money: function money(cell, formatterParams, onRendered) {\n    var floatVal = parseFloat(cell.getValue()),\n        number,\n        integer,\n        decimal,\n        rgx;\n    var decimalSym = formatterParams.decimal || \".\";\n    var thousandSym = formatterParams.thousand || \",\";\n    var symbol = formatterParams.symbol || \"\";\n    var after = !!formatterParams.symbolAfter;\n    var precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n    if (isNaN(floatVal)) {\n      return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n    }\n\n    number = precision !== false ? floatVal.toFixed(precision) : floatVal;\n    number = String(number).split(\".\");\n    integer = number[0];\n    decimal = number.length > 1 ? decimalSym + number[1] : \"\";\n    rgx = /(\\d+)(\\d{3})/;\n\n    while (rgx.test(integer)) {\n      integer = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n    }\n\n    return after ? integer + decimal + symbol : symbol + integer + decimal;\n  },\n  //clickable anchor tag\n  link: function link(cell, formatterParams, onRendered) {\n    var value = cell.getValue(),\n        urlPrefix = formatterParams.urlPrefix || \"\",\n        download = formatterParams.download,\n        label = value,\n        el = document.createElement(\"a\"),\n        data;\n\n    if (formatterParams.labelField) {\n      data = cell.getData();\n      label = data[formatterParams.labelField];\n    }\n\n    if (formatterParams.label) {\n      switch (_typeof(formatterParams.label)) {\n        case \"string\":\n          label = formatterParams.label;\n          break;\n\n        case \"function\":\n          label = formatterParams.label(cell);\n          break;\n      }\n    }\n\n    if (label) {\n      if (formatterParams.urlField) {\n        data = cell.getData();\n        value = data[formatterParams.urlField];\n      }\n\n      if (formatterParams.url) {\n        switch (_typeof(formatterParams.url)) {\n          case \"string\":\n            value = formatterParams.url;\n            break;\n\n          case \"function\":\n            value = formatterParams.url(cell);\n            break;\n        }\n      }\n\n      el.setAttribute(\"href\", urlPrefix + value);\n\n      if (formatterParams.target) {\n        el.setAttribute(\"target\", formatterParams.target);\n      }\n\n      if (formatterParams.download) {\n        if (typeof download == \"function\") {\n          download = download(cell);\n        } else {\n          download = download === true ? \"\" : download;\n        }\n\n        el.setAttribute(\"download\", download);\n      }\n\n      el.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n      return el;\n    } else {\n      return \"&nbsp;\";\n    }\n  },\n  //image element\n  image: function image(cell, formatterParams, onRendered) {\n    var el = document.createElement(\"img\");\n    el.setAttribute(\"src\", cell.getValue());\n\n    switch (_typeof(formatterParams.height)) {\n      case \"number\":\n        el.style.height = formatterParams.height + \"px\";\n        break;\n\n      case \"string\":\n        el.style.height = formatterParams.height;\n        break;\n    }\n\n    switch (_typeof(formatterParams.width)) {\n      case \"number\":\n        el.style.width = formatterParams.width + \"px\";\n        break;\n\n      case \"string\":\n        el.style.width = formatterParams.width;\n        break;\n    }\n\n    el.addEventListener(\"load\", function () {\n      cell.getRow().normalizeHeight();\n    });\n    return el;\n  },\n  //tick or cross\n  tickCross: function tickCross(cell, formatterParams, onRendered) {\n    var value = cell.getValue(),\n        element = cell.getElement(),\n        empty = formatterParams.allowEmpty,\n        truthy = formatterParams.allowTruthy,\n        tick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n        cross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n    if (truthy && value || value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\") {\n      element.setAttribute(\"aria-checked\", true);\n      return tick || \"\";\n    } else {\n      if (empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")) {\n        element.setAttribute(\"aria-checked\", \"mixed\");\n        return \"\";\n      } else {\n        element.setAttribute(\"aria-checked\", false);\n        return cross || \"\";\n      }\n    }\n  },\n  datetime: function datetime(cell, formatterParams, onRendered) {\n    var inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n    var outputFormat = formatterParams.outputFormat || \"DD/MM/YYYY hh:mm:ss\";\n    var invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n    var value = cell.getValue();\n    var newDatetime = moment(value, inputFormat);\n\n    if (newDatetime.isValid()) {\n      return formatterParams.timezone ? newDatetime.tz(formatterParams.timezone).format(outputFormat) : newDatetime.format(outputFormat);\n    } else {\n      if (invalid === true) {\n        return value;\n      } else if (typeof invalid === \"function\") {\n        return invalid(value);\n      } else {\n        return invalid;\n      }\n    }\n  },\n  datetimediff: function datetime(cell, formatterParams, onRendered) {\n    var inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n    var invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n    var suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n    var unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : undefined;\n    var humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n    var date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : moment();\n    var value = cell.getValue();\n    var newDatetime = moment(value, inputFormat);\n\n    if (newDatetime.isValid()) {\n      if (humanize) {\n        return moment.duration(newDatetime.diff(date)).humanize(suffix);\n      } else {\n        return newDatetime.diff(date, unit) + (suffix ? \" \" + suffix : \"\");\n      }\n    } else {\n      if (invalid === true) {\n        return value;\n      } else if (typeof invalid === \"function\") {\n        return invalid(value);\n      } else {\n        return invalid;\n      }\n    }\n  },\n  //select\n  lookup: function lookup(cell, formatterParams, onRendered) {\n    var value = cell.getValue();\n\n    if (typeof formatterParams[value] === \"undefined\") {\n      console.warn('Missing display value for ' + value);\n      return value;\n    }\n\n    return formatterParams[value];\n  },\n  //star rating\n  star: function star(cell, formatterParams, onRendered) {\n    var value = cell.getValue(),\n        element = cell.getElement(),\n        maxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n        stars = document.createElement(\"span\"),\n        star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n        starActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n        starInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>'; //style stars holder\n\n    stars.style.verticalAlign = \"middle\"; //style star\n\n    star.setAttribute(\"width\", \"14\");\n    star.setAttribute(\"height\", \"14\");\n    star.setAttribute(\"viewBox\", \"0 0 512 512\");\n    star.setAttribute(\"xml:space\", \"preserve\");\n    star.style.padding = \"0 1px\";\n    value = value && !isNaN(value) ? parseInt(value) : 0;\n    value = Math.max(0, Math.min(value, maxStars));\n\n    for (var i = 1; i <= maxStars; i++) {\n      var nextStar = star.cloneNode(true);\n      nextStar.innerHTML = i <= value ? starActive : starInactive;\n      stars.appendChild(nextStar);\n    }\n\n    element.style.whiteSpace = \"nowrap\";\n    element.style.overflow = \"hidden\";\n    element.style.textOverflow = \"ellipsis\";\n    element.setAttribute(\"aria-label\", value);\n    return stars;\n  },\n  traffic: function traffic(cell, formatterParams, onRendered) {\n    var value = this.sanitizeHTML(cell.getValue()) || 0,\n        el = document.createElement(\"span\"),\n        max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n        min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n        colors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n        color = \"#666666\",\n        percent,\n        percentValue;\n\n    if (isNaN(value) || typeof cell.getValue() === \"undefined\") {\n      return;\n    }\n\n    el.classList.add(\"tabulator-traffic-light\"); //make sure value is in range\n\n    percentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n    percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min; //workout percentage\n\n    percent = (max - min) / 100;\n    percentValue = Math.round((percentValue - min) / percent); //set color\n\n    switch (typeof colors === 'undefined' ? 'undefined' : _typeof(colors)) {\n      case \"string\":\n        color = colors;\n        break;\n\n      case \"function\":\n        color = colors(value);\n        break;\n\n      case \"object\":\n        if (Array.isArray(colors)) {\n          var unit = 100 / colors.length;\n          var index = Math.floor(percentValue / unit);\n          index = Math.min(index, colors.length - 1);\n          index = Math.max(index, 0);\n          color = colors[index];\n          break;\n        }\n\n    }\n\n    el.style.backgroundColor = color;\n    return el;\n  },\n  //progress bar\n  progress: function progress(cell, formatterParams, onRendered) {\n    //progress bar\n    var value = this.sanitizeHTML(cell.getValue()) || 0,\n        element = cell.getElement(),\n        max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n        min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n        legendAlign = formatterParams && formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n        percent,\n        percentValue,\n        color,\n        legend,\n        legendColor,\n        top,\n        left,\n        right,\n        bottom; //make sure value is in range\n\n    percentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n    percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min; //workout percentage\n\n    percent = (max - min) / 100;\n    percentValue = Math.round((percentValue - min) / percent); //set bar color\n\n    switch (_typeof(formatterParams.color)) {\n      case \"string\":\n        color = formatterParams.color;\n        break;\n\n      case \"function\":\n        color = formatterParams.color(value);\n        break;\n\n      case \"object\":\n        if (Array.isArray(formatterParams.color)) {\n          var unit = 100 / formatterParams.color.length;\n          var index = Math.floor(percentValue / unit);\n          index = Math.min(index, formatterParams.color.length - 1);\n          index = Math.max(index, 0);\n          color = formatterParams.color[index];\n          break;\n        }\n\n      default:\n        color = \"#2DC214\";\n    } //generate legend\n\n\n    switch (_typeof(formatterParams.legend)) {\n      case \"string\":\n        legend = formatterParams.legend;\n        break;\n\n      case \"function\":\n        legend = formatterParams.legend(value);\n        break;\n\n      case \"boolean\":\n        legend = value;\n        break;\n\n      default:\n        legend = false;\n    } //set legend color\n\n\n    switch (_typeof(formatterParams.legendColor)) {\n      case \"string\":\n        legendColor = formatterParams.legendColor;\n        break;\n\n      case \"function\":\n        legendColor = formatterParams.legendColor(value);\n        break;\n\n      case \"object\":\n        if (Array.isArray(formatterParams.legendColor)) {\n          var unit = 100 / formatterParams.legendColor.length;\n          var index = Math.floor(percentValue / unit);\n          index = Math.min(index, formatterParams.legendColor.length - 1);\n          index = Math.max(index, 0);\n          legendColor = formatterParams.legendColor[index];\n        }\n\n        break;\n\n      default:\n        legendColor = \"#000\";\n    }\n\n    element.style.minWidth = \"30px\";\n    element.style.position = \"relative\";\n    element.setAttribute(\"aria-label\", percentValue);\n    var barEl = document.createElement(\"div\");\n    barEl.style.display = \"inline-block\";\n    barEl.style.position = \"relative\";\n    barEl.style.width = percentValue + \"%\";\n    barEl.style.backgroundColor = color;\n    barEl.style.height = \"100%\";\n    barEl.setAttribute('data-max', max);\n    barEl.setAttribute('data-min', min);\n\n    if (legend) {\n      var legendEl = document.createElement(\"div\");\n      legendEl.style.position = \"absolute\";\n      legendEl.style.top = \"4px\";\n      legendEl.style.left = 0;\n      legendEl.style.textAlign = legendAlign;\n      legendEl.style.width = \"100%\";\n      legendEl.style.color = legendColor;\n      legendEl.innerHTML = legend;\n    }\n\n    onRendered(function () {\n      //handle custom element needed if formatter is to be included in printed/downloaded output\n      if (!(cell instanceof CellComponent)) {\n        var holderEl = document.createElement(\"div\");\n        holderEl.style.position = \"absolute\";\n        holderEl.style.top = \"4px\";\n        holderEl.style.bottom = \"4px\";\n        holderEl.style.left = \"4px\";\n        holderEl.style.right = \"4px\";\n        element.appendChild(holderEl);\n        element = holderEl;\n      }\n\n      element.appendChild(barEl);\n\n      if (legend) {\n        element.appendChild(legendEl);\n      }\n    });\n    return \"\";\n  },\n  //background color\n  color: function color(cell, formatterParams, onRendered) {\n    cell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n    return \"\";\n  },\n  //tick icon\n  buttonTick: function buttonTick(cell, formatterParams, onRendered) {\n    return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n  },\n  //cross icon\n  buttonCross: function buttonCross(cell, formatterParams, onRendered) {\n    return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n  },\n  //current row number\n  rownum: function rownum(cell, formatterParams, onRendered) {\n    return this.table.rowManager.activeRows.indexOf(cell.getRow()._getSelf()) + 1;\n  },\n  //row handle\n  handle: function handle(cell, formatterParams, onRendered) {\n    cell.getElement().classList.add(\"tabulator-row-handle\");\n    return \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n  },\n  responsiveCollapse: function responsiveCollapse(cell, formatterParams, onRendered) {\n    var self = this,\n        open = false,\n        el = document.createElement(\"div\"),\n        config = cell.getRow()._row.modules.responsiveLayout;\n\n    el.classList.add(\"tabulator-responsive-collapse-toggle\");\n    el.innerHTML = \"<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>\";\n    cell.getElement().classList.add(\"tabulator-row-handle\");\n\n    function toggleList(isOpen) {\n      var collapseEl = config.element;\n      config.open = isOpen;\n\n      if (collapseEl) {\n        if (config.open) {\n          el.classList.add(\"open\");\n          collapseEl.style.display = '';\n        } else {\n          el.classList.remove(\"open\");\n          collapseEl.style.display = 'none';\n        }\n      }\n    }\n\n    el.addEventListener(\"click\", function (e) {\n      e.stopImmediatePropagation();\n      toggleList(!config.open);\n    });\n    toggleList(config.open);\n    return el;\n  },\n  rowSelection: function rowSelection(cell, formatterParams, onRendered) {\n    var _this64 = this;\n\n    var checkbox = document.createElement(\"input\");\n    checkbox.type = 'checkbox';\n\n    if (this.table.modExists(\"selectRow\", true)) {\n      checkbox.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n      });\n\n      if (typeof cell.getRow == 'function') {\n        var row = cell.getRow();\n\n        if (row instanceof RowComponent) {\n          checkbox.addEventListener(\"change\", function (e) {\n            row.toggleSelect();\n          });\n          checkbox.checked = row.isSelected && row.isSelected();\n          this.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n        } else {\n          checkbox = \"\";\n        }\n      } else {\n        checkbox.addEventListener(\"change\", function (e) {\n          if (_this64.table.modules.selectRow.selectedRows.length) {\n            _this64.table.deselectRow();\n          } else {\n            _this64.table.selectRow(formatterParams.rowRange);\n          }\n        });\n        this.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n      }\n    }\n\n    return checkbox;\n  }\n};\nTabulator.prototype.registerModule(\"format\", Format);\n\nvar FrozenColumns = function FrozenColumns(table) {\n  this.table = table; //hold Tabulator object\n\n  this.leftColumns = [];\n  this.rightColumns = [];\n  this.leftMargin = 0;\n  this.rightMargin = 0;\n  this.rightPadding = 0;\n  this.initializationMode = \"left\";\n  this.active = false;\n  this.scrollEndTimer = false;\n}; //reset initial state\n\n\nFrozenColumns.prototype.reset = function () {\n  this.initializationMode = \"left\";\n  this.leftColumns = [];\n  this.rightColumns = [];\n  this.leftMargin = 0;\n  this.rightMargin = 0;\n  this.rightMargin = 0;\n  this.active = false;\n  this.table.columnManager.headersElement.style.marginLeft = 0;\n  this.table.columnManager.element.style.paddingRight = 0;\n}; //initialize specific column\n\n\nFrozenColumns.prototype.initializeColumn = function (column) {\n  var config = {\n    margin: 0,\n    edge: false\n  };\n\n  if (!column.isGroup) {\n    if (this.frozenCheck(column)) {\n      config.position = this.initializationMode;\n\n      if (this.initializationMode == \"left\") {\n        this.leftColumns.push(column);\n      } else {\n        this.rightColumns.unshift(column);\n      }\n\n      this.active = true;\n      column.modules.frozen = config;\n    } else {\n      this.initializationMode = \"right\";\n    }\n  }\n};\n\nFrozenColumns.prototype.frozenCheck = function (column) {\n  var frozen = false;\n\n  if (column.parent.isGroup && column.definition.frozen) {\n    console.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n  }\n\n  if (column.parent.isGroup) {\n    return this.frozenCheck(column.parent);\n  } else {\n    return column.definition.frozen;\n  }\n\n  return frozen;\n}; //quick layout to smooth horizontal scrolling\n\n\nFrozenColumns.prototype.scrollHorizontal = function () {\n  var _this65 = this;\n\n  var rows;\n\n  if (this.active) {\n    clearTimeout(this.scrollEndTimer); //layout all rows after scroll is complete\n\n    this.scrollEndTimer = setTimeout(function () {\n      _this65.layout();\n    }, 100);\n    rows = this.table.rowManager.getVisibleRows();\n    this.calcMargins();\n    this.layoutColumnPosition();\n    this.layoutCalcRows();\n    rows.forEach(function (row) {\n      if (row.type === \"row\") {\n        _this65.layoutRow(row);\n      }\n    });\n    this.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n  }\n}; //calculate margins for rows\n\n\nFrozenColumns.prototype.calcMargins = function () {\n  this.leftMargin = this._calcSpace(this.leftColumns, this.leftColumns.length) + \"px\";\n  this.table.columnManager.headersElement.style.marginLeft = this.leftMargin;\n  this.rightMargin = this._calcSpace(this.rightColumns, this.rightColumns.length) + \"px\";\n  this.table.columnManager.element.style.paddingRight = this.rightMargin; //calculate right frozen columns\n\n  this.rightPadding = this.table.rowManager.element.clientWidth + this.table.columnManager.scrollLeft;\n}; //layout calculation rows\n\n\nFrozenColumns.prototype.layoutCalcRows = function () {\n  if (this.table.modExists(\"columnCalcs\")) {\n    if (this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow) {\n      this.layoutRow(this.table.modules.columnCalcs.topRow);\n    }\n\n    if (this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow) {\n      this.layoutRow(this.table.modules.columnCalcs.botRow);\n    }\n  }\n}; //calculate column positions and layout headers\n\n\nFrozenColumns.prototype.layoutColumnPosition = function (allCells) {\n  var _this66 = this;\n\n  var leftParents = [];\n  this.leftColumns.forEach(function (column, i) {\n    column.modules.frozen.margin = _this66._calcSpace(_this66.leftColumns, i) + _this66.table.columnManager.scrollLeft + \"px\";\n\n    if (i == _this66.leftColumns.length - 1) {\n      column.modules.frozen.edge = true;\n    } else {\n      column.modules.frozen.edge = false;\n    }\n\n    if (column.parent.isGroup) {\n      var parentEl = _this66.getColGroupParentElement(column);\n\n      if (!leftParents.includes(parentEl)) {\n        _this66.layoutElement(parentEl, column);\n\n        leftParents.push(parentEl);\n      }\n\n      if (column.modules.frozen.edge) {\n        parentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n      }\n    } else {\n      _this66.layoutElement(column.getElement(), column);\n    }\n\n    if (allCells) {\n      column.cells.forEach(function (cell) {\n        _this66.layoutElement(cell.getElement(), column);\n      });\n    }\n  });\n  this.rightColumns.forEach(function (column, i) {\n    column.modules.frozen.margin = _this66.rightPadding - _this66._calcSpace(_this66.rightColumns, i + 1) + \"px\";\n\n    if (i == _this66.rightColumns.length - 1) {\n      column.modules.frozen.edge = true;\n    } else {\n      column.modules.frozen.edge = false;\n    }\n\n    if (column.parent.isGroup) {\n      _this66.layoutElement(_this66.getColGroupParentElement(column), column);\n    } else {\n      _this66.layoutElement(column.getElement(), column);\n    }\n\n    if (allCells) {\n      column.cells.forEach(function (cell) {\n        _this66.layoutElement(cell.getElement(), column);\n      });\n    }\n  });\n};\n\nFrozenColumns.prototype.getColGroupParentElement = function (column) {\n  return column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n}; //layout columns appropropriatly\n\n\nFrozenColumns.prototype.layout = function () {\n  var self = this,\n      rightMargin = 0;\n\n  if (self.active) {\n    //calculate row padding\n    this.calcMargins(); // self.table.rowManager.activeRows.forEach(function(row){\n    // \tself.layoutRow(row);\n    // });\n    // if(self.table.options.dataTree){\n\n    self.table.rowManager.getDisplayRows().forEach(function (row) {\n      if (row.type === \"row\") {\n        self.layoutRow(row);\n      }\n    }); // }\n\n    this.layoutCalcRows(); //calculate left columns\n\n    this.layoutColumnPosition(true); // if(tableHolder.scrollHeight > tableHolder.clientHeight){\n    // \trightMargin -= tableHolder.offsetWidth - tableHolder.clientWidth;\n    // }\n\n    this.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n  }\n};\n\nFrozenColumns.prototype.layoutRow = function (row) {\n  var _this67 = this;\n\n  var rowEl = row.getElement();\n  rowEl.style.paddingLeft = this.leftMargin; // rowEl.style.paddingRight = this.rightMargin + \"px\";\n\n  this.leftColumns.forEach(function (column) {\n    var cell = row.getCell(column);\n\n    if (cell) {\n      _this67.layoutElement(cell.getElement(), column);\n    }\n  });\n  this.rightColumns.forEach(function (column) {\n    var cell = row.getCell(column);\n\n    if (cell) {\n      _this67.layoutElement(cell.getElement(), column);\n    }\n  });\n};\n\nFrozenColumns.prototype.layoutElement = function (element, column) {\n  if (column.modules.frozen) {\n    element.style.position = \"absolute\";\n    element.style.left = column.modules.frozen.margin;\n    element.classList.add(\"tabulator-frozen\");\n\n    if (column.modules.frozen.edge) {\n      element.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n    }\n  }\n};\n\nFrozenColumns.prototype._calcSpace = function (columns, index) {\n  var width = 0;\n\n  for (var _i12 = 0; _i12 < index; _i12++) {\n    if (columns[_i12].visible) {\n      width += columns[_i12].getWidth();\n    }\n  }\n\n  return width;\n};\n\nTabulator.prototype.registerModule(\"frozenColumns\", FrozenColumns);\n\nvar FrozenRows = function FrozenRows(table) {\n  this.table = table; //hold Tabulator object\n\n  this.topElement = document.createElement(\"div\");\n  this.rows = [];\n  this.displayIndex = 0; //index in display pipeline\n};\n\nFrozenRows.prototype.initialize = function () {\n  this.rows = [];\n  this.topElement.classList.add(\"tabulator-frozen-rows-holder\"); // this.table.columnManager.element.append(this.topElement);\n\n  this.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n};\n\nFrozenRows.prototype.setDisplayIndex = function (index) {\n  this.displayIndex = index;\n};\n\nFrozenRows.prototype.getDisplayIndex = function () {\n  return this.displayIndex;\n};\n\nFrozenRows.prototype.isFrozen = function () {\n  return !!this.rows.length;\n}; //filter frozen rows out of display data\n\n\nFrozenRows.prototype.getRows = function (rows) {\n  var self = this,\n      frozen = [],\n      output = rows.slice(0);\n  this.rows.forEach(function (row) {\n    var index = output.indexOf(row);\n\n    if (index > -1) {\n      output.splice(index, 1);\n    }\n  });\n  return output;\n};\n\nFrozenRows.prototype.freezeRow = function (row) {\n  if (!row.modules.frozen) {\n    row.modules.frozen = true;\n    this.topElement.appendChild(row.getElement());\n    row.initialize();\n    row.normalizeHeight();\n    this.table.rowManager.adjustTableSize();\n    this.rows.push(row);\n    this.table.rowManager.refreshActiveData(\"display\");\n    this.styleRows();\n  } else {\n    console.warn(\"Freeze Error - Row is already frozen\");\n  }\n};\n\nFrozenRows.prototype.unfreezeRow = function (row) {\n  var index = this.rows.indexOf(row);\n\n  if (row.modules.frozen) {\n    row.modules.frozen = false;\n    this.detachRow(row);\n    this.table.rowManager.adjustTableSize();\n    this.table.rowManager.refreshActiveData(\"display\");\n\n    if (this.rows.length) {\n      this.styleRows();\n    }\n  } else {\n    console.warn(\"Freeze Error - Row is already unfrozen\");\n  }\n};\n\nFrozenRows.prototype.detachRow = function (row) {\n  var index = this.rows.indexOf(row);\n\n  if (index > -1) {\n    var rowEl = row.getElement();\n    rowEl.parentNode.removeChild(rowEl);\n    this.rows.splice(index, 1);\n  }\n};\n\nFrozenRows.prototype.styleRows = function (row) {\n  var self = this;\n  this.rows.forEach(function (row, i) {\n    self.table.rowManager.styleRow(row, i);\n  });\n};\n\nTabulator.prototype.registerModule(\"frozenRows\", FrozenRows); //public group object\n\nvar GroupComponent = function GroupComponent(group) {\n  this._group = group;\n  this.type = \"GroupComponent\";\n};\n\nGroupComponent.prototype.getKey = function () {\n  return this._group.key;\n};\n\nGroupComponent.prototype.getField = function () {\n  return this._group.field;\n};\n\nGroupComponent.prototype.getElement = function () {\n  return this._group.element;\n};\n\nGroupComponent.prototype.getRows = function () {\n  return this._group.getRows(true);\n};\n\nGroupComponent.prototype.getSubGroups = function () {\n  return this._group.getSubGroups(true);\n};\n\nGroupComponent.prototype.getParentGroup = function () {\n  return this._group.parent ? this._group.parent.getComponent() : false;\n};\n\nGroupComponent.prototype.getVisibility = function () {\n  console.warn(\"getVisibility function is deprecated, you should now use the isVisible function\");\n  return this._group.visible;\n};\n\nGroupComponent.prototype.isVisible = function () {\n  return this._group.visible;\n};\n\nGroupComponent.prototype.show = function () {\n  this._group.show();\n};\n\nGroupComponent.prototype.hide = function () {\n  this._group.hide();\n};\n\nGroupComponent.prototype.toggle = function () {\n  this._group.toggleVisibility();\n};\n\nGroupComponent.prototype._getSelf = function () {\n  return this._group;\n};\n\nGroupComponent.prototype.getTable = function () {\n  return this._group.groupManager.table;\n}; //////////////////////////////////////////////////\n//////////////// Group Functions /////////////////\n//////////////////////////////////////////////////\n\n\nvar Group = function Group(groupManager, parent, level, key, field, generator, oldGroup) {\n  this.groupManager = groupManager;\n  this.parent = parent;\n  this.key = key;\n  this.level = level;\n  this.field = field;\n  this.hasSubGroups = level < groupManager.groupIDLookups.length - 1;\n  this.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n  this.type = \"group\"; //type of element\n\n  this.old = oldGroup;\n  this.rows = [];\n  this.groups = [];\n  this.groupList = [];\n  this.generator = generator;\n  this.elementContents = false;\n  this.height = 0;\n  this.outerHeight = 0;\n  this.initialized = false;\n  this.calcs = {};\n  this.initialized = false;\n  this.modules = {};\n  this.arrowElement = false;\n  this.visible = oldGroup ? oldGroup.visible : typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0];\n  this.component = null;\n  this.createElements();\n  this.addBindings();\n  this.createValueGroups();\n};\n\nGroup.prototype.wipe = function () {\n  if (this.groupList.length) {\n    this.groupList.forEach(function (group) {\n      group.wipe();\n    });\n  } else {\n    this.element = false;\n    this.arrowElement = false;\n    this.elementContents = false;\n  }\n};\n\nGroup.prototype.createElements = function () {\n  var arrow = document.createElement(\"div\");\n  arrow.classList.add(\"tabulator-arrow\");\n  this.element = document.createElement(\"div\");\n  this.element.classList.add(\"tabulator-row\");\n  this.element.classList.add(\"tabulator-group\");\n  this.element.classList.add(\"tabulator-group-level-\" + this.level);\n  this.element.setAttribute(\"role\", \"rowgroup\");\n  this.arrowElement = document.createElement(\"div\");\n  this.arrowElement.classList.add(\"tabulator-group-toggle\");\n  this.arrowElement.appendChild(arrow); //setup movable rows\n\n  if (this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")) {\n    this.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n  }\n};\n\nGroup.prototype.createValueGroups = function () {\n  var _this68 = this;\n\n  var level = this.level + 1;\n\n  if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n    this.groupManager.allowedValues[level].forEach(function (value) {\n      _this68._createGroup(value, level);\n    });\n  }\n};\n\nGroup.prototype.addBindings = function () {\n  var self = this,\n      dblTap,\n      tapHold,\n      tap,\n      toggleElement; //handle group click events\n\n  if (self.groupManager.table.options.groupClick) {\n    self.element.addEventListener(\"click\", function (e) {\n      self.groupManager.table.options.groupClick.call(self.groupManager.table, e, self.getComponent());\n    });\n  }\n\n  if (self.groupManager.table.options.groupDblClick) {\n    self.element.addEventListener(\"dblclick\", function (e) {\n      self.groupManager.table.options.groupDblClick.call(self.groupManager.table, e, self.getComponent());\n    });\n  }\n\n  if (self.groupManager.table.options.groupContext) {\n    self.element.addEventListener(\"contextmenu\", function (e) {\n      self.groupManager.table.options.groupContext.call(self.groupManager.table, e, self.getComponent());\n    });\n  }\n\n  if ((self.groupManager.table.options.groupContextMenu || self.groupManager.table.options.groupClickMenu) && self.groupManager.table.modExists(\"menu\")) {\n    self.groupManager.table.modules.menu.initializeGroup.call(self.groupManager.table.modules.menu, self);\n  }\n\n  if (self.groupManager.table.options.groupTap) {\n    tap = false;\n    self.element.addEventListener(\"touchstart\", function (e) {\n      tap = true;\n    }, {\n      passive: true\n    });\n    self.element.addEventListener(\"touchend\", function (e) {\n      if (tap) {\n        self.groupManager.table.options.groupTap(e, self.getComponent());\n      }\n\n      tap = false;\n    });\n  }\n\n  if (self.groupManager.table.options.groupDblTap) {\n    dblTap = null;\n    self.element.addEventListener(\"touchend\", function (e) {\n      if (dblTap) {\n        clearTimeout(dblTap);\n        dblTap = null;\n        self.groupManager.table.options.groupDblTap(e, self.getComponent());\n      } else {\n        dblTap = setTimeout(function () {\n          clearTimeout(dblTap);\n          dblTap = null;\n        }, 300);\n      }\n    });\n  }\n\n  if (self.groupManager.table.options.groupTapHold) {\n    tapHold = null;\n    self.element.addEventListener(\"touchstart\", function (e) {\n      clearTimeout(tapHold);\n      tapHold = setTimeout(function () {\n        clearTimeout(tapHold);\n        tapHold = null;\n        tap = false;\n        self.groupManager.table.options.groupTapHold(e, self.getComponent());\n      }, 1000);\n    }, {\n      passive: true\n    });\n    self.element.addEventListener(\"touchend\", function (e) {\n      clearTimeout(tapHold);\n      tapHold = null;\n    });\n  }\n\n  if (self.groupManager.table.options.groupToggleElement) {\n    toggleElement = self.groupManager.table.options.groupToggleElement == \"arrow\" ? self.arrowElement : self.element;\n    toggleElement.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      self.toggleVisibility();\n    });\n  }\n};\n\nGroup.prototype._createGroup = function (groupID, level) {\n  var groupKey = level + \"_\" + groupID;\n  var group = new Group(this.groupManager, this, level, groupID, this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n  this.groups[groupKey] = group;\n  this.groupList.push(group);\n};\n\nGroup.prototype._addRowToGroup = function (row) {\n  var level = this.level + 1;\n\n  if (this.hasSubGroups) {\n    var groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n        groupKey = level + \"_\" + groupID;\n\n    if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n      if (this.groups[groupKey]) {\n        this.groups[groupKey].addRow(row);\n      }\n    } else {\n      if (!this.groups[groupKey]) {\n        this._createGroup(groupID, level);\n      }\n\n      this.groups[groupKey].addRow(row);\n    }\n  }\n};\n\nGroup.prototype._addRow = function (row) {\n  this.rows.push(row);\n  row.modules.group = this;\n};\n\nGroup.prototype.insertRow = function (row, to, after) {\n  var data = this.conformRowData({});\n  row.updateData(data);\n  var toIndex = this.rows.indexOf(to);\n\n  if (toIndex > -1) {\n    if (after) {\n      this.rows.splice(toIndex + 1, 0, row);\n    } else {\n      this.rows.splice(toIndex, 0, row);\n    }\n  } else {\n    if (after) {\n      this.rows.push(row);\n    } else {\n      this.rows.unshift(row);\n    }\n  }\n\n  row.modules.group = this;\n  this.generateGroupHeaderContents();\n\n  if (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n    this.groupManager.table.modules.columnCalcs.recalcGroup(this);\n  }\n\n  this.groupManager.updateGroupRows(true);\n};\n\nGroup.prototype.scrollHeader = function (left) {\n  this.arrowElement.style.marginLeft = left;\n  this.groupList.forEach(function (child) {\n    child.scrollHeader(left);\n  });\n};\n\nGroup.prototype.getRowIndex = function (row) {}; //update row data to match grouping contraints\n\n\nGroup.prototype.conformRowData = function (data) {\n  if (this.field) {\n    data[this.field] = this.key;\n  } else {\n    console.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n  }\n\n  if (this.parent) {\n    data = this.parent.conformRowData(data);\n  }\n\n  return data;\n};\n\nGroup.prototype.removeRow = function (row) {\n  var index = this.rows.indexOf(row);\n  var el = row.getElement();\n\n  if (index > -1) {\n    this.rows.splice(index, 1);\n  }\n\n  if (!this.groupManager.table.options.groupValues && !this.rows.length) {\n    if (this.parent) {\n      this.parent.removeGroup(this);\n    } else {\n      this.groupManager.removeGroup(this);\n    }\n\n    this.groupManager.updateGroupRows(true);\n  } else {\n    if (el.parentNode) {\n      el.parentNode.removeChild(el);\n    }\n\n    this.generateGroupHeaderContents();\n\n    if (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n      this.groupManager.table.modules.columnCalcs.recalcGroup(this);\n    }\n  }\n};\n\nGroup.prototype.removeGroup = function (group) {\n  var groupKey = group.level + \"_\" + group.key,\n      index;\n\n  if (this.groups[groupKey]) {\n    delete this.groups[groupKey];\n    index = this.groupList.indexOf(group);\n\n    if (index > -1) {\n      this.groupList.splice(index, 1);\n    }\n\n    if (!this.groupList.length) {\n      if (this.parent) {\n        this.parent.removeGroup(this);\n      } else {\n        this.groupManager.removeGroup(this);\n      }\n    }\n  }\n};\n\nGroup.prototype.getHeadersAndRows = function (noCalc) {\n  var output = [];\n  output.push(this);\n\n  this._visSet();\n\n  if (this.visible) {\n    if (this.groupList.length) {\n      this.groupList.forEach(function (group) {\n        output = output.concat(group.getHeadersAndRows(noCalc));\n      });\n    } else {\n      if (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n        if (this.calcs.top) {\n          this.calcs.top.detachElement();\n          this.calcs.top.deleteCells();\n        }\n\n        this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n        output.push(this.calcs.top);\n      }\n\n      output = output.concat(this.rows);\n\n      if (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n        if (this.calcs.bottom) {\n          this.calcs.bottom.detachElement();\n          this.calcs.bottom.deleteCells();\n        }\n\n        this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n        output.push(this.calcs.bottom);\n      }\n    }\n  } else {\n    if (!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\") {\n      if (this.groupManager.table.modExists(\"columnCalcs\")) {\n        if (!noCalc && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n          if (this.calcs.top) {\n            this.calcs.top.detachElement();\n            this.calcs.top.deleteCells();\n          }\n\n          if (this.groupManager.table.options.groupClosedShowCalcs) {\n            this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n            output.push(this.calcs.top);\n          }\n        }\n\n        if (!noCalc && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n          if (this.calcs.bottom) {\n            this.calcs.bottom.detachElement();\n            this.calcs.bottom.deleteCells();\n          }\n\n          if (this.groupManager.table.options.groupClosedShowCalcs) {\n            this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n            output.push(this.calcs.bottom);\n          }\n        }\n      }\n    }\n  }\n\n  return output;\n};\n\nGroup.prototype.getData = function (visible, transform) {\n  var self = this,\n      output = [];\n\n  this._visSet();\n\n  if (!visible || visible && this.visible) {\n    this.rows.forEach(function (row) {\n      output.push(row.getData(transform || \"data\"));\n    });\n  }\n\n  return output;\n}; // Group.prototype.getRows = function(){\n// \tthis._visSet();\n// \treturn this.visible ? this.rows : [];\n// };\n\n\nGroup.prototype.getRowCount = function () {\n  var count = 0;\n\n  if (this.groupList.length) {\n    this.groupList.forEach(function (group) {\n      count += group.getRowCount();\n    });\n  } else {\n    count = this.rows.length;\n  }\n\n  return count;\n};\n\nGroup.prototype.toggleVisibility = function () {\n  if (this.visible) {\n    this.hide();\n  } else {\n    this.show();\n  }\n};\n\nGroup.prototype.hide = function () {\n  this.visible = false;\n\n  if (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n    this.element.classList.remove(\"tabulator-group-visible\");\n\n    if (this.groupList.length) {\n      this.groupList.forEach(function (group) {\n        var rows = group.getHeadersAndRows();\n        rows.forEach(function (row) {\n          row.detachElement();\n        });\n      });\n    } else {\n      this.rows.forEach(function (row) {\n        var rowEl = row.getElement();\n        rowEl.parentNode.removeChild(rowEl);\n      });\n    }\n\n    this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n    this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n  } else {\n    this.groupManager.updateGroupRows(true);\n  }\n\n  this.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), false);\n};\n\nGroup.prototype.show = function () {\n  var self = this;\n  self.visible = true;\n\n  if (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n    this.element.classList.add(\"tabulator-group-visible\");\n    var prev = self.getElement();\n\n    if (this.groupList.length) {\n      this.groupList.forEach(function (group) {\n        var rows = group.getHeadersAndRows();\n        rows.forEach(function (row) {\n          var rowEl = row.getElement();\n          prev.parentNode.insertBefore(rowEl, prev.nextSibling);\n          row.initialize();\n          prev = rowEl;\n        });\n      });\n    } else {\n      self.rows.forEach(function (row) {\n        var rowEl = row.getElement();\n        prev.parentNode.insertBefore(rowEl, prev.nextSibling);\n        row.initialize();\n        prev = rowEl;\n      });\n    }\n\n    this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n    this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n  } else {\n    this.groupManager.updateGroupRows(true);\n  }\n\n  this.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), true);\n};\n\nGroup.prototype._visSet = function () {\n  var data = [];\n\n  if (typeof this.visible == \"function\") {\n    this.rows.forEach(function (row) {\n      data.push(row.getData());\n    });\n    this.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n  }\n};\n\nGroup.prototype.getRowGroup = function (row) {\n  var match = false;\n\n  if (this.groupList.length) {\n    this.groupList.forEach(function (group) {\n      var result = group.getRowGroup(row);\n\n      if (result) {\n        match = result;\n      }\n    });\n  } else {\n    if (this.rows.find(function (item) {\n      return item === row;\n    })) {\n      match = this;\n    }\n  }\n\n  return match;\n};\n\nGroup.prototype.getSubGroups = function (component) {\n  var output = [];\n  this.groupList.forEach(function (child) {\n    output.push(component ? child.getComponent() : child);\n  });\n  return output;\n};\n\nGroup.prototype.getRows = function (compoment) {\n  var output = [];\n  this.rows.forEach(function (row) {\n    output.push(compoment ? row.getComponent() : row);\n  });\n  return output;\n};\n\nGroup.prototype.generateGroupHeaderContents = function () {\n  var data = [];\n  this.rows.forEach(function (row) {\n    data.push(row.getData());\n  });\n  this.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\n  while (this.element.firstChild) {\n    this.element.removeChild(this.element.firstChild);\n  }\n\n  if (typeof this.elementContents === \"string\") {\n    this.element.innerHTML = this.elementContents;\n  } else {\n    this.element.appendChild(this.elementContents);\n  }\n\n  this.element.insertBefore(this.arrowElement, this.element.firstChild);\n};\n\nGroup.prototype.getPath = function () {\n  var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  path.unshift(this.key);\n\n  if (this.parent) {\n    this.parent.getPath(path);\n  }\n\n  return path;\n}; ////////////// Standard Row Functions //////////////\n\n\nGroup.prototype.getElement = function () {\n  this.addBindingsd = false;\n\n  this._visSet();\n\n  if (this.visible) {\n    this.element.classList.add(\"tabulator-group-visible\");\n  } else {\n    this.element.classList.remove(\"tabulator-group-visible\");\n  }\n\n  for (var i = 0; i < this.element.childNodes.length; ++i) {\n    this.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n  }\n\n  this.generateGroupHeaderContents(); // this.addBindings();\n\n  return this.element;\n};\n\nGroup.prototype.detachElement = function () {\n  if (this.element && this.element.parentNode) {\n    this.element.parentNode.removeChild(this.element);\n  }\n}; //normalize the height of elements in the row\n\n\nGroup.prototype.normalizeHeight = function () {\n  this.setHeight(this.element.clientHeight);\n};\n\nGroup.prototype.initialize = function (force) {\n  if (!this.initialized || force) {\n    this.normalizeHeight();\n    this.initialized = true;\n  }\n};\n\nGroup.prototype.reinitialize = function () {\n  this.initialized = false;\n  this.height = 0;\n\n  if (Tabulator.prototype.helpers.elVisible(this.element)) {\n    this.initialize(true);\n  }\n};\n\nGroup.prototype.setHeight = function (height) {\n  if (this.height != height) {\n    this.height = height;\n    this.outerHeight = this.element.offsetHeight;\n  }\n}; //return rows outer height\n\n\nGroup.prototype.getHeight = function () {\n  return this.outerHeight;\n};\n\nGroup.prototype.getGroup = function () {\n  return this;\n};\n\nGroup.prototype.reinitializeHeight = function () {};\n\nGroup.prototype.calcHeight = function () {};\n\nGroup.prototype.setCellHeight = function () {};\n\nGroup.prototype.clearCellHeight = function () {}; //////////////// Object Generation /////////////////\n\n\nGroup.prototype.getComponent = function () {\n  if (!this.component) {\n    this.component = new GroupComponent(this);\n  }\n\n  return this.component;\n}; //////////////////////////////////////////////////\n////////////// Group Row Extension ///////////////\n//////////////////////////////////////////////////\n\n\nvar GroupRows = function GroupRows(table) {\n  this.table = table; //hold Tabulator object\n\n  this.groupIDLookups = false; //enable table grouping and set field to group by\n\n  this.startOpen = [function () {\n    return false;\n  }]; //starting state of group\n\n  this.headerGenerator = [function () {\n    return \"\";\n  }];\n  this.groupList = []; //ordered list of groups\n\n  this.allowedValues = false;\n  this.groups = {}; //hold row groups\n\n  this.displayIndex = 0; //index in display pipeline\n}; //initialize group configuration\n\n\nGroupRows.prototype.initialize = function () {\n  var self = this,\n      groupBy = self.table.options.groupBy,\n      startOpen = self.table.options.groupStartOpen,\n      groupHeader = self.table.options.groupHeader;\n  this.allowedValues = self.table.options.groupValues;\n\n  if (Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length) {\n    console.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n  }\n\n  self.headerGenerator = [function () {\n    return \"\";\n  }];\n  this.startOpen = [function () {\n    return false;\n  }]; //starting state of group\n\n  self.table.modules.localize.bind(\"groups|item\", function (langValue, lang) {\n    self.headerGenerator[0] = function (value, count, data) {\n      //header layout function\n      return (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + (count === 1 ? langValue : lang.groups.items) + \")</span>\";\n    };\n  });\n  this.groupIDLookups = [];\n\n  if (Array.isArray(groupBy) || groupBy) {\n    if (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\") {\n      this.table.modules.columnCalcs.removeCalcs();\n    }\n  } else {\n    if (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\") {\n      var cols = this.table.columnManager.getRealColumns();\n      cols.forEach(function (col) {\n        if (col.definition.topCalc) {\n          self.table.modules.columnCalcs.initializeTopRow();\n        }\n\n        if (col.definition.bottomCalc) {\n          self.table.modules.columnCalcs.initializeBottomRow();\n        }\n      });\n    }\n  }\n\n  if (!Array.isArray(groupBy)) {\n    groupBy = [groupBy];\n  }\n\n  groupBy.forEach(function (group, i) {\n    var lookupFunc, column;\n\n    if (typeof group == \"function\") {\n      lookupFunc = group;\n    } else {\n      column = self.table.columnManager.getColumnByField(group);\n\n      if (column) {\n        lookupFunc = function lookupFunc(data) {\n          return column.getFieldValue(data);\n        };\n      } else {\n        lookupFunc = function lookupFunc(data) {\n          return data[group];\n        };\n      }\n    }\n\n    self.groupIDLookups.push({\n      field: typeof group === \"function\" ? false : group,\n      func: lookupFunc,\n      values: self.allowedValues ? self.allowedValues[i] : false\n    });\n  });\n\n  if (startOpen) {\n    if (!Array.isArray(startOpen)) {\n      startOpen = [startOpen];\n    }\n\n    startOpen.forEach(function (level) {\n      level = typeof level == \"function\" ? level : function () {\n        return true;\n      };\n    });\n    self.startOpen = startOpen;\n  }\n\n  if (groupHeader) {\n    self.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n  }\n\n  this.initialized = true;\n};\n\nGroupRows.prototype.setDisplayIndex = function (index) {\n  this.displayIndex = index;\n};\n\nGroupRows.prototype.getDisplayIndex = function () {\n  return this.displayIndex;\n}; //return appropriate rows with group headers\n\n\nGroupRows.prototype.getRows = function (rows) {\n  if (this.groupIDLookups.length) {\n    this.table.options.dataGrouping.call(this.table);\n    this.generateGroups(rows);\n\n    if (this.table.options.dataGrouped) {\n      this.table.options.dataGrouped.call(this.table, this.getGroups(true));\n    }\n\n    return this.updateGroupRows();\n  } else {\n    return rows.slice(0);\n  }\n};\n\nGroupRows.prototype.getGroups = function (compoment) {\n  var groupComponents = [];\n  this.groupList.forEach(function (group) {\n    groupComponents.push(compoment ? group.getComponent() : group);\n  });\n  return groupComponents;\n};\n\nGroupRows.prototype.getChildGroups = function (group) {\n  var _this69 = this;\n\n  var groupComponents = [];\n\n  if (!group) {\n    group = this;\n  }\n\n  group.groupList.forEach(function (child) {\n    if (child.groupList.length) {\n      groupComponents = groupComponents.concat(_this69.getChildGroups(child));\n    } else {\n      groupComponents.push(child);\n    }\n  });\n  return groupComponents;\n};\n\nGroupRows.prototype.wipe = function () {\n  this.groupList.forEach(function (group) {\n    group.wipe();\n  });\n};\n\nGroupRows.prototype.pullGroupListData = function (groupList) {\n  var self = this;\n  var groupListData = [];\n  groupList.forEach(function (group) {\n    var groupHeader = {};\n    groupHeader.level = 0;\n    groupHeader.rowCount = 0;\n    groupHeader.headerContent = \"\";\n    var childData = [];\n\n    if (group.hasSubGroups) {\n      childData = self.pullGroupListData(group.groupList);\n      groupHeader.level = group.level;\n      groupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\n      groupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n      groupListData.push(groupHeader);\n      groupListData = groupListData.concat(childData);\n    } else {\n      groupHeader.level = group.level;\n      groupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n      groupHeader.rowCount = group.getRows().length;\n      groupListData.push(groupHeader);\n      group.getRows().forEach(function (row) {\n        groupListData.push(row.getData(\"data\"));\n      });\n    }\n  });\n  return groupListData;\n};\n\nGroupRows.prototype.getGroupedData = function () {\n  return this.pullGroupListData(this.groupList);\n};\n\nGroupRows.prototype.getRowGroup = function (row) {\n  var match = false;\n  this.groupList.forEach(function (group) {\n    var result = group.getRowGroup(row);\n\n    if (result) {\n      match = result;\n    }\n  });\n  return match;\n};\n\nGroupRows.prototype.countGroups = function () {\n  return this.groupList.length;\n};\n\nGroupRows.prototype.generateGroups = function (rows) {\n  var self = this,\n      oldGroups = self.groups;\n  self.groups = {};\n  self.groupList = [];\n\n  if (this.allowedValues && this.allowedValues[0]) {\n    this.allowedValues[0].forEach(function (value) {\n      self.createGroup(value, 0, oldGroups);\n    });\n    rows.forEach(function (row) {\n      self.assignRowToExistingGroup(row, oldGroups);\n    });\n  } else {\n    rows.forEach(function (row) {\n      self.assignRowToGroup(row, oldGroups);\n    });\n  }\n};\n\nGroupRows.prototype.createGroup = function (groupID, level, oldGroups) {\n  var groupKey = level + \"_\" + groupID,\n      group;\n  oldGroups = oldGroups || [];\n  group = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n  this.groups[groupKey] = group;\n  this.groupList.push(group);\n}; // GroupRows.prototype.assignRowToGroup = function(row, oldGroups){\n// \tvar groupID = this.groupIDLookups[0].func(row.getData()),\n// \tgroupKey = \"0_\" + groupID;\n// \tif(!this.groups[groupKey]){\n// \t\tthis.createGroup(groupID, 0, oldGroups);\n// \t}\n// \tthis.groups[groupKey].addRow(row);\n// };\n\n\nGroupRows.prototype.assignRowToExistingGroup = function (row, oldGroups) {\n  var groupID = this.groupIDLookups[0].func(row.getData()),\n      groupKey = \"0_\" + groupID;\n\n  if (this.groups[groupKey]) {\n    this.groups[groupKey].addRow(row);\n  }\n};\n\nGroupRows.prototype.assignRowToGroup = function (row, oldGroups) {\n  var groupID = this.groupIDLookups[0].func(row.getData()),\n      newGroupNeeded = !this.groups[\"0_\" + groupID];\n\n  if (newGroupNeeded) {\n    this.createGroup(groupID, 0, oldGroups);\n  }\n\n  this.groups[\"0_\" + groupID].addRow(row);\n  return !newGroupNeeded;\n};\n\nGroupRows.prototype.reassignRowToGroup = function (row) {\n  var oldRowGroup = row.getGroup(),\n      oldGroupPath = oldRowGroup.getPath(),\n      newGroupPath = this.getExpectedPath(row),\n      samePath = true; // figure out if new group path is the same as old group path\n\n  var samePath = oldGroupPath.length == newGroupPath.length && oldGroupPath.every(function (element, index) {\n    return element === newGroupPath[index];\n  }); // refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n\n  if (!samePath) {\n    oldRowGroup.removeRow(row);\n    this.assignRowToGroup(row, self.groups);\n    this.table.rowManager.refreshActiveData(\"group\", false, true);\n  }\n};\n\nGroupRows.prototype.getExpectedPath = function (row) {\n  var groupPath = [],\n      rowData = row.getData();\n  this.groupIDLookups.forEach(function (groupId) {\n    groupPath.push(groupId.func(rowData));\n  });\n  return groupPath;\n};\n\nGroupRows.prototype.updateGroupRows = function (force) {\n  var self = this,\n      output = [],\n      oldRowCount;\n  self.groupList.forEach(function (group) {\n    output = output.concat(group.getHeadersAndRows());\n  }); //force update of table display\n\n  if (force) {\n    var displayIndex = self.table.rowManager.setDisplayRows(output, this.getDisplayIndex());\n\n    if (displayIndex !== true) {\n      this.setDisplayIndex(displayIndex);\n    }\n\n    self.table.rowManager.refreshActiveData(\"group\", true, true);\n  }\n\n  return output;\n};\n\nGroupRows.prototype.scrollHeaders = function (left) {\n  if (this.table.options.virtualDomHoz) {\n    left -= this.table.vdomHoz.vDomPadLeft;\n  }\n\n  left = left + \"px\";\n  this.groupList.forEach(function (group) {\n    group.scrollHeader(left);\n  });\n};\n\nGroupRows.prototype.removeGroup = function (group) {\n  var groupKey = group.level + \"_\" + group.key,\n      index;\n\n  if (this.groups[groupKey]) {\n    delete this.groups[groupKey];\n    index = this.groupList.indexOf(group);\n\n    if (index > -1) {\n      this.groupList.splice(index, 1);\n    }\n  }\n};\n\nTabulator.prototype.registerModule(\"groupRows\", GroupRows);\n\nvar History = function History(table) {\n  this.table = table; //hold Tabulator object\n\n  this.history = [];\n  this.index = -1;\n};\n\nHistory.prototype.clear = function () {\n  this.history = [];\n  this.index = -1;\n};\n\nHistory.prototype.action = function (type, component, data) {\n  this.history = this.history.slice(0, this.index + 1);\n  this.history.push({\n    type: type,\n    component: component,\n    data: data\n  });\n  this.index++;\n};\n\nHistory.prototype.getHistoryUndoSize = function () {\n  return this.index + 1;\n};\n\nHistory.prototype.getHistoryRedoSize = function () {\n  return this.history.length - (this.index + 1);\n};\n\nHistory.prototype.clearComponentHistory = function (component) {\n  var index = this.history.findIndex(function (item) {\n    return item.component === component;\n  });\n\n  if (index > -1) {\n    this.history.splice(index, 1);\n\n    if (index <= this.index) {\n      this.index--;\n    }\n\n    this.clearComponentHistory(component);\n  }\n};\n\nHistory.prototype.undo = function () {\n  if (this.index > -1) {\n    var action = this.history[this.index];\n    this.undoers[action.type].call(this, action);\n    this.index--;\n    this.table.options.historyUndo.call(this.table, action.type, action.component.getComponent(), action.data);\n    return true;\n  } else {\n    console.warn(\"History Undo Error - No more history to undo\");\n    return false;\n  }\n};\n\nHistory.prototype.redo = function () {\n  if (this.history.length - 1 > this.index) {\n    this.index++;\n    var action = this.history[this.index];\n    this.redoers[action.type].call(this, action);\n    this.table.options.historyRedo.call(this.table, action.type, action.component.getComponent(), action.data);\n    return true;\n  } else {\n    console.warn(\"History Redo Error - No more history to redo\");\n    return false;\n  }\n};\n\nHistory.prototype.undoers = {\n  cellEdit: function cellEdit(action) {\n    action.component.setValueProcessData(action.data.oldValue);\n  },\n  rowAdd: function rowAdd(action) {\n    action.component.deleteActual();\n  },\n  rowDelete: function rowDelete(action) {\n    var newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.updateGroupRows(true);\n    }\n\n    this._rebindRow(action.component, newRow);\n  },\n  rowMove: function rowMove(action) {\n    this.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\n    this.table.rowManager.redraw();\n  }\n};\nHistory.prototype.redoers = {\n  cellEdit: function cellEdit(action) {\n    action.component.setValueProcessData(action.data.newValue);\n  },\n  rowAdd: function rowAdd(action) {\n    var newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.updateGroupRows(true);\n    }\n\n    this._rebindRow(action.component, newRow);\n  },\n  rowDelete: function rowDelete(action) {\n    action.component.deleteActual();\n  },\n  rowMove: function rowMove(action) {\n    this.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\n    this.table.rowManager.redraw();\n  }\n}; //rebind rows to new element after deletion\n\nHistory.prototype._rebindRow = function (oldRow, newRow) {\n  this.history.forEach(function (action) {\n    if (action.component instanceof Row) {\n      if (action.component === oldRow) {\n        action.component = newRow;\n      }\n    } else if (action.component instanceof Cell) {\n      if (action.component.row === oldRow) {\n        var field = action.component.column.getField();\n\n        if (field) {\n          action.component = newRow.getCell(field);\n        }\n      }\n    }\n  });\n};\n\nTabulator.prototype.registerModule(\"history\", History);\n\nvar HtmlTableImport = function HtmlTableImport(table) {\n  this.table = table; //hold Tabulator object\n\n  this.fieldIndex = [];\n  this.hasIndex = false;\n};\n\nHtmlTableImport.prototype.parseTable = function () {\n  var self = this,\n      element = self.table.element,\n      options = self.table.options,\n      columns = options.columns,\n      headers = element.getElementsByTagName(\"th\"),\n      rows = element.getElementsByTagName(\"tbody\")[0],\n      data = [],\n      newTable;\n  self.hasIndex = false;\n  self.table.options.htmlImporting.call(this.table);\n  rows = rows ? rows.getElementsByTagName(\"tr\") : []; //check for tablator inline options\n\n  self._extractOptions(element, options);\n\n  if (headers.length) {\n    self._extractHeaders(headers, rows);\n  } else {\n    self._generateBlankHeaders(headers, rows);\n  } //iterate through table rows and build data set\n\n\n  for (var index = 0; index < rows.length; index++) {\n    var row = rows[index],\n        cells = row.getElementsByTagName(\"td\"),\n        item = {}; //create index if the dont exist in table\n\n    if (!self.hasIndex) {\n      item[options.index] = index;\n    }\n\n    for (var i = 0; i < cells.length; i++) {\n      var cell = cells[i];\n\n      if (typeof this.fieldIndex[i] !== \"undefined\") {\n        item[this.fieldIndex[i]] = cell.innerHTML;\n      }\n    } //add row data to item\n\n\n    data.push(item);\n  } //create new element\n\n\n  var newElement = document.createElement(\"div\"); //transfer attributes to new element\n\n  var attributes = element.attributes; // loop through attributes and apply them on div\n\n  for (var i in attributes) {\n    if (_typeof(attributes[i]) == \"object\") {\n      newElement.setAttribute(attributes[i].name, attributes[i].value);\n    }\n  } // replace table with div element\n\n\n  element.parentNode.replaceChild(newElement, element);\n  options.data = data;\n  self.table.options.htmlImported.call(this.table); // // newElement.tabulator(options);\n\n  this.table.element = newElement;\n}; //extract tabulator attribute options\n\n\nHtmlTableImport.prototype._extractOptions = function (element, options, defaultOptions) {\n  var attributes = element.attributes;\n  var optionsArr = defaultOptions ? Object.assign([], defaultOptions) : Object.keys(options);\n  var optionsList = {};\n  optionsArr.forEach(function (item) {\n    optionsList[item.toLowerCase()] = item;\n  });\n\n  for (var index in attributes) {\n    var attrib = attributes[index];\n    var name;\n\n    if (attrib && (typeof attrib === 'undefined' ? 'undefined' : _typeof(attrib)) == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0) {\n      name = attrib.name.replace(\"tabulator-\", \"\");\n\n      if (typeof optionsList[name] !== \"undefined\") {\n        options[optionsList[name]] = this._attribValue(attrib.value);\n      }\n    }\n  }\n}; //get value of attribute\n\n\nHtmlTableImport.prototype._attribValue = function (value) {\n  if (value === \"true\") {\n    return true;\n  }\n\n  if (value === \"false\") {\n    return false;\n  }\n\n  return value;\n}; //find column if it has already been defined\n\n\nHtmlTableImport.prototype._findCol = function (title) {\n  var match = this.table.options.columns.find(function (column) {\n    return column.title === title;\n  });\n  return match || false;\n}; //extract column from headers\n\n\nHtmlTableImport.prototype._extractHeaders = function (headers, rows) {\n  for (var index = 0; index < headers.length; index++) {\n    var header = headers[index],\n        exists = false,\n        col = this._findCol(header.textContent),\n        width,\n        attributes;\n\n    if (col) {\n      exists = true;\n    } else {\n      col = {\n        title: header.textContent.trim()\n      };\n    }\n\n    if (!col.field) {\n      col.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\n    }\n\n    width = header.getAttribute(\"width\");\n\n    if (width && !col.width) {\n      col.width = width;\n    } //check for tablator inline options\n\n\n    attributes = header.attributes; // //check for tablator inline options\n\n    this._extractOptions(header, col, Column.prototype.defaultOptionList);\n\n    this.fieldIndex[index] = col.field;\n\n    if (col.field == this.table.options.index) {\n      this.hasIndex = true;\n    }\n\n    if (!exists) {\n      this.table.options.columns.push(col);\n    }\n  }\n}; //generate blank headers\n\n\nHtmlTableImport.prototype._generateBlankHeaders = function (headers, rows) {\n  for (var index = 0; index < headers.length; index++) {\n    var header = headers[index],\n        col = {\n      title: \"\",\n      field: \"col\" + index\n    };\n    this.fieldIndex[index] = col.field;\n    var width = header.getAttribute(\"width\");\n\n    if (width) {\n      col.width = width;\n    }\n\n    this.table.options.columns.push(col);\n  }\n};\n\nTabulator.prototype.registerModule(\"htmlTableImport\", HtmlTableImport);\n\nvar Keybindings = function Keybindings(table) {\n  this.table = table; //hold Tabulator object\n\n  this.watchKeys = null;\n  this.pressedKeys = null;\n  this.keyupBinding = false;\n  this.keydownBinding = false;\n};\n\nKeybindings.prototype.initialize = function () {\n  var bindings = this.table.options.keybindings,\n      mergedBindings = {};\n  this.watchKeys = {};\n  this.pressedKeys = [];\n\n  if (bindings !== false) {\n    for (var key in this.bindings) {\n      mergedBindings[key] = this.bindings[key];\n    }\n\n    if (Object.keys(bindings).length) {\n      for (var _key in bindings) {\n        mergedBindings[_key] = bindings[_key];\n      }\n    }\n\n    this.mapBindings(mergedBindings);\n    this.bindEvents();\n  }\n};\n\nKeybindings.prototype.mapBindings = function (bindings) {\n  var _this70 = this;\n\n  var self = this;\n\n  var _loop2 = function _loop2(key) {\n    if (_this70.actions[key]) {\n      if (bindings[key]) {\n        if (_typeof(bindings[key]) !== \"object\") {\n          bindings[key] = [bindings[key]];\n        }\n\n        bindings[key].forEach(function (binding) {\n          self.mapBinding(key, binding);\n        });\n      }\n    } else {\n      console.warn(\"Key Binding Error - no such action:\", key);\n    }\n  };\n\n  for (var key in bindings) {\n    _loop2(key);\n  }\n};\n\nKeybindings.prototype.mapBinding = function (action, symbolsList) {\n  var self = this;\n  var binding = {\n    action: this.actions[action],\n    keys: [],\n    ctrl: false,\n    shift: false,\n    meta: false\n  };\n  var symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n  symbols.forEach(function (symbol) {\n    switch (symbol) {\n      case \"ctrl\":\n        binding.ctrl = true;\n        break;\n\n      case \"shift\":\n        binding.shift = true;\n        break;\n\n      case \"meta\":\n        binding.meta = true;\n        break;\n\n      default:\n        symbol = parseInt(symbol);\n        binding.keys.push(symbol);\n\n        if (!self.watchKeys[symbol]) {\n          self.watchKeys[symbol] = [];\n        }\n\n        self.watchKeys[symbol].push(binding);\n    }\n  });\n};\n\nKeybindings.prototype.bindEvents = function () {\n  var self = this;\n\n  this.keyupBinding = function (e) {\n    var code = e.keyCode;\n    var bindings = self.watchKeys[code];\n\n    if (bindings) {\n      self.pressedKeys.push(code);\n      bindings.forEach(function (binding) {\n        self.checkBinding(e, binding);\n      });\n    }\n  };\n\n  this.keydownBinding = function (e) {\n    var code = e.keyCode;\n    var bindings = self.watchKeys[code];\n\n    if (bindings) {\n      var index = self.pressedKeys.indexOf(code);\n\n      if (index > -1) {\n        self.pressedKeys.splice(index, 1);\n      }\n    }\n  };\n\n  this.table.element.addEventListener(\"keydown\", this.keyupBinding);\n  this.table.element.addEventListener(\"keyup\", this.keydownBinding);\n};\n\nKeybindings.prototype.clearBindings = function () {\n  if (this.keyupBinding) {\n    this.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n  }\n\n  if (this.keydownBinding) {\n    this.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n  }\n};\n\nKeybindings.prototype.checkBinding = function (e, binding) {\n  var self = this,\n      match = true;\n\n  if (e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta) {\n    binding.keys.forEach(function (key) {\n      var index = self.pressedKeys.indexOf(key);\n\n      if (index == -1) {\n        match = false;\n      }\n    });\n\n    if (match) {\n      binding.action.call(self, e);\n    }\n\n    return true;\n  }\n\n  return false;\n}; //default bindings\n\n\nKeybindings.prototype.bindings = {\n  navPrev: \"shift + 9\",\n  navNext: 9,\n  navUp: 38,\n  navDown: 40,\n  scrollPageUp: 33,\n  scrollPageDown: 34,\n  scrollToStart: 36,\n  scrollToEnd: 35,\n  undo: \"ctrl + 90\",\n  redo: \"ctrl + 89\",\n  copyToClipboard: \"ctrl + 67\"\n}; //default actions\n\nKeybindings.prototype.actions = {\n  keyBlock: function keyBlock(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  },\n  scrollPageUp: function scrollPageUp(e) {\n    var rowManager = this.table.rowManager,\n        newPos = rowManager.scrollTop - rowManager.height,\n        scrollMax = rowManager.element.scrollHeight;\n    e.preventDefault();\n\n    if (rowManager.displayRowsCount) {\n      if (newPos >= 0) {\n        rowManager.element.scrollTop = newPos;\n      } else {\n        rowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n      }\n    }\n\n    this.table.element.focus();\n  },\n  scrollPageDown: function scrollPageDown(e) {\n    var rowManager = this.table.rowManager,\n        newPos = rowManager.scrollTop + rowManager.height,\n        scrollMax = rowManager.element.scrollHeight;\n    e.preventDefault();\n\n    if (rowManager.displayRowsCount) {\n      if (newPos <= scrollMax) {\n        rowManager.element.scrollTop = newPos;\n      } else {\n        rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n      }\n    }\n\n    this.table.element.focus();\n  },\n  scrollToStart: function scrollToStart(e) {\n    var rowManager = this.table.rowManager;\n    e.preventDefault();\n\n    if (rowManager.displayRowsCount) {\n      rowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n    }\n\n    this.table.element.focus();\n  },\n  scrollToEnd: function scrollToEnd(e) {\n    var rowManager = this.table.rowManager;\n    e.preventDefault();\n\n    if (rowManager.displayRowsCount) {\n      rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n    }\n\n    this.table.element.focus();\n  },\n  navPrev: function navPrev(e) {\n    var cell = false;\n\n    if (this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        cell.nav().prev();\n      }\n    }\n  },\n  navNext: function navNext(e) {\n    var cell = false;\n    var newRow = this.table.options.tabEndNewRow;\n    var nav;\n\n    if (this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        nav = cell.nav();\n\n        if (!nav.next()) {\n          if (newRow) {\n            cell.getElement().firstChild.blur();\n\n            if (newRow === true) {\n              newRow = this.table.addRow({});\n            } else {\n              if (typeof newRow == \"function\") {\n                newRow = this.table.addRow(newRow(cell.row.getComponent()));\n              } else {\n                newRow = this.table.addRow(Object.assign({}, newRow));\n              }\n            }\n\n            newRow.then(function () {\n              setTimeout(function () {\n                nav.next();\n              });\n            });\n          }\n        }\n      }\n    }\n  },\n  navLeft: function navLeft(e) {\n    var cell = false;\n\n    if (this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        cell.nav().left();\n      }\n    }\n  },\n  navRight: function navRight(e) {\n    var cell = false;\n\n    if (this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        cell.nav().right();\n      }\n    }\n  },\n  navUp: function navUp(e) {\n    var cell = false;\n\n    if (this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        cell.nav().up();\n      }\n    }\n  },\n  navDown: function navDown(e) {\n    var cell = false;\n\n    if (this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        cell.nav().down();\n      }\n    }\n  },\n  undo: function undo(e) {\n    var cell = false;\n\n    if (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n\n      if (!cell) {\n        e.preventDefault();\n        this.table.modules.history.undo();\n      }\n    }\n  },\n  redo: function redo(e) {\n    var cell = false;\n\n    if (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n      cell = this.table.modules.edit.currentCell;\n\n      if (!cell) {\n        e.preventDefault();\n        this.table.modules.history.redo();\n      }\n    }\n  },\n  copyToClipboard: function copyToClipboard(e) {\n    if (!this.table.modules.edit.currentCell) {\n      if (this.table.modExists(\"clipboard\", true)) {\n        this.table.modules.clipboard.copy(false, true);\n      }\n    }\n  }\n};\nTabulator.prototype.registerModule(\"keybindings\", Keybindings);\n\nvar Menu = function Menu(table) {\n  this.table = table; //hold Tabulator object\n\n  this.menuEl = false;\n  this.blurEvent = this.hideMenu.bind(this);\n  this.escEvent = this.escMenu.bind(this);\n  this.nestedMenuBlock = false;\n};\n\nMenu.prototype.initializeColumnHeader = function (column) {\n  var _this71 = this;\n\n  var headerMenuEl;\n\n  if (column.definition.headerContextMenu) {\n    column.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, column, column.definition.headerContextMenu));\n    this.tapHold(column, column.definition.headerContextMenu);\n  } // if(column.definition.headerClickMenu){\n  // \tcolumn.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, column, column.definition.headerClickMenu));\n  // }\n\n\n  if (column.definition.headerMenu) {\n    headerMenuEl = document.createElement(\"span\");\n    headerMenuEl.classList.add(\"tabulator-header-menu-button\");\n    headerMenuEl.innerHTML = \"&vellip;\";\n    headerMenuEl.addEventListener(\"click\", function (e) {\n      var menu = typeof column.definition.headerMenu == \"function\" ? column.definition.headerMenu(column.getComponent(), e) : column.definition.headerMenu;\n      e.stopPropagation();\n      e.preventDefault();\n\n      _this71.loadMenu(e, column, menu);\n    });\n    column.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n  }\n};\n\nMenu.prototype.LoadMenuEvent = function (component, menu, e) {\n  menu = typeof menu == \"function\" ? menu(component.getComponent(), e) : menu; // if(component instanceof Cell){\n  // \te.stopImmediatePropagation();\n  // }\n\n  this.loadMenu(e, component, menu);\n};\n\nMenu.prototype.tapHold = function (component, menu) {\n  var _this72 = this;\n\n  var element = component.getElement(),\n      tapHold = null,\n      loaded = false;\n  element.addEventListener(\"touchstart\", function (e) {\n    clearTimeout(tapHold);\n    loaded = false;\n    tapHold = setTimeout(function () {\n      clearTimeout(tapHold);\n      tapHold = null;\n      loaded = true;\n\n      _this72.LoadMenuEvent(component, menu, e);\n    }, 1000);\n  }, {\n    passive: true\n  });\n  element.addEventListener(\"touchend\", function (e) {\n    clearTimeout(tapHold);\n    tapHold = null;\n\n    if (loaded) {\n      e.preventDefault();\n    }\n  });\n};\n\nMenu.prototype.initializeCell = function (cell) {\n  if (cell.column.definition.contextMenu) {\n    cell.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, cell, cell.column.definition.contextMenu));\n    this.tapHold(cell, cell.column.definition.contextMenu);\n  }\n\n  if (cell.column.definition.clickMenu) {\n    cell.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, cell, cell.column.definition.clickMenu));\n  }\n};\n\nMenu.prototype.initializeRow = function (row) {\n  if (this.table.options.rowContextMenu) {\n    row.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, row, this.table.options.rowContextMenu));\n    this.tapHold(row, this.table.options.rowContextMenu);\n  }\n\n  if (this.table.options.rowClickMenu) {\n    row.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, row, this.table.options.rowClickMenu));\n  }\n};\n\nMenu.prototype.initializeGroup = function (group) {\n  if (this.table.options.groupContextMenu) {\n    group.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, group, this.table.options.groupContextMenu));\n    this.tapHold(group, this.table.options.groupContextMenu);\n  }\n\n  if (this.table.options.groupClickMenu) {\n    group.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, group, this.table.options.groupClickMenu));\n  }\n};\n\nMenu.prototype.loadMenu = function (e, component, menu) {\n  var _this73 = this;\n\n  var docHeight = Math.max(document.body.offsetHeight, window.innerHeight),\n      touch = !(e instanceof MouseEvent);\n\n  if (!touch) {\n    e.preventDefault();\n  } //abort if no menu set\n\n\n  if (!menu || !menu.length) {\n    return;\n  }\n\n  if (this.nestedMenuBlock) {\n    //abort if child menu already open\n    if (this.isOpen()) {\n      return;\n    }\n  } else {\n    this.nestedMenuBlock = setTimeout(function () {\n      _this73.nestedMenuBlock = false;\n    }, 100);\n  }\n\n  this.hideMenu();\n  this.menuEl = document.createElement(\"div\");\n  this.menuEl.classList.add(\"tabulator-menu\");\n  menu.forEach(function (item) {\n    var itemEl = document.createElement(\"div\");\n    var label = item.label;\n    var disabled = item.disabled;\n\n    if (item.separator) {\n      itemEl.classList.add(\"tabulator-menu-separator\");\n    } else {\n      itemEl.classList.add(\"tabulator-menu-item\");\n\n      if (typeof label == \"function\") {\n        label = label(component.getComponent());\n      }\n\n      if (label instanceof Node) {\n        itemEl.appendChild(label);\n      } else {\n        itemEl.innerHTML = label;\n      }\n\n      if (typeof disabled == \"function\") {\n        disabled = disabled(component.getComponent());\n      }\n\n      if (disabled) {\n        itemEl.classList.add(\"tabulator-menu-item-disabled\");\n        itemEl.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n        });\n      } else {\n        itemEl.addEventListener(\"click\", function (e) {\n          _this73.hideMenu();\n\n          item.action(e, component.getComponent());\n        });\n      }\n    }\n\n    _this73.menuEl.appendChild(itemEl);\n  });\n  this.menuEl.style.top = (touch ? e.touches[0].pageY : e.pageY) + \"px\";\n  this.menuEl.style.left = (touch ? e.touches[0].pageX : e.pageX) + \"px\";\n  setTimeout(function () {\n    _this73.table.rowManager.element.addEventListener(\"scroll\", _this73.blurEvent);\n\n    document.body.addEventListener(\"click\", _this73.blurEvent);\n    document.body.addEventListener(\"contextmenu\", _this73.blurEvent);\n    document.body.addEventListener(\"keydown\", _this73.escEvent);\n  }, 100);\n  document.body.appendChild(this.menuEl); //move menu to start on right edge if it is too close to the edge of the screen\n\n  if (e.pageX + this.menuEl.offsetWidth >= document.body.offsetWidth) {\n    this.menuEl.style.left = \"\";\n    this.menuEl.style.right = document.body.offsetWidth - e.pageX + \"px\";\n  } //move menu to start on bottom edge if it is too close to the edge of the screen\n\n\n  if (e.pageY + this.menuEl.offsetHeight >= docHeight) {\n    this.menuEl.style.top = \"\";\n    this.menuEl.style.bottom = docHeight - e.pageY + \"px\";\n  }\n};\n\nMenu.prototype.isOpen = function () {\n  return !!this.menuEl.parentNode;\n};\n\nMenu.prototype.escMenu = function (e) {\n  if (e.keyCode == 27) {\n    this.hideMenu();\n  }\n};\n\nMenu.prototype.hideMenu = function () {\n  if (this.menuEl.parentNode) {\n    this.menuEl.parentNode.removeChild(this.menuEl);\n  }\n\n  if (this.escEvent) {\n    document.body.removeEventListener(\"keydown\", this.escEvent);\n  }\n\n  if (this.blurEvent) {\n    document.body.removeEventListener(\"click\", this.blurEvent);\n    document.body.removeEventListener(\"contextmenu\", this.blurEvent);\n    this.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n  }\n}; //default accessors\n\n\nMenu.prototype.menus = {};\nTabulator.prototype.registerModule(\"menu\", Menu);\n\nvar MoveColumns = function MoveColumns(table) {\n  this.table = table; //hold Tabulator object\n\n  this.placeholderElement = this.createPlaceholderElement();\n  this.hoverElement = false; //floating column header element\n\n  this.checkTimeout = false; //click check timeout holder\n\n  this.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\n  this.moving = false; //currently moving column\n\n  this.toCol = false; //destination column\n\n  this.toColAfter = false; //position of moving column relative to the desitnation column\n\n  this.startX = 0; //starting position within header element\n\n  this.autoScrollMargin = 40; //auto scroll on edge when within margin\n\n  this.autoScrollStep = 5; //auto scroll distance in pixels\n\n  this.autoScrollTimeout = false; //auto scroll timeout\n\n  this.touchMove = false;\n  this.moveHover = this.moveHover.bind(this);\n  this.endMove = this.endMove.bind(this);\n};\n\nMoveColumns.prototype.createPlaceholderElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-col\");\n  el.classList.add(\"tabulator-col-placeholder\");\n  return el;\n};\n\nMoveColumns.prototype.initializeColumn = function (column) {\n  var self = this,\n      config = {},\n      colEl;\n\n  if (!column.modules.frozen) {\n    colEl = column.getElement();\n\n    config.mousemove = function (e) {\n      if (column.parent === self.moving.parent) {\n        if ((self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(colEl).left + self.table.columnManager.element.scrollLeft > column.getWidth() / 2) {\n          if (self.toCol !== column || !self.toColAfter) {\n            colEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n            self.moveColumn(column, true);\n          }\n        } else {\n          if (self.toCol !== column || self.toColAfter) {\n            colEl.parentNode.insertBefore(self.placeholderElement, colEl);\n            self.moveColumn(column, false);\n          }\n        }\n      }\n    }.bind(self);\n\n    colEl.addEventListener(\"mousedown\", function (e) {\n      self.touchMove = false;\n\n      if (e.which === 1) {\n        self.checkTimeout = setTimeout(function () {\n          self.startMove(e, column);\n        }, self.checkPeriod);\n      }\n    });\n    colEl.addEventListener(\"mouseup\", function (e) {\n      if (e.which === 1) {\n        if (self.checkTimeout) {\n          clearTimeout(self.checkTimeout);\n        }\n      }\n    });\n    self.bindTouchEvents(column);\n  }\n\n  column.modules.moveColumn = config;\n};\n\nMoveColumns.prototype.bindTouchEvents = function (column) {\n  var self = this,\n      colEl = column.getElement(),\n      startXMove = false,\n      //shifting center position of the cell\n  dir = false,\n      currentCol,\n      nextCol,\n      prevCol,\n      nextColWidth,\n      prevColWidth,\n      nextColWidthLast,\n      prevColWidthLast;\n  colEl.addEventListener(\"touchstart\", function (e) {\n    self.checkTimeout = setTimeout(function () {\n      self.touchMove = true;\n      currentCol = column;\n      nextCol = column.nextColumn();\n      nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n      prevCol = column.prevColumn();\n      prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n      nextColWidthLast = 0;\n      prevColWidthLast = 0;\n      startXMove = false;\n      self.startMove(e, column);\n    }, self.checkPeriod);\n  }, {\n    passive: true\n  });\n  colEl.addEventListener(\"touchmove\", function (e) {\n    var halfCol, diff, moveToCol;\n\n    if (self.moving) {\n      self.moveHover(e);\n\n      if (!startXMove) {\n        startXMove = e.touches[0].pageX;\n      }\n\n      diff = e.touches[0].pageX - startXMove;\n\n      if (diff > 0) {\n        if (nextCol && diff - nextColWidthLast > nextColWidth) {\n          moveToCol = nextCol;\n\n          if (moveToCol !== column) {\n            startXMove = e.touches[0].pageX;\n            moveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement().nextSibling);\n            self.moveColumn(moveToCol, true);\n          }\n        }\n      } else {\n        if (prevCol && -diff - prevColWidthLast > prevColWidth) {\n          moveToCol = prevCol;\n\n          if (moveToCol !== column) {\n            startXMove = e.touches[0].pageX;\n            moveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement());\n            self.moveColumn(moveToCol, false);\n          }\n        }\n      }\n\n      if (moveToCol) {\n        currentCol = moveToCol;\n        nextCol = moveToCol.nextColumn();\n        nextColWidthLast = nextColWidth;\n        nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n        prevCol = moveToCol.prevColumn();\n        prevColWidthLast = prevColWidth;\n        prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n      }\n    }\n  }, {\n    passive: true\n  });\n  colEl.addEventListener(\"touchend\", function (e) {\n    if (self.checkTimeout) {\n      clearTimeout(self.checkTimeout);\n    }\n\n    if (self.moving) {\n      self.endMove(e);\n    }\n  });\n};\n\nMoveColumns.prototype.startMove = function (e, column) {\n  var element = column.getElement();\n  this.moving = column;\n  this.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(element).left;\n  this.table.element.classList.add(\"tabulator-block-select\"); //create placeholder\n\n  this.placeholderElement.style.width = column.getWidth() + \"px\";\n  this.placeholderElement.style.height = column.getHeight() + \"px\";\n  element.parentNode.insertBefore(this.placeholderElement, element);\n  element.parentNode.removeChild(element); //create hover element\n\n  this.hoverElement = element.cloneNode(true);\n  this.hoverElement.classList.add(\"tabulator-moving\");\n  this.table.columnManager.getElement().appendChild(this.hoverElement);\n  this.hoverElement.style.left = \"0\";\n  this.hoverElement.style.bottom = \"0\";\n\n  if (!this.touchMove) {\n    this._bindMouseMove();\n\n    document.body.addEventListener(\"mousemove\", this.moveHover);\n    document.body.addEventListener(\"mouseup\", this.endMove);\n  }\n\n  this.moveHover(e);\n};\n\nMoveColumns.prototype._bindMouseMove = function () {\n  this.table.columnManager.columnsByIndex.forEach(function (column) {\n    if (column.modules.moveColumn.mousemove) {\n      column.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n    }\n  });\n};\n\nMoveColumns.prototype._unbindMouseMove = function () {\n  this.table.columnManager.columnsByIndex.forEach(function (column) {\n    if (column.modules.moveColumn.mousemove) {\n      column.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n    }\n  });\n};\n\nMoveColumns.prototype.moveColumn = function (column, after) {\n  var movingCells = this.moving.getCells();\n  this.toCol = column;\n  this.toColAfter = after;\n\n  if (after) {\n    column.getCells().forEach(function (cell, i) {\n      var cellEl = cell.getElement();\n      cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n    });\n  } else {\n    column.getCells().forEach(function (cell, i) {\n      var cellEl = cell.getElement();\n      cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n    });\n  }\n};\n\nMoveColumns.prototype.endMove = function (e) {\n  if (e.which === 1 || this.touchMove) {\n    this._unbindMouseMove();\n\n    this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n    this.placeholderElement.parentNode.removeChild(this.placeholderElement);\n    this.hoverElement.parentNode.removeChild(this.hoverElement);\n    this.table.element.classList.remove(\"tabulator-block-select\");\n\n    if (this.toCol) {\n      this.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n    }\n\n    this.moving = false;\n    this.toCol = false;\n    this.toColAfter = false;\n\n    if (!this.touchMove) {\n      document.body.removeEventListener(\"mousemove\", this.moveHover);\n      document.body.removeEventListener(\"mouseup\", this.endMove);\n    }\n  }\n};\n\nMoveColumns.prototype.moveHover = function (e) {\n  var self = this,\n      columnHolder = self.table.columnManager.getElement(),\n      scrollLeft = columnHolder.scrollLeft,\n      xPos = (self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(columnHolder).left + scrollLeft,\n      scrollPos;\n  self.hoverElement.style.left = xPos - self.startX + \"px\";\n\n  if (xPos - scrollLeft < self.autoScrollMargin) {\n    if (!self.autoScrollTimeout) {\n      self.autoScrollTimeout = setTimeout(function () {\n        scrollPos = Math.max(0, scrollLeft - 5);\n        self.table.rowManager.getElement().scrollLeft = scrollPos;\n        self.autoScrollTimeout = false;\n      }, 1);\n    }\n  }\n\n  if (scrollLeft + columnHolder.clientWidth - xPos < self.autoScrollMargin) {\n    if (!self.autoScrollTimeout) {\n      self.autoScrollTimeout = setTimeout(function () {\n        scrollPos = Math.min(columnHolder.clientWidth, scrollLeft + 5);\n        self.table.rowManager.getElement().scrollLeft = scrollPos;\n        self.autoScrollTimeout = false;\n      }, 1);\n    }\n  }\n};\n\nTabulator.prototype.registerModule(\"moveColumn\", MoveColumns);\n\nvar MoveRows = function MoveRows(table) {\n  this.table = table; //hold Tabulator object\n\n  this.placeholderElement = this.createPlaceholderElement();\n  this.hoverElement = false; //floating row header element\n\n  this.checkTimeout = false; //click check timeout holder\n\n  this.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\n  this.moving = false; //currently moving row\n\n  this.toRow = false; //destination row\n\n  this.toRowAfter = false; //position of moving row relative to the desitnation row\n\n  this.hasHandle = false; //row has handle instead of fully movable row\n\n  this.startY = 0; //starting Y position within header element\n\n  this.startX = 0; //starting X position within header element\n\n  this.moveHover = this.moveHover.bind(this);\n  this.endMove = this.endMove.bind(this);\n  this.tableRowDropEvent = false;\n  this.touchMove = false;\n  this.connection = false;\n  this.connectionSelectorsTables = false;\n  this.connectionSelectorsElements = false;\n  this.connectionElements = [];\n  this.connections = [];\n  this.connectedTable = false;\n  this.connectedRow = false;\n};\n\nMoveRows.prototype.createPlaceholderElement = function () {\n  var el = document.createElement(\"div\");\n  el.classList.add(\"tabulator-row\");\n  el.classList.add(\"tabulator-row-placeholder\");\n  return el;\n};\n\nMoveRows.prototype.initialize = function (handle) {\n  this.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n  this.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n  this.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n};\n\nMoveRows.prototype.setHandle = function (handle) {\n  this.hasHandle = handle;\n};\n\nMoveRows.prototype.initializeGroupHeader = function (group) {\n  var self = this,\n      config = {},\n      rowEl; //inter table drag drop\n\n  config.mouseup = function (e) {\n    self.tableRowDrop(e, row);\n  }.bind(self); //same table drag drop\n\n\n  config.mousemove = function (e) {\n    if (e.pageY - Tabulator.prototype.helpers.elOffset(group.element).top + self.table.rowManager.element.scrollTop > group.getHeight() / 2) {\n      if (self.toRow !== group || !self.toRowAfter) {\n        var rowEl = group.getElement();\n        rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n        self.moveRow(group, true);\n      }\n    } else {\n      if (self.toRow !== group || self.toRowAfter) {\n        var rowEl = group.getElement();\n\n        if (rowEl.previousSibling) {\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n          self.moveRow(group, false);\n        }\n      }\n    }\n  }.bind(self);\n\n  group.modules.moveRow = config;\n};\n\nMoveRows.prototype.initializeRow = function (row) {\n  var self = this,\n      config = {},\n      rowEl; //inter table drag drop\n\n  config.mouseup = function (e) {\n    self.tableRowDrop(e, row);\n  }.bind(self); //same table drag drop\n\n\n  config.mousemove = function (e) {\n    if (e.pageY - Tabulator.prototype.helpers.elOffset(row.element).top + self.table.rowManager.element.scrollTop > row.getHeight() / 2) {\n      if (self.toRow !== row || !self.toRowAfter) {\n        var rowEl = row.getElement();\n        rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n        self.moveRow(row, true);\n      }\n    } else {\n      if (self.toRow !== row || self.toRowAfter) {\n        var rowEl = row.getElement();\n        rowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n        self.moveRow(row, false);\n      }\n    }\n  }.bind(self);\n\n  if (!this.hasHandle) {\n    rowEl = row.getElement();\n    rowEl.addEventListener(\"mousedown\", function (e) {\n      if (e.which === 1) {\n        self.checkTimeout = setTimeout(function () {\n          self.startMove(e, row);\n        }, self.checkPeriod);\n      }\n    });\n    rowEl.addEventListener(\"mouseup\", function (e) {\n      if (e.which === 1) {\n        if (self.checkTimeout) {\n          clearTimeout(self.checkTimeout);\n        }\n      }\n    });\n    this.bindTouchEvents(row, row.getElement());\n  }\n\n  row.modules.moveRow = config;\n};\n\nMoveRows.prototype.initializeCell = function (cell) {\n  var self = this,\n      cellEl = cell.getElement();\n  cellEl.addEventListener(\"mousedown\", function (e) {\n    if (e.which === 1) {\n      self.checkTimeout = setTimeout(function () {\n        self.startMove(e, cell.row);\n      }, self.checkPeriod);\n    }\n  });\n  cellEl.addEventListener(\"mouseup\", function (e) {\n    if (e.which === 1) {\n      if (self.checkTimeout) {\n        clearTimeout(self.checkTimeout);\n      }\n    }\n  });\n  this.bindTouchEvents(cell.row, cell.getElement());\n};\n\nMoveRows.prototype.bindTouchEvents = function (row, element) {\n  var self = this,\n      startYMove = false,\n      //shifting center position of the cell\n  dir = false,\n      currentRow,\n      nextRow,\n      prevRow,\n      nextRowHeight,\n      prevRowHeight,\n      nextRowHeightLast,\n      prevRowHeightLast;\n  element.addEventListener(\"touchstart\", function (e) {\n    self.checkTimeout = setTimeout(function () {\n      self.touchMove = true;\n      currentRow = row;\n      nextRow = row.nextRow();\n      nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n      prevRow = row.prevRow();\n      prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n      nextRowHeightLast = 0;\n      prevRowHeightLast = 0;\n      startYMove = false;\n      self.startMove(e, row);\n    }, self.checkPeriod);\n  }, {\n    passive: true\n  });\n  this.moving, this.toRow, this.toRowAfter;\n  element.addEventListener(\"touchmove\", function (e) {\n    var halfCol, diff, moveToRow;\n\n    if (self.moving) {\n      e.preventDefault();\n      self.moveHover(e);\n\n      if (!startYMove) {\n        startYMove = e.touches[0].pageY;\n      }\n\n      diff = e.touches[0].pageY - startYMove;\n\n      if (diff > 0) {\n        if (nextRow && diff - nextRowHeightLast > nextRowHeight) {\n          moveToRow = nextRow;\n\n          if (moveToRow !== row) {\n            startYMove = e.touches[0].pageY;\n            moveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement().nextSibling);\n            self.moveRow(moveToRow, true);\n          }\n        }\n      } else {\n        if (prevRow && -diff - prevRowHeightLast > prevRowHeight) {\n          moveToRow = prevRow;\n\n          if (moveToRow !== row) {\n            startYMove = e.touches[0].pageY;\n            moveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement());\n            self.moveRow(moveToRow, false);\n          }\n        }\n      }\n\n      if (moveToRow) {\n        currentRow = moveToRow;\n        nextRow = moveToRow.nextRow();\n        nextRowHeightLast = nextRowHeight;\n        nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n        prevRow = moveToRow.prevRow();\n        prevRowHeightLast = prevRowHeight;\n        prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n      }\n    }\n  });\n  element.addEventListener(\"touchend\", function (e) {\n    if (self.checkTimeout) {\n      clearTimeout(self.checkTimeout);\n    }\n\n    if (self.moving) {\n      self.endMove(e);\n      self.touchMove = false;\n    }\n  });\n};\n\nMoveRows.prototype._bindMouseMove = function () {\n  var self = this;\n  self.table.rowManager.getDisplayRows().forEach(function (row) {\n    if ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n      row.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n    }\n  });\n};\n\nMoveRows.prototype._unbindMouseMove = function () {\n  var self = this;\n  self.table.rowManager.getDisplayRows().forEach(function (row) {\n    if ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n      row.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n    }\n  });\n};\n\nMoveRows.prototype.startMove = function (e, row) {\n  var element = row.getElement();\n  this.setStartPosition(e, row);\n  this.moving = row;\n  this.table.element.classList.add(\"tabulator-block-select\"); //create placeholder\n\n  this.placeholderElement.style.width = row.getWidth() + \"px\";\n  this.placeholderElement.style.height = row.getHeight() + \"px\";\n\n  if (!this.connection) {\n    element.parentNode.insertBefore(this.placeholderElement, element);\n    element.parentNode.removeChild(element);\n  } else {\n    this.table.element.classList.add(\"tabulator-movingrow-sending\");\n    this.connectToTables(row);\n  } //create hover element\n\n\n  this.hoverElement = element.cloneNode(true);\n  this.hoverElement.classList.add(\"tabulator-moving\");\n\n  if (this.connection) {\n    document.body.appendChild(this.hoverElement);\n    this.hoverElement.style.left = \"0\";\n    this.hoverElement.style.top = \"0\";\n    this.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n    this.hoverElement.style.whiteSpace = \"nowrap\";\n    this.hoverElement.style.overflow = \"hidden\";\n    this.hoverElement.style.pointerEvents = \"none\";\n  } else {\n    this.table.rowManager.getTableElement().appendChild(this.hoverElement);\n    this.hoverElement.style.left = \"0\";\n    this.hoverElement.style.top = \"0\";\n\n    this._bindMouseMove();\n  }\n\n  document.body.addEventListener(\"mousemove\", this.moveHover);\n  document.body.addEventListener(\"mouseup\", this.endMove);\n  this.moveHover(e);\n};\n\nMoveRows.prototype.setStartPosition = function (e, row) {\n  var pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n      pageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n      element,\n      position;\n  element = row.getElement();\n\n  if (this.connection) {\n    position = element.getBoundingClientRect();\n    this.startX = position.left - pageX + window.pageXOffset;\n    this.startY = position.top - pageY + window.pageYOffset;\n  } else {\n    this.startY = pageY - element.getBoundingClientRect().top;\n  }\n};\n\nMoveRows.prototype.endMove = function (e) {\n  if (!e || e.which === 1 || this.touchMove) {\n    this._unbindMouseMove();\n\n    if (!this.connection) {\n      this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n      this.placeholderElement.parentNode.removeChild(this.placeholderElement);\n    }\n\n    this.hoverElement.parentNode.removeChild(this.hoverElement);\n    this.table.element.classList.remove(\"tabulator-block-select\");\n\n    if (this.toRow) {\n      this.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n    }\n\n    this.moving = false;\n    this.toRow = false;\n    this.toRowAfter = false;\n    document.body.removeEventListener(\"mousemove\", this.moveHover);\n    document.body.removeEventListener(\"mouseup\", this.endMove);\n\n    if (this.connection) {\n      this.table.element.classList.remove(\"tabulator-movingrow-sending\");\n      this.disconnectFromTables();\n    }\n  }\n};\n\nMoveRows.prototype.moveRow = function (row, after) {\n  this.toRow = row;\n  this.toRowAfter = after;\n};\n\nMoveRows.prototype.moveHover = function (e) {\n  if (this.connection) {\n    this.moveHoverConnections.call(this, e);\n  } else {\n    this.moveHoverTable.call(this, e);\n  }\n};\n\nMoveRows.prototype.moveHoverTable = function (e) {\n  var rowHolder = this.table.rowManager.getElement(),\n      scrollTop = rowHolder.scrollTop,\n      yPos = (this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top + scrollTop,\n      scrollPos;\n  this.hoverElement.style.top = yPos - this.startY + \"px\";\n};\n\nMoveRows.prototype.moveHoverConnections = function (e) {\n  this.hoverElement.style.left = this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX) + \"px\";\n  this.hoverElement.style.top = this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY) + \"px\";\n};\n\nMoveRows.prototype.elementRowDrop = function (e, element, row) {\n  if (this.table.options.movableRowsElementDrop) {\n    this.table.options.movableRowsElementDrop(e, element, row ? row.getComponent() : false);\n  }\n}; //establish connection with other tables\n\n\nMoveRows.prototype.connectToTables = function (row) {\n  var _this74 = this;\n\n  var connectionTables;\n\n  if (this.connectionSelectorsTables) {\n    connectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\n    this.table.options.movableRowsSendingStart.call(this.table, connectionTables);\n    this.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n      row: row\n    });\n  }\n\n  if (this.connectionSelectorsElements) {\n    this.connectionElements = [];\n\n    if (!Array.isArray(this.connectionSelectorsElements)) {\n      this.connectionSelectorsElements = [this.connectionSelectorsElements];\n    }\n\n    this.connectionSelectorsElements.forEach(function (query) {\n      if (typeof query === \"string\") {\n        _this74.connectionElements = _this74.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n      } else {\n        _this74.connectionElements.push(query);\n      }\n    });\n    this.connectionElements.forEach(function (element) {\n      var dropEvent = function dropEvent(e) {\n        _this74.elementRowDrop(e, element, _this74.moving);\n      };\n\n      element.addEventListener(\"mouseup\", dropEvent);\n      element.tabulatorElementDropEvent = dropEvent;\n      element.classList.add(\"tabulator-movingrow-receiving\");\n    });\n  }\n}; //disconnect from other tables\n\n\nMoveRows.prototype.disconnectFromTables = function () {\n  var connectionTables;\n\n  if (this.connectionSelectorsTables) {\n    connectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\n    this.table.options.movableRowsSendingStop.call(this.table, connectionTables);\n    this.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n  }\n\n  this.connectionElements.forEach(function (element) {\n    element.classList.remove(\"tabulator-movingrow-receiving\");\n    element.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n    delete element.tabulatorElementDropEvent;\n  });\n}; //accept incomming connection\n\n\nMoveRows.prototype.connect = function (table, row) {\n  var self = this;\n\n  if (!this.connectedTable) {\n    this.connectedTable = table;\n    this.connectedRow = row;\n    this.table.element.classList.add(\"tabulator-movingrow-receiving\");\n    self.table.rowManager.getDisplayRows().forEach(function (row) {\n      if (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n        row.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n      }\n    });\n    self.tableRowDropEvent = self.tableRowDrop.bind(self);\n    self.table.element.addEventListener(\"mouseup\", self.tableRowDropEvent);\n    this.table.options.movableRowsReceivingStart.call(this.table, row, table);\n    return true;\n  } else {\n    console.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n    return false;\n  }\n}; //close incomming connection\n\n\nMoveRows.prototype.disconnect = function (table) {\n  var self = this;\n\n  if (table === this.connectedTable) {\n    this.connectedTable = false;\n    this.connectedRow = false;\n    this.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n    self.table.rowManager.getDisplayRows().forEach(function (row) {\n      if (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n        row.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n      }\n    });\n    self.table.element.removeEventListener(\"mouseup\", self.tableRowDropEvent);\n    this.table.options.movableRowsReceivingStop.call(this.table, table);\n  } else {\n    console.warn(\"Move Row Error - trying to disconnect from non connected table\");\n  }\n};\n\nMoveRows.prototype.dropComplete = function (table, row, success) {\n  var sender = false;\n\n  if (success) {\n    switch (_typeof(this.table.options.movableRowsSender)) {\n      case \"string\":\n        sender = this.senders[this.table.options.movableRowsSender];\n        break;\n\n      case \"function\":\n        sender = this.table.options.movableRowsSender;\n        break;\n    }\n\n    if (sender) {\n      sender.call(this, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n    } else {\n      if (this.table.options.movableRowsSender) {\n        console.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n      }\n    }\n\n    this.table.options.movableRowsSent.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n  } else {\n    this.table.options.movableRowsSentFailed.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n  }\n\n  this.endMove();\n};\n\nMoveRows.prototype.tableRowDrop = function (e, row) {\n  var receiver = false,\n      success = false;\n  console.trace(\"drop\");\n  e.stopImmediatePropagation();\n\n  switch (_typeof(this.table.options.movableRowsReceiver)) {\n    case \"string\":\n      receiver = this.receivers[this.table.options.movableRowsReceiver];\n      break;\n\n    case \"function\":\n      receiver = this.table.options.movableRowsReceiver;\n      break;\n  }\n\n  if (receiver) {\n    success = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n  } else {\n    console.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n  }\n\n  if (success) {\n    this.table.options.movableRowsReceived.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n  } else {\n    this.table.options.movableRowsReceivedFailed.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n  }\n\n  this.table.modules.comms.send(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n    row: row,\n    success: success\n  });\n};\n\nMoveRows.prototype.receivers = {\n  insert: function insert(fromRow, toRow, fromTable) {\n    this.table.addRow(fromRow.getData(), undefined, toRow);\n    return true;\n  },\n  add: function add(fromRow, toRow, fromTable) {\n    this.table.addRow(fromRow.getData());\n    return true;\n  },\n  update: function update(fromRow, toRow, fromTable) {\n    if (toRow) {\n      toRow.update(fromRow.getData());\n      return true;\n    }\n\n    return false;\n  },\n  replace: function replace(fromRow, toRow, fromTable) {\n    if (toRow) {\n      this.table.addRow(fromRow.getData(), undefined, toRow);\n      toRow.delete();\n      return true;\n    }\n\n    return false;\n  }\n};\nMoveRows.prototype.senders = {\n  delete: function _delete(fromRow, toRow, toTable) {\n    fromRow.delete();\n  }\n};\n\nMoveRows.prototype.commsReceived = function (table, action, data) {\n  switch (action) {\n    case \"connect\":\n      return this.connect(table, data.row);\n      break;\n\n    case \"disconnect\":\n      return this.disconnect(table);\n      break;\n\n    case \"dropcomplete\":\n      return this.dropComplete(table, data.row, data.success);\n      break;\n  }\n};\n\nTabulator.prototype.registerModule(\"moveRow\", MoveRows);\n\nvar Mutator = function Mutator(table) {\n  this.table = table; //hold Tabulator object\n\n  this.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of muatation types\n\n  this.enabled = true;\n}; //initialize column mutator\n\n\nMutator.prototype.initializeColumn = function (column) {\n  var self = this,\n      match = false,\n      config = {};\n  this.allowedTypes.forEach(function (type) {\n    var key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n        mutator;\n\n    if (column.definition[key]) {\n      mutator = self.lookupMutator(column.definition[key]);\n\n      if (mutator) {\n        match = true;\n        config[key] = {\n          mutator: mutator,\n          params: column.definition[key + \"Params\"] || {}\n        };\n      }\n    }\n  });\n\n  if (match) {\n    column.modules.mutate = config;\n  }\n};\n\nMutator.prototype.lookupMutator = function (value) {\n  var mutator = false; //set column mutator\n\n  switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n    case \"string\":\n      if (this.mutators[value]) {\n        mutator = this.mutators[value];\n      } else {\n        console.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n      }\n\n      break;\n\n    case \"function\":\n      mutator = value;\n      break;\n  }\n\n  return mutator;\n}; //apply mutator to row\n\n\nMutator.prototype.transformRow = function (data, type, updatedData) {\n  var self = this,\n      key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n      value;\n\n  if (this.enabled) {\n    self.table.columnManager.traverse(function (column) {\n      var mutator, params, component;\n\n      if (column.modules.mutate) {\n        mutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n        if (mutator) {\n          value = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n          if (type == \"data\" || typeof value !== \"undefined\") {\n            component = column.getComponent();\n            params = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n            column.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n          }\n        }\n      }\n    });\n  }\n\n  return data;\n}; //apply mutator to new cell value\n\n\nMutator.prototype.transformCell = function (cell, value) {\n  var mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n      tempData = {};\n\n  if (mutator) {\n    tempData = Object.assign(tempData, cell.row.getData());\n    cell.column.setFieldValue(tempData, value);\n    return mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n  } else {\n    return value;\n  }\n};\n\nMutator.prototype.enable = function () {\n  this.enabled = true;\n};\n\nMutator.prototype.disable = function () {\n  this.enabled = false;\n}; //default mutators\n\n\nMutator.prototype.mutators = {};\nTabulator.prototype.registerModule(\"mutator\", Mutator);\n\nvar Page = function Page(table) {\n  this.table = table; //hold Tabulator object\n\n  this.mode = \"local\";\n  this.progressiveLoad = false;\n  this.size = 0;\n  this.page = 1;\n  this.count = 5;\n  this.max = 1;\n  this.displayIndex = 0; //index in display pipeline\n\n  this.initialLoad = true;\n  this.pageSizes = [];\n  this.dataReceivedNames = {};\n  this.dataSentNames = {};\n  this.createElements();\n};\n\nPage.prototype.createElements = function () {\n  var button;\n  this.element = document.createElement(\"span\");\n  this.element.classList.add(\"tabulator-paginator\");\n  this.pagesElement = document.createElement(\"span\");\n  this.pagesElement.classList.add(\"tabulator-pages\");\n  button = document.createElement(\"button\");\n  button.classList.add(\"tabulator-page\");\n  button.setAttribute(\"type\", \"button\");\n  button.setAttribute(\"role\", \"button\");\n  button.setAttribute(\"aria-label\", \"\");\n  button.setAttribute(\"title\", \"\");\n  this.firstBut = button.cloneNode(true);\n  this.firstBut.setAttribute(\"data-page\", \"first\");\n  this.prevBut = button.cloneNode(true);\n  this.prevBut.setAttribute(\"data-page\", \"prev\");\n  this.nextBut = button.cloneNode(true);\n  this.nextBut.setAttribute(\"data-page\", \"next\");\n  this.lastBut = button.cloneNode(true);\n  this.lastBut.setAttribute(\"data-page\", \"last\");\n\n  if (this.table.options.paginationSizeSelector) {\n    this.pageSizeSelect = document.createElement(\"select\");\n    this.pageSizeSelect.classList.add(\"tabulator-page-size\");\n  }\n};\n\nPage.prototype.generatePageSizeSelectList = function () {\n  var _this75 = this;\n\n  var pageSizes = [];\n\n  if (this.pageSizeSelect) {\n    if (Array.isArray(this.table.options.paginationSizeSelector)) {\n      pageSizes = this.table.options.paginationSizeSelector;\n      this.pageSizes = pageSizes;\n\n      if (this.pageSizes.indexOf(this.size) == -1) {\n        pageSizes.unshift(this.size);\n      }\n    } else {\n      if (this.pageSizes.indexOf(this.size) == -1) {\n        pageSizes = [];\n\n        for (var _i13 = 1; _i13 < 5; _i13++) {\n          pageSizes.push(this.size * _i13);\n        }\n\n        this.pageSizes = pageSizes;\n      } else {\n        pageSizes = this.pageSizes;\n      }\n    }\n\n    while (this.pageSizeSelect.firstChild) {\n      this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n    }\n\n    pageSizes.forEach(function (item) {\n      var itemEl = document.createElement(\"option\");\n      itemEl.value = item;\n\n      if (item === true) {\n        _this75.table.modules.localize.bind(\"pagination|all\", function (value) {\n          itemEl.innerHTML = value;\n        });\n      } else {\n        itemEl.innerHTML = item;\n      }\n\n      _this75.pageSizeSelect.appendChild(itemEl);\n    });\n    this.pageSizeSelect.value = this.size;\n  }\n}; //setup pageination\n\n\nPage.prototype.initialize = function (hidden) {\n  var self = this,\n      pageSelectLabel,\n      testElRow,\n      testElCell; //update param names\n\n  this.dataSentNames = Object.assign({}, this.paginationDataSentNames);\n  this.dataSentNames = Object.assign(this.dataSentNames, this.table.options.paginationDataSent);\n  this.dataReceivedNames = Object.assign({}, this.paginationDataReceivedNames);\n  this.dataReceivedNames = Object.assign(this.dataReceivedNames, this.table.options.paginationDataReceived); //build pagination element\n  //bind localizations\n\n  self.table.modules.localize.bind(\"pagination|first\", function (value) {\n    self.firstBut.innerHTML = value;\n  });\n  self.table.modules.localize.bind(\"pagination|first_title\", function (value) {\n    self.firstBut.setAttribute(\"aria-label\", value);\n    self.firstBut.setAttribute(\"title\", value);\n  });\n  self.table.modules.localize.bind(\"pagination|prev\", function (value) {\n    self.prevBut.innerHTML = value;\n  });\n  self.table.modules.localize.bind(\"pagination|prev_title\", function (value) {\n    self.prevBut.setAttribute(\"aria-label\", value);\n    self.prevBut.setAttribute(\"title\", value);\n  });\n  self.table.modules.localize.bind(\"pagination|next\", function (value) {\n    self.nextBut.innerHTML = value;\n  });\n  self.table.modules.localize.bind(\"pagination|next_title\", function (value) {\n    self.nextBut.setAttribute(\"aria-label\", value);\n    self.nextBut.setAttribute(\"title\", value);\n  });\n  self.table.modules.localize.bind(\"pagination|last\", function (value) {\n    self.lastBut.innerHTML = value;\n  });\n  self.table.modules.localize.bind(\"pagination|last_title\", function (value) {\n    self.lastBut.setAttribute(\"aria-label\", value);\n    self.lastBut.setAttribute(\"title\", value);\n  }); //click bindings\n\n  self.firstBut.addEventListener(\"click\", function () {\n    self.setPage(1).then(function () {}).catch(function () {});\n  });\n  self.prevBut.addEventListener(\"click\", function () {\n    self.previousPage().then(function () {}).catch(function () {});\n  });\n  self.nextBut.addEventListener(\"click\", function () {\n    self.nextPage().then(function () {}).catch(function () {});\n  });\n  self.lastBut.addEventListener(\"click\", function () {\n    self.setPage(self.max).then(function () {}).catch(function () {});\n  });\n\n  if (self.table.options.paginationElement) {\n    self.element = self.table.options.paginationElement;\n  }\n\n  if (this.pageSizeSelect) {\n    pageSelectLabel = document.createElement(\"label\");\n    self.table.modules.localize.bind(\"pagination|page_size\", function (value) {\n      self.pageSizeSelect.setAttribute(\"aria-label\", value);\n      self.pageSizeSelect.setAttribute(\"title\", value);\n      pageSelectLabel.innerHTML = value;\n    });\n    self.element.appendChild(pageSelectLabel);\n    self.element.appendChild(self.pageSizeSelect);\n    self.pageSizeSelect.addEventListener(\"change\", function (e) {\n      self.setPageSize(self.pageSizeSelect.value == \"true\" ? true : self.pageSizeSelect.value);\n      self.setPage(1).then(function () {}).catch(function () {});\n    });\n  } //append to DOM\n\n\n  self.element.appendChild(self.firstBut);\n  self.element.appendChild(self.prevBut);\n  self.element.appendChild(self.pagesElement);\n  self.element.appendChild(self.nextBut);\n  self.element.appendChild(self.lastBut);\n\n  if (!self.table.options.paginationElement && !hidden) {\n    self.table.footerManager.append(self.element, self);\n  } //set default values\n\n\n  self.mode = self.table.options.pagination;\n\n  if (self.table.options.paginationSize) {\n    self.size = self.table.options.paginationSize;\n  } else {\n    testElRow = document.createElement(\"div\");\n    testElRow.classList.add(\"tabulator-row\");\n    testElRow.style.visibility = hidden;\n    testElCell = document.createElement(\"div\");\n    testElCell.classList.add(\"tabulator-cell\");\n    testElCell.innerHTML = \"Page Row Test\";\n    testElRow.appendChild(testElCell);\n    self.table.rowManager.getTableElement().appendChild(testElRow);\n    self.size = Math.floor(self.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n    self.table.rowManager.getTableElement().removeChild(testElRow);\n  } // self.page = self.table.options.paginationInitialPage || 1;\n\n\n  self.count = self.table.options.paginationButtonCount;\n  self.generatePageSizeSelectList();\n};\n\nPage.prototype.initializeProgressive = function (mode) {\n  this.initialize(true);\n  this.mode = \"progressive_\" + mode;\n  this.progressiveLoad = true;\n};\n\nPage.prototype.setDisplayIndex = function (index) {\n  this.displayIndex = index;\n};\n\nPage.prototype.getDisplayIndex = function () {\n  return this.displayIndex;\n}; //calculate maximum page from number of rows\n\n\nPage.prototype.setMaxRows = function (rowCount) {\n  if (!rowCount) {\n    this.max = 1;\n  } else {\n    this.max = this.size === true ? 1 : Math.ceil(rowCount / this.size);\n  }\n\n  if (this.page > this.max) {\n    this.page = this.max;\n  }\n}; //reset to first page without triggering action\n\n\nPage.prototype.reset = function (force, columnsChanged) {\n  if (this.mode == \"local\" || force) {\n    this.page = 1;\n  }\n\n  if (columnsChanged) {\n    this.initialLoad = true;\n  }\n\n  return true;\n}; //set the maxmum page\n\n\nPage.prototype.setMaxPage = function (max) {\n  max = parseInt(max);\n  this.max = max || 1;\n\n  if (this.page > this.max) {\n    this.page = this.max;\n    this.trigger();\n  }\n}; //set current page number\n\n\nPage.prototype.setPage = function (page) {\n  var _this76 = this;\n\n  var self = this;\n\n  switch (page) {\n    case \"first\":\n      return this.setPage(1);\n      break;\n\n    case \"prev\":\n      return this.previousPage();\n      break;\n\n    case \"next\":\n      return this.nextPage();\n      break;\n\n    case \"last\":\n      return this.setPage(this.max);\n      break;\n  }\n\n  return new Promise(function (resolve, reject) {\n    page = parseInt(page);\n\n    if (page > 0 && page <= _this76.max) {\n      _this76.page = page;\n\n      _this76.trigger().then(function () {\n        resolve();\n      }).catch(function () {\n        reject();\n      });\n\n      if (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.page) {\n        self.table.modules.persistence.save(\"page\");\n      }\n    } else {\n      console.warn(\"Pagination Error - Requested page is out of range of 1 - \" + _this76.max + \":\", page);\n      reject();\n    }\n  });\n};\n\nPage.prototype.setPageToRow = function (row) {\n  var _this77 = this;\n\n  return new Promise(function (resolve, reject) {\n    var rows = _this77.table.rowManager.getDisplayRows(_this77.displayIndex - 1);\n\n    var index = rows.indexOf(row);\n\n    if (index > -1) {\n      var page = _this77.size === true ? 1 : Math.ceil((index + 1) / _this77.size);\n\n      _this77.setPage(page).then(function () {\n        resolve();\n      }).catch(function () {\n        reject();\n      });\n    } else {\n      console.warn(\"Pagination Error - Requested row is not visible\");\n      reject();\n    }\n  });\n};\n\nPage.prototype.setPageSize = function (size) {\n  if (size !== true) {\n    size = parseInt(size);\n  }\n\n  if (size > 0) {\n    this.size = size;\n  }\n\n  if (this.pageSizeSelect) {\n    // this.pageSizeSelect.value = size;\n    this.generatePageSizeSelectList();\n  }\n\n  if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page) {\n    this.table.modules.persistence.save(\"page\");\n  }\n}; //setup the pagination buttons\n\n\nPage.prototype._setPageButtons = function () {\n  var self = this;\n  var leftSize = Math.floor((this.count - 1) / 2);\n  var rightSize = Math.ceil((this.count - 1) / 2);\n  var min = this.max - this.page + leftSize + 1 < this.count ? this.max - this.count + 1 : Math.max(this.page - leftSize, 1);\n  var max = this.page <= rightSize ? Math.min(this.count, this.max) : Math.min(this.page + rightSize, this.max);\n\n  while (self.pagesElement.firstChild) {\n    self.pagesElement.removeChild(self.pagesElement.firstChild);\n  }\n\n  if (self.page == 1) {\n    self.firstBut.disabled = true;\n    self.prevBut.disabled = true;\n  } else {\n    self.firstBut.disabled = false;\n    self.prevBut.disabled = false;\n  }\n\n  if (self.page == self.max) {\n    self.lastBut.disabled = true;\n    self.nextBut.disabled = true;\n  } else {\n    self.lastBut.disabled = false;\n    self.nextBut.disabled = false;\n  }\n\n  for (var _i14 = min; _i14 <= max; _i14++) {\n    if (_i14 > 0 && _i14 <= self.max) {\n      self.pagesElement.appendChild(self._generatePageButton(_i14));\n    }\n  }\n\n  this.footerRedraw();\n};\n\nPage.prototype._generatePageButton = function (page) {\n  var self = this,\n      button = document.createElement(\"button\");\n  button.classList.add(\"tabulator-page\");\n\n  if (page == self.page) {\n    button.classList.add(\"active\");\n  }\n\n  button.setAttribute(\"type\", \"button\");\n  button.setAttribute(\"role\", \"button\");\n  self.table.modules.localize.bind(\"pagination|page_title\", function (value) {\n    button.setAttribute(\"aria-label\", value + \" \" + page);\n    button.setAttribute(\"title\", value + \" \" + page);\n  });\n  button.setAttribute(\"data-page\", page);\n  button.textContent = page;\n  button.addEventListener(\"click\", function (e) {\n    self.setPage(page).then(function () {}).catch(function () {});\n  });\n  return button;\n}; //previous page\n\n\nPage.prototype.previousPage = function () {\n  var _this78 = this;\n\n  return new Promise(function (resolve, reject) {\n    if (_this78.page > 1) {\n      _this78.page--;\n\n      _this78.trigger().then(function () {\n        resolve();\n      }).catch(function () {\n        reject();\n      });\n\n      if (_this78.table.options.persistence && _this78.table.modExists(\"persistence\", true) && _this78.table.modules.persistence.config.page) {\n        _this78.table.modules.persistence.save(\"page\");\n      }\n    } else {\n      console.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n      reject();\n    }\n  });\n}; //next page\n\n\nPage.prototype.nextPage = function () {\n  var _this79 = this;\n\n  return new Promise(function (resolve, reject) {\n    if (_this79.page < _this79.max) {\n      _this79.page++;\n\n      _this79.trigger().then(function () {\n        resolve();\n      }).catch(function () {\n        reject();\n      });\n\n      if (_this79.table.options.persistence && _this79.table.modExists(\"persistence\", true) && _this79.table.modules.persistence.config.page) {\n        _this79.table.modules.persistence.save(\"page\");\n      }\n    } else {\n      if (!_this79.progressiveLoad) {\n        console.warn(\"Pagination Error - Next page would be greater than maximum page of \" + _this79.max + \":\", _this79.max + 1);\n      }\n\n      reject();\n    }\n  });\n}; //return current page number\n\n\nPage.prototype.getPage = function () {\n  return this.page;\n}; //return max page number\n\n\nPage.prototype.getPageMax = function () {\n  return this.max;\n};\n\nPage.prototype.getPageSize = function (size) {\n  return this.size;\n};\n\nPage.prototype.getMode = function () {\n  return this.mode;\n}; //return appropriate rows for current page\n\n\nPage.prototype.getRows = function (data) {\n  var output, start, end;\n\n  if (this.mode == \"local\") {\n    output = [];\n\n    if (this.size === true) {\n      start = 0;\n      end = data.length;\n    } else {\n      start = this.size * (this.page - 1);\n      end = start + parseInt(this.size);\n    }\n\n    this._setPageButtons();\n\n    for (var _i15 = start; _i15 < end; _i15++) {\n      if (data[_i15]) {\n        output.push(data[_i15]);\n      }\n    }\n\n    return output;\n  } else {\n    this._setPageButtons();\n\n    return data.slice(0);\n  }\n};\n\nPage.prototype.trigger = function () {\n  var _this80 = this;\n\n  var left;\n  return new Promise(function (resolve, reject) {\n    switch (_this80.mode) {\n      case \"local\":\n        left = _this80.table.rowManager.scrollLeft;\n\n        _this80.table.rowManager.refreshActiveData(\"page\");\n\n        _this80.table.rowManager.scrollHorizontal(left);\n\n        _this80.table.options.pageLoaded.call(_this80.table, _this80.getPage());\n\n        resolve();\n        break;\n\n      case \"remote\":\n      case \"progressive_load\":\n      case \"progressive_scroll\":\n        _this80.table.modules.ajax.blockActiveRequest();\n\n        _this80._getRemotePage().then(function () {\n          resolve();\n        }).catch(function () {\n          reject();\n        });\n\n        break;\n\n      default:\n        console.warn(\"Pagination Error - no such pagination mode:\", _this80.mode);\n        reject();\n    }\n  });\n};\n\nPage.prototype._getRemotePage = function () {\n  var _this81 = this;\n\n  var self = this,\n      oldParams,\n      pageParams;\n  return new Promise(function (resolve, reject) {\n    if (!self.table.modExists(\"ajax\", true)) {\n      reject();\n    } //record old params and restore after request has been made\n\n\n    oldParams = Tabulator.prototype.helpers.deepClone(self.table.modules.ajax.getParams() || {});\n    pageParams = self.table.modules.ajax.getParams(); //configure request params\n\n    pageParams[_this81.dataSentNames.page] = self.page; //set page size if defined\n\n    if (_this81.size) {\n      pageParams[_this81.dataSentNames.size] = _this81.size;\n    } //set sort data if defined\n\n\n    if (_this81.table.options.ajaxSorting && _this81.table.modExists(\"sort\")) {\n      var sorters = self.table.modules.sort.getSort();\n      sorters.forEach(function (item) {\n        delete item.column;\n      });\n      pageParams[_this81.dataSentNames.sorters] = sorters;\n    } //set filter data if defined\n\n\n    if (_this81.table.options.ajaxFiltering && _this81.table.modExists(\"filter\")) {\n      var filters = self.table.modules.filter.getFilters(true, true);\n      pageParams[_this81.dataSentNames.filters] = filters;\n    }\n\n    self.table.modules.ajax.setParams(pageParams);\n    self.table.modules.ajax.sendRequest(_this81.progressiveLoad).then(function (data) {\n      self._parseRemoteData(data);\n\n      resolve();\n    }).catch(function (e) {\n      reject();\n    });\n    self.table.modules.ajax.setParams(oldParams);\n  });\n};\n\nPage.prototype._parseRemoteData = function (data) {\n  var self = this,\n      left,\n      data,\n      margin;\n\n  if (typeof data[this.dataReceivedNames.last_page] === \"undefined\") {\n    console.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.last_page + \"' property\");\n  }\n\n  if (data[this.dataReceivedNames.data]) {\n    this.max = parseInt(data[this.dataReceivedNames.last_page]) || 1;\n\n    if (this.progressiveLoad) {\n      switch (this.mode) {\n        case \"progressive_load\":\n          if (this.page == 1) {\n            this.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n          } else {\n            this.table.rowManager.addRows(data[this.dataReceivedNames.data]);\n          }\n\n          if (this.page < this.max) {\n            setTimeout(function () {\n              self.nextPage().then(function () {}).catch(function () {});\n            }, self.table.options.ajaxProgressiveLoadDelay);\n          }\n\n          break;\n\n        case \"progressive_scroll\":\n          data = this.table.rowManager.getData().concat(data[this.dataReceivedNames.data]);\n          this.table.rowManager.setData(data, true, this.initialLoad && this.page == 1);\n          margin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.element.clientHeight * 2;\n\n          if (self.table.rowManager.element.scrollHeight <= self.table.rowManager.element.clientHeight + margin) {\n            self.nextPage().then(function () {}).catch(function () {});\n          }\n\n          break;\n      }\n    } else {\n      left = this.table.rowManager.scrollLeft;\n      this.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n      this.table.rowManager.scrollHorizontal(left);\n      this.table.columnManager.scrollHorizontal(left);\n      this.table.options.pageLoaded.call(this.table, this.getPage());\n    }\n\n    this.initialLoad = false;\n  } else {\n    console.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.data + \"' property\");\n  }\n}; //handle the footer element being redrawn\n\n\nPage.prototype.footerRedraw = function () {\n  var footer = this.table.footerManager.element;\n\n  if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n    this.pagesElement.style.display = 'none';\n  } else {\n    this.pagesElement.style.display = '';\n\n    if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n      this.pagesElement.style.display = 'none';\n    }\n  }\n}; //set the paramter names for pagination requests\n\n\nPage.prototype.paginationDataSentNames = {\n  \"page\": \"page\",\n  \"size\": \"size\",\n  \"sorters\": \"sorters\",\n  // \"sort_dir\":\"sort_dir\",\n  \"filters\": \"filters\" // \"filter_value\":\"filter_value\",\n  // \"filter_type\":\"filter_type\",\n\n}; //set the property names for pagination responses\n\nPage.prototype.paginationDataReceivedNames = {\n  \"current_page\": \"current_page\",\n  \"last_page\": \"last_page\",\n  \"data\": \"data\"\n};\nTabulator.prototype.registerModule(\"page\", Page);\n\nvar Persistence = function Persistence(table) {\n  this.table = table; //hold Tabulator object\n\n  this.mode = \"\";\n  this.id = \"\"; // this.persistProps = [\"field\", \"width\", \"visible\"];\n\n  this.defWatcherBlock = false;\n  this.config = {};\n  this.readFunc = false;\n  this.writeFunc = false;\n}; // Test for whether localStorage is available for use.\n\n\nPersistence.prototype.localStorageTest = function () {\n  var testKey = \"_tabulator_test\";\n\n  try {\n    window.localStorage.setItem(testKey, testKey);\n    window.localStorage.removeItem(testKey);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}; //setup parameters\n\n\nPersistence.prototype.initialize = function () {\n  //determine persistent layout storage type\n  var mode = this.table.options.persistenceMode,\n      id = this.table.options.persistenceID,\n      retreivedData;\n  this.mode = mode !== true ? mode : this.localStorageTest() ? \"local\" : \"cookie\";\n\n  if (this.table.options.persistenceReaderFunc) {\n    if (typeof this.table.options.persistenceReaderFunc === \"function\") {\n      this.readFunc = this.table.options.persistenceReaderFunc;\n    } else {\n      if (this.readers[this.table.options.persistenceReaderFunc]) {\n        this.readFunc = this.readers[this.table.options.persistenceReaderFunc];\n      } else {\n        console.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n      }\n    }\n  } else {\n    if (this.readers[this.mode]) {\n      this.readFunc = this.readers[this.mode];\n    } else {\n      console.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n    }\n  }\n\n  if (this.table.options.persistenceWriterFunc) {\n    if (typeof this.table.options.persistenceWriterFunc === \"function\") {\n      this.writeFunc = this.table.options.persistenceWriterFunc;\n    } else {\n      if (this.readers[this.table.options.persistenceWriterFunc]) {\n        this.writeFunc = this.readers[this.table.options.persistenceWriterFunc];\n      } else {\n        console.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n      }\n    }\n  } else {\n    if (this.writers[this.mode]) {\n      this.writeFunc = this.writers[this.mode];\n    } else {\n      console.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n    }\n  } //set storage tag\n\n\n  this.id = \"tabulator-\" + (id || this.table.element.getAttribute(\"id\") || \"\");\n  this.config = {\n    sort: this.table.options.persistence === true || this.table.options.persistence.sort,\n    filter: this.table.options.persistence === true || this.table.options.persistence.filter,\n    group: this.table.options.persistence === true || this.table.options.persistence.group,\n    page: this.table.options.persistence === true || this.table.options.persistence.page,\n    columns: this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns\n  }; //load pagination data if needed\n\n  if (this.config.page) {\n    retreivedData = this.retreiveData(\"page\");\n\n    if (retreivedData) {\n      if (typeof retreivedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)) {\n        this.table.options.paginationSize = retreivedData.paginationSize;\n      }\n\n      if (typeof retreivedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)) {\n        this.table.options.paginationInitialPage = retreivedData.paginationInitialPage;\n      }\n    }\n  } //load group data if needed\n\n\n  if (this.config.group) {\n    retreivedData = this.retreiveData(\"group\");\n\n    if (retreivedData) {\n      if (typeof retreivedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)) {\n        this.table.options.groupBy = retreivedData.groupBy;\n      }\n\n      if (typeof retreivedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)) {\n        this.table.options.groupStartOpen = retreivedData.groupStartOpen;\n      }\n\n      if (typeof retreivedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)) {\n        this.table.options.groupHeader = retreivedData.groupHeader;\n      }\n    }\n  }\n};\n\nPersistence.prototype.initializeColumn = function (column) {\n  var self = this,\n      def,\n      keys;\n\n  if (this.config.columns) {\n    this.defWatcherBlock = true;\n    def = column.getDefinition();\n    keys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n    keys.forEach(function (key) {\n      var props = Object.getOwnPropertyDescriptor(def, key);\n      var value = def[key];\n\n      if (props) {\n        Object.defineProperty(def, key, {\n          set: function set(newValue) {\n            value = newValue;\n\n            if (!self.defWatcherBlock) {\n              self.save(\"columns\");\n            }\n\n            if (props.set) {\n              props.set(newValue);\n            }\n          },\n          get: function get() {\n            if (props.get) {\n              props.get();\n            }\n\n            return value;\n          }\n        });\n      }\n    });\n    this.defWatcherBlock = false;\n  }\n}; //load saved definitions\n\n\nPersistence.prototype.load = function (type, current) {\n  var data = this.retreiveData(type);\n\n  if (current) {\n    data = data ? this.mergeDefinition(current, data) : current;\n  }\n\n  return data;\n}; //retreive data from memory\n\n\nPersistence.prototype.retreiveData = function (type) {\n  return this.readFunc ? this.readFunc(this.id, type) : false;\n}; //merge old and new column definitions\n\n\nPersistence.prototype.mergeDefinition = function (oldCols, newCols) {\n  var self = this,\n      output = []; // oldCols = oldCols || [];\n\n  newCols = newCols || [];\n  newCols.forEach(function (column, to) {\n    var from = self._findColumn(oldCols, column),\n        keys;\n\n    if (from) {\n      if (self.config.columns === true || self.config.columns == undefined) {\n        keys = Object.keys(from);\n        keys.push(\"width\");\n      } else {\n        keys = self.config.columns;\n      }\n\n      keys.forEach(function (key) {\n        if (typeof column[key] !== \"undefined\") {\n          from[key] = column[key];\n        }\n      });\n\n      if (from.columns) {\n        from.columns = self.mergeDefinition(from.columns, column.columns);\n      }\n\n      output.push(from);\n    }\n  });\n  oldCols.forEach(function (column, i) {\n    var from = self._findColumn(newCols, column);\n\n    if (!from) {\n      if (output.length > i) {\n        output.splice(i, 0, column);\n      } else {\n        output.push(column);\n      }\n    }\n  });\n  return output;\n}; //find matching columns\n\n\nPersistence.prototype._findColumn = function (columns, subject) {\n  var type = subject.columns ? \"group\" : subject.field ? \"field\" : \"object\";\n  return columns.find(function (col) {\n    switch (type) {\n      case \"group\":\n        return col.title === subject.title && col.columns.length === subject.columns.length;\n        break;\n\n      case \"field\":\n        return col.field === subject.field;\n        break;\n\n      case \"object\":\n        return col === subject;\n        break;\n    }\n  });\n}; //save data\n\n\nPersistence.prototype.save = function (type) {\n  var data = {};\n\n  switch (type) {\n    case \"columns\":\n      data = this.parseColumns(this.table.columnManager.getColumns());\n      break;\n\n    case \"filter\":\n      data = this.table.modules.filter.getFilters();\n      break;\n\n    case \"sort\":\n      data = this.validateSorters(this.table.modules.sort.getSort());\n      break;\n\n    case \"group\":\n      data = this.getGroupConfig();\n      break;\n\n    case \"page\":\n      data = this.getPageConfig();\n      break;\n  }\n\n  if (this.writeFunc) {\n    this.writeFunc(this.id, type, data);\n  }\n}; //ensure sorters contain no function data\n\n\nPersistence.prototype.validateSorters = function (data) {\n  data.forEach(function (item) {\n    item.column = item.field;\n    delete item.field;\n  });\n  return data;\n};\n\nPersistence.prototype.getGroupConfig = function () {\n  var data = {};\n\n  if (this.config.group) {\n    if (this.config.group === true || this.config.group.groupBy) {\n      data.groupBy = this.table.options.groupBy;\n    }\n\n    if (this.config.group === true || this.config.group.groupStartOpen) {\n      data.groupStartOpen = this.table.options.groupStartOpen;\n    }\n\n    if (this.config.group === true || this.config.group.groupHeader) {\n      data.groupHeader = this.table.options.groupHeader;\n    }\n  }\n\n  return data;\n};\n\nPersistence.prototype.getPageConfig = function () {\n  var data = {};\n\n  if (this.config.page) {\n    if (this.config.page === true || this.config.page.size) {\n      data.paginationSize = this.table.modules.page.getPageSize();\n    }\n\n    if (this.config.page === true || this.config.page.page) {\n      data.paginationInitialPage = this.table.modules.page.getPage();\n    }\n  }\n\n  return data;\n}; //parse columns for data to store\n\n\nPersistence.prototype.parseColumns = function (columns) {\n  var self = this,\n      definitions = [],\n      excludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n  columns.forEach(function (column) {\n    var defStore = {},\n        colDef = column.getDefinition(),\n        keys;\n\n    if (column.isGroup) {\n      defStore.title = colDef.title;\n      defStore.columns = self.parseColumns(column.getColumns());\n    } else {\n      defStore.field = column.getField();\n\n      if (self.config.columns === true || self.config.columns == undefined) {\n        keys = Object.keys(colDef);\n        keys.push(\"width\");\n      } else {\n        keys = self.config.columns;\n      }\n\n      keys.forEach(function (key) {\n        switch (key) {\n          case \"width\":\n            defStore.width = column.getWidth();\n            break;\n\n          case \"visible\":\n            defStore.visible = column.visible;\n            break;\n\n          default:\n            if (typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1) {\n              defStore[key] = colDef[key];\n            }\n\n        }\n      });\n    }\n\n    definitions.push(defStore);\n  });\n  return definitions;\n}; // read peristence information from storage\n\n\nPersistence.prototype.readers = {\n  local: function local(id, type) {\n    var data = localStorage.getItem(id + \"-\" + type);\n    return data ? JSON.parse(data) : false;\n  },\n  cookie: function cookie(id, type) {\n    var cookie = document.cookie,\n        key = id + \"-\" + type,\n        cookiePos = cookie.indexOf(key + \"=\"),\n        end,\n        data; //if cookie exists, decode and load column data into tabulator\n\n    if (cookiePos > -1) {\n      cookie = cookie.substr(cookiePos);\n      end = cookie.indexOf(\";\");\n\n      if (end > -1) {\n        cookie = cookie.substr(0, end);\n      }\n\n      data = cookie.replace(key + \"=\", \"\");\n    }\n\n    return data ? JSON.parse(data) : false;\n  }\n}; //write persistence information to storage\n\nPersistence.prototype.writers = {\n  local: function local(id, type, data) {\n    localStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n  },\n  cookie: function cookie(id, type, data) {\n    var expireDate = new Date();\n    expireDate.setDate(expireDate.getDate() + 10000);\n    document.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n  }\n};\nTabulator.prototype.registerModule(\"persistence\", Persistence);\n\nvar Print = function Print(table) {\n  this.table = table; //hold Tabulator object\n\n  this.element = false;\n  this.manualBlock = false;\n};\n\nPrint.prototype.initialize = function () {\n  window.addEventListener(\"beforeprint\", this.replaceTable.bind(this));\n  window.addEventListener(\"afterprint\", this.cleanup.bind(this));\n};\n\nPrint.prototype.replaceTable = function () {\n  if (!this.manualBlock) {\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-print-table\");\n    this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n    this.table.element.style.display = \"none\";\n    this.table.element.parentNode.insertBefore(this.element, this.table.element);\n  }\n};\n\nPrint.prototype.cleanup = function () {\n  document.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n  if (this.element && this.element.parentNode) {\n    this.element.parentNode.removeChild(this.element);\n    this.table.element.style.display = \"\";\n  }\n};\n\nPrint.prototype.printFullscreen = function (visible, style, config) {\n  var scrollX = window.scrollX,\n      scrollY = window.scrollY,\n      headerEl = document.createElement(\"div\"),\n      footerEl = document.createElement(\"div\"),\n      tableEl = this.table.modules.export.genereateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible, \"print\"),\n      headerContent,\n      footerContent;\n  this.manualBlock = true;\n  this.element = document.createElement(\"div\");\n  this.element.classList.add(\"tabulator-print-fullscreen\");\n\n  if (this.table.options.printHeader) {\n    headerEl.classList.add(\"tabulator-print-header\");\n    headerContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n    if (typeof headerContent == \"string\") {\n      headerEl.innerHTML = headerContent;\n    } else {\n      headerEl.appendChild(headerContent);\n    }\n\n    this.element.appendChild(headerEl);\n  }\n\n  this.element.appendChild(tableEl);\n\n  if (this.table.options.printFooter) {\n    footerEl.classList.add(\"tabulator-print-footer\");\n    footerContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n    if (typeof footerContent == \"string\") {\n      footerEl.innerHTML = footerContent;\n    } else {\n      footerEl.appendChild(footerContent);\n    }\n\n    this.element.appendChild(footerEl);\n  }\n\n  document.body.classList.add(\"tabulator-print-fullscreen-hide\");\n  document.body.appendChild(this.element);\n\n  if (this.table.options.printFormatter) {\n    this.table.options.printFormatter(this.element, tableEl);\n  }\n\n  window.print();\n  this.cleanup();\n  window.scrollTo(scrollX, scrollY);\n  this.manualBlock = false;\n};\n\nTabulator.prototype.registerModule(\"print\", Print);\n\nvar ReactiveData = function ReactiveData(table) {\n  this.table = table; //hold Tabulator object\n\n  this.data = false;\n  this.blocked = false; //block reactivity while performing update\n\n  this.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\n  this.currentVersion = 0;\n};\n\nReactiveData.prototype.watchData = function (data) {\n  var self = this,\n      pushFunc,\n      version;\n  this.currentVersion++;\n  version = this.currentVersion;\n  self.unwatchData();\n  self.data = data; //override array push function\n\n  self.origFuncs.push = data.push;\n  Object.defineProperty(self.data, \"push\", {\n    enumerable: false,\n    configurable: true,\n    value: function value() {\n      var args = Array.from(arguments);\n\n      if (!self.blocked && version === self.currentVersion) {\n        args.forEach(function (arg) {\n          self.table.rowManager.addRowActual(arg, false);\n        });\n      }\n\n      return self.origFuncs.push.apply(data, arguments);\n    }\n  }); //override array unshift function\n\n  self.origFuncs.unshift = data.unshift;\n  Object.defineProperty(self.data, \"unshift\", {\n    enumerable: false,\n    configurable: true,\n    value: function value() {\n      var args = Array.from(arguments);\n\n      if (!self.blocked && version === self.currentVersion) {\n        args.forEach(function (arg) {\n          self.table.rowManager.addRowActual(arg, true);\n        });\n      }\n\n      return self.origFuncs.unshift.apply(data, arguments);\n    }\n  }); //override array shift function\n\n  self.origFuncs.shift = data.shift;\n  Object.defineProperty(self.data, \"shift\", {\n    enumerable: false,\n    configurable: true,\n    value: function value() {\n      var row;\n\n      if (!self.blocked && version === self.currentVersion) {\n        if (self.data.length) {\n          row = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\n          if (row) {\n            row.deleteActual();\n          }\n        }\n      }\n\n      return self.origFuncs.shift.call(data);\n    }\n  }); //override array pop function\n\n  self.origFuncs.pop = data.pop;\n  Object.defineProperty(self.data, \"pop\", {\n    enumerable: false,\n    configurable: true,\n    value: function value() {\n      var row;\n\n      if (!self.blocked && version === self.currentVersion) {\n        if (self.data.length) {\n          row = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\n          if (row) {\n            row.deleteActual();\n          }\n        }\n      }\n\n      return self.origFuncs.pop.call(data);\n    }\n  }); //override array splice function\n\n  self.origFuncs.splice = data.splice;\n  Object.defineProperty(self.data, \"splice\", {\n    enumerable: false,\n    configurable: true,\n    value: function value() {\n      var args = Array.from(arguments),\n          start = args[0] < 0 ? data.length + args[0] : args[0],\n          end = args[1],\n          newRows = args[2] ? args.slice(2) : false,\n          startRow;\n\n      if (!self.blocked && version === self.currentVersion) {\n        //add new rows\n        if (newRows) {\n          startRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\n          if (startRow) {\n            newRows.forEach(function (rowData) {\n              self.table.rowManager.addRowActual(rowData, true, startRow, true);\n            });\n          } else {\n            newRows = newRows.slice().reverse();\n            newRows.forEach(function (rowData) {\n              self.table.rowManager.addRowActual(rowData, true, false, true);\n            });\n          }\n        } //delete removed rows\n\n\n        if (end !== 0) {\n          var oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n          oldRows.forEach(function (rowData, i) {\n            var row = self.table.rowManager.getRowFromDataObject(rowData);\n\n            if (row) {\n              row.deleteActual(i !== oldRows.length - 1);\n            }\n          });\n        }\n\n        if (newRows || end !== 0) {\n          self.table.rowManager.reRenderInPosition();\n        }\n      }\n\n      return self.origFuncs.splice.apply(data, arguments);\n    }\n  });\n};\n\nReactiveData.prototype.unwatchData = function () {\n  if (this.data !== false) {\n    for (var key in this.origFuncs) {\n      Object.defineProperty(this.data, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: this.origFuncs.key\n      });\n    }\n  }\n};\n\nReactiveData.prototype.watchRow = function (row) {\n  var data = row.getData();\n  this.blocked = true;\n\n  for (var key in data) {\n    this.watchKey(row, data, key);\n  }\n\n  if (this.table.options.dataTree) {\n    this.watchTreeChildren(row);\n  }\n\n  this.blocked = false;\n};\n\nReactiveData.prototype.watchTreeChildren = function (row) {\n  var self = this,\n      childField = row.getData()[this.table.options.dataTreeChildField],\n      origFuncs = {};\n\n  function rebuildTree() {\n    self.table.modules.dataTree.initializeRow(row);\n    self.table.modules.dataTree.layoutRow(row);\n    self.table.rowManager.refreshActiveData(\"tree\", false, true);\n  }\n\n  if (childField) {\n    origFuncs.push = childField.push;\n    Object.defineProperty(childField, \"push\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var result = origFuncs.push.apply(childField, arguments);\n        rebuildTree();\n        return result;\n      }\n    });\n    origFuncs.unshift = childField.unshift;\n    Object.defineProperty(childField, \"unshift\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var result = origFuncs.unshift.apply(childField, arguments);\n        rebuildTree();\n        return result;\n      }\n    });\n    origFuncs.shift = childField.shift;\n    Object.defineProperty(childField, \"shift\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var result = origFuncs.shift.call(childField);\n        rebuildTree();\n        return result;\n      }\n    });\n    origFuncs.pop = childField.pop;\n    Object.defineProperty(childField, \"pop\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var result = origFuncs.pop.call(childField);\n        rebuildTree();\n        return result;\n      }\n    });\n    origFuncs.splice = childField.splice;\n    Object.defineProperty(childField, \"splice\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var result = origFuncs.splice.apply(childField, arguments);\n        rebuildTree();\n        return result;\n      }\n    });\n  }\n};\n\nReactiveData.prototype.watchKey = function (row, data, key) {\n  var self = this,\n      props = Object.getOwnPropertyDescriptor(data, key),\n      value = data[key],\n      version = this.currentVersion;\n  Object.defineProperty(data, key, {\n    set: function set(newValue) {\n      value = newValue;\n\n      if (!self.blocked && version === self.currentVersion) {\n        var update = {};\n        update[key] = newValue;\n        row.updateData(update);\n      }\n\n      if (props.set) {\n        props.set(newValue);\n      }\n    },\n    get: function get() {\n      if (props.get) {\n        props.get();\n      }\n\n      return value;\n    }\n  });\n};\n\nReactiveData.prototype.unwatchRow = function (row) {\n  var data = row.getData();\n\n  for (var key in data) {\n    Object.defineProperty(data, key, {\n      value: data[key]\n    });\n  }\n};\n\nReactiveData.prototype.block = function () {\n  this.blocked = true;\n};\n\nReactiveData.prototype.unblock = function () {\n  this.blocked = false;\n};\n\nTabulator.prototype.registerModule(\"reactiveData\", ReactiveData);\n\nvar ResizeColumns = function ResizeColumns(table) {\n  this.table = table; //hold Tabulator object\n\n  this.startColumn = false;\n  this.startX = false;\n  this.startWidth = false;\n  this.handle = null;\n  this.prevHandle = null;\n};\n\nResizeColumns.prototype.initializeColumn = function (type, column, element) {\n  var self = this,\n      variableHeight = false,\n      mode = this.table.options.resizableColumns; //set column resize mode\n\n  if (type === \"header\") {\n    variableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n    column.modules.resize = {\n      variableHeight: variableHeight\n    };\n  }\n\n  if (mode === true || mode == type) {\n    var handle = document.createElement('div');\n    handle.className = \"tabulator-col-resize-handle\";\n    var prevHandle = document.createElement('div');\n    prevHandle.className = \"tabulator-col-resize-handle prev\";\n    handle.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n    });\n\n    var handleDown = function handleDown(e) {\n      var nearestColumn = column.getLastColumn();\n\n      if (nearestColumn && self._checkResizability(nearestColumn)) {\n        self.startColumn = column;\n\n        self._mouseDown(e, nearestColumn, handle);\n      }\n    };\n\n    handle.addEventListener(\"mousedown\", handleDown);\n    handle.addEventListener(\"touchstart\", handleDown, {\n      passive: true\n    }); //reszie column on  double click\n\n    handle.addEventListener(\"dblclick\", function (e) {\n      var col = column.getLastColumn();\n\n      if (col && self._checkResizability(col)) {\n        e.stopPropagation();\n        col.reinitializeWidth(true);\n      }\n    });\n    prevHandle.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n    });\n\n    var prevHandleDown = function prevHandleDown(e) {\n      var nearestColumn, colIndex, prevColumn;\n      nearestColumn = column.getFirstColumn();\n\n      if (nearestColumn) {\n        colIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n        prevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n        if (prevColumn && self._checkResizability(prevColumn)) {\n          self.startColumn = column;\n\n          self._mouseDown(e, prevColumn, prevHandle);\n        }\n      }\n    };\n\n    prevHandle.addEventListener(\"mousedown\", prevHandleDown);\n    prevHandle.addEventListener(\"touchstart\", prevHandleDown, {\n      passive: true\n    }); //resize column on double click\n\n    prevHandle.addEventListener(\"dblclick\", function (e) {\n      var nearestColumn, colIndex, prevColumn;\n      nearestColumn = column.getFirstColumn();\n\n      if (nearestColumn) {\n        colIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n        prevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n        if (prevColumn && self._checkResizability(prevColumn)) {\n          e.stopPropagation();\n          prevColumn.reinitializeWidth(true);\n        }\n      }\n    });\n    element.appendChild(handle);\n    element.appendChild(prevHandle);\n  }\n};\n\nResizeColumns.prototype._checkResizability = function (column) {\n  return typeof column.definition.resizable != \"undefined\" ? column.definition.resizable : this.table.options.resizableColumns;\n};\n\nResizeColumns.prototype._mouseDown = function (e, column, handle) {\n  var self = this;\n  self.table.element.classList.add(\"tabulator-block-select\");\n\n  function mouseMove(e) {\n    // self.table.columnManager.tempScrollBlock();\n    if (self.table.rtl) {\n      column.setWidth(self.startWidth - ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\n    } else {\n      column.setWidth(self.startWidth + ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\n    }\n\n    if (self.table.options.virtualDomHoz) {\n      self.table.vdomHoz.reinitialize(true);\n    }\n\n    if (!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n      column.checkCellHeights();\n    }\n  }\n\n  function mouseUp(e) {\n    //block editor from taking action while resizing is taking place\n    if (self.startColumn.modules.edit) {\n      self.startColumn.modules.edit.blocked = false;\n    }\n\n    if (self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n      column.checkCellHeights();\n    }\n\n    document.body.removeEventListener(\"mouseup\", mouseUp);\n    document.body.removeEventListener(\"mousemove\", mouseMove);\n    handle.removeEventListener(\"touchmove\", mouseMove);\n    handle.removeEventListener(\"touchend\", mouseUp);\n    self.table.element.classList.remove(\"tabulator-block-select\");\n\n    if (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.columns) {\n      self.table.modules.persistence.save(\"columns\");\n    }\n\n    self.table.options.columnResized.call(self.table, column.getComponent());\n  }\n\n  e.stopPropagation(); //prevent resize from interfereing with movable columns\n  //block editor from taking action while resizing is taking place\n\n  if (self.startColumn.modules.edit) {\n    self.startColumn.modules.edit.blocked = true;\n  }\n\n  self.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n  self.startWidth = column.getWidth();\n  document.body.addEventListener(\"mousemove\", mouseMove);\n  document.body.addEventListener(\"mouseup\", mouseUp);\n  handle.addEventListener(\"touchmove\", mouseMove, {\n    passive: true\n  });\n  handle.addEventListener(\"touchend\", mouseUp);\n};\n\nTabulator.prototype.registerModule(\"resizeColumns\", ResizeColumns);\n\nvar ResizeRows = function ResizeRows(table) {\n  this.table = table; //hold Tabulator object\n\n  this.startColumn = false;\n  this.startY = false;\n  this.startHeight = false;\n  this.handle = null;\n  this.prevHandle = null;\n};\n\nResizeRows.prototype.initializeRow = function (row) {\n  var self = this,\n      rowEl = row.getElement();\n  var handle = document.createElement('div');\n  handle.className = \"tabulator-row-resize-handle\";\n  var prevHandle = document.createElement('div');\n  prevHandle.className = \"tabulator-row-resize-handle prev\";\n  handle.addEventListener(\"click\", function (e) {\n    e.stopPropagation();\n  });\n\n  var handleDown = function handleDown(e) {\n    self.startRow = row;\n\n    self._mouseDown(e, row, handle);\n  };\n\n  handle.addEventListener(\"mousedown\", handleDown);\n  handle.addEventListener(\"touchstart\", handleDown, {\n    passive: true\n  });\n  prevHandle.addEventListener(\"click\", function (e) {\n    e.stopPropagation();\n  });\n\n  var prevHandleDown = function prevHandleDown(e) {\n    var prevRow = self.table.rowManager.prevDisplayRow(row);\n\n    if (prevRow) {\n      self.startRow = prevRow;\n\n      self._mouseDown(e, prevRow, prevHandle);\n    }\n  };\n\n  prevHandle.addEventListener(\"mousedown\", prevHandleDown);\n  prevHandle.addEventListener(\"touchstart\", prevHandleDown, {\n    passive: true\n  });\n  rowEl.appendChild(handle);\n  rowEl.appendChild(prevHandle);\n};\n\nResizeRows.prototype._mouseDown = function (e, row, handle) {\n  var self = this;\n  self.table.element.classList.add(\"tabulator-block-select\");\n\n  function mouseMove(e) {\n    row.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n  }\n\n  function mouseUp(e) {\n    // //block editor from taking action while resizing is taking place\n    // if(self.startColumn.modules.edit){\n    // \tself.startColumn.modules.edit.blocked = false;\n    // }\n    document.body.removeEventListener(\"mouseup\", mouseMove);\n    document.body.removeEventListener(\"mousemove\", mouseMove);\n    handle.removeEventListener(\"touchmove\", mouseMove);\n    handle.removeEventListener(\"touchend\", mouseUp);\n    self.table.element.classList.remove(\"tabulator-block-select\");\n    self.table.options.rowResized.call(this.table, row.getComponent());\n  }\n\n  e.stopPropagation(); //prevent resize from interfereing with movable columns\n  //block editor from taking action while resizing is taking place\n  // if(self.startColumn.modules.edit){\n  // \tself.startColumn.modules.edit.blocked = true;\n  // }\n\n  self.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n  self.startHeight = row.getHeight();\n  document.body.addEventListener(\"mousemove\", mouseMove);\n  document.body.addEventListener(\"mouseup\", mouseUp);\n  handle.addEventListener(\"touchmove\", mouseMove, {\n    passive: true\n  });\n  handle.addEventListener(\"touchend\", mouseUp);\n};\n\nTabulator.prototype.registerModule(\"resizeRows\", ResizeRows);\n\nvar ResizeTable = function ResizeTable(table) {\n  this.table = table; //hold Tabulator object\n\n  this.binding = false;\n  this.observer = false;\n  this.containerObserver = false;\n  this.tableHeight = 0;\n  this.tableWidth = 0;\n  this.containerHeight = 0;\n  this.containerWidth = 0;\n  this.autoResize = false;\n};\n\nResizeTable.prototype.initialize = function (row) {\n  var _this82 = this;\n\n  var table = this.table,\n      tableStyle;\n  this.tableHeight = table.element.clientHeight;\n  this.tableWidth = table.element.clientWidth;\n\n  if (table.element.parentNode) {\n    this.containerHeight = table.element.parentNode.clientHeight;\n    this.containerWidth = table.element.parentNode.clientWidth;\n  }\n\n  if (typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\") {\n    this.autoResize = true;\n    this.observer = new ResizeObserver(function (entry) {\n      if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n        var nodeHeight = Math.floor(entry[0].contentRect.height);\n        var nodeWidth = Math.floor(entry[0].contentRect.width);\n\n        if (_this82.tableHeight != nodeHeight || _this82.tableWidth != nodeWidth) {\n          _this82.tableHeight = nodeHeight;\n          _this82.tableWidth = nodeWidth;\n\n          if (table.element.parentNode) {\n            _this82.containerHeight = table.element.parentNode.clientHeight;\n            _this82.containerWidth = table.element.parentNode.clientWidth;\n          }\n\n          if (table.options.virtualDomHoz) {\n            table.vdomHoz.reinitialize(true);\n          }\n\n          table.redraw();\n        }\n      }\n    });\n    this.observer.observe(table.element);\n    tableStyle = window.getComputedStyle(table.element);\n\n    if (this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))) {\n      this.containerObserver = new ResizeObserver(function (entry) {\n        if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n          var nodeHeight = Math.floor(entry[0].contentRect.height);\n          var nodeWidth = Math.floor(entry[0].contentRect.width);\n\n          if (_this82.containerHeight != nodeHeight || _this82.containerWidth != nodeWidth) {\n            _this82.containerHeight = nodeHeight;\n            _this82.containerWidth = nodeWidth;\n            _this82.tableHeight = table.element.clientHeight;\n            _this82.tableWidth = table.element.clientWidth;\n          }\n\n          if (table.options.virtualDomHoz) {\n            table.vdomHoz.reinitialize(true);\n          }\n\n          table.redraw();\n        }\n      });\n      this.containerObserver.observe(this.table.element.parentNode);\n    }\n  } else {\n    this.binding = function () {\n      if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n        if (table.options.virtualDomHoz) {\n          table.vdomHoz.reinitialize(true);\n        }\n\n        table.redraw();\n      }\n    };\n\n    window.addEventListener(\"resize\", this.binding);\n  }\n};\n\nResizeTable.prototype.clearBindings = function (row) {\n  if (this.binding) {\n    window.removeEventListener(\"resize\", this.binding);\n  }\n\n  if (this.observer) {\n    this.observer.unobserve(this.table.element);\n  }\n\n  if (this.containerObserver) {\n    this.containerObserver.unobserve(this.table.element.parentNode);\n  }\n};\n\nTabulator.prototype.registerModule(\"resizeTable\", ResizeTable);\n\nvar ResponsiveLayout = function ResponsiveLayout(table) {\n  this.table = table; //hold Tabulator object\n\n  this.columns = [];\n  this.hiddenColumns = [];\n  this.mode = \"\";\n  this.index = 0;\n  this.collapseFormatter = [];\n  this.collapseStartOpen = true;\n  this.collapseHandleColumn = false;\n}; //generate resposive columns list\n\n\nResponsiveLayout.prototype.initialize = function () {\n  var self = this,\n      columns = [];\n  this.mode = this.table.options.responsiveLayout;\n  this.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n  this.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n  this.hiddenColumns = []; //detemine level of responsivity for each column\n\n  this.table.columnManager.columnsByIndex.forEach(function (column, i) {\n    if (column.modules.responsive) {\n      if (column.modules.responsive.order && column.modules.responsive.visible) {\n        column.modules.responsive.index = i;\n        columns.push(column);\n\n        if (!column.visible && self.mode === \"collapse\") {\n          self.hiddenColumns.push(column);\n        }\n      }\n    }\n  }); //sort list by responsivity\n\n  columns = columns.reverse();\n  columns = columns.sort(function (a, b) {\n    var diff = b.modules.responsive.order - a.modules.responsive.order;\n    return diff || b.modules.responsive.index - a.modules.responsive.index;\n  });\n  this.columns = columns;\n\n  if (this.mode === \"collapse\") {\n    this.generateCollapsedContent();\n  } //assign collapse column\n\n\n  for (var _iterator = this.table.columnManager.columnsByIndex, _isArray = Array.isArray(_iterator), _i16 = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i16 >= _iterator.length) break;\n      _ref = _iterator[_i16++];\n    } else {\n      _i16 = _iterator.next();\n      if (_i16.done) break;\n      _ref = _i16.value;\n    }\n\n    var col = _ref;\n\n    if (col.definition.formatter == \"responsiveCollapse\") {\n      this.collapseHandleColumn = col;\n      break;\n    }\n  }\n\n  if (this.collapseHandleColumn) {\n    if (this.hiddenColumns.length) {\n      this.collapseHandleColumn.show();\n    } else {\n      this.collapseHandleColumn.hide();\n    }\n  }\n}; //define layout information\n\n\nResponsiveLayout.prototype.initializeColumn = function (column) {\n  var def = column.getDefinition();\n  column.modules.responsive = {\n    order: typeof def.responsive === \"undefined\" ? 1 : def.responsive,\n    visible: def.visible === false ? false : true\n  };\n};\n\nResponsiveLayout.prototype.initializeRow = function (row) {\n  var el;\n\n  if (row.type !== \"calc\") {\n    el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-responsive-collapse\");\n    row.modules.responsiveLayout = {\n      element: el,\n      open: this.collapseStartOpen\n    };\n\n    if (!this.collapseStartOpen) {\n      el.style.display = 'none';\n    }\n  }\n};\n\nResponsiveLayout.prototype.layoutRow = function (row) {\n  var rowEl = row.getElement();\n\n  if (row.modules.responsiveLayout) {\n    rowEl.appendChild(row.modules.responsiveLayout.element);\n    this.generateCollapsedRowContent(row);\n  }\n}; //update column visibility\n\n\nResponsiveLayout.prototype.updateColumnVisibility = function (column, visible) {\n  var index;\n\n  if (column.modules.responsive) {\n    column.modules.responsive.visible = visible;\n    this.initialize();\n  }\n};\n\nResponsiveLayout.prototype.hideColumn = function (column) {\n  var colCount = this.hiddenColumns.length;\n  column.hide(false, true);\n\n  if (this.mode === \"collapse\") {\n    this.hiddenColumns.unshift(column);\n    this.generateCollapsedContent();\n\n    if (this.collapseHandleColumn && !colCount) {\n      this.collapseHandleColumn.show();\n    }\n  }\n};\n\nResponsiveLayout.prototype.showColumn = function (column) {\n  var index;\n  column.show(false, true); //set column width to prevent calculation loops on uninitialized columns\n\n  column.setWidth(column.getWidth());\n\n  if (this.mode === \"collapse\") {\n    index = this.hiddenColumns.indexOf(column);\n\n    if (index > -1) {\n      this.hiddenColumns.splice(index, 1);\n    }\n\n    this.generateCollapsedContent();\n\n    if (this.collapseHandleColumn && !this.hiddenColumns.length) {\n      this.collapseHandleColumn.hide();\n    }\n  }\n}; //redraw columns to fit space\n\n\nResponsiveLayout.prototype.update = function () {\n  var self = this,\n      working = true;\n\n  while (working) {\n    var width = self.table.modules.layout.getMode() == \"fitColumns\" ? self.table.columnManager.getFlexBaseWidth() : self.table.columnManager.getWidth();\n    var diff = (self.table.options.headerVisible ? self.table.columnManager.element.clientWidth : self.table.element.clientWidth) - width;\n\n    if (diff < 0) {\n      //table is too wide\n      var column = self.columns[self.index];\n\n      if (column) {\n        self.hideColumn(column);\n        self.index++;\n      } else {\n        working = false;\n      }\n    } else {\n      //table has spare space\n      var _column = self.columns[self.index - 1];\n\n      if (_column) {\n        if (diff > 0) {\n          if (diff >= _column.getWidth()) {\n            self.showColumn(_column);\n            self.index--;\n          } else {\n            working = false;\n          }\n        } else {\n          working = false;\n        }\n      } else {\n        working = false;\n      }\n    }\n\n    if (!self.table.rowManager.activeRowsCount) {\n      self.table.rowManager.renderEmptyScroll();\n    }\n  }\n};\n\nResponsiveLayout.prototype.generateCollapsedContent = function () {\n  var self = this,\n      rows = this.table.rowManager.getDisplayRows();\n  rows.forEach(function (row) {\n    self.generateCollapsedRowContent(row);\n  });\n};\n\nResponsiveLayout.prototype.generateCollapsedRowContent = function (row) {\n  var el, contents;\n\n  if (row.modules.responsiveLayout) {\n    el = row.modules.responsiveLayout.element;\n\n    while (el.firstChild) {\n      el.removeChild(el.firstChild);\n    }\n\n    contents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\n    if (contents) {\n      el.appendChild(contents);\n    }\n  }\n};\n\nResponsiveLayout.prototype.generateCollapsedRowData = function (row) {\n  var self = this,\n      data = row.getData(),\n      output = [],\n      mockCellComponent;\n  this.hiddenColumns.forEach(function (column) {\n    var value = column.getFieldValue(data);\n\n    if (column.definition.title && column.field) {\n      if (column.modules.format && self.table.options.responsiveLayoutCollapseUseFormatters) {\n        mockCellComponent = {\n          value: false,\n          data: {},\n          getValue: function getValue() {\n            return value;\n          },\n          getData: function getData() {\n            return data;\n          },\n          getElement: function getElement() {\n            return document.createElement(\"div\");\n          },\n          getRow: function getRow() {\n            return row.getComponent();\n          },\n          getColumn: function getColumn() {\n            return column.getComponent();\n          }\n        };\n        output.push({\n          title: column.definition.title,\n          value: column.modules.format.formatter.call(self.table.modules.format, mockCellComponent, column.modules.format.params)\n        });\n      } else {\n        output.push({\n          title: column.definition.title,\n          value: value\n        });\n      }\n    }\n  });\n  return output;\n};\n\nResponsiveLayout.prototype.formatCollapsedData = function (data) {\n  var list = document.createElement(\"table\"),\n      listContents = \"\";\n  data.forEach(function (item) {\n    var div = document.createElement(\"div\");\n\n    if (item.value instanceof Node) {\n      div.appendChild(item.value);\n      item.value = div.innerHTML;\n    }\n\n    listContents += \"<tr><td><strong>\" + item.title + \"</strong></td><td>\" + item.value + \"</td></tr>\";\n  });\n  list.innerHTML = listContents;\n  return Object.keys(data).length ? list : \"\";\n};\n\nTabulator.prototype.registerModule(\"responsiveLayout\", ResponsiveLayout);\n\nvar SelectRow = function SelectRow(table) {\n  this.table = table; //hold Tabulator object\n\n  this.selecting = false; //flag selecting in progress\n\n  this.lastClickedRow = false; //last clicked row\n\n  this.selectPrev = []; //hold previously selected element for drag drop selection\n\n  this.selectedRows = []; //hold selected rows\n\n  this.headerCheckboxElement = null; // hold header select element\n};\n\nSelectRow.prototype.clearSelectionData = function (silent) {\n  this.selecting = false;\n  this.lastClickedRow = false;\n  this.selectPrev = [];\n  this.selectedRows = [];\n\n  if (!silent) {\n    this._rowSelectionChanged();\n  }\n};\n\nSelectRow.prototype.initializeRow = function (row) {\n  var self = this,\n      element = row.getElement(); // trigger end of row selection\n\n  var endSelect = function endSelect() {\n    setTimeout(function () {\n      self.selecting = false;\n    }, 50);\n    document.body.removeEventListener(\"mouseup\", endSelect);\n  };\n\n  row.modules.select = {\n    selected: false\n  }; //set row selection class\n\n  if (self.table.options.selectableCheck.call(this.table, row.getComponent())) {\n    element.classList.add(\"tabulator-selectable\");\n    element.classList.remove(\"tabulator-unselectable\");\n\n    if (self.table.options.selectable && self.table.options.selectable != \"highlight\") {\n      if (self.table.options.selectableRangeMode === \"click\") {\n        element.addEventListener(\"click\", function (e) {\n          if (e.shiftKey) {\n            self.table._clearSelection();\n\n            self.lastClickedRow = self.lastClickedRow || row;\n            var lastClickedRowIdx = self.table.rowManager.getDisplayRowIndex(self.lastClickedRow);\n            var rowIdx = self.table.rowManager.getDisplayRowIndex(row);\n            var fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n            var toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n            var rows = self.table.rowManager.getDisplayRows().slice(0);\n            var toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\n            if (e.ctrlKey || e.metaKey) {\n              toggledRows.forEach(function (toggledRow) {\n                if (toggledRow !== self.lastClickedRow) {\n                  if (self.table.options.selectable !== true && !self.isRowSelected(row)) {\n                    if (self.selectedRows.length < self.table.options.selectable) {\n                      self.toggleRow(toggledRow);\n                    }\n                  } else {\n                    self.toggleRow(toggledRow);\n                  }\n                }\n              });\n              self.lastClickedRow = row;\n            } else {\n              self.deselectRows(undefined, true);\n\n              if (self.table.options.selectable !== true) {\n                if (toggledRows.length > self.table.options.selectable) {\n                  toggledRows = toggledRows.slice(0, self.table.options.selectable);\n                }\n              }\n\n              self.selectRows(toggledRows);\n            }\n\n            self.table._clearSelection();\n          } else if (e.ctrlKey || e.metaKey) {\n            self.toggleRow(row);\n            self.lastClickedRow = row;\n          } else {\n            self.deselectRows(undefined, true);\n            self.selectRows(row);\n            self.lastClickedRow = row;\n          }\n        });\n      } else {\n        element.addEventListener(\"click\", function (e) {\n          if (!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()) {\n            self.table._clearSelection();\n          }\n\n          if (!self.selecting) {\n            self.toggleRow(row);\n          }\n        });\n        element.addEventListener(\"mousedown\", function (e) {\n          if (e.shiftKey) {\n            self.table._clearSelection();\n\n            self.selecting = true;\n            self.selectPrev = [];\n            document.body.addEventListener(\"mouseup\", endSelect);\n            document.body.addEventListener(\"keyup\", endSelect);\n            self.toggleRow(row);\n            return false;\n          }\n        });\n        element.addEventListener(\"mouseenter\", function (e) {\n          if (self.selecting) {\n            self.table._clearSelection();\n\n            self.toggleRow(row);\n\n            if (self.selectPrev[1] == row) {\n              self.toggleRow(self.selectPrev[0]);\n            }\n          }\n        });\n        element.addEventListener(\"mouseout\", function (e) {\n          if (self.selecting) {\n            self.table._clearSelection();\n\n            self.selectPrev.unshift(row);\n          }\n        });\n      }\n    }\n  } else {\n    element.classList.add(\"tabulator-unselectable\");\n    element.classList.remove(\"tabulator-selectable\");\n  }\n}; //toggle row selection\n\n\nSelectRow.prototype.toggleRow = function (row) {\n  if (this.table.options.selectableCheck.call(this.table, row.getComponent())) {\n    if (row.modules.select && row.modules.select.selected) {\n      this._deselectRow(row);\n    } else {\n      this._selectRow(row);\n    }\n  }\n}; //select a number of rows\n\n\nSelectRow.prototype.selectRows = function (rows) {\n  var _this83 = this;\n\n  var rowMatch;\n\n  switch (typeof rows === 'undefined' ? 'undefined' : _typeof(rows)) {\n    case \"undefined\":\n      this.table.rowManager.rows.forEach(function (row) {\n        _this83._selectRow(row, true, true);\n      });\n\n      this._rowSelectionChanged();\n\n      break;\n\n    case \"string\":\n      rowMatch = this.table.rowManager.findRow(rows);\n\n      if (rowMatch) {\n        this._selectRow(rowMatch, true, true);\n      } else {\n        this.table.rowManager.getRows(rows).forEach(function (row) {\n          _this83._selectRow(row, true, true);\n        });\n      }\n\n      this._rowSelectionChanged();\n\n      break;\n\n    default:\n      if (Array.isArray(rows)) {\n        rows.forEach(function (row) {\n          _this83._selectRow(row, true, true);\n        });\n\n        this._rowSelectionChanged();\n      } else {\n        this._selectRow(rows, false, true);\n      }\n\n      break;\n  }\n}; //select an individual row\n\n\nSelectRow.prototype._selectRow = function (rowInfo, silent, force) {\n  var index; //handle max row count\n\n  if (!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force) {\n    if (this.selectedRows.length >= this.table.options.selectable) {\n      if (this.table.options.selectableRollingSelection) {\n        this._deselectRow(this.selectedRows[0]);\n      } else {\n        return false;\n      }\n    }\n  }\n\n  var row = this.table.rowManager.findRow(rowInfo);\n\n  if (row) {\n    if (this.selectedRows.indexOf(row) == -1) {\n      if (!row.modules.select) {\n        row.modules.select = {};\n      }\n\n      row.modules.select.selected = true;\n\n      if (row.modules.select.checkboxEl) {\n        row.modules.select.checkboxEl.checked = true;\n      }\n\n      row.getElement().classList.add(\"tabulator-selected\");\n      this.selectedRows.push(row);\n\n      if (this.table.options.dataTreeSelectPropagate) {\n        this.childRowSelection(row, true);\n      }\n\n      if (!silent) {\n        this.table.options.rowSelected.call(this.table, row.getComponent());\n      }\n\n      this._rowSelectionChanged(silent);\n    }\n  } else {\n    if (!silent) {\n      console.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n    }\n  }\n};\n\nSelectRow.prototype.isRowSelected = function (row) {\n  return this.selectedRows.indexOf(row) !== -1;\n}; //deselect a number of rows\n\n\nSelectRow.prototype.deselectRows = function (rows, silent) {\n  var self = this,\n      rowCount;\n\n  if (typeof rows == \"undefined\") {\n    rowCount = self.selectedRows.length;\n\n    for (var _i17 = 0; _i17 < rowCount; _i17++) {\n      self._deselectRow(self.selectedRows[0], true);\n    }\n\n    self._rowSelectionChanged(silent);\n  } else {\n    if (Array.isArray(rows)) {\n      rows.forEach(function (row) {\n        self._deselectRow(row, true);\n      });\n\n      self._rowSelectionChanged(silent);\n    } else {\n      self._deselectRow(rows, silent);\n    }\n  }\n}; //deselect an individual row\n\n\nSelectRow.prototype._deselectRow = function (rowInfo, silent) {\n  var self = this,\n      row = self.table.rowManager.findRow(rowInfo),\n      index;\n\n  if (row) {\n    index = self.selectedRows.findIndex(function (selectedRow) {\n      return selectedRow == row;\n    });\n\n    if (index > -1) {\n      if (!row.modules.select) {\n        row.modules.select = {};\n      }\n\n      row.modules.select.selected = false;\n\n      if (row.modules.select.checkboxEl) {\n        row.modules.select.checkboxEl.checked = false;\n      }\n\n      row.getElement().classList.remove(\"tabulator-selected\");\n      self.selectedRows.splice(index, 1);\n\n      if (this.table.options.dataTreeSelectPropagate) {\n        this.childRowSelection(row, false);\n      }\n\n      if (!silent) {\n        self.table.options.rowDeselected.call(this.table, row.getComponent());\n      }\n\n      self._rowSelectionChanged(silent);\n    }\n  } else {\n    if (!silent) {\n      console.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n    }\n  }\n};\n\nSelectRow.prototype.getSelectedData = function () {\n  var data = [];\n  this.selectedRows.forEach(function (row) {\n    data.push(row.getData());\n  });\n  return data;\n};\n\nSelectRow.prototype.getSelectedRows = function () {\n  var rows = [];\n  this.selectedRows.forEach(function (row) {\n    rows.push(row.getComponent());\n  });\n  return rows;\n};\n\nSelectRow.prototype._rowSelectionChanged = function (silent) {\n  if (this.headerCheckboxElement) {\n    if (this.selectedRows.length === 0) {\n      this.headerCheckboxElement.checked = false;\n      this.headerCheckboxElement.indeterminate = false;\n    } else if (this.table.rowManager.rows.length === this.selectedRows.length) {\n      this.headerCheckboxElement.checked = true;\n      this.headerCheckboxElement.indeterminate = false;\n    } else {\n      this.headerCheckboxElement.indeterminate = true;\n      this.headerCheckboxElement.checked = false;\n    }\n  }\n\n  if (!silent) {\n    this.table.options.rowSelectionChanged.call(this.table, this.getSelectedData(), this.getSelectedRows());\n  }\n};\n\nSelectRow.prototype.registerRowSelectCheckbox = function (row, element) {\n  if (!row._row.modules.select) {\n    row._row.modules.select = {};\n  }\n\n  row._row.modules.select.checkboxEl = element;\n};\n\nSelectRow.prototype.registerHeaderSelectCheckbox = function (element) {\n  this.headerCheckboxElement = element;\n};\n\nSelectRow.prototype.childRowSelection = function (row, select) {\n  var children = this.table.modules.dataTree.getChildren(row);\n\n  if (select) {\n    for (var _iterator2 = children, _isArray2 = Array.isArray(_iterator2), _i18 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i18 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i18++];\n      } else {\n        _i18 = _iterator2.next();\n        if (_i18.done) break;\n        _ref2 = _i18.value;\n      }\n\n      var child = _ref2;\n\n      this._selectRow(child, true);\n    }\n  } else {\n    for (var _iterator3 = children, _isArray3 = Array.isArray(_iterator3), _i19 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i19 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i19++];\n      } else {\n        _i19 = _iterator3.next();\n        if (_i19.done) break;\n        _ref3 = _i19.value;\n      }\n\n      var _child = _ref3;\n\n      this._deselectRow(_child, true);\n    }\n  }\n};\n\nTabulator.prototype.registerModule(\"selectRow\", SelectRow);\n\nvar Sort = function Sort(table) {\n  this.table = table; //hold Tabulator object\n\n  this.sortList = []; //holder current sort\n\n  this.changed = false; //has the sort changed since last render\n}; //initialize column header for sorting\n\n\nSort.prototype.initializeColumn = function (column, content) {\n  var self = this,\n      sorter = false,\n      colEl,\n      arrowEl;\n\n  switch (_typeof(column.definition.sorter)) {\n    case \"string\":\n      if (self.sorters[column.definition.sorter]) {\n        sorter = self.sorters[column.definition.sorter];\n      } else {\n        console.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n      }\n\n      break;\n\n    case \"function\":\n      sorter = column.definition.sorter;\n      break;\n  }\n\n  column.modules.sort = {\n    sorter: sorter,\n    dir: \"none\",\n    params: column.definition.sorterParams || {},\n    startingDir: column.definition.headerSortStartingDir || \"asc\",\n    tristate: typeof column.definition.headerSortTristate !== \"undefined\" ? column.definition.headerSortTristate : this.table.options.headerSortTristate\n  };\n\n  if (typeof column.definition.headerSort === \"undefined\" ? this.table.options.headerSort !== false : column.definition.headerSort !== false) {\n    colEl = column.getElement();\n    colEl.classList.add(\"tabulator-sortable\");\n    arrowEl = document.createElement(\"div\");\n    arrowEl.classList.add(\"tabulator-col-sorter\");\n\n    if (_typeof(this.table.options.headerSortElement) == \"object\") {\n      arrowEl.appendChild(this.table.options.headerSortElement);\n    } else {\n      arrowEl.innerHTML = this.table.options.headerSortElement;\n    } //create sorter arrow\n\n\n    content.appendChild(arrowEl);\n    column.modules.sort.element = arrowEl; //sort on click\n\n    colEl.addEventListener(\"click\", function (e) {\n      var dir = \"\",\n          sorters = [],\n          match = false;\n\n      if (column.modules.sort) {\n        if (column.modules.sort.tristate) {\n          if (column.modules.sort.dir == \"none\") {\n            dir = column.modules.sort.startingDir;\n          } else {\n            if (column.modules.sort.dir == column.modules.sort.startingDir) {\n              dir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n            } else {\n              dir = \"none\";\n            }\n          }\n        } else {\n          switch (column.modules.sort.dir) {\n            case \"asc\":\n              dir = \"desc\";\n              break;\n\n            case \"desc\":\n              dir = \"asc\";\n              break;\n\n            default:\n              dir = column.modules.sort.startingDir;\n          }\n        }\n\n        if (self.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n          sorters = self.getSort();\n          match = sorters.findIndex(function (sorter) {\n            return sorter.field === column.getField();\n          });\n\n          if (match > -1) {\n            sorters[match].dir = dir;\n\n            if (match != sorters.length - 1) {\n              match = sorters.splice(match, 1)[0];\n\n              if (dir != \"none\") {\n                sorters.push(match);\n              }\n            }\n          } else {\n            if (dir != \"none\") {\n              sorters.push({\n                column: column,\n                dir: dir\n              });\n            }\n          } //add to existing sort\n\n\n          self.setSort(sorters);\n        } else {\n          if (dir == \"none\") {\n            self.clear();\n          } else {\n            //sort by column only\n            self.setSort(column, dir);\n          }\n        }\n\n        self.table.rowManager.sorterRefresh(!self.sortList.length);\n      }\n    });\n  }\n}; //check if the sorters have changed since last use\n\n\nSort.prototype.hasChanged = function () {\n  var changed = this.changed;\n  this.changed = false;\n  return changed;\n}; //return current sorters\n\n\nSort.prototype.getSort = function () {\n  var self = this,\n      sorters = [];\n  self.sortList.forEach(function (item) {\n    if (item.column) {\n      sorters.push({\n        column: item.column.getComponent(),\n        field: item.column.getField(),\n        dir: item.dir\n      });\n    }\n  });\n  return sorters;\n}; //change sort list and trigger sort\n\n\nSort.prototype.setSort = function (sortList, dir) {\n  var self = this,\n      newSortList = [];\n\n  if (!Array.isArray(sortList)) {\n    sortList = [{\n      column: sortList,\n      dir: dir\n    }];\n  }\n\n  sortList.forEach(function (item) {\n    var column;\n    column = self.table.columnManager.findColumn(item.column);\n\n    if (column) {\n      item.column = column;\n      newSortList.push(item);\n      self.changed = true;\n    } else {\n      console.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n    }\n  });\n  self.sortList = newSortList;\n\n  if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.sort) {\n    this.table.modules.persistence.save(\"sort\");\n  }\n}; //clear sorters\n\n\nSort.prototype.clear = function () {\n  this.setSort([]);\n}; //find appropriate sorter for column\n\n\nSort.prototype.findSorter = function (column) {\n  var row = this.table.rowManager.activeRows[0],\n      sorter = \"string\",\n      field,\n      value;\n\n  if (row) {\n    row = row.getData();\n    field = column.getField();\n\n    if (field) {\n      value = column.getFieldValue(row);\n\n      switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n        case \"undefined\":\n          sorter = \"string\";\n          break;\n\n        case \"boolean\":\n          sorter = \"boolean\";\n          break;\n\n        default:\n          if (!isNaN(value) && value !== \"\") {\n            sorter = \"number\";\n          } else {\n            if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n              sorter = \"alphanum\";\n            }\n          }\n\n          break;\n      }\n    }\n  }\n\n  return this.sorters[sorter];\n}; //work through sort list sorting data\n\n\nSort.prototype.sort = function (data) {\n  var self = this,\n      sortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n      sortListActual = [],\n      rowComponents = [],\n      lastSort;\n\n  if (self.table.options.dataSorting) {\n    self.table.options.dataSorting.call(self.table, self.getSort());\n  }\n\n  self.clearColumnHeaders();\n\n  if (!self.table.options.ajaxSorting) {\n    //build list of valid sorters and trigger column specific callbacks before sort begins\n    sortList.forEach(function (item, i) {\n      var sortObj = item.column.modules.sort;\n\n      if (item.column && sortObj) {\n        //if no sorter has been defined, take a guess\n        if (!sortObj.sorter) {\n          sortObj.sorter = self.findSorter(item.column);\n        }\n\n        item.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n        sortListActual.push(item);\n      }\n\n      self.setColumnHeader(item.column, item.dir);\n    }); //sort data\n\n    if (sortListActual.length) {\n      self._sortItems(data, sortListActual);\n    }\n  } else {\n    sortList.forEach(function (item, i) {\n      self.setColumnHeader(item.column, item.dir);\n    });\n  }\n\n  if (self.table.options.dataSorted) {\n    data.forEach(function (row) {\n      rowComponents.push(row.getComponent());\n    });\n    self.table.options.dataSorted.call(self.table, self.getSort(), rowComponents);\n  }\n}; //clear sort arrows on columns\n\n\nSort.prototype.clearColumnHeaders = function () {\n  this.table.columnManager.getRealColumns().forEach(function (column) {\n    if (column.modules.sort) {\n      column.modules.sort.dir = \"none\";\n      column.getElement().setAttribute(\"aria-sort\", \"none\");\n    }\n  });\n}; //set the column header sort direction\n\n\nSort.prototype.setColumnHeader = function (column, dir) {\n  column.modules.sort.dir = dir;\n  column.getElement().setAttribute(\"aria-sort\", dir);\n}; //sort each item in sort list\n\n\nSort.prototype._sortItems = function (data, sortList) {\n  var _this84 = this;\n\n  var sorterCount = sortList.length - 1;\n  data.sort(function (a, b) {\n    var result;\n\n    for (var i = sorterCount; i >= 0; i--) {\n      var sortItem = sortList[i];\n      result = _this84._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\n      if (result !== 0) {\n        break;\n      }\n    }\n\n    return result;\n  });\n}; //process individual rows for a sort function on active data\n\n\nSort.prototype._sortRow = function (a, b, column, dir, params) {\n  var el1Comp, el2Comp, colComp; //switch elements depending on search direction\n\n  var el1 = dir == \"asc\" ? a : b;\n  var el2 = dir == \"asc\" ? b : a;\n  a = column.getFieldValue(el1.getData());\n  b = column.getFieldValue(el2.getData());\n  a = typeof a !== \"undefined\" ? a : \"\";\n  b = typeof b !== \"undefined\" ? b : \"\";\n  el1Comp = el1.getComponent();\n  el2Comp = el2.getComponent();\n  return column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n}; //default data sorters\n\n\nSort.prototype.sorters = {\n  //sort numbers\n  number: function number(a, b, aRow, bRow, column, dir, params) {\n    var alignEmptyValues = params.alignEmptyValues;\n    var decimal = params.decimalSeparator || \".\";\n    var thousand = params.thousandSeparator || \",\";\n    var emptyAlign = 0;\n    a = parseFloat(String(a).split(thousand).join(\"\").split(decimal).join(\".\"));\n    b = parseFloat(String(b).split(thousand).join(\"\").split(decimal).join(\".\")); //handle non numeric values\n\n    if (isNaN(a)) {\n      emptyAlign = isNaN(b) ? 0 : -1;\n    } else if (isNaN(b)) {\n      emptyAlign = 1;\n    } else {\n      //compare valid values\n      return a - b;\n    } //fix empty values in position\n\n\n    if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n      emptyAlign *= -1;\n    }\n\n    return emptyAlign;\n  },\n  //sort strings\n  string: function string(a, b, aRow, bRow, column, dir, params) {\n    var alignEmptyValues = params.alignEmptyValues;\n    var emptyAlign = 0;\n    var locale; //handle empty values\n\n    if (!a) {\n      emptyAlign = !b ? 0 : -1;\n    } else if (!b) {\n      emptyAlign = 1;\n    } else {\n      //compare valid values\n      switch (_typeof(params.locale)) {\n        case \"boolean\":\n          if (params.locale) {\n            locale = this.table.modules.localize.getLocale();\n          }\n\n          break;\n\n        case \"string\":\n          locale = params.locale;\n          break;\n      }\n\n      return String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n    } //fix empty values in position\n\n\n    if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n      emptyAlign *= -1;\n    }\n\n    return emptyAlign;\n  },\n  //sort date\n  date: function date(a, b, aRow, bRow, column, dir, params) {\n    if (!params.format) {\n      params.format = \"DD/MM/YYYY\";\n    }\n\n    return this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n  },\n  //sort HH:mm formatted times\n  time: function time(a, b, aRow, bRow, column, dir, params) {\n    if (!params.format) {\n      params.format = \"HH:mm\";\n    }\n\n    return this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n  },\n  //sort datetime\n  datetime: function datetime(a, b, aRow, bRow, column, dir, params) {\n    var format = params.format || \"DD/MM/YYYY HH:mm:ss\",\n        alignEmptyValues = params.alignEmptyValues,\n        emptyAlign = 0;\n\n    if (typeof moment != \"undefined\") {\n      a = moment(a, format);\n      b = moment(b, format);\n\n      if (!a.isValid()) {\n        emptyAlign = !b.isValid() ? 0 : -1;\n      } else if (!b.isValid()) {\n        emptyAlign = 1;\n      } else {\n        //compare valid values\n        return a - b;\n      } //fix empty values in position\n\n\n      if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n        emptyAlign *= -1;\n      }\n\n      return emptyAlign;\n    } else {\n      console.error(\"Sort Error - 'datetime' sorter is dependant on moment.js\");\n    }\n  },\n  //sort booleans\n  boolean: function boolean(a, b, aRow, bRow, column, dir, params) {\n    var el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n    var el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n    return el1 - el2;\n  },\n  //sort if element contains any data\n  array: function array(a, b, aRow, bRow, column, dir, params) {\n    var el1 = 0;\n    var el2 = 0;\n    var type = params.type || \"length\";\n    var alignEmptyValues = params.alignEmptyValues;\n    var emptyAlign = 0;\n\n    function calc(value) {\n      switch (type) {\n        case \"length\":\n          return value.length;\n          break;\n\n        case \"sum\":\n          return value.reduce(function (c, d) {\n            return c + d;\n          });\n          break;\n\n        case \"max\":\n          return Math.max.apply(null, value);\n          break;\n\n        case \"min\":\n          return Math.min.apply(null, value);\n          break;\n\n        case \"avg\":\n          return value.reduce(function (c, d) {\n            return c + d;\n          }) / value.length;\n          break;\n      }\n    } //handle non array values\n\n\n    if (!Array.isArray(a)) {\n      alignEmptyValues = !Array.isArray(b) ? 0 : -1;\n    } else if (!Array.isArray(b)) {\n      alignEmptyValues = 1;\n    } else {\n      //compare valid values\n      el1 = a ? calc(a) : 0;\n      el2 = b ? calc(b) : 0;\n      return el1 - el2;\n    } //fix empty values in position\n\n\n    if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n      emptyAlign *= -1;\n    }\n\n    return emptyAlign;\n  },\n  //sort if element contains any data\n  exists: function exists(a, b, aRow, bRow, column, dir, params) {\n    var el1 = typeof a == \"undefined\" ? 0 : 1;\n    var el2 = typeof b == \"undefined\" ? 0 : 1;\n    return el1 - el2;\n  },\n  //sort alpha numeric strings\n  alphanum: function alphanum(as, bs, aRow, bRow, column, dir, params) {\n    var a,\n        b,\n        a1,\n        b1,\n        i = 0,\n        L,\n        rx = /(\\d+)|(\\D+)/g,\n        rd = /\\d/;\n    var alignEmptyValues = params.alignEmptyValues;\n    var emptyAlign = 0; //handle empty values\n\n    if (!as && as !== 0) {\n      emptyAlign = !bs && bs !== 0 ? 0 : -1;\n    } else if (!bs && bs !== 0) {\n      emptyAlign = 1;\n    } else {\n      if (isFinite(as) && isFinite(bs)) return as - bs;\n      a = String(as).toLowerCase();\n      b = String(bs).toLowerCase();\n      if (a === b) return 0;\n      if (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n      a = a.match(rx);\n      b = b.match(rx);\n      L = a.length > b.length ? b.length : a.length;\n\n      while (i < L) {\n        a1 = a[i];\n        b1 = b[i++];\n\n        if (a1 !== b1) {\n          if (isFinite(a1) && isFinite(b1)) {\n            if (a1.charAt(0) === \"0\") a1 = \".\" + a1;\n            if (b1.charAt(0) === \"0\") b1 = \".\" + b1;\n            return a1 - b1;\n          } else return a1 > b1 ? 1 : -1;\n        }\n      }\n\n      return a.length > b.length;\n    } //fix empty values in position\n\n\n    if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n      emptyAlign *= -1;\n    }\n\n    return emptyAlign;\n  }\n};\nTabulator.prototype.registerModule(\"sort\", Sort);\n\nvar Validate = function Validate(table) {\n  this.table = table;\n  this.invalidCells = [];\n}; //validate\n\n\nValidate.prototype.initializeColumn = function (column) {\n  var self = this,\n      config = [],\n      validator;\n\n  if (column.definition.validator) {\n    if (Array.isArray(column.definition.validator)) {\n      column.definition.validator.forEach(function (item) {\n        validator = self._extractValidator(item);\n\n        if (validator) {\n          config.push(validator);\n        }\n      });\n    } else {\n      validator = this._extractValidator(column.definition.validator);\n\n      if (validator) {\n        config.push(validator);\n      }\n    }\n\n    column.modules.validate = config.length ? config : false;\n  }\n};\n\nValidate.prototype._extractValidator = function (value) {\n  var type, params, pos;\n\n  switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n    case \"string\":\n      pos = value.indexOf(':');\n\n      if (pos > -1) {\n        type = value.substring(0, pos);\n        params = value.substring(pos + 1);\n      } else {\n        type = value;\n      }\n\n      return this._buildValidator(type, params);\n      break;\n\n    case \"function\":\n      return this._buildValidator(value);\n      break;\n\n    case \"object\":\n      return this._buildValidator(value.type, value.parameters);\n      break;\n  }\n};\n\nValidate.prototype._buildValidator = function (type, params) {\n  var func = typeof type == \"function\" ? type : this.validators[type];\n\n  if (!func) {\n    console.warn(\"Validator Setup Error - No matching validator found:\", type);\n    return false;\n  } else {\n    return {\n      type: typeof type == \"function\" ? \"function\" : type,\n      func: func,\n      params: params\n    };\n  }\n};\n\nValidate.prototype.validate = function (validators, cell, value) {\n  var self = this,\n      valid = [],\n      invalidIndex = this.invalidCells.indexOf(cell);\n\n  if (validators) {\n    validators.forEach(function (item) {\n      if (!item.func.call(self, cell.getComponent(), value, item.params)) {\n        valid.push({\n          type: item.type,\n          parameters: item.params\n        });\n      }\n    });\n  }\n\n  valid = valid.length ? valid : true;\n\n  if (!cell.modules.validate) {\n    cell.modules.validate = {};\n  }\n\n  if (valid === true) {\n    cell.modules.validate.invalid = false;\n    cell.getElement().classList.remove(\"tabulator-validation-fail\");\n\n    if (invalidIndex > -1) {\n      this.invalidCells.splice(invalidIndex, 1);\n    }\n  } else {\n    cell.modules.validate.invalid = true;\n\n    if (this.table.options.validationMode !== \"manual\") {\n      cell.getElement().classList.add(\"tabulator-validation-fail\");\n    }\n\n    if (invalidIndex == -1) {\n      this.invalidCells.push(cell);\n    }\n  }\n\n  return valid;\n};\n\nValidate.prototype.getInvalidCells = function () {\n  var output = [];\n  this.invalidCells.forEach(function (cell) {\n    output.push(cell.getComponent());\n  });\n  return output;\n};\n\nValidate.prototype.clearValidation = function (cell) {\n  var invalidIndex;\n\n  if (cell.modules.validate && cell.modules.validate.invalid) {\n    cell.getElement().classList.remove(\"tabulator-validation-fail\");\n    cell.modules.validate.invalid = false;\n    invalidIndex = this.invalidCells.indexOf(cell);\n\n    if (invalidIndex > -1) {\n      this.invalidCells.splice(invalidIndex, 1);\n    }\n  }\n};\n\nValidate.prototype.validators = {\n  //is integer\n  integer: function integer(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    value = Number(value);\n    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n  },\n  //is float\n  float: function float(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    value = Number(value);\n    return typeof value === 'number' && isFinite(value) && value % 1 !== 0;\n  },\n  //must be a number\n  numeric: function numeric(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    return !isNaN(value);\n  },\n  //must be a string\n  string: function string(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    return isNaN(value);\n  },\n  //maximum value\n  max: function max(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    return parseFloat(value) <= parameters;\n  },\n  //minimum value\n  min: function min(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    return parseFloat(value) >= parameters;\n  },\n  //starts with  value\n  starts: function starts(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    return String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n  },\n  //ends with  value\n  ends: function ends(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    return String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n  },\n  //minimum string length\n  minLength: function minLength(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    return String(value).length >= parameters;\n  },\n  //maximum string length\n  maxLength: function maxLength(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    return String(value).length <= parameters;\n  },\n  //in provided value list\n  in: function _in(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    if (typeof parameters == \"string\") {\n      parameters = parameters.split(\"|\");\n    }\n\n    return value === \"\" || parameters.indexOf(value) > -1;\n  },\n  //must match provided regex\n  regex: function regex(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    var reg = new RegExp(parameters);\n    return reg.test(value);\n  },\n  //value must be unique in this column\n  unique: function unique(cell, value, parameters) {\n    if (value === \"\" || value === null || typeof value === \"undefined\") {\n      return true;\n    }\n\n    var unique = true;\n    var cellData = cell.getData();\n\n    var column = cell.getColumn()._getSelf();\n\n    this.table.rowManager.rows.forEach(function (row) {\n      var data = row.getData();\n\n      if (data !== cellData) {\n        if (value == column.getFieldValue(data)) {\n          unique = false;\n        }\n      }\n    });\n    return unique;\n  },\n  //must have a value\n  required: function required(cell, value, parameters) {\n    return value !== \"\" && value !== null && typeof value !== \"undefined\";\n  }\n};\nTabulator.prototype.registerModule(\"validate\", Validate);\nexport default Tabulator;","map":{"version":3,"sources":["/Users/jtamedrano/Projects/BasicCRM-React/basic_crm/node_modules/react-tabulator/node_modules/tabulator-tables/dist/js/tabulator.es2015.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","Array","findIndex","Object","defineProperty","value","predicate","TypeError","o","len","length","thisArg","arguments","k","kValue","call","find","undefined","String","includes","search","start","RegExp","indexOf","searchElement","fromIndex","n","Math","max","abs","sameValueZero","x","y","isNaN","assign","target","varArgs","to","index","nextSource","nextKey","hasOwnProperty","writable","configurable","ColumnManager","table","blockHozScrollEvent","headersElement","createHeadersElement","element","createHeaderElement","rowManager","columns","columnsByIndex","columnsByField","scrollLeft","insertBefore","firstChild","el","document","createElement","classList","add","options","headerVisible","initialize","self","setRowManager","manager","getElement","getHeadersElement","scrollHorizontal","left","hozAdjust","scrollWidth","clientWidth","style","marginLeft","modExists","modules","frozenColumns","generateColumnsFromRowData","data","cols","definitions","autoColumnsDefinitions","row","sorter","key","col","field","title","isArray","match","push","forEach","def","setColumns","removeChild","reset","i","_addColumn","_reIndexColumns","responsiveLayout","virtualDomHoz","vdomHoz","reinitialize","redraw","definition","before","nextToColumn","column","Column","colEl","findColumnIndex","parentIndex","getTopColumn","nextEl","splice","parentNode","nextSibling","unshift","appendChild","columnRendered","registerColumnField","registerColumnPosition","reRegisterPosition","_verticalAlignHeaders","minHeight","height","clearVerticalAlign","getHeight","verticalAlign","columnHeaderVertAlign","adjustTableSize","findColumn","subject","ColumnComponent","_getSelf","HTMLElement","getColumnByField","getColumnsByFieldRoot","root","_this","matches","keys","fieldRoot","split","getColumnByIndex","getFirstVisibileColumn","visible","getColumns","getRealColumns","traverse","callback","getDefinitions","active","output","getDefinition","getDefinitionTree","getComponents","structured","getComponent","getWidth","width","moveColumn","from","after","moveColumnActual","columnCalcs","recalc","activeRows","parent","isGroup","_moveColumnInArray","columnMoved","columnManager","persistence","config","save","updateRows","_this2","toIndex","rows","dataTree","concat","getTreeChildren","cells","cell","scrollToColumn","position","ifVisible","_this3","offset","adjust","Promise","resolve","reject","scrollToColumnPosition","scrollToColumnIfVisible","offsetLeft","offsetWidth","min","console","warn","generateCells","generateCell","getFlexBaseWidth","totalWidth","fixedWidth","scrollHeight","clientHeight","minWidth","colWidth","columnMinWidth","parseInt","addColumn","_this4","layout","getMode","reinitializeWidth","deregisterColumn","getField","force","Tabulator","helpers","elVisible","resetScroll","update","footerManager","_column","type","getCells","getVisibility","isVisible","show","hide","toggle","delete","getSubColumns","getParentColumn","scrollTo","getTable","headerFilterFocus","filter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","setHeaderFilterValue","move","toColumn","getNextColumn","nextCol","nextColumn","getPrevColumn","prevCol","prevColumn","updateDefinition","updates","setWidth","result","validate","contentElement","titleHolderElement","titleElement","groupElement","createGroupElement","tooltip","hozAlign","vertAlign","fieldStructure","getFieldValue","setFieldValue","titleFormatterRendered","setField","invalidOptionWarnings","checkDefinition","cellEvents","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","widthStyled","minWidthStyled","widthFixed","component","_mapDepricatedFunctionality","newCol","attachColumn","checkColumnVisibility","rowHandle","movableRows","moveRow","setHandle","_buildHeader","bindModuleColumns","setAttribute","_this5","defaultOptionList","nestedFieldSeparator","_getNestedData","_getFlatData","_setNestedData","_setFlatData","hideInHtml","htmlOutput","align","downloadTitle","titleDownload","setTooltip","headerTooltip","tooltipsHeader","localize","bind","headerVertical","_bindEvents","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","resizableColumns","resizeColumns","initializeColumn","headerFilter","headerFilterPlaceholder","setHeaderFilterColumnPlaceholder","movableColumns","topCalc","bottomCalc","addEventListener","e","dblTap","tapHold","tap","headerClick","headerDblClick","headerContext","headerTap","passive","headerDblTap","clearTimeout","setTimeout","headerTapHold","cellEdited","cellEditing","cellEditCancelled","_this6","sortable","sort","headerContextMenu","headerClickMenu","headerMenu","menu","initializeColumnHeader","format","editor","edit","validator","mutator","accessor","cssClass","classeNames","className","setMinWidth","tooltips","cellHozAlign","cellVertAlign","textAlign","headerHozAlign","_buildColumnHeaderTitle","editableTitle","stopPropagation","focus","columnTitleChanged","text","_formatColumnHeaderTitle","_this7","formatter","contents","params","mockCell","onRendered","titleFormatter","getFormatter","getValue","titleFormatterParams","Node","innerHTML","_this8","dataObj","structure","_i","_i2","alignment","parentHeight","getGroupElement","offsetHeight","paddingTop","rowNumColumn","getFirstColumn","getLastColumn","updateBranches","colDefs","columnVisibilityChanged","silent","responsiveToggle","display","updateColumnVisibility","matchChildWidths","childWidth","maxWidth","setWidthActual","floor","checkCellHeights","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","_this9","currentCell","cancelEdit","cellCount","_i3","invalid","Cell","_nextVisibleColumn","_prevVisibleColumn","hideHeaderFilterElements","fitToData","showHeaderFilterElements","clearWidth","_this10","then","catch","err","deleteCell","RowManager","createHolderElement","tableElement","createTableElement","heightFixer","firstRender","renderMode","fixedHeight","activeRowsCount","displayRows","displayRowsCount","scrollTop","vDomRowHeight","vDomTop","vDomBottom","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","redrawBlock","redrawBlockRestoreConfig","redrawBlockRederInPosition","getTableElement","getRowPosition","setColumnManager","setRenderMode","groupBy","groupRows","scrollHeaders","top","dir","scrollVertical","ajaxProgressiveLoad","ajax","nextPage","findRow","Row","RowComponent","_match","getRowFromDataObject","getRowFromPosition","scrollToRow","_this11","rowIndex","getDisplayRows","rowEl","rowTop","scrollToRowPosition","scrollToRowIfVisible","elOffset","_virtualRenderFill","offsetTop","setData","renderInPosition","columnsChanged","_this12","pagination","_setDataActual","reRenderInPosition","autoColumns","dataLoading","_wipeElements","history","clear","selectRow","clearSelectionData","reactiveData","watchData","refreshActiveData","dataLoaded","error","wipe","deleteRow","blockRedraw","allIndex","activeIndex","setActiveRows","displayRowIterator","displayIndex","regenerateRowNumbers","rowDeleted","dataChanged","getData","updateGroupRows","addRow","pos","addRowActual","action","addRows","_this13","findAddRowPos","reverse","item","addRowPos","dispRows","paginationAddRow","page","getPageSize","assignRowToGroup","getGroup","_moveRowInArray","rowAdded","posFrom","posTo","moveRowActual","rowMoved","_this14","Group","prevDisplayRow","toGroup","fromGroup","removeRow","insertRow","end","_i4","styleRow","clearData","getRowIndex","findRowIndex","getDisplayRowIndex","nextDisplayRow","rowOnly","nextRow","prevRow","list","transform","getRows","getDataCount","_genRemoteRequest","_this15","ajaxSorting","sorters","getSort","paginationDataSentNames","ajaxFiltering","filters","getFilters","setParams","sendRequest","filterRefresh","setPage","loadData","sorterRefresh","loadOrignalData","progressiveLoad","stage","skipStage","cascadeOrder","selectable","selectablePersistence","deselectRows","slice","resetDisplayRows","frozenRows","isFrozen","getDisplayIndex","setDisplayIndex","getNextDisplayIndex","setDisplayRows","setMaxRows","dataChange","renderTable","layoutColumnsOnNewData","_this16","getCell","_generateContents","getVisibleRows","viewable","topEdge","bottomEdge","topFound","topRow","bottomRow","selectedRows","getRenderMode","topOffset","diff","virtualDom","renderStarted","_simpleRender","renderEmptyScroll","placeholder","renderComplete","_clearVirtualDom","checkClassicModeGroupHeaderWidth","onlyGroupHeaders","paddingBottom","visibility","remove","forceMove","holder","topPad","rowsHeight","topPadHeight","heightOccupied","ceil","rowHeight","normalizeHeight","vDomScrollHeight","countGroups","topDiff","bottomDiff","margin","_addTopRow","_removeBottomRow","_removeTopRow","_addBottomRow","topRowHeight","initialized","_quickNormalizeRowHeight","bottomRowHeight","initialHeight","otherHeight","external","maxHeight","virtualDomBuffer","resizeTable","autoResize","restoreRedraw","tableWidth","browser","event","createEvent","initEvent","dispatchEvent","Event","VDomHoz","holderEl","leftCol","rightCol","vDomScrollPosLeft","vDomScrollPosRight","vDomPadLeft","vDomPadRight","fitDataColAvg","window","compatabilityCheck","frozen","ok","rtl","_this17","scroll","deinitialize","change","collsWidth","colEnd","group","getGroups","fitDataLayoutOverride","_i5","_this18","old","colPos","leftPos","rightPos","paddingLeft","paddingRight","reinitChanged","renitializeRows","_this19","_this20","reinitializeRow","addColRight","removeColLeft","addColLeft","removeColRight","colPositionAdjust","_i6","oldWidth","widthDiff","cellRendered","prepend","initializeRow","_i7","_row","getIndex","getPosition","pageTo","setPageToRow","moveToRow","updateData","select","selectRows","deselect","toggleSelect","toggleRow","isSelected","isRowSelected","freeze","freezeRow","unfreeze","unfreezeRow","treeCollapse","collapseRow","treeExpand","expandRow","treeToggle","getTreeParent","addTreeChild","addTreeChildRow","reformat","getNextRow","getPrevRow","heightStyled","manualHeight","outerHeight","generateElement","detachElement","rowContextMenu","rowClickMenu","rowClick","rowDblClick","rowContext","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowTap","rowDblTap","rowTapHold","_this21","deleteCells","layoutRow","rowFormatter","resizableRows","resizeRows","reinitializeHeight","children","child","setHeight","clearHeight","transformRow","watchRow","updatedData","_this22","tempData","newRowData","JSON","parse","block","attrname","unblock","setValueProcessData","groupUpdateOnCellEdit","reassignRowToGroup","redrawNeeded","rowUpdated","getCellIndex","findCell","findNextEditableCell","nextCell","allowEdit","check","findPrevEditableCell","prevCell","toRow","_this23","deleteActual","detatchModules","rowDelete","recalcRowGroup","_deselectRow","detachRow","_i8","CellComponent","_cell","getOldValue","getInitialValue","initialValue","getRow","getColumn","setValue","mutate","restoreOldValue","setValueActual","restoreInitialValue","isEdited","edited","clearEdited","isValid","clearValidation","nav","checkHeight","oldValue","loaded","build","_configureCell","vertAligns","bottom","middle","hozAligns","right","center","alignItems","justifyContent","classNames","tooltipGenerationMode","_generateTooltip","_bindClickEvents","_bindTouchEvents","_bindMouseEvents","bindEditor","initializeCell","preventDefault","selection","range","body","createTextRange","moveToElementText","getSelection","createRange","selectNode","removeAllRanges","addRange","val","formatValue","layoutElement","changed","newValue","transformCell","contextMenu","clickMenu","editCell","editing","getCurrentCell","valid","clearComponentHistory","calcs","next","prev","up","down","FooterManager","links","_initialize","footerElement","querySelector","append","activate","deactivate","link","footerRedraw","browserSlow","browserMobile","initializeElement","initializeOptions","_create","comms","register","defaultOptions","columnVertAlign","initialSort","initialFilter","initialHeaderFilter","columnHeaderSortMulti","sortOrderReverse","headerSort","headerSortTristate","headerSortElement","textDirection","keybindings","tabEndNewRow","clipboard","clipboardCopyStyled","clipboardCopyConfig","clipboardCopyFormatter","clipboardCopyRowRange","clipboardPasteParser","clipboardPasteAction","clipboardCopied","clipboardPasted","clipboardPasteError","downloadDataFormatter","downloadReady","blob","downloadComplete","downloadConfig","downloadRowRange","dataTreeFilter","dataTreeSort","dataTreeElementColumn","dataTreeBranchElement","dataTreeChildIndent","dataTreeChildField","dataTreeCollapseElement","dataTreeExpandElement","dataTreeStartExpanded","dataTreeRowExpanded","dataTreeRowCollapsed","dataTreeChildColumnCalcs","dataTreeSelectPropagate","printAsHtml","printFormatter","printHeader","printFooter","printCopyStyle","printStyled","printVisibleRows","printRowRange","printConfig","selectableRangeMode","selectableRollingSelection","selectableCheck","headerFilterLiveFilterDelay","locale","langs","persistentLayout","persistentSort","persistentFilter","persistenceID","persistenceMode","persistenceReaderFunc","persistenceWriterFunc","responsiveLayoutCollapseStartOpen","responsiveLayoutCollapseUseFormatters","responsiveLayoutCollapseFormatter","paginationSize","paginationInitialPage","paginationButtonCount","paginationSizeSelector","paginationElement","paginationDataSent","paginationDataReceived","ajaxURL","ajaxURLGenerator","ajaxParams","ajaxConfig","ajaxContentType","ajaxRequestFunc","ajaxLoader","ajaxLoaderLoading","ajaxLoaderError","ajaxProgressiveLoadDelay","ajaxProgressiveLoadScrollMargin","groupStartOpen","groupValues","groupHeader","groupHeaderPrint","groupHeaderClipboard","groupHeaderHtmlOutput","groupHeaderDownload","htmlOutputConfig","movableRowsConnectedTables","movableRowsConnectedElements","movableRowsSender","movableRowsReceiver","movableRowsSendingStart","movableRowsSent","movableRowsSentFailed","movableRowsSendingStop","movableRowsReceivingStart","movableRowsReceived","movableRowsReceivedFailed","movableRowsReceivingStop","movableRowsElementDrop","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","tableBuilding","tableBuilt","rowSelectionChanged","rowSelected","rowDeselected","rowResized","columnResized","htmlImporting","htmlImported","dataEdited","ajaxRequesting","ajaxResponse","ajaxError","dataFiltering","dataFiltered","dataSorting","dataSorted","groupToggleElement","groupClosedShowCalcs","dataGrouping","dataGrouped","groupVisibilityChanged","groupClick","groupDblClick","groupContext","groupContextMenu","groupClickMenu","groupTap","groupDblTap","groupTapHold","pageLoaded","localized","validationMode","validationFailed","historyUndo","historyRedo","rtlCheck","getComputedStyle","direction","clipboardCopyHeader","columnHeaders","_clearSelection","empty","_clearObjectPointers","bindModules","tagName","htmlTableImport","parseTable","_buildElement","_loadInitialData","_this24","mod","_detectBrowser","setHeaderFilterPlaceholder","installLang","setLocale","span","load","setSort","setFilter","print","destroy","deregister","unwatchData","clearBindings","ua","navigator","userAgent","vendor","opera","test","substr","setDataFromLocalFile","extensions","_this25","input","accept","file","files","reader","FileReader","readAsText","onload","onerror","click","blockActiveRequest","_setData","inPosition","setConfig","setUrl","getUrl","searchRows","searchData","getHtml","export","printFullscreen","getAjaxUrl","replaceData","_this26","responses","addData","_this27","updateOrAddData","_this28","newRows","_this29","count","successCount","foundRows","doneCheck","a","b","_this30","updateOrAddRow","_this31","updateRow","_this32","_this33","fromRow","copyToClipboard","selector","copy","getColumnDefinitions","getColumnLayout","parseColumns","setColumnLayout","mergeDefinition","showColumn","hideColumn","toggleColumn","_this34","deleteColumn","_this35","updateColumnDefinition","_this36","fromColumn","_this37","getLocale","getLang","sortList","getSorters","clearSort","addFilter","all","getHeaderFilters","removeFilter","clearFilter","clearHeaderFilter","deselectRow","toggleSelectRow","getSelectedRows","getSelectedData","getInvalidCells","clearCellValidation","_this38","setMaxPage","_this39","setPageSize","size","previousPage","getPage","getPageMax","setGroupBy","groups","setGroupValues","setGroupStartOpen","values","setGroupHeader","getGroupedData","getEditedCells","clearCellEdited","_this40","getCalcResults","getResults","recalcAll","navigatePrev","navigateNext","navigateLeft","navigateRight","navigateUp","navigateDown","undo","redo","getHistoryUndoSize","getHistoryRedoSize","download","filename","downloadToTab","tableComms","module","receive","moduleBindings","extendModule","name","property","source","registerModule","plugin","required","box","getBoundingClientRect","pageYOffset","documentElement","clientTop","pageXOffset","clientLeft","deepClone","clone","Date","tables","lookupTable","query","results","querySelectorAll","matchElement","findTable","Layout","mode","modes","fitData","fitDataFill","fitDataTable","fitDataStretch","_this41","colsWidth","gap","lastCol","responsive","fitColumns","flexWidth","flexGrowUnits","flexColWidth","flexColumns","fixedShrinkColumns","flexShrinkUnits","overflowWidth","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","nextColWidth","changeUnits","undersizeCols","calcGrow","widthGrow","calcShrink","widthShrink","Localize","lang","bindings","langList","default","headerFilters","_setLangProp","desiredLocale","traverseLang","trans","path","prop","language","toLowerCase","prefix","_executeBindings","getText","pathArray","_getLangElement","level","rootPath","_loop","binding","Comms","getConnections","selectors","connections","connection","con","send","commsReceived","Accessor","allowedTypes","charAt","toUpperCase","lookupAccessor","accessors","rowComponent","colCompnent","Ajax","url","urlGenerator","loaderElement","createLoaderElement","msgElement","createMsgElement","loadingElement","errorElement","loaderPromise","loading","requestOrder","template","trim","content","defaultLoaderPromise","defaultURLGenerator","initializeProgressive","getParams","_loadDefaultConfig","method","defaultConfig","_loadDataProgressive","_loadDataStandard","_this42","generateParamsList","serializeParams","encoded","encodeURIComponent","join","_this43","requestNo","esc","showLoader","hideLoader","showError","shouldLoad","contentType","contentTypeFormatters","headers","Accept","location","origin","credentials","fetch","response","json","status","statusText","stringify","form","FormData","CalcComponent","ColumnCalcs","topCalcs","botCalcs","genColumn","topElement","botElement","botRow","topInitialized","botInitialized","topCalcParams","botCalcParams","bottomCalcParams","calculations","initializeTopRow","botCalc","initializeBottomRow","removeCalcs","rowsToData","generateRow","recalcGroup","getRowGroup","_this44","getChildGroups","rowData","generateRowData","generateTopRow","generateBottomRow","_this45","open","getFilteredTreeChildren","disable","enable","paramKey","hasTopCalcs","hasBottomCalcs","getKey","getGroupResults","groupObj","subGroups","getSubGroups","subGroupResults","subgroup","avg","calcParams","precision","reduce","sum","Number","toFixed","parseFloat","toString","Clipboard","pasteParser","pasteAction","customSelection","rowRange","blocked","_this46","plain","html","generateExportList","genereateHTMLTable","generatePlainContent","clipboardData","originalEvent","paste","setPasteParser","setPasteAction","originalSelectionText","internal","sel","textRange","selectNodeContents","execCommand","pasteActions","parser","pasteParsers","checkPaseOrigin","getPasteData","mutateData","success","headerFindSuccess","columnMap","shift","replace","insert","DataTree","indent","collapseEl","expandEl","branchEl","elementField","startOpen","dummyEl","firstCol","tabIndex","childArray","controlEl","generateControlElement","cloneNode","marginRight","getPropertyValue","_this47","oldControl","replaceChild","_this48","getChildren","_this49","generateChildren","subChildren","sub","_this50","childData","childRow","childIndex","findChildIndex","_this51","recurse","_this52","checkForRestyle","getChildField","Download","interceptCallback","downloadFunc","buildLink","mime","triggerDownload","downloaders","_group","getRowCount","newTab","Blob","URL","createObjectURL","msSaveOrOpenBlob","intercept","csv","setFileContents","delimiter","fileContents","depth","bom","pdf","header","autoTableParams","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDFParams","jsPDF","orientation","unit","parseRow","styles","colSpan","rowSpan","doc","autoTable","addPageContent","head","documentProcessing","xlsx","sheetName","workbook","XLSX","utils","book_new","SheetNames","Sheets","generateSheet","merges","worksheet","s","c","r","j","sheet_add_aoa","encode_range","sheetOnly","sheets","sheet","s2ab","buf","ArrayBuffer","view","Uint8Array","charCodeAt","write","bookType","bookSST","Edit","mouseClick","recursionBlock","invalidEdit","editedCells","editable","editorParams","editors","clearEditor","cancel","cellEl","variableHeight","contains","preventScroll","button","focusCellNoEvent","forceEdit","focusScrollAdjust","leftEdge","rightEdge","leftMargin","rightMargin","rendered","cellEditor","blur","maskInput","mask","maskLetter","maskLetterChar","maskNumber","maskNumberChar","maskWildcard","maskWildcardChar","fillSymbols","symbol","char","keyCode","maskAutoFill","editIndex","cellValue","padding","boxSizing","elementAttributes","getAttribute","onChange","textarea","vertNav","verticalNavigation","whiteSpace","resize","heightNow","selectionStart","stopImmediatePropagation","number","step","blurFunc","removeEventListener","_this53","initialDisplayValue","defaultValue","listEl","multiselect","dataItems","currentItem","displayItems","currentItems","blurable","blockListShow","getUniqueColumnValues","sortValuesList","parseItems","inputValues","curentValues","dataList","displayList","processComplexListItem","label","itemParams","setItem","fillList","listItemFormatter","toggleItem","chooseItem","setCurrentItem","fillInput","unsetItem","hideList","chooseItems","unsetItems","_i9","cancelItem","showList","removeScrollListener","cursor","readOnly","autocomplete","_this54","allItems","uniqueColumnValues","genUniqueColumnValues","filterList","term","intialLoad","items","searchEl","searchFunc","addNotice","searchingPlaceholder","fillListIfNotEmpty","showListOnEmpty","notice","clearList","itemList","emptyPlaceholder","current","freetext","allowEmpty","showInputValue","star","maxStars","getElementsByTagName","stars","starsHolder","createElementNS","starChange","buildStar","starHolder","nextStar","changeValue","overflow","textOverflow","progress","percent","handle","bar","mouseDrag","mouseDragWidth","updateValue","calcVal","round","backgroundColor","screenX","tickCross","tristate","indetermValue","indeterminateValue","indetermState","marginTop","indeterminate","checked","ExportRow","ExportColumn","Export","cloneTableStyle","colVisProp","headersToExportRows","generateColumnGroupHeaders","bodyToExportRows","rowLookup","genereateTable","genereateTableElement","_this55","_this56","columnGroups","colData","processColumnGroup","_this57","maxDepth","groupData","subGroup","subGroupData","columnVisCheck","headerDepth","exportRows","parseColumnGroup","_i10","_i11","_this58","rowGroups","exportCols","_this59","headerEl","bodyEl","lookupTableStyles","setup","treeElementField","mapElementStyles","genereateHeaderElement","genereateGroupElement","genereateCalcElement","genereateRowElement","evenRow","oddRow","calcRow","firstRow","firstGroup","getElementsByClassName","styleCells","firstCell","lastCell","_this60","generator","_this61","cellWrapper","formatCells","formatExportValue","renderedCallback","props","lookup","fromStyle","Filter","headerFilterColumns","prevHeaderFilterChangeCheck","filterType","tagType","attrType","filterChangeCheck","filterFunc","prevSuccess","emptyFunc","headerFilterFunc","headerFilterFuncParams","fieldVal","colVal","func","generateHeaderFilterElement","_this62","filterElement","editorElement","typingTimer","searchTrigger","headerElement","headerFilterEmptyCheck","headerFilterParams","hasAttribute","headerFilterLiveFilter","hasChanged","findFilter","findSubFilters","filtersToArray","_this63","searchType","filterRecurse","rowList","activeRowComponents","filterRow","subFilter","_","filterVal","rowVal","filterParams","regex","like","keywords","separator","keyword","matchAll","starts","startsWith","ends","endsWith","_in","Format","lookupFormatter","formatterPrint","formatterClipboard","formatterHtmlOutput","crossElement","formatters","plaintext","sanitizeHTML","entityMap","emptyToSpace","formatterParams","money","floatVal","integer","decimal","rgx","decimalSym","thousandSym","thousand","symbolAfter","urlPrefix","labelField","urlField","image","truthy","allowTruthy","tick","tickElement","cross","datetime","inputFormat","outputFormat","invalidPlaceholder","newDatetime","moment","timezone","tz","datetimediff","suffix","humanize","date","duration","starActive","starInactive","traffic","colors","color","percentValue","legendAlign","legend","legendColor","barEl","legendEl","buttonTick","buttonCross","rownum","responsiveCollapse","toggleList","isOpen","rowSelection","_this64","checkbox","registerRowSelectCheckbox","registerHeaderSelectCheckbox","FrozenColumns","leftColumns","rightColumns","rightPadding","initializationMode","scrollEndTimer","edge","frozenCheck","_this65","calcMargins","layoutColumnPosition","layoutCalcRows","_calcSpace","allCells","_this66","leftParents","parentEl","getColGroupParentElement","_this67","_i12","FrozenRows","styleRows","GroupComponent","getParentGroup","toggleVisibility","groupManager","oldGroup","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","groupList","elementContents","arrowElement","createElements","addBindings","createValueGroups","arrow","initializeGroupHeader","_this68","allowedValues","_createGroup","toggleElement","initializeGroup","groupID","groupKey","headerGenerator","conformRowData","generateGroupHeaderContents","scrollHeader","removeGroup","getHeadersAndRows","noCalc","_visSet","compoment","getPath","addBindingsd","childNodes","GroupRows","langValue","lookupFunc","generateGroups","groupComponents","_this69","pullGroupListData","groupListData","rowCount","headerContent","oldGroups","createGroup","assignRowToExistingGroup","newGroupNeeded","oldRowGroup","oldGroupPath","newGroupPath","getExpectedPath","samePath","every","groupPath","groupId","oldRowCount","History","undoers","redoers","cellEdit","rowAdd","newRow","_rebindRow","rowMove","oldRow","HtmlTableImport","fieldIndex","hasIndex","newTable","_extractOptions","_extractHeaders","_generateBlankHeaders","newElement","attributes","optionsArr","optionsList","attrib","_attribValue","_findCol","exists","textContent","Keybindings","watchKeys","pressedKeys","keyupBinding","keydownBinding","mergedBindings","_key","mapBindings","bindEvents","_this70","_loop2","actions","mapBinding","symbolsList","ctrl","meta","symbols","code","checkBinding","ctrlKey","shiftKey","metaKey","navPrev","navNext","navUp","navDown","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","keyBlock","newPos","scrollMax","navLeft","navRight","Menu","menuEl","blurEvent","hideMenu","escEvent","escMenu","nestedMenuBlock","_this71","headerMenuEl","LoadMenuEvent","loadMenu","_this72","_this73","docHeight","innerHeight","touch","MouseEvent","itemEl","disabled","touches","pageY","pageX","menus","MoveColumns","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toCol","toColAfter","startX","autoScrollMargin","autoScrollStep","autoScrollTimeout","touchMove","moveHover","endMove","mousemove","which","startMove","bindTouchEvents","startXMove","currentCol","prevColWidth","nextColWidthLast","prevColWidthLast","halfCol","moveToCol","_bindMouseMove","_unbindMouseMove","movingCells","columnHolder","xPos","scrollPos","MoveRows","toRowAfter","hasHandle","startY","tableRowDropEvent","connectionSelectorsTables","connectionSelectorsElements","connectionElements","connectedTable","connectedRow","mouseup","tableRowDrop","previousSibling","startYMove","currentRow","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","setStartPosition","connectToTables","pointerEvents","disconnectFromTables","moveHoverConnections","moveHoverTable","rowHolder","yPos","elementRowDrop","_this74","connectionTables","dropEvent","tabulatorElementDropEvent","connect","disconnect","dropComplete","sender","senders","receiver","trace","receivers","fromTable","_delete","toTable","Mutator","enabled","lookupMutator","mutators","mutatorEdit","Page","initialLoad","pageSizes","dataReceivedNames","dataSentNames","pagesElement","firstBut","prevBut","nextBut","lastBut","pageSizeSelect","generatePageSizeSelectList","_this75","_i13","hidden","pageSelectLabel","testElRow","testElCell","paginationDataReceivedNames","trigger","_this76","_this77","_setPageButtons","leftSize","rightSize","_i14","_generatePageButton","_this78","_this79","_i15","_this80","_getRemotePage","_this81","oldParams","pageParams","_parseRemoteData","last_page","footer","Persistence","id","defWatcherBlock","readFunc","writeFunc","localStorageTest","testKey","localStorage","removeItem","retreivedData","readers","writers","retreiveData","getOwnPropertyDescriptor","set","get","oldCols","newCols","_findColumn","validateSorters","getGroupConfig","getPageConfig","excludedKeys","defStore","colDef","local","getItem","cookie","cookiePos","expireDate","setDate","getDate","toUTCString","Print","manualBlock","replaceTable","cleanup","scrollX","scrollY","footerEl","tableEl","footerContent","ReactiveData","origFuncs","currentVersion","pushFunc","version","enumerable","args","arg","apply","pop","startRow","oldRows","watchKey","watchTreeChildren","childField","rebuildTree","unwatchRow","ResizeColumns","startColumn","startWidth","prevHandle","handleDown","nearestColumn","_checkResizability","_mouseDown","prevHandleDown","colIndex","resizable","mouseMove","mouseUp","ResizeRows","startHeight","screenY","ResizeTable","observer","containerObserver","tableHeight","containerHeight","containerWidth","_this82","tableStyle","ResizeObserver","entry","nodeHeight","contentRect","nodeWidth","observe","unobserve","ResponsiveLayout","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","formatCollapsedData","order","generateCollapsedContent","_iterator","_isArray","_i16","_ref","done","generateCollapsedRowContent","colCount","working","generateCollapsedRowData","mockCellComponent","listContents","div","SelectRow","selecting","lastClickedRow","selectPrev","headerCheckboxElement","_rowSelectionChanged","endSelect","selected","lastClickedRowIdx","rowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","_selectRow","_this83","rowMatch","rowInfo","checkboxEl","childRowSelection","_i17","selectedRow","_iterator2","_isArray2","_i18","_ref2","_iterator3","_isArray3","_i19","_ref3","_child","Sort","arrowEl","sorterParams","startingDir","headerSortStartingDir","newSortList","findSorter","sortListActual","rowComponents","lastSort","clearColumnHeaders","sortObj","setColumnHeader","_sortItems","_this84","sorterCount","sortItem","_sortRow","el1Comp","el2Comp","colComp","el1","el2","aRow","bRow","alignEmptyValues","decimalSeparator","thousandSeparator","emptyAlign","string","localeCompare","time","boolean","array","calc","d","alphanum","as","bs","a1","b1","L","rx","rd","isFinite","Validate","invalidCells","_extractValidator","substring","_buildValidator","parameters","validators","invalidIndex","float","numeric","minLength","maxLength","in","reg","unique","cellData"],"mappings":"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","sourcesContent":["/* Tabulator v4.8.2 (c) Oliver Folkerd */\n\n'use strict';\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nif (!Array.prototype.findIndex) {\n\n\tObject.defineProperty(Array.prototype, 'findIndex', {\n\n\t\tvalue: function value(predicate) {\n\n\t\t\t// 1. Let O be ? ToObject(this value).\n\n\t\t\tif (this == null) {\n\n\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\n\t\t\t}\n\n\t\t\tvar o = Object(this);\n\n\t\t\t// 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n\t\t\tvar len = o.length >>> 0;\n\n\t\t\t// 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n\t\t\tif (typeof predicate !== 'function') {\n\n\t\t\t\tthrow new TypeError('predicate must be a function');\n\t\t\t}\n\n\t\t\t// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\t\t\tvar thisArg = arguments[1];\n\n\t\t\t// 5. Let k be 0.\n\n\t\t\tvar k = 0;\n\n\t\t\t// 6. Repeat, while k < len\n\n\t\t\twhile (k < len) {\n\n\t\t\t\t// a. Let Pk be ! ToString(k).\n\n\t\t\t\t// b. Let kValue be ? Get(O, Pk).\n\n\t\t\t\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n\n\t\t\t\t// d. If testResult is true, return k.\n\n\t\t\t\tvar kValue = o[k];\n\n\t\t\t\tif (predicate.call(thisArg, kValue, k, o)) {\n\n\t\t\t\t\treturn k;\n\t\t\t\t}\n\n\t\t\t\t// e. Increase k by 1.\n\n\t\t\t\tk++;\n\t\t\t}\n\n\t\t\t// 7. Return -1.\n\n\t\t\treturn -1;\n\t\t}\n\n\t});\n}\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n\nif (!Array.prototype.find) {\n\n\tObject.defineProperty(Array.prototype, 'find', {\n\n\t\tvalue: function value(predicate) {\n\n\t\t\t// 1. Let O be ? ToObject(this value).\n\n\t\t\tif (this == null) {\n\n\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\n\t\t\t}\n\n\t\t\tvar o = Object(this);\n\n\t\t\t// 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n\t\t\tvar len = o.length >>> 0;\n\n\t\t\t// 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n\t\t\tif (typeof predicate !== 'function') {\n\n\t\t\t\tthrow new TypeError('predicate must be a function');\n\t\t\t}\n\n\t\t\t// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\t\t\tvar thisArg = arguments[1];\n\n\t\t\t// 5. Let k be 0.\n\n\t\t\tvar k = 0;\n\n\t\t\t// 6. Repeat, while k < len\n\n\t\t\twhile (k < len) {\n\n\t\t\t\t// a. Let Pk be ! ToString(k).\n\n\t\t\t\t// b. Let kValue be ? Get(O, Pk).\n\n\t\t\t\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n\n\t\t\t\t// d. If testResult is true, return kValue.\n\n\t\t\t\tvar kValue = o[k];\n\n\t\t\t\tif (predicate.call(thisArg, kValue, k, o)) {\n\n\t\t\t\t\treturn kValue;\n\t\t\t\t}\n\n\t\t\t\t// e. Increase k by 1.\n\n\t\t\t\tk++;\n\t\t\t}\n\n\t\t\t// 7. Return undefined.\n\n\t\t\treturn undefined;\n\t\t}\n\n\t});\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes#Polyfill\n\nif (!String.prototype.includes) {\n\n\tString.prototype.includes = function (search, start) {\n\n\t\t'use strict';\n\n\t\tif (search instanceof RegExp) {\n\n\t\t\tthrow TypeError('first argument must not be a RegExp');\n\t\t}\n\n\t\tif (start === undefined) {\n\t\t\tstart = 0;\n\t\t}\n\n\t\treturn this.indexOf(search, start) !== -1;\n\t};\n}\n\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n\nif (!Array.prototype.includes) {\n\n\tObject.defineProperty(Array.prototype, 'includes', {\n\n\t\tvalue: function value(searchElement, fromIndex) {\n\n\t\t\tif (this == null) {\n\n\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\n\t\t\t}\n\n\t\t\t// 1. Let O be ? ToObject(this value).\n\n\t\t\tvar o = Object(this);\n\n\t\t\t// 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n\t\t\tvar len = o.length >>> 0;\n\n\t\t\t// 3. If len is 0, return false.\n\n\t\t\tif (len === 0) {\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// 4. Let n be ? ToInteger(fromIndex).\n\n\t\t\t//    (If fromIndex is undefined, this step produces the value 0.)\n\n\t\t\tvar n = fromIndex | 0;\n\n\t\t\t// 5. If n ≥ 0, then\n\n\t\t\t//  a. Let k be n.\n\n\t\t\t// 6. Else n < 0,\n\n\t\t\t//  a. Let k be len + n.\n\n\t\t\t//  b. If k < 0, let k be 0.\n\n\t\t\tvar k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n\t\t\tfunction sameValueZero(x, y) {\n\n\t\t\t\treturn x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);\n\t\t\t}\n\n\t\t\t// 7. Repeat, while k < len\n\n\t\t\twhile (k < len) {\n\n\t\t\t\t// a. Let elementK be the result of ? Get(O, ! ToString(k)).\n\n\t\t\t\t// b. If SameValueZero(searchElement, elementK) is true, return true.\n\n\t\t\t\tif (sameValueZero(o[k], searchElement)) {\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// c. Increase k by 1.\n\n\t\t\t\tk++;\n\t\t\t}\n\n\t\t\t// 8. Return false\n\n\t\t\treturn false;\n\t\t}\n\n\t});\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n\nif (typeof Object.assign !== 'function') {\n\n\t// Must be writable: true, enumerable: false, configurable: true\n\n\tObject.defineProperty(Object, \"assign\", {\n\n\t\tvalue: function assign(target, varArgs) {\n\t\t\t// .length of function is 2\n\n\t\t\t'use strict';\n\n\t\t\tif (target === null || target === undefined) {\n\n\t\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\t\t\t}\n\n\t\t\tvar to = Object(target);\n\n\t\t\tfor (var index = 1; index < arguments.length; index++) {\n\n\t\t\t\tvar nextSource = arguments[index];\n\n\t\t\t\tif (nextSource !== null && nextSource !== undefined) {\n\n\t\t\t\t\tfor (var nextKey in nextSource) {\n\n\t\t\t\t\t\t// Avoid bugs when hasOwnProperty is shadowed\n\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n\n\t\t\t\t\t\t\tto[nextKey] = nextSource[nextKey];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn to;\n\t\t},\n\n\t\twritable: true,\n\n\t\tconfigurable: true\n\n\t});\n}\n\nvar ColumnManager = function ColumnManager(table) {\n\n\tthis.table = table; //hold parent table\n\n\tthis.blockHozScrollEvent = false;\n\n\tthis.headersElement = this.createHeadersElement();\n\n\tthis.element = this.createHeaderElement(); //containing element\n\n\tthis.rowManager = null; //hold row manager object\n\n\tthis.columns = []; // column definition object\n\n\tthis.columnsByIndex = []; //columns by index\n\n\tthis.columnsByField = {}; //columns by field\n\n\tthis.scrollLeft = 0;\n\n\tthis.element.insertBefore(this.headersElement, this.element.firstChild);\n};\n\n////////////// Setup Functions /////////////////\n\n\nColumnManager.prototype.createHeadersElement = function () {\n\n\tvar el = document.createElement(\"div\");\n\n\tel.classList.add(\"tabulator-headers\");\n\n\treturn el;\n};\n\nColumnManager.prototype.createHeaderElement = function () {\n\n\tvar el = document.createElement(\"div\");\n\n\tel.classList.add(\"tabulator-header\");\n\n\tif (!this.table.options.headerVisible) {\n\n\t\tel.classList.add(\"tabulator-header-hidden\");\n\t}\n\n\treturn el;\n};\n\nColumnManager.prototype.initialize = function () {\n\n\tvar self = this;\n\n\t//scroll body along with header\n\n\t// self.element.addEventListener(\"scroll\", function(e){\n\n\t// \tif(!self.blockHozScrollEvent){\n\n\t// \t\tself.table.rowManager.scrollHorizontal(self.element.scrollLeft);\n\n\t// \t}\n\n\t// });\n};\n\n//link to row manager\n\nColumnManager.prototype.setRowManager = function (manager) {\n\n\tthis.rowManager = manager;\n};\n\n//return containing element\n\nColumnManager.prototype.getElement = function () {\n\n\treturn this.element;\n};\n\n//return header containing element\n\nColumnManager.prototype.getHeadersElement = function () {\n\n\treturn this.headersElement;\n};\n\n// ColumnManager.prototype.tempScrollBlock = function(){\n\n// \tclearTimeout(this.blockHozScrollEvent);\n\n// \tthis.blockHozScrollEvent = setTimeout(() => {this.blockHozScrollEvent = false;}, 50);\n\n// }\n\n\n//scroll horizontally to match table body\n\nColumnManager.prototype.scrollHorizontal = function (left) {\n\n\tvar hozAdjust = 0,\n\t    scrollWidth = this.element.scrollWidth - this.table.element.clientWidth;\n\n\t// this.tempScrollBlock();\n\n\tthis.element.scrollLeft = left;\n\n\t//adjust for vertical scrollbar moving table when present\n\n\tif (left > scrollWidth) {\n\n\t\thozAdjust = left - scrollWidth;\n\n\t\tthis.element.style.marginLeft = -hozAdjust + \"px\";\n\t} else {\n\n\t\tthis.element.style.marginLeft = 0;\n\t}\n\n\t//keep frozen columns fixed in position\n\n\t//this._calcFrozenColumnsPos(hozAdjust + 3);\n\n\n\tthis.scrollLeft = left;\n\n\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\tthis.table.modules.frozenColumns.scrollHorizontal();\n\t}\n};\n\n///////////// Column Setup Functions /////////////\n\n\nColumnManager.prototype.generateColumnsFromRowData = function (data) {\n\n\tvar cols = [],\n\t    definitions = this.table.options.autoColumnsDefinitions,\n\t    row,\n\t    sorter;\n\n\tif (data && data.length) {\n\n\t\trow = data[0];\n\n\t\tfor (var key in row) {\n\n\t\t\tvar col = {\n\n\t\t\t\tfield: key,\n\n\t\t\t\ttitle: key\n\n\t\t\t};\n\n\t\t\tvar value = row[key];\n\n\t\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\n\t\t\t\tcase \"undefined\":\n\n\t\t\t\t\tsorter = \"string\";\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\n\t\t\t\t\tsorter = \"boolean\";\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"object\":\n\n\t\t\t\t\tif (Array.isArray(value)) {\n\n\t\t\t\t\t\tsorter = \"array\";\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif (!isNaN(value) && value !== \"\") {\n\n\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n\n\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tcol.sorter = sorter;\n\n\t\t\tcols.push(col);\n\t\t}\n\n\t\tif (definitions) {\n\n\t\t\tswitch (typeof definitions === 'undefined' ? 'undefined' : _typeof(definitions)) {\n\n\t\t\t\tcase \"function\":\n\n\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"object\":\n\n\t\t\t\t\tif (Array.isArray(definitions)) {\n\n\t\t\t\t\t\tcols.forEach(function (col) {\n\n\t\t\t\t\t\t\tvar match = definitions.find(function (def) {\n\n\t\t\t\t\t\t\t\treturn def.field === col.field;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (match) {\n\n\t\t\t\t\t\t\t\tObject.assign(col, match);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcols.forEach(function (col) {\n\n\t\t\t\t\t\t\tif (definitions[col.field]) {\n\n\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.table.options.columns = cols;\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.table.options.columns = cols;\n\t\t}\n\n\t\tthis.setColumns(this.table.options.columns);\n\t}\n};\n\nColumnManager.prototype.setColumns = function (cols, row) {\n\n\tvar self = this;\n\n\twhile (self.headersElement.firstChild) {\n\t\tself.headersElement.removeChild(self.headersElement.firstChild);\n\t}self.columns = [];\n\n\tself.columnsByIndex = [];\n\n\tself.columnsByField = {};\n\n\t//reset frozen columns\n\n\tif (self.table.modExists(\"frozenColumns\")) {\n\n\t\tself.table.modules.frozenColumns.reset();\n\t}\n\n\tcols.forEach(function (def, i) {\n\n\t\tself._addColumn(def);\n\t});\n\n\tself._reIndexColumns();\n\n\tif (self.table.options.responsiveLayout && self.table.modExists(\"responsiveLayout\", true)) {\n\n\t\tself.table.modules.responsiveLayout.initialize();\n\t}\n\n\tif (this.table.options.virtualDomHoz) {\n\n\t\tthis.table.vdomHoz.reinitialize(false, true);\n\t}\n\n\tself.redraw(true);\n};\n\nColumnManager.prototype._addColumn = function (definition, before, nextToColumn) {\n\n\tvar column = new Column(definition, this),\n\t    colEl = column.getElement(),\n\t    index = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\n\tif (nextToColumn && index > -1) {\n\n\t\tvar parentIndex = this.columns.indexOf(nextToColumn.getTopColumn());\n\n\t\tvar nextEl = nextToColumn.getElement();\n\n\t\tif (before) {\n\n\t\t\tthis.columns.splice(parentIndex, 0, column);\n\n\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\n\t\t} else {\n\n\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\n\n\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n\t\t}\n\t} else {\n\n\t\tif (before) {\n\n\t\t\tthis.columns.unshift(column);\n\n\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n\t\t} else {\n\n\t\t\tthis.columns.push(column);\n\n\t\t\tthis.headersElement.appendChild(column.getElement());\n\t\t}\n\n\t\tcolumn.columnRendered();\n\t}\n\n\treturn column;\n};\n\nColumnManager.prototype.registerColumnField = function (col) {\n\n\tif (col.definition.field) {\n\n\t\tthis.columnsByField[col.definition.field] = col;\n\t}\n};\n\nColumnManager.prototype.registerColumnPosition = function (col) {\n\n\tthis.columnsByIndex.push(col);\n};\n\nColumnManager.prototype._reIndexColumns = function () {\n\n\tthis.columnsByIndex = [];\n\n\tthis.columns.forEach(function (column) {\n\n\t\tcolumn.reRegisterPosition();\n\t});\n};\n\n//ensure column headers take up the correct amount of space in column groups\n\nColumnManager.prototype._verticalAlignHeaders = function () {\n\n\tvar self = this,\n\t    minHeight = 0;\n\n\tself.columns.forEach(function (column) {\n\n\t\tvar height;\n\n\t\tcolumn.clearVerticalAlign();\n\n\t\theight = column.getHeight();\n\n\t\tif (height > minHeight) {\n\n\t\t\tminHeight = height;\n\t\t}\n\t});\n\n\tself.columns.forEach(function (column) {\n\n\t\tcolumn.verticalAlign(self.table.options.columnHeaderVertAlign, minHeight);\n\t});\n\n\tself.rowManager.adjustTableSize();\n};\n\n//////////////// Column Details /////////////////\n\n\nColumnManager.prototype.findColumn = function (subject) {\n\n\tvar self = this;\n\n\tif ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n\n\t\tif (subject instanceof Column) {\n\n\t\t\t//subject is column element\n\n\t\t\treturn subject;\n\t\t} else if (subject instanceof ColumnComponent) {\n\n\t\t\t//subject is public column component\n\n\t\t\treturn subject._getSelf() || false;\n\t\t} else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n\n\t\t\t//subject is a HTML element of the column header\n\n\t\t\tvar match = self.columns.find(function (column) {\n\n\t\t\t\treturn column.element === subject;\n\t\t\t});\n\n\t\t\treturn match || false;\n\t\t}\n\t} else {\n\n\t\t//subject should be treated as the field name of the column\n\n\t\treturn this.columnsByField[subject] || false;\n\t}\n\n\t//catch all for any other type of input\n\n\n\treturn false;\n};\n\nColumnManager.prototype.getColumnByField = function (field) {\n\n\treturn this.columnsByField[field];\n};\n\nColumnManager.prototype.getColumnsByFieldRoot = function (root) {\n\tvar _this = this;\n\n\tvar matches = [];\n\n\tObject.keys(this.columnsByField).forEach(function (field) {\n\n\t\tvar fieldRoot = field.split(\".\")[0];\n\n\t\tif (fieldRoot === root) {\n\n\t\t\tmatches.push(_this.columnsByField[field]);\n\t\t}\n\t});\n\n\treturn matches;\n};\n\nColumnManager.prototype.getColumnByIndex = function (index) {\n\n\treturn this.columnsByIndex[index];\n};\n\nColumnManager.prototype.getFirstVisibileColumn = function (index) {\n\n\tvar index = this.columnsByIndex.findIndex(function (col) {\n\n\t\treturn col.visible;\n\t});\n\n\treturn index > -1 ? this.columnsByIndex[index] : false;\n};\n\nColumnManager.prototype.getColumns = function () {\n\n\treturn this.columns;\n};\n\nColumnManager.prototype.findColumnIndex = function (column) {\n\n\treturn this.columnsByIndex.findIndex(function (col) {\n\n\t\treturn column === col;\n\t});\n};\n\n//return all columns that are not groups\n\nColumnManager.prototype.getRealColumns = function () {\n\n\treturn this.columnsByIndex;\n};\n\n//travers across columns and call action\n\nColumnManager.prototype.traverse = function (callback) {\n\n\tvar self = this;\n\n\tself.columnsByIndex.forEach(function (column, i) {\n\n\t\tcallback(column, i);\n\t});\n};\n\n//get defintions of actual columns\n\nColumnManager.prototype.getDefinitions = function (active) {\n\n\tvar self = this,\n\t    output = [];\n\n\tself.columnsByIndex.forEach(function (column) {\n\n\t\tif (!active || active && column.visible) {\n\n\t\t\toutput.push(column.getDefinition());\n\t\t}\n\t});\n\n\treturn output;\n};\n\n//get full nested definition tree\n\nColumnManager.prototype.getDefinitionTree = function () {\n\n\tvar self = this,\n\t    output = [];\n\n\tself.columns.forEach(function (column) {\n\n\t\toutput.push(column.getDefinition(true));\n\t});\n\n\treturn output;\n};\n\nColumnManager.prototype.getComponents = function (structured) {\n\n\tvar self = this,\n\t    output = [],\n\t    columns = structured ? self.columns : self.columnsByIndex;\n\n\tcolumns.forEach(function (column) {\n\n\t\toutput.push(column.getComponent());\n\t});\n\n\treturn output;\n};\n\nColumnManager.prototype.getWidth = function () {\n\n\tvar width = 0;\n\n\tthis.columnsByIndex.forEach(function (column) {\n\n\t\tif (column.visible) {\n\n\t\t\twidth += column.getWidth();\n\t\t}\n\t});\n\n\treturn width;\n};\n\nColumnManager.prototype.moveColumn = function (from, to, after) {\n\n\tthis.moveColumnActual(from, to, after);\n\n\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\tthis.table.modules.responsiveLayout.initialize();\n\t}\n\n\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t}\n\n\tto.element.parentNode.insertBefore(from.element, to.element);\n\n\tif (after) {\n\n\t\tto.element.parentNode.insertBefore(to.element, from.element);\n\t}\n\n\tthis._verticalAlignHeaders();\n\n\tthis.table.rowManager.reinitialize();\n};\n\nColumnManager.prototype.moveColumnActual = function (from, to, after) {\n\n\tif (from.parent.isGroup) {\n\n\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\n\t} else {\n\n\t\tthis._moveColumnInArray(this.columns, from, to, after);\n\t}\n\n\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\n\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\tthis.table.modules.responsiveLayout.initialize();\n\t}\n\n\tif (this.table.options.virtualDomHoz) {\n\n\t\tthis.table.vdomHoz.reinitialize(true);\n\t}\n\n\tif (this.table.options.columnMoved) {\n\n\t\tthis.table.options.columnMoved.call(this.table, from.getComponent(), this.table.columnManager.getComponents());\n\t}\n\n\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\n\t\tthis.table.modules.persistence.save(\"columns\");\n\t}\n};\n\nColumnManager.prototype._moveColumnInArray = function (columns, from, to, after, updateRows) {\n\tvar _this2 = this;\n\n\tvar fromIndex = columns.indexOf(from),\n\t    toIndex,\n\t    rows = [];\n\n\tif (fromIndex > -1) {\n\n\t\tcolumns.splice(fromIndex, 1);\n\n\t\ttoIndex = columns.indexOf(to);\n\n\t\tif (toIndex > -1) {\n\n\t\t\tif (after) {\n\n\t\t\t\ttoIndex = toIndex + 1;\n\t\t\t}\n\t\t} else {\n\n\t\t\ttoIndex = fromIndex;\n\t\t}\n\n\t\tcolumns.splice(toIndex, 0, from);\n\n\t\tif (updateRows) {\n\n\t\t\tif (this.table.options.dataTree && this.table.modExists(\"dataTree\", true)) {\n\n\t\t\t\tthis.table.rowManager.rows.forEach(function (row) {\n\n\t\t\t\t\trows = rows.concat(_this2.table.modules.dataTree.getTreeChildren(row, false, true));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\trows = rows.concat(this.table.rowManager.rows);\n\n\t\t\trows.forEach(function (row) {\n\n\t\t\t\tif (row.cells.length) {\n\n\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\n\n\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n\nColumnManager.prototype.scrollToColumn = function (column, position, ifVisible) {\n\tvar _this3 = this;\n\n\tvar left = 0,\n\t    offset = 0,\n\t    adjust = 0,\n\t    colEl = column.getElement();\n\n\treturn new Promise(function (resolve, reject) {\n\n\t\tif (typeof position === \"undefined\") {\n\n\t\t\tposition = _this3.table.options.scrollToColumnPosition;\n\t\t}\n\n\t\tif (typeof ifVisible === \"undefined\") {\n\n\t\t\tifVisible = _this3.table.options.scrollToColumnIfVisible;\n\t\t}\n\n\t\tif (column.visible) {\n\n\t\t\t//align to correct position\n\n\t\t\tswitch (position) {\n\n\t\t\t\tcase \"middle\":\n\n\t\t\t\tcase \"center\":\n\n\t\t\t\t\tadjust = -_this3.element.clientWidth / 2;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"right\":\n\n\t\t\t\t\tadjust = colEl.clientWidth - _this3.headersElement.clientWidth;\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\t//check column visibility\n\n\t\t\tif (!ifVisible) {\n\n\t\t\t\toffset = colEl.offsetLeft;\n\n\t\t\t\tif (offset > 0 && offset + colEl.offsetWidth < _this3.element.clientWidth) {\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//calculate scroll position\n\n\t\t\tleft = colEl.offsetLeft + adjust;\n\n\t\t\tleft = Math.max(Math.min(left, _this3.table.rowManager.element.scrollWidth - _this3.table.rowManager.element.clientWidth), 0);\n\n\t\t\t_this3.table.rowManager.scrollHorizontal(left);\n\n\t\t\t_this3.scrollHorizontal(left);\n\n\t\t\tresolve();\n\t\t} else {\n\n\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\n\n\t\t\treject(\"Scroll Error - Column not visible\");\n\t\t}\n\t});\n};\n\n//////////////// Cell Management /////////////////\n\n\nColumnManager.prototype.generateCells = function (row) {\n\n\tvar self = this;\n\n\tvar cells = [];\n\n\tself.columnsByIndex.forEach(function (column) {\n\n\t\tcells.push(column.generateCell(row));\n\t});\n\n\treturn cells;\n};\n\n//////////////// Column Management /////////////////\n\n\nColumnManager.prototype.getFlexBaseWidth = function () {\n\n\tvar self = this,\n\t    totalWidth = self.table.element.clientWidth,\n\t    //table element width\n\n\tfixedWidth = 0;\n\n\t//adjust for vertical scrollbar if present\n\n\tif (self.rowManager.element.scrollHeight > self.rowManager.element.clientHeight) {\n\n\t\ttotalWidth -= self.rowManager.element.offsetWidth - self.rowManager.element.clientWidth;\n\t}\n\n\tthis.columnsByIndex.forEach(function (column) {\n\n\t\tvar width, minWidth, colWidth;\n\n\t\tif (column.visible) {\n\n\t\t\twidth = column.definition.width || 0;\n\n\t\t\tminWidth = typeof column.minWidth == \"undefined\" ? self.table.options.columnMinWidth : parseInt(column.minWidth);\n\n\t\t\tif (typeof width == \"string\") {\n\n\t\t\t\tif (width.indexOf(\"%\") > -1) {\n\n\t\t\t\t\tcolWidth = totalWidth / 100 * parseInt(width);\n\t\t\t\t} else {\n\n\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tcolWidth = width;\n\t\t\t}\n\n\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\t\t}\n\t});\n\n\treturn fixedWidth;\n};\n\nColumnManager.prototype.addColumn = function (definition, before, nextToColumn) {\n\tvar _this4 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\n\t\tvar column = _this4._addColumn(definition, before, nextToColumn);\n\n\t\t_this4._reIndexColumns();\n\n\t\tif (_this4.table.options.responsiveLayout && _this4.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t_this4.table.modules.responsiveLayout.initialize();\n\t\t}\n\n\t\tif (_this4.table.modExists(\"columnCalcs\")) {\n\n\t\t\t_this4.table.modules.columnCalcs.recalc(_this4.table.rowManager.activeRows);\n\t\t}\n\n\t\t_this4.redraw();\n\n\t\tif (_this4.table.modules.layout.getMode() != \"fitColumns\") {\n\n\t\t\tcolumn.reinitializeWidth();\n\t\t}\n\n\t\t_this4._verticalAlignHeaders();\n\n\t\t_this4.table.rowManager.reinitialize();\n\n\t\tif (_this4.table.options.virtualDomHoz) {\n\n\t\t\t_this4.table.vdomHoz.reinitialize();\n\t\t}\n\n\t\tresolve(column);\n\t});\n};\n\n//remove column from system\n\nColumnManager.prototype.deregisterColumn = function (column) {\n\n\tvar field = column.getField(),\n\t    index;\n\n\t//remove from field list\n\n\tif (field) {\n\n\t\tdelete this.columnsByField[field];\n\t}\n\n\t//remove from index list\n\n\tindex = this.columnsByIndex.indexOf(column);\n\n\tif (index > -1) {\n\n\t\tthis.columnsByIndex.splice(index, 1);\n\t}\n\n\t//remove from column list\n\n\tindex = this.columns.indexOf(column);\n\n\tif (index > -1) {\n\n\t\tthis.columns.splice(index, 1);\n\t}\n\n\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\tthis.table.modules.responsiveLayout.initialize();\n\t}\n\n\tthis._verticalAlignHeaders();\n\n\tthis.redraw();\n};\n\n//redraw columns\n\nColumnManager.prototype.redraw = function (force) {\n\n\tif (force) {\n\n\t\tif (Tabulator.prototype.helpers.elVisible(this.element)) {\n\n\t\t\tthis._verticalAlignHeaders();\n\t\t}\n\n\t\tthis.table.rowManager.resetScroll();\n\n\t\tthis.table.rowManager.reinitialize();\n\t}\n\n\tif ([\"fitColumns\", \"fitDataStretch\"].indexOf(this.table.modules.layout.getMode()) > -1) {\n\n\t\tthis.table.modules.layout.layout();\n\t} else {\n\n\t\tif (force) {\n\n\t\t\tthis.table.modules.layout.layout();\n\t\t} else {\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\tthis.table.modules.frozenColumns.layout();\n\t}\n\n\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t}\n\n\tif (force) {\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\n\t\t\tthis.table.modules.persistence.save(\"columns\");\n\t\t}\n\n\t\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\t\tthis.table.modules.columnCalcs.redraw();\n\t\t}\n\t}\n\n\tthis.table.footerManager.redraw();\n};\n\n//public column object\nvar ColumnComponent = function ColumnComponent(column) {\n\tthis._column = column;\n\tthis.type = \"ColumnComponent\";\n};\n\nColumnComponent.prototype.getElement = function () {\n\treturn this._column.getElement();\n};\n\nColumnComponent.prototype.getDefinition = function () {\n\treturn this._column.getDefinition();\n};\n\nColumnComponent.prototype.getField = function () {\n\treturn this._column.getField();\n};\n\nColumnComponent.prototype.getCells = function () {\n\tvar cells = [];\n\n\tthis._column.cells.forEach(function (cell) {\n\t\tcells.push(cell.getComponent());\n\t});\n\n\treturn cells;\n};\n\nColumnComponent.prototype.getVisibility = function () {\n\tconsole.warn(\"getVisibility function is deprecated, you should now use the isVisible function\");\n\treturn this._column.visible;\n};\n\nColumnComponent.prototype.isVisible = function () {\n\treturn this._column.visible;\n};\n\nColumnComponent.prototype.show = function () {\n\tif (this._column.isGroup) {\n\t\tthis._column.columns.forEach(function (column) {\n\t\t\tcolumn.show();\n\t\t});\n\t} else {\n\t\tthis._column.show();\n\t}\n};\n\nColumnComponent.prototype.hide = function () {\n\tif (this._column.isGroup) {\n\t\tthis._column.columns.forEach(function (column) {\n\t\t\tcolumn.hide();\n\t\t});\n\t} else {\n\t\tthis._column.hide();\n\t}\n};\n\nColumnComponent.prototype.toggle = function () {\n\tif (this._column.visible) {\n\t\tthis.hide();\n\t} else {\n\t\tthis.show();\n\t}\n};\n\nColumnComponent.prototype.delete = function () {\n\treturn this._column.delete();\n};\n\nColumnComponent.prototype.getSubColumns = function () {\n\tvar output = [];\n\n\tif (this._column.columns.length) {\n\t\tthis._column.columns.forEach(function (column) {\n\t\t\toutput.push(column.getComponent());\n\t\t});\n\t}\n\n\treturn output;\n};\n\nColumnComponent.prototype.getParentColumn = function () {\n\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n};\n\nColumnComponent.prototype._getSelf = function () {\n\treturn this._column;\n};\n\nColumnComponent.prototype.scrollTo = function () {\n\treturn this._column.table.columnManager.scrollToColumn(this._column);\n};\n\nColumnComponent.prototype.getTable = function () {\n\treturn this._column.table;\n};\n\nColumnComponent.prototype.headerFilterFocus = function () {\n\tif (this._column.table.modExists(\"filter\", true)) {\n\t\tthis._column.table.modules.filter.setHeaderFilterFocus(this._column);\n\t}\n};\n\nColumnComponent.prototype.reloadHeaderFilter = function () {\n\tif (this._column.table.modExists(\"filter\", true)) {\n\t\tthis._column.table.modules.filter.reloadHeaderFilter(this._column);\n\t}\n};\n\nColumnComponent.prototype.getHeaderFilterValue = function () {\n\tif (this._column.table.modExists(\"filter\", true)) {\n\t\treturn this._column.table.modules.filter.getHeaderFilterValue(this._column);\n\t}\n};\n\nColumnComponent.prototype.setHeaderFilterValue = function (value) {\n\tif (this._column.table.modExists(\"filter\", true)) {\n\t\tthis._column.table.modules.filter.setHeaderFilterValue(this._column, value);\n\t}\n};\n\nColumnComponent.prototype.move = function (to, after) {\n\tvar toColumn = this._column.table.columnManager.findColumn(to);\n\n\tif (toColumn) {\n\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after);\n\t} else {\n\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t}\n};\n\nColumnComponent.prototype.getNextColumn = function () {\n\tvar nextCol = this._column.nextColumn();\n\n\treturn nextCol ? nextCol.getComponent() : false;\n};\n\nColumnComponent.prototype.getPrevColumn = function () {\n\tvar prevCol = this._column.prevColumn();\n\n\treturn prevCol ? prevCol.getComponent() : false;\n};\n\nColumnComponent.prototype.updateDefinition = function (updates) {\n\treturn this._column.updateDefinition(updates);\n};\n\nColumnComponent.prototype.getWidth = function () {\n\treturn this._column.getWidth();\n};\n\nColumnComponent.prototype.setWidth = function (width) {\n\tvar result;\n\n\tif (width === true) {\n\t\tresult = this._column.reinitializeWidth(true);\n\t} else {\n\t\tresult = this._column.setWidth(width);\n\t}\n\n\tif (this._column.table.options.virtualDomHoz) {\n\t\tthis._column.table.vdomHoz.reinitialize(true);\n\t}\n\n\treturn result;\n};\n\nColumnComponent.prototype.validate = function () {\n\treturn this._column.validate();\n};\n\nvar Column = function Column(def, parent) {\n\tvar self = this;\n\n\tthis.table = parent.table;\n\tthis.definition = def; //column definition\n\tthis.parent = parent; //hold parent object\n\tthis.type = \"column\"; //type of element\n\tthis.columns = []; //child columns\n\tthis.cells = []; //cells bound to this column\n\tthis.element = this.createElement(); //column header element\n\tthis.contentElement = false;\n\tthis.titleHolderElement = false;\n\tthis.titleElement = false;\n\tthis.groupElement = this.createGroupElement(); //column group holder element\n\tthis.isGroup = false;\n\tthis.tooltip = false; //hold column tooltip\n\tthis.hozAlign = \"\"; //horizontal text alignment\n\tthis.vertAlign = \"\"; //vert text alignment\n\n\t//multi dimensional filed handling\n\tthis.field = \"\";\n\tthis.fieldStructure = \"\";\n\tthis.getFieldValue = \"\";\n\tthis.setFieldValue = \"\";\n\n\tthis.titleFormatterRendered = false;\n\n\tthis.setField(this.definition.field);\n\n\tif (this.table.options.invalidOptionWarnings) {\n\t\tthis.checkDefinition();\n\t}\n\n\tthis.modules = {}; //hold module variables;\n\n\tthis.cellEvents = {\n\t\tcellClick: false,\n\t\tcellDblClick: false,\n\t\tcellContext: false,\n\t\tcellTap: false,\n\t\tcellDblTap: false,\n\t\tcellTapHold: false,\n\t\tcellMouseEnter: false,\n\t\tcellMouseLeave: false,\n\t\tcellMouseOver: false,\n\t\tcellMouseOut: false,\n\t\tcellMouseMove: false\n\t};\n\n\tthis.width = null; //column width\n\tthis.widthStyled = \"\"; //column width prestyled to improve render efficiency\n\tthis.minWidth = null; //column minimum width\n\tthis.minWidthStyled = \"\"; //column minimum prestyled to improve render efficiency\n\tthis.widthFixed = false; //user has specified a width for this column\n\n\tthis.visible = true; //default visible state\n\n\tthis.component = null;\n\n\tthis._mapDepricatedFunctionality();\n\n\t//initialize column\n\tif (def.columns) {\n\n\t\tthis.isGroup = true;\n\n\t\tdef.columns.forEach(function (def, i) {\n\t\t\tvar newCol = new Column(def, self);\n\t\t\tself.attachColumn(newCol);\n\t\t});\n\n\t\tself.checkColumnVisibility();\n\t} else {\n\t\tparent.registerColumnField(this);\n\t}\n\n\tif (def.rowHandle && this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")) {\n\t\tthis.table.modules.moveRow.setHandle(true);\n\t}\n\n\tthis._buildHeader();\n\n\tthis.bindModuleColumns();\n};\n\nColumn.prototype.createElement = function () {\n\tvar el = document.createElement(\"div\");\n\n\tel.classList.add(\"tabulator-col\");\n\tel.setAttribute(\"role\", \"columnheader\");\n\tel.setAttribute(\"aria-sort\", \"none\");\n\n\treturn el;\n};\n\nColumn.prototype.createGroupElement = function () {\n\tvar el = document.createElement(\"div\");\n\n\tel.classList.add(\"tabulator-col-group-cols\");\n\n\treturn el;\n};\n\nColumn.prototype.checkDefinition = function () {\n\tvar _this5 = this;\n\n\tObject.keys(this.definition).forEach(function (key) {\n\t\tif (_this5.defaultOptionList.indexOf(key) === -1) {\n\t\t\tconsole.warn(\"Invalid column definition option in '\" + (_this5.field || _this5.definition.title) + \"' column:\", key);\n\t\t}\n\t});\n};\n\nColumn.prototype.setField = function (field) {\n\tthis.field = field;\n\tthis.fieldStructure = field ? this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field] : [];\n\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n};\n\n//register column position with column manager\nColumn.prototype.registerColumnPosition = function (column) {\n\tthis.parent.registerColumnPosition(column);\n};\n\n//register column position with column manager\nColumn.prototype.registerColumnField = function (column) {\n\tthis.parent.registerColumnField(column);\n};\n\n//trigger position registration\nColumn.prototype.reRegisterPosition = function () {\n\tif (this.isGroup) {\n\t\tthis.columns.forEach(function (column) {\n\t\t\tcolumn.reRegisterPosition();\n\t\t});\n\t} else {\n\t\tthis.registerColumnPosition(this);\n\t}\n};\n\nColumn.prototype._mapDepricatedFunctionality = function () {\n\tif (typeof this.definition.hideInHtml !== \"undefined\") {\n\t\tthis.definition.htmlOutput = !this.definition.hideInHtml;\n\t\tconsole.warn(\"hideInHtml column definition property is deprecated, you should now use htmlOutput\");\n\t}\n\n\tif (typeof this.definition.align !== \"undefined\") {\n\t\tthis.definition.hozAlign = this.definition.align;\n\t\tconsole.warn(\"align column definition property is deprecated, you should now use hozAlign\");\n\t}\n\n\tif (typeof this.definition.downloadTitle !== \"undefined\") {\n\t\tthis.definition.titleDownload = this.definition.downloadTitle;\n\t\tconsole.warn(\"downloadTitle definition property is deprecated, you should now use titleDownload\");\n\t}\n};\n\nColumn.prototype.setTooltip = function () {\n\tvar self = this,\n\t    def = self.definition;\n\n\t//set header tooltips\n\tvar tooltip = def.headerTooltip || def.tooltip === false ? def.headerTooltip : self.table.options.tooltipsHeader;\n\n\tif (tooltip) {\n\t\tif (tooltip === true) {\n\t\t\tif (def.field) {\n\t\t\t\tself.table.modules.localize.bind(\"columns|\" + def.field, function (value) {\n\t\t\t\t\tself.element.setAttribute(\"title\", value || def.title);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tself.element.setAttribute(\"title\", def.title);\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof tooltip == \"function\") {\n\t\t\t\ttooltip = tooltip(self.getComponent());\n\n\t\t\t\tif (tooltip === false) {\n\t\t\t\t\ttooltip = \"\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tself.element.setAttribute(\"title\", tooltip);\n\t\t}\n\t} else {\n\t\tself.element.setAttribute(\"title\", \"\");\n\t}\n};\n\n//build header element\nColumn.prototype._buildHeader = function () {\n\tvar self = this,\n\t    def = self.definition;\n\n\twhile (self.element.firstChild) {\n\t\tself.element.removeChild(self.element.firstChild);\n\t}if (def.headerVertical) {\n\t\tself.element.classList.add(\"tabulator-col-vertical\");\n\n\t\tif (def.headerVertical === \"flip\") {\n\t\t\tself.element.classList.add(\"tabulator-col-vertical-flip\");\n\t\t}\n\t}\n\n\tself.contentElement = self._bindEvents();\n\n\tself.contentElement = self._buildColumnHeaderContent();\n\n\tself.element.appendChild(self.contentElement);\n\n\tif (self.isGroup) {\n\t\tself._buildGroupHeader();\n\t} else {\n\t\tself._buildColumnHeader();\n\t}\n\n\tself.setTooltip();\n\n\t//set resizable handles\n\tif (self.table.options.resizableColumns && self.table.modExists(\"resizeColumns\")) {\n\t\tself.table.modules.resizeColumns.initializeColumn(\"header\", self, self.element);\n\t}\n\n\t//set resizable handles\n\tif (def.headerFilter && self.table.modExists(\"filter\") && self.table.modExists(\"edit\")) {\n\t\tif (typeof def.headerFilterPlaceholder !== \"undefined\" && def.field) {\n\t\t\tself.table.modules.localize.setHeaderFilterColumnPlaceholder(def.field, def.headerFilterPlaceholder);\n\t\t}\n\n\t\tself.table.modules.filter.initializeColumn(self);\n\t}\n\n\t//set resizable handles\n\tif (self.table.modExists(\"frozenColumns\")) {\n\t\tself.table.modules.frozenColumns.initializeColumn(self);\n\t}\n\n\t//set movable column\n\tif (self.table.options.movableColumns && !self.isGroup && self.table.modExists(\"moveColumn\")) {\n\t\tself.table.modules.moveColumn.initializeColumn(self);\n\t}\n\n\t//set calcs column\n\tif ((def.topCalc || def.bottomCalc) && self.table.modExists(\"columnCalcs\")) {\n\t\tself.table.modules.columnCalcs.initializeColumn(self);\n\t}\n\n\t//handle persistence\n\tif (self.table.modExists(\"persistence\") && self.table.modules.persistence.config.columns) {\n\t\tself.table.modules.persistence.initializeColumn(self);\n\t}\n\n\t//update header tooltip on mouse enter\n\tself.element.addEventListener(\"mouseenter\", function (e) {\n\t\tself.setTooltip();\n\t});\n};\n\nColumn.prototype._bindEvents = function () {\n\n\tvar self = this,\n\t    def = self.definition,\n\t    dblTap,\n\t    tapHold,\n\t    tap;\n\n\t//setup header click event bindings\n\tif (typeof def.headerClick == \"function\") {\n\t\tself.element.addEventListener(\"click\", function (e) {\n\t\t\tdef.headerClick(e, self.getComponent());\n\t\t});\n\t}\n\n\tif (typeof def.headerDblClick == \"function\") {\n\t\tself.element.addEventListener(\"dblclick\", function (e) {\n\t\t\tdef.headerDblClick(e, self.getComponent());\n\t\t});\n\t}\n\n\tif (typeof def.headerContext == \"function\") {\n\t\tself.element.addEventListener(\"contextmenu\", function (e) {\n\t\t\tdef.headerContext(e, self.getComponent());\n\t\t});\n\t}\n\n\t//setup header tap event bindings\n\tif (typeof def.headerTap == \"function\") {\n\t\ttap = false;\n\n\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\t\t\ttap = true;\n\t\t}, { passive: true });\n\n\t\tself.element.addEventListener(\"touchend\", function (e) {\n\t\t\tif (tap) {\n\t\t\t\tdef.headerTap(e, self.getComponent());\n\t\t\t}\n\n\t\t\ttap = false;\n\t\t});\n\t}\n\n\tif (typeof def.headerDblTap == \"function\") {\n\t\tdblTap = null;\n\n\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\tif (dblTap) {\n\t\t\t\tclearTimeout(dblTap);\n\t\t\t\tdblTap = null;\n\n\t\t\t\tdef.headerDblTap(e, self.getComponent());\n\t\t\t} else {\n\n\t\t\t\tdblTap = setTimeout(function () {\n\t\t\t\t\tclearTimeout(dblTap);\n\t\t\t\t\tdblTap = null;\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (typeof def.headerTapHold == \"function\") {\n\t\ttapHold = null;\n\n\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\t\t\tclearTimeout(tapHold);\n\n\t\t\ttapHold = setTimeout(function () {\n\t\t\t\tclearTimeout(tapHold);\n\t\t\t\ttapHold = null;\n\t\t\t\ttap = false;\n\t\t\t\tdef.headerTapHold(e, self.getComponent());\n\t\t\t}, 1000);\n\t\t}, { passive: true });\n\n\t\tself.element.addEventListener(\"touchend\", function (e) {\n\t\t\tclearTimeout(tapHold);\n\t\t\ttapHold = null;\n\t\t});\n\t}\n\n\t//store column cell click event bindings\n\tif (typeof def.cellClick == \"function\") {\n\t\tself.cellEvents.cellClick = def.cellClick;\n\t}\n\n\tif (typeof def.cellDblClick == \"function\") {\n\t\tself.cellEvents.cellDblClick = def.cellDblClick;\n\t}\n\n\tif (typeof def.cellContext == \"function\") {\n\t\tself.cellEvents.cellContext = def.cellContext;\n\t}\n\n\t//store column mouse event bindings\n\tif (typeof def.cellMouseEnter == \"function\") {\n\t\tself.cellEvents.cellMouseEnter = def.cellMouseEnter;\n\t}\n\n\tif (typeof def.cellMouseLeave == \"function\") {\n\t\tself.cellEvents.cellMouseLeave = def.cellMouseLeave;\n\t}\n\n\tif (typeof def.cellMouseOver == \"function\") {\n\t\tself.cellEvents.cellMouseOver = def.cellMouseOver;\n\t}\n\n\tif (typeof def.cellMouseOut == \"function\") {\n\t\tself.cellEvents.cellMouseOut = def.cellMouseOut;\n\t}\n\n\tif (typeof def.cellMouseMove == \"function\") {\n\t\tself.cellEvents.cellMouseMove = def.cellMouseMove;\n\t}\n\n\t//setup column cell tap event bindings\n\tif (typeof def.cellTap == \"function\") {\n\t\tself.cellEvents.cellTap = def.cellTap;\n\t}\n\n\tif (typeof def.cellDblTap == \"function\") {\n\t\tself.cellEvents.cellDblTap = def.cellDblTap;\n\t}\n\n\tif (typeof def.cellTapHold == \"function\") {\n\t\tself.cellEvents.cellTapHold = def.cellTapHold;\n\t}\n\n\t//setup column cell edit callbacks\n\tif (typeof def.cellEdited == \"function\") {\n\t\tself.cellEvents.cellEdited = def.cellEdited;\n\t}\n\n\tif (typeof def.cellEditing == \"function\") {\n\t\tself.cellEvents.cellEditing = def.cellEditing;\n\t}\n\n\tif (typeof def.cellEditCancelled == \"function\") {\n\t\tself.cellEvents.cellEditCancelled = def.cellEditCancelled;\n\t}\n};\n\n//build header element for header\nColumn.prototype._buildColumnHeader = function () {\n\tvar _this6 = this;\n\n\tvar def = this.definition,\n\t    table = this.table,\n\t    sortable;\n\n\t//set column sorter\n\tif (table.modExists(\"sort\")) {\n\t\ttable.modules.sort.initializeColumn(this, this.titleHolderElement);\n\t}\n\n\t//set column header context menu\n\tif ((def.headerContextMenu || def.headerClickMenu || def.headerMenu) && table.modExists(\"menu\")) {\n\t\ttable.modules.menu.initializeColumnHeader(this);\n\t}\n\n\t//set column formatter\n\tif (table.modExists(\"format\")) {\n\t\ttable.modules.format.initializeColumn(this);\n\t}\n\n\t//set column editor\n\tif (typeof def.editor != \"undefined\" && table.modExists(\"edit\")) {\n\t\ttable.modules.edit.initializeColumn(this);\n\t}\n\n\t//set colum validator\n\tif (typeof def.validator != \"undefined\" && table.modExists(\"validate\")) {\n\t\ttable.modules.validate.initializeColumn(this);\n\t}\n\n\t//set column mutator\n\tif (table.modExists(\"mutator\")) {\n\t\ttable.modules.mutator.initializeColumn(this);\n\t}\n\n\t//set column accessor\n\tif (table.modExists(\"accessor\")) {\n\t\ttable.modules.accessor.initializeColumn(this);\n\t}\n\n\t//set respoviveLayout\n\tif (_typeof(table.options.responsiveLayout) && table.modExists(\"responsiveLayout\")) {\n\t\ttable.modules.responsiveLayout.initializeColumn(this);\n\t}\n\n\t//set column visibility\n\tif (typeof def.visible != \"undefined\") {\n\t\tif (def.visible) {\n\t\t\tthis.show(true);\n\t\t} else {\n\t\t\tthis.hide(true);\n\t\t}\n\t}\n\n\t//asign additional css classes to column header\n\tif (def.cssClass) {\n\t\tvar classeNames = def.cssClass.split(\" \");\n\t\tclasseNames.forEach(function (className) {\n\t\t\t_this6.element.classList.add(className);\n\t\t});\n\t}\n\n\tif (def.field) {\n\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\n\t}\n\n\t//set min width if present\n\tthis.setMinWidth(typeof def.minWidth == \"undefined\" ? this.table.options.columnMinWidth : parseInt(def.minWidth));\n\n\tthis.reinitializeWidth();\n\n\t//set tooltip if present\n\tthis.tooltip = this.definition.tooltip || this.definition.tooltip === false ? this.definition.tooltip : this.table.options.tooltips;\n\n\t//set orizontal text alignment\n\tthis.hozAlign = typeof this.definition.hozAlign == \"undefined\" ? this.table.options.cellHozAlign : this.definition.hozAlign;\n\tthis.vertAlign = typeof this.definition.vertAlign == \"undefined\" ? this.table.options.cellVertAlign : this.definition.vertAlign;\n\n\tthis.titleElement.style.textAlign = this.definition.headerHozAlign || this.table.options.headerHozAlign;\n};\n\nColumn.prototype._buildColumnHeaderContent = function () {\n\tvar def = this.definition,\n\t    table = this.table;\n\n\tvar contentElement = document.createElement(\"div\");\n\tcontentElement.classList.add(\"tabulator-col-content\");\n\n\tthis.titleHolderElement = document.createElement(\"div\");\n\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n\n\tcontentElement.appendChild(this.titleHolderElement);\n\n\tthis.titleElement = this._buildColumnHeaderTitle();\n\n\tthis.titleHolderElement.appendChild(this.titleElement);\n\n\treturn contentElement;\n};\n\n//build title element of column\nColumn.prototype._buildColumnHeaderTitle = function () {\n\tvar self = this,\n\t    def = self.definition,\n\t    table = self.table,\n\t    title;\n\n\tvar titleHolderElement = document.createElement(\"div\");\n\ttitleHolderElement.classList.add(\"tabulator-col-title\");\n\n\tif (def.editableTitle) {\n\t\tvar titleElement = document.createElement(\"input\");\n\t\ttitleElement.classList.add(\"tabulator-title-editor\");\n\n\t\ttitleElement.addEventListener(\"click\", function (e) {\n\t\t\te.stopPropagation();\n\t\t\ttitleElement.focus();\n\t\t});\n\n\t\ttitleElement.addEventListener(\"change\", function () {\n\t\t\tdef.title = titleElement.value;\n\t\t\ttable.options.columnTitleChanged.call(self.table, self.getComponent());\n\t\t});\n\n\t\ttitleHolderElement.appendChild(titleElement);\n\n\t\tif (def.field) {\n\t\t\ttable.modules.localize.bind(\"columns|\" + def.field, function (text) {\n\t\t\t\ttitleElement.value = text || def.title || \"&nbsp;\";\n\t\t\t});\n\t\t} else {\n\t\t\ttitleElement.value = def.title || \"&nbsp;\";\n\t\t}\n\t} else {\n\t\tif (def.field) {\n\t\t\ttable.modules.localize.bind(\"columns|\" + def.field, function (text) {\n\t\t\t\tself._formatColumnHeaderTitle(titleHolderElement, text || def.title || \"&nbsp;\");\n\t\t\t});\n\t\t} else {\n\t\t\tself._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n\t\t}\n\t}\n\n\treturn titleHolderElement;\n};\n\nColumn.prototype._formatColumnHeaderTitle = function (el, title) {\n\tvar _this7 = this;\n\n\tvar formatter, contents, params, mockCell, onRendered;\n\n\tif (this.definition.titleFormatter && this.table.modExists(\"format\")) {\n\n\t\tformatter = this.table.modules.format.getFormatter(this.definition.titleFormatter);\n\n\t\tonRendered = function onRendered(callback) {\n\t\t\t_this7.titleFormatterRendered = callback;\n\t\t};\n\n\t\tmockCell = {\n\t\t\tgetValue: function getValue() {\n\t\t\t\treturn title;\n\t\t\t},\n\t\t\tgetElement: function getElement() {\n\t\t\t\treturn el;\n\t\t\t}\n\t\t};\n\n\t\tparams = this.definition.titleFormatterParams || {};\n\n\t\tparams = typeof params === \"function\" ? params() : params;\n\n\t\tcontents = formatter.call(this.table.modules.format, mockCell, params, onRendered);\n\n\t\tswitch (typeof contents === 'undefined' ? 'undefined' : _typeof(contents)) {\n\t\t\tcase \"object\":\n\t\t\t\tif (contents instanceof Node) {\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t} else {\n\t\t\t\t\tel.innerHTML = \"\";\n\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\tcase \"null\":\n\t\t\t\tel.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tel.innerHTML = contents;\n\t\t}\n\t} else {\n\t\tel.innerHTML = title;\n\t}\n};\n\n//build header element for column group\nColumn.prototype._buildGroupHeader = function () {\n\tvar _this8 = this;\n\n\tthis.element.classList.add(\"tabulator-col-group\");\n\tthis.element.setAttribute(\"role\", \"columngroup\");\n\tthis.element.setAttribute(\"aria-title\", this.definition.title);\n\n\t//asign additional css classes to column header\n\tif (this.definition.cssClass) {\n\t\tvar classeNames = this.definition.cssClass.split(\" \");\n\t\tclasseNames.forEach(function (className) {\n\t\t\t_this8.element.classList.add(className);\n\t\t});\n\t}\n\n\t//set column header context menu\n\tif ((this.definition.headerContextMenu || this.definition.headerMenu) && this.table.modExists(\"menu\")) {\n\t\tthis.table.modules.menu.initializeColumnHeader(this);\n\t}\n\n\tthis.element.appendChild(this.groupElement);\n};\n\n//flat field lookup\nColumn.prototype._getFlatData = function (data) {\n\treturn data[this.field];\n};\n\n//nested field lookup\nColumn.prototype._getNestedData = function (data) {\n\tvar dataObj = data,\n\t    structure = this.fieldStructure,\n\t    length = structure.length,\n\t    output;\n\n\tfor (var _i = 0; _i < length; _i++) {\n\n\t\tdataObj = dataObj[structure[_i]];\n\n\t\toutput = dataObj;\n\n\t\tif (!dataObj) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn output;\n};\n\n//flat field set\nColumn.prototype._setFlatData = function (data, value) {\n\tif (this.field) {\n\t\tdata[this.field] = value;\n\t}\n};\n\n//nested field set\nColumn.prototype._setNestedData = function (data, value) {\n\tvar dataObj = data,\n\t    structure = this.fieldStructure,\n\t    length = structure.length;\n\n\tfor (var _i2 = 0; _i2 < length; _i2++) {\n\n\t\tif (_i2 == length - 1) {\n\t\t\tdataObj[structure[_i2]] = value;\n\t\t} else {\n\t\t\tif (!dataObj[structure[_i2]]) {\n\t\t\t\tif (typeof value !== \"undefined\") {\n\t\t\t\t\tdataObj[structure[_i2]] = {};\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdataObj = dataObj[structure[_i2]];\n\t\t}\n\t}\n};\n\n//attach column to this group\nColumn.prototype.attachColumn = function (column) {\n\tvar self = this;\n\n\tif (self.groupElement) {\n\t\tself.columns.push(column);\n\t\tself.groupElement.appendChild(column.getElement());\n\t} else {\n\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\n\t}\n};\n\n//vertically align header in column\nColumn.prototype.verticalAlign = function (alignment, height) {\n\n\t//calculate height of column header and group holder element\n\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : height || this.parent.getHeadersElement().clientHeight;\n\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n\tthis.element.style.height = parentHeight + \"px\";\n\n\tif (this.isGroup) {\n\t\tthis.groupElement.style.minHeight = parentHeight - this.contentElement.offsetHeight + \"px\";\n\t}\n\n\t//vertically align cell contents\n\tif (!this.isGroup && alignment !== \"top\") {\n\t\tif (alignment === \"bottom\") {\n\t\t\tthis.element.style.paddingTop = this.element.clientHeight - this.contentElement.offsetHeight + \"px\";\n\t\t} else {\n\t\t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) / 2 + \"px\";\n\t\t}\n\t}\n\n\tthis.columns.forEach(function (column) {\n\t\tcolumn.verticalAlign(alignment);\n\t});\n};\n\n//clear vertical alignmenet\nColumn.prototype.clearVerticalAlign = function () {\n\tthis.element.style.paddingTop = \"\";\n\tthis.element.style.height = \"\";\n\tthis.element.style.minHeight = \"\";\n\tthis.groupElement.style.minHeight = \"\";\n\n\tthis.columns.forEach(function (column) {\n\t\tcolumn.clearVerticalAlign();\n\t});\n};\n\nColumn.prototype.bindModuleColumns = function () {\n\t//check if rownum formatter is being used on a column\n\tif (this.definition.formatter == \"rownum\") {\n\t\tthis.table.rowManager.rowNumColumn = this;\n\t}\n};\n\n//// Retreive Column Information ////\n\n//return column header element\nColumn.prototype.getElement = function () {\n\treturn this.element;\n};\n\n//return colunm group element\nColumn.prototype.getGroupElement = function () {\n\treturn this.groupElement;\n};\n\n//return field name\nColumn.prototype.getField = function () {\n\treturn this.field;\n};\n\n//return the first column in a group\nColumn.prototype.getFirstColumn = function () {\n\tif (!this.isGroup) {\n\t\treturn this;\n\t} else {\n\t\tif (this.columns.length) {\n\t\t\treturn this.columns[0].getFirstColumn();\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n};\n\n//return the last column in a group\nColumn.prototype.getLastColumn = function () {\n\tif (!this.isGroup) {\n\t\treturn this;\n\t} else {\n\t\tif (this.columns.length) {\n\t\t\treturn this.columns[this.columns.length - 1].getLastColumn();\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n};\n\n//return all columns in a group\nColumn.prototype.getColumns = function () {\n\treturn this.columns;\n};\n\n//return all columns in a group\nColumn.prototype.getCells = function () {\n\treturn this.cells;\n};\n\n//retreive the top column in a group of columns\nColumn.prototype.getTopColumn = function () {\n\tif (this.parent.isGroup) {\n\t\treturn this.parent.getTopColumn();\n\t} else {\n\t\treturn this;\n\t}\n};\n\n//return column definition object\nColumn.prototype.getDefinition = function (updateBranches) {\n\tvar colDefs = [];\n\n\tif (this.isGroup && updateBranches) {\n\t\tthis.columns.forEach(function (column) {\n\t\t\tcolDefs.push(column.getDefinition(true));\n\t\t});\n\n\t\tthis.definition.columns = colDefs;\n\t}\n\n\treturn this.definition;\n};\n\n//////////////////// Actions ////////////////////\n\nColumn.prototype.checkColumnVisibility = function () {\n\tvar visible = false;\n\n\tthis.columns.forEach(function (column) {\n\t\tif (column.visible) {\n\t\t\tvisible = true;\n\t\t}\n\t});\n\n\tif (visible) {\n\t\tthis.show();\n\t\tthis.parent.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n\t} else {\n\t\tthis.hide();\n\t}\n};\n\n//show column\nColumn.prototype.show = function (silent, responsiveToggle) {\n\tif (!this.visible) {\n\t\tthis.visible = true;\n\n\t\tthis.element.style.display = \"\";\n\n\t\tif (this.parent.isGroup) {\n\t\t\tthis.parent.checkColumnVisibility();\n\t\t}\n\n\t\tthis.cells.forEach(function (cell) {\n\t\t\tcell.show();\n\t\t});\n\n\t\tif (!this.isGroup && this.width === null) {\n\t\t\tthis.reinitializeWidth();\n\t\t}\n\n\t\tthis.table.columnManager._verticalAlignHeaders();\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\t\t\tthis.table.modules.persistence.save(\"columns\");\n\t\t}\n\n\t\tif (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\tthis.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n\t\t}\n\n\t\tif (!silent) {\n\t\t\tthis.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), true);\n\t\t}\n\n\t\tif (this.parent.isGroup) {\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\t}\n};\n\n//hide column\nColumn.prototype.hide = function (silent, responsiveToggle) {\n\tif (this.visible) {\n\t\tthis.visible = false;\n\n\t\tthis.element.style.display = \"none\";\n\n\t\tthis.table.columnManager._verticalAlignHeaders();\n\n\t\tif (this.parent.isGroup) {\n\t\t\tthis.parent.checkColumnVisibility();\n\t\t}\n\n\t\tthis.cells.forEach(function (cell) {\n\t\t\tcell.hide();\n\t\t});\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\t\t\tthis.table.modules.persistence.save(\"columns\");\n\t\t}\n\n\t\tif (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\tthis.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n\t\t}\n\n\t\tif (!silent) {\n\t\t\tthis.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n\t\t}\n\n\t\tif (this.parent.isGroup) {\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\t}\n};\n\nColumn.prototype.matchChildWidths = function () {\n\tvar childWidth = 0;\n\n\tif (this.contentElement && this.columns.length) {\n\t\tthis.columns.forEach(function (column) {\n\t\t\tif (column.visible) {\n\t\t\t\tchildWidth += column.getWidth();\n\t\t\t}\n\t\t});\n\n\t\tthis.contentElement.style.maxWidth = childWidth - 1 + \"px\";\n\n\t\tif (this.parent.isGroup) {\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\t}\n};\n\nColumn.prototype.setWidth = function (width) {\n\tthis.widthFixed = true;\n\tthis.setWidthActual(width);\n};\n\nColumn.prototype.setWidthActual = function (width) {\n\tif (isNaN(width)) {\n\t\twidth = Math.floor(this.table.element.clientWidth / 100 * parseInt(width));\n\t}\n\n\twidth = Math.max(this.minWidth, width);\n\n\tthis.width = width;\n\tthis.widthStyled = width ? width + \"px\" : \"\";\n\n\tthis.element.style.width = this.widthStyled;\n\n\tif (!this.isGroup) {\n\t\tthis.cells.forEach(function (cell) {\n\t\t\tcell.setWidth();\n\t\t});\n\t}\n\n\tif (this.parent.isGroup) {\n\t\tthis.parent.matchChildWidths();\n\t}\n\n\t//set resizable handles\n\tif (this.table.modExists(\"frozenColumns\")) {\n\t\tthis.table.modules.frozenColumns.layout();\n\t}\n};\n\nColumn.prototype.checkCellHeights = function () {\n\tvar rows = [];\n\n\tthis.cells.forEach(function (cell) {\n\t\tif (cell.row.heightInitialized) {\n\t\t\tif (cell.row.getElement().offsetParent !== null) {\n\t\t\t\trows.push(cell.row);\n\t\t\t\tcell.row.clearCellHeight();\n\t\t\t} else {\n\t\t\t\tcell.row.heightInitialized = false;\n\t\t\t}\n\t\t}\n\t});\n\n\trows.forEach(function (row) {\n\t\trow.calcHeight();\n\t});\n\n\trows.forEach(function (row) {\n\t\trow.setCellHeight();\n\t});\n};\n\nColumn.prototype.getWidth = function () {\n\tvar width = 0;\n\n\tif (this.isGroup) {\n\t\tthis.columns.forEach(function (column) {\n\t\t\tif (column.visible) {\n\t\t\t\twidth += column.getWidth();\n\t\t\t}\n\t\t});\n\t} else {\n\t\twidth = this.width;\n\t}\n\n\treturn width;\n};\n\nColumn.prototype.getHeight = function () {\n\treturn this.element.offsetHeight;\n};\n\nColumn.prototype.setMinWidth = function (minWidth) {\n\tthis.minWidth = minWidth;\n\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n\n\tthis.element.style.minWidth = this.minWidthStyled;\n\n\tthis.cells.forEach(function (cell) {\n\t\tcell.setMinWidth();\n\t});\n};\n\nColumn.prototype.delete = function () {\n\tvar _this9 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\n\t\tif (_this9.isGroup) {\n\t\t\t_this9.columns.forEach(function (column) {\n\t\t\t\tcolumn.delete();\n\t\t\t});\n\t\t}\n\n\t\t//cancel edit if column is currently being edited\n\t\tif (_this9.table.modExists(\"edit\")) {\n\t\t\tif (_this9.table.modules.edit.currentCell.column === _this9) {\n\t\t\t\t_this9.table.modules.edit.cancelEdit();\n\t\t\t}\n\t\t}\n\n\t\tvar cellCount = _this9.cells.length;\n\n\t\tfor (var _i3 = 0; _i3 < cellCount; _i3++) {\n\t\t\t_this9.cells[0].delete();\n\t\t}\n\n\t\tif (_this9.element.parentNode) {\n\t\t\t_this9.element.parentNode.removeChild(_this9.element);\n\t\t}\n\n\t\t_this9.element = false;\n\t\t_this9.contentElement = false;\n\t\t_this9.titleElement = false;\n\t\t_this9.groupElement = false;\n\n\t\t_this9.table.columnManager.deregisterColumn(_this9);\n\n\t\tif (_this9.table.options.virtualDomHoz) {\n\t\t\t_this9.table.vdomHoz.reinitialize(true);\n\t\t}\n\n\t\tresolve();\n\t});\n};\n\nColumn.prototype.columnRendered = function () {\n\tif (this.titleFormatterRendered) {\n\t\tthis.titleFormatterRendered();\n\t}\n};\n\nColumn.prototype.validate = function () {\n\tvar invalid = [];\n\n\tthis.cells.forEach(function (cell) {\n\t\tif (!cell.validate()) {\n\t\t\tinvalid.push(cell.getComponent());\n\t\t}\n\t});\n\n\treturn invalid.length ? invalid : true;\n};\n\n//////////////// Cell Management /////////////////\n\n//generate cell for this column\nColumn.prototype.generateCell = function (row) {\n\tvar self = this;\n\n\tvar cell = new Cell(self, row);\n\n\tthis.cells.push(cell);\n\n\treturn cell;\n};\n\nColumn.prototype.nextColumn = function () {\n\tvar index = this.table.columnManager.findColumnIndex(this);\n\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\n};\n\nColumn.prototype._nextVisibleColumn = function (index) {\n\tvar column = this.table.columnManager.getColumnByIndex(index);\n\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n};\n\nColumn.prototype.prevColumn = function () {\n\tvar index = this.table.columnManager.findColumnIndex(this);\n\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\n};\n\nColumn.prototype._prevVisibleColumn = function (index) {\n\tvar column = this.table.columnManager.getColumnByIndex(index);\n\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n};\n\nColumn.prototype.reinitializeWidth = function (force) {\n\tthis.widthFixed = false;\n\n\t//set width if present\n\tif (typeof this.definition.width !== \"undefined\" && !force) {\n\t\tthis.setWidth(this.definition.width);\n\t}\n\n\t//hide header filters to prevent them altering column width\n\tif (this.table.modExists(\"filter\")) {\n\t\tthis.table.modules.filter.hideHeaderFilterElements();\n\t}\n\n\tthis.fitToData();\n\n\t//show header filters again after layout is complete\n\tif (this.table.modExists(\"filter\")) {\n\t\tthis.table.modules.filter.showHeaderFilterElements();\n\t}\n};\n\n//set column width to maximum cell width\nColumn.prototype.fitToData = function () {\n\tvar self = this;\n\n\tif (!this.widthFixed) {\n\t\tthis.element.style.width = \"\";\n\n\t\tself.cells.forEach(function (cell) {\n\t\t\tcell.clearWidth();\n\t\t});\n\t}\n\n\tvar maxWidth = this.element.offsetWidth;\n\n\tif (!self.width || !this.widthFixed) {\n\t\tself.cells.forEach(function (cell) {\n\t\t\tvar width = cell.getWidth();\n\n\t\t\tif (width > maxWidth) {\n\t\t\t\tmaxWidth = width;\n\t\t\t}\n\t\t});\n\n\t\tif (maxWidth) {\n\t\t\tself.setWidthActual(maxWidth + 1);\n\t\t}\n\t}\n};\n\nColumn.prototype.updateDefinition = function (updates) {\n\tvar _this10 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar definition;\n\n\t\tif (!_this10.isGroup) {\n\t\t\tdefinition = Object.assign({}, _this10.getDefinition());\n\t\t\tdefinition = Object.assign(definition, updates);\n\n\t\t\t_this10.table.columnManager.addColumn(definition, false, _this10).then(function (column) {\n\n\t\t\t\tif (definition.field == _this10.field) {\n\t\t\t\t\t_this10.field = false; //cleair field name to prevent deletion of duplicate column from arrays\n\t\t\t\t}\n\n\t\t\t\t_this10.delete().then(function () {\n\t\t\t\t\tresolve(column.getComponent());\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t}).catch(function (err) {\n\t\t\t\treject(err);\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t\treject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t}\n\t});\n};\n\nColumn.prototype.deleteCell = function (cell) {\n\tvar index = this.cells.indexOf(cell);\n\n\tif (index > -1) {\n\t\tthis.cells.splice(index, 1);\n\t}\n};\n\nColumn.prototype.defaultOptionList = [\"title\", \"field\", \"columns\", \"visible\", \"align\", \"hozAlign\", \"vertAlign\", \"width\", \"minWidth\", \"widthGrow\", \"widthShrink\", \"resizable\", \"frozen\", \"responsive\", \"tooltip\", \"cssClass\", \"rowHandle\", \"hideInHtml\", \"print\", \"htmlOutput\", \"sorter\", \"sorterParams\", \"formatter\", \"formatterParams\", \"variableHeight\", \"editable\", \"editor\", \"editorParams\", \"validator\", \"mutator\", \"mutatorParams\", \"mutatorData\", \"mutatorDataParams\", \"mutatorEdit\", \"mutatorEditParams\", \"mutatorClipboard\", \"mutatorClipboardParams\", \"accessor\", \"accessorParams\", \"accessorData\", \"accessorDataParams\", \"accessorDownload\", \"accessorDownloadParams\", \"accessorClipboard\", \"accessorClipboardParams\", \"accessorPrint\", \"accessorPrintParams\", \"accessorHtmlOutput\", \"accessorHtmlOutputParams\", \"clipboard\", \"download\", \"downloadTitle\", \"topCalc\", \"topCalcParams\", \"topCalcFormatter\", \"topCalcFormatterParams\", \"bottomCalc\", \"bottomCalcParams\", \"bottomCalcFormatter\", \"bottomCalcFormatterParams\", \"cellClick\", \"cellDblClick\", \"cellContext\", \"cellTap\", \"cellDblTap\", \"cellTapHold\", \"cellMouseEnter\", \"cellMouseLeave\", \"cellMouseOver\", \"cellMouseOut\", \"cellMouseMove\", \"cellEditing\", \"cellEdited\", \"cellEditCancelled\", \"headerSort\", \"headerSortStartingDir\", \"headerSortTristate\", \"headerClick\", \"headerDblClick\", \"headerContext\", \"headerTap\", \"headerDblTap\", \"headerTapHold\", \"headerTooltip\", \"headerVertical\", \"headerHozAlign\", \"editableTitle\", \"titleFormatter\", \"titleFormatterParams\", \"headerFilter\", \"headerFilterPlaceholder\", \"headerFilterParams\", \"headerFilterEmptyCheck\", \"headerFilterFunc\", \"headerFilterFuncParams\", \"headerFilterLiveFilter\", \"print\", \"headerContextMenu\", \"headerMenu\", \"contextMenu\",\n// \"headerClickMenu\",\n\"clickMenu\", \"formatterPrint\", \"formatterPrintParams\", \"formatterClipboard\", \"formatterClipboardParams\", \"formatterHtmlOutput\", \"formatterHtmlOutputParams\", \"titlePrint\", \"titleClipboard\", \"titleHtmlOutput\", \"titleDownload\"];\n\n//////////////// Event Bindings /////////////////\n\n//////////////// Object Generation /////////////////\nColumn.prototype.getComponent = function () {\n\tif (!this.component) {\n\t\tthis.component = new ColumnComponent(this);\n\t}\n\n\treturn this.component;\n};\n\nvar RowManager = function RowManager(table) {\n\n\tthis.table = table;\n\tthis.element = this.createHolderElement(); //containing element\n\tthis.tableElement = this.createTableElement(); //table element\n\tthis.heightFixer = this.createTableElement(); //table element\n\tthis.columnManager = null; //hold column manager object\n\tthis.height = 0; //hold height of table element\n\n\tthis.firstRender = false; //handle first render\n\tthis.renderMode = \"virtual\"; //current rendering mode\n\tthis.fixedHeight = false; //current rendering mode\n\n\tthis.rows = []; //hold row data objects\n\tthis.activeRows = []; //rows currently available to on display in the table\n\tthis.activeRowsCount = 0; //count of active rows\n\n\tthis.displayRows = []; //rows currently on display in the table\n\tthis.displayRowsCount = 0; //count of display rows\n\n\tthis.scrollTop = 0;\n\tthis.scrollLeft = 0;\n\n\tthis.vDomRowHeight = 20; //approximation of row heights for padding\n\n\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\tthis.vDomBottom = 0; //hold possition for last rendered row in the virtual DOM\n\n\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\n\tthis.rowNumColumn = false; //hold column component for row number column\n\n\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations becore continuing\n\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\tthis.redrawBlockRederInPosition = false; //store latest redraw function calls for when redraw is needed\n};\n\n//////////////// Setup Functions /////////////////\n\nRowManager.prototype.createHolderElement = function () {\n\tvar el = document.createElement(\"div\");\n\n\tel.classList.add(\"tabulator-tableHolder\");\n\tel.setAttribute(\"tabindex\", 0);\n\n\treturn el;\n};\n\nRowManager.prototype.createTableElement = function () {\n\tvar el = document.createElement(\"div\");\n\n\tel.classList.add(\"tabulator-table\");\n\n\treturn el;\n};\n\n//return containing element\nRowManager.prototype.getElement = function () {\n\treturn this.element;\n};\n\n//return table element\nRowManager.prototype.getTableElement = function () {\n\treturn this.tableElement;\n};\n\n//return position of row in table\nRowManager.prototype.getRowPosition = function (row, active) {\n\tif (active) {\n\t\treturn this.activeRows.indexOf(row);\n\t} else {\n\t\treturn this.rows.indexOf(row);\n\t}\n};\n\n//link to column manager\nRowManager.prototype.setColumnManager = function (manager) {\n\tthis.columnManager = manager;\n};\n\nRowManager.prototype.initialize = function () {\n\tvar self = this;\n\n\tself.setRenderMode();\n\n\t//initialize manager\n\tself.element.appendChild(self.tableElement);\n\n\tself.firstRender = true;\n\n\t//scroll header along with table body\n\tself.element.addEventListener(\"scroll\", function () {\n\t\tvar left = self.element.scrollLeft;\n\n\t\t//handle horizontal scrolling\n\t\tif (self.scrollLeft != left) {\n\t\t\tself.columnManager.scrollHorizontal(left);\n\n\t\t\tif (self.table.options.groupBy) {\n\t\t\t\tself.table.modules.groupRows.scrollHeaders(left);\n\t\t\t}\n\n\t\t\tif (self.table.modExists(\"columnCalcs\")) {\n\t\t\t\tself.table.modules.columnCalcs.scrollHorizontal(left);\n\t\t\t}\n\n\t\t\tself.table.options.scrollHorizontal(left);\n\t\t}\n\n\t\tself.scrollLeft = left;\n\t});\n\n\t//handle virtual dom scrolling\n\tif (this.renderMode === \"virtual\") {\n\n\t\tself.element.addEventListener(\"scroll\", function () {\n\t\t\tvar top = self.element.scrollTop;\n\t\t\tvar dir = self.scrollTop > top;\n\n\t\t\t//handle verical scrolling\n\t\t\tif (self.scrollTop != top) {\n\t\t\t\tself.scrollTop = top;\n\t\t\t\tself.scrollVertical(dir);\n\n\t\t\t\tif (self.table.options.ajaxProgressiveLoad == \"scroll\") {\n\t\t\t\t\tself.table.modules.ajax.nextPage(self.element.scrollHeight - self.element.clientHeight - top);\n\t\t\t\t}\n\n\t\t\t\tself.table.options.scrollVertical(top);\n\t\t\t} else {\n\t\t\t\tself.scrollTop = top;\n\t\t\t}\n\t\t});\n\t}\n};\n\n////////////////// Row Manipulation //////////////////\n\nRowManager.prototype.findRow = function (subject) {\n\tvar self = this;\n\n\tif ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n\n\t\tif (subject instanceof Row) {\n\t\t\t//subject is row element\n\t\t\treturn subject;\n\t\t} else if (subject instanceof RowComponent) {\n\t\t\t//subject is public row component\n\t\t\treturn subject._getSelf() || false;\n\t\t} else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n\t\t\t//subject is a HTML element of the row\n\t\t\tvar match = self.rows.find(function (row) {\n\t\t\t\treturn row.element === subject;\n\t\t\t});\n\n\t\t\treturn match || false;\n\t\t}\n\t} else if (typeof subject == \"undefined\" || subject === null) {\n\t\treturn false;\n\t} else {\n\t\t//subject should be treated as the index of the row\n\t\tvar _match = self.rows.find(function (row) {\n\t\t\treturn row.data[self.table.options.index] == subject;\n\t\t});\n\n\t\treturn _match || false;\n\t}\n\n\t//catch all for any other type of input\n\n\treturn false;\n};\n\nRowManager.prototype.getRowFromDataObject = function (data) {\n\tvar match = this.rows.find(function (row) {\n\t\treturn row.data === data;\n\t});\n\n\treturn match || false;\n};\n\nRowManager.prototype.getRowFromPosition = function (position, active) {\n\tif (active) {\n\t\treturn this.activeRows[position];\n\t} else {\n\t\treturn this.rows[position];\n\t}\n};\n\nRowManager.prototype.scrollToRow = function (row, position, ifVisible) {\n\tvar _this11 = this;\n\n\tvar rowIndex = this.getDisplayRows().indexOf(row),\n\t    rowEl = row.getElement(),\n\t    rowTop,\n\t    offset = 0;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tif (rowIndex > -1) {\n\n\t\t\tif (typeof position === \"undefined\") {\n\t\t\t\tposition = _this11.table.options.scrollToRowPosition;\n\t\t\t}\n\n\t\t\tif (typeof ifVisible === \"undefined\") {\n\t\t\t\tifVisible = _this11.table.options.scrollToRowIfVisible;\n\t\t\t}\n\n\t\t\tif (position === \"nearest\") {\n\t\t\t\tswitch (_this11.renderMode) {\n\t\t\t\t\tcase \"classic\":\n\t\t\t\t\t\trowTop = Tabulator.prototype.helpers.elOffset(rowEl).top;\n\t\t\t\t\t\tposition = Math.abs(_this11.element.scrollTop - rowTop) > Math.abs(_this11.element.scrollTop + _this11.element.clientHeight - rowTop) ? \"bottom\" : \"top\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"virtual\":\n\t\t\t\t\t\tposition = Math.abs(_this11.vDomTop - rowIndex) > Math.abs(_this11.vDomBottom - rowIndex) ? \"bottom\" : \"top\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//check row visibility\n\t\t\tif (!ifVisible) {\n\t\t\t\tif (Tabulator.prototype.helpers.elVisible(rowEl)) {\n\t\t\t\t\toffset = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this11.element).top;\n\n\t\t\t\t\tif (offset > 0 && offset < _this11.element.clientHeight - rowEl.offsetHeight) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//scroll to row\n\t\t\tswitch (_this11.renderMode) {\n\t\t\t\tcase \"classic\":\n\t\t\t\t\t_this11.element.scrollTop = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this11.element).top + _this11.element.scrollTop;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"virtual\":\n\t\t\t\t\t_this11._virtualRenderFill(rowIndex, true);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t//align to correct position\n\t\t\tswitch (position) {\n\t\t\t\tcase \"middle\":\n\t\t\t\tcase \"center\":\n\n\t\t\t\t\tif (_this11.element.scrollHeight - _this11.element.scrollTop == _this11.element.clientHeight) {\n\t\t\t\t\t\t_this11.element.scrollTop = _this11.element.scrollTop + (rowEl.offsetTop - _this11.element.scrollTop) - (_this11.element.scrollHeight - rowEl.offsetTop) / 2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this11.element.scrollTop = _this11.element.scrollTop - _this11.element.clientHeight / 2;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"bottom\":\n\n\t\t\t\t\tif (_this11.element.scrollHeight - _this11.element.scrollTop == _this11.element.clientHeight) {\n\t\t\t\t\t\t_this11.element.scrollTop = _this11.element.scrollTop - (_this11.element.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this11.element.scrollTop = _this11.element.scrollTop - _this11.element.clientHeight + rowEl.offsetHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tresolve();\n\t\t} else {\n\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\n\t\t\treject(\"Scroll Error - Row not visible\");\n\t\t}\n\t});\n};\n\n////////////////// Data Handling //////////////////\n\nRowManager.prototype.setData = function (data, renderInPosition, columnsChanged) {\n\tvar _this12 = this;\n\n\tvar self = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tif (renderInPosition && _this12.getDisplayRows().length) {\n\t\t\tif (self.table.options.pagination) {\n\t\t\t\tself._setDataActual(data, true);\n\t\t\t} else {\n\t\t\t\t_this12.reRenderInPosition(function () {\n\t\t\t\t\tself._setDataActual(data);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tif (_this12.table.options.autoColumns && columnsChanged) {\n\t\t\t\t_this12.table.columnManager.generateColumnsFromRowData(data);\n\t\t\t}\n\t\t\t_this12.resetScroll();\n\n\t\t\t_this12._setDataActual(data);\n\t\t}\n\n\t\tresolve();\n\t});\n};\n\nRowManager.prototype._setDataActual = function (data, renderInPosition) {\n\tvar self = this;\n\n\tself.table.options.dataLoading.call(this.table, data);\n\n\tthis._wipeElements();\n\n\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\t\tthis.table.modules.history.clear();\n\t}\n\n\tif (Array.isArray(data)) {\n\n\t\tif (this.table.modExists(\"selectRow\")) {\n\t\t\tthis.table.modules.selectRow.clearSelectionData();\n\t\t}\n\n\t\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n\t\t\tthis.table.modules.reactiveData.watchData(data);\n\t\t}\n\n\t\tdata.forEach(function (def, i) {\n\t\t\tif (def && (typeof def === 'undefined' ? 'undefined' : _typeof(def)) === \"object\") {\n\t\t\t\tvar row = new Row(def, self);\n\t\t\t\tself.rows.push(row);\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n\t\t\t}\n\t\t});\n\n\t\tself.refreshActiveData(false, false, renderInPosition);\n\n\t\tself.table.options.dataLoaded.call(this.table, data);\n\t} else {\n\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data === 'undefined' ? 'undefined' : _typeof(data), \"\\nData:     \", data);\n\t}\n};\n\nRowManager.prototype._wipeElements = function () {\n\tthis.rows.forEach(function (row) {\n\t\trow.wipe();\n\t});\n\n\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\tthis.table.modules.groupRows.wipe();\n\t}\n\n\tthis.rows = [];\n\tthis.activeRows = [];\n\tthis.activeRowsCount = 0;\n\tthis.displayRows = [];\n\tthis.displayRowsCount = 0;\n\n\tthis.adjustTableSize();\n};\n\nRowManager.prototype.deleteRow = function (row, blockRedraw) {\n\tvar allIndex = this.rows.indexOf(row),\n\t    activeIndex = this.activeRows.indexOf(row);\n\n\tif (activeIndex > -1) {\n\t\tthis.activeRows.splice(activeIndex, 1);\n\t}\n\n\tif (allIndex > -1) {\n\t\tthis.rows.splice(allIndex, 1);\n\t}\n\n\tthis.setActiveRows(this.activeRows);\n\n\tthis.displayRowIterator(function (rows) {\n\t\tvar displayIndex = rows.indexOf(row);\n\n\t\tif (displayIndex > -1) {\n\t\t\trows.splice(displayIndex, 1);\n\t\t}\n\t});\n\n\tif (!blockRedraw) {\n\t\tthis.reRenderInPosition();\n\t}\n\n\tthis.regenerateRowNumbers();\n\n\tthis.table.options.rowDeleted.call(this.table, row.getComponent());\n\n\tif (this.table.options.dataChanged) {\n\t\tthis.table.options.dataChanged.call(this.table, this.getData());\n\t}\n\n\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t} else if (this.table.options.pagination && this.table.modExists(\"page\")) {\n\t\tthis.refreshActiveData(false, false, true);\n\t} else {\n\t\tif (this.table.options.pagination && this.table.modExists(\"page\")) {\n\t\t\tthis.refreshActiveData(\"page\");\n\t\t}\n\t}\n};\n\nRowManager.prototype.addRow = function (data, pos, index, blockRedraw) {\n\n\tvar row = this.addRowActual(data, pos, index, blockRedraw);\n\n\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\t\tthis.table.modules.history.action(\"rowAdd\", row, { data: data, pos: pos, index: index });\n\t}\n\n\treturn row;\n};\n\n//add multiple rows\nRowManager.prototype.addRows = function (data, pos, index) {\n\tvar _this13 = this;\n\n\tvar self = this,\n\t    length = 0,\n\t    rows = [];\n\n\treturn new Promise(function (resolve, reject) {\n\t\tpos = _this13.findAddRowPos(pos);\n\n\t\tif (!Array.isArray(data)) {\n\t\t\tdata = [data];\n\t\t}\n\n\t\tlength = data.length - 1;\n\n\t\tif (typeof index == \"undefined\" && pos || typeof index !== \"undefined\" && !pos) {\n\t\t\tdata.reverse();\n\t\t}\n\n\t\tdata.forEach(function (item, i) {\n\t\t\tvar row = self.addRow(item, pos, index, true);\n\t\t\trows.push(row);\n\t\t});\n\n\t\tif (_this13.table.options.groupBy && _this13.table.modExists(\"groupRows\")) {\n\t\t\t_this13.table.modules.groupRows.updateGroupRows(true);\n\t\t} else if (_this13.table.options.pagination && _this13.table.modExists(\"page\")) {\n\t\t\t_this13.refreshActiveData(false, false, true);\n\t\t} else {\n\t\t\t_this13.reRenderInPosition();\n\t\t}\n\n\t\t//recalc column calculations if present\n\t\tif (_this13.table.modExists(\"columnCalcs\")) {\n\t\t\t_this13.table.modules.columnCalcs.recalc(_this13.table.rowManager.activeRows);\n\t\t}\n\n\t\t_this13.regenerateRowNumbers();\n\t\tresolve(rows);\n\t});\n};\n\nRowManager.prototype.findAddRowPos = function (pos) {\n\tif (typeof pos === \"undefined\") {\n\t\tpos = this.table.options.addRowPos;\n\t}\n\n\tif (pos === \"pos\") {\n\t\tpos = true;\n\t}\n\n\tif (pos === \"bottom\") {\n\t\tpos = false;\n\t}\n\n\treturn pos;\n};\n\nRowManager.prototype.addRowActual = function (data, pos, index, blockRedraw) {\n\tvar row = data instanceof Row ? data : new Row(data || {}, this),\n\t    top = this.findAddRowPos(pos),\n\t    allIndex = -1,\n\t    activeIndex,\n\t    dispRows;\n\n\tif (!index && this.table.options.pagination && this.table.options.paginationAddRow == \"page\") {\n\t\tdispRows = this.getDisplayRows();\n\n\t\tif (top) {\n\t\t\tif (dispRows.length) {\n\t\t\t\tindex = dispRows[0];\n\t\t\t} else {\n\t\t\t\tif (this.activeRows.length) {\n\t\t\t\t\tindex = this.activeRows[this.activeRows.length - 1];\n\t\t\t\t\ttop = false;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (dispRows.length) {\n\t\t\t\tindex = dispRows[dispRows.length - 1];\n\t\t\t\ttop = dispRows.length < this.table.modules.page.getPageSize() ? false : true;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (typeof index !== \"undefined\") {\n\t\tindex = this.findRow(index);\n\t}\n\n\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\tthis.table.modules.groupRows.assignRowToGroup(row);\n\n\t\tvar groupRows = row.getGroup().rows;\n\n\t\tif (groupRows.length > 1) {\n\n\t\t\tif (!index || index && groupRows.indexOf(index) == -1) {\n\t\t\t\tif (top) {\n\t\t\t\t\tif (groupRows[0] !== row) {\n\t\t\t\t\t\tindex = groupRows[0];\n\t\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (groupRows[groupRows.length - 1] !== row) {\n\t\t\t\t\t\tindex = groupRows[groupRows.length - 1];\n\t\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (index) {\n\t\tallIndex = this.rows.indexOf(index);\n\t}\n\n\tif (index && allIndex > -1) {\n\t\tactiveIndex = this.activeRows.indexOf(index);\n\n\t\tthis.displayRowIterator(function (rows) {\n\t\t\tvar displayIndex = rows.indexOf(index);\n\n\t\t\tif (displayIndex > -1) {\n\t\t\t\trows.splice(top ? displayIndex : displayIndex + 1, 0, row);\n\t\t\t}\n\t\t});\n\n\t\tif (activeIndex > -1) {\n\t\t\tthis.activeRows.splice(top ? activeIndex : activeIndex + 1, 0, row);\n\t\t}\n\n\t\tthis.rows.splice(top ? allIndex : allIndex + 1, 0, row);\n\t} else {\n\n\t\tif (top) {\n\n\t\t\tthis.displayRowIterator(function (rows) {\n\t\t\t\trows.unshift(row);\n\t\t\t});\n\n\t\t\tthis.activeRows.unshift(row);\n\t\t\tthis.rows.unshift(row);\n\t\t} else {\n\t\t\tthis.displayRowIterator(function (rows) {\n\t\t\t\trows.push(row);\n\t\t\t});\n\n\t\t\tthis.activeRows.push(row);\n\t\t\tthis.rows.push(row);\n\t\t}\n\t}\n\n\tthis.setActiveRows(this.activeRows);\n\n\tthis.table.options.rowAdded.call(this.table, row.getComponent());\n\n\tif (this.table.options.dataChanged) {\n\t\tthis.table.options.dataChanged.call(this.table, this.getData());\n\t}\n\n\tif (!blockRedraw) {\n\t\tthis.reRenderInPosition();\n\t}\n\n\treturn row;\n};\n\nRowManager.prototype.moveRow = function (from, to, after) {\n\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\t\tthis.table.modules.history.action(\"rowMove\", from, { posFrom: this.getRowPosition(from), posTo: this.getRowPosition(to), to: to, after: after });\n\t}\n\n\tthis.moveRowActual(from, to, after);\n\n\tthis.regenerateRowNumbers();\n\n\tthis.table.options.rowMoved.call(this.table, from.getComponent());\n};\n\nRowManager.prototype.moveRowActual = function (from, to, after) {\n\tvar _this14 = this;\n\n\tthis._moveRowInArray(this.rows, from, to, after);\n\tthis._moveRowInArray(this.activeRows, from, to, after);\n\n\tthis.displayRowIterator(function (rows) {\n\t\t_this14._moveRowInArray(rows, from, to, after);\n\t});\n\n\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\tif (!after && to instanceof Group) {\n\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\n\t\t}\n\n\t\tvar toGroup = to.getGroup();\n\t\tvar fromGroup = from.getGroup();\n\n\t\tif (toGroup === fromGroup) {\n\t\t\tthis._moveRowInArray(toGroup.rows, from, to, after);\n\t\t} else {\n\t\t\tif (fromGroup) {\n\t\t\t\tfromGroup.removeRow(from);\n\t\t\t}\n\n\t\t\ttoGroup.insertRow(from, to, after);\n\t\t}\n\t}\n};\n\nRowManager.prototype._moveRowInArray = function (rows, from, to, after) {\n\tvar fromIndex, toIndex, start, end;\n\n\tif (from !== to) {\n\n\t\tfromIndex = rows.indexOf(from);\n\n\t\tif (fromIndex > -1) {\n\n\t\t\trows.splice(fromIndex, 1);\n\n\t\t\ttoIndex = rows.indexOf(to);\n\n\t\t\tif (toIndex > -1) {\n\n\t\t\t\tif (after) {\n\t\t\t\t\trows.splice(toIndex + 1, 0, from);\n\t\t\t\t} else {\n\t\t\t\t\trows.splice(toIndex, 0, from);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\trows.splice(fromIndex, 0, from);\n\t\t\t}\n\t\t}\n\n\t\t//restyle rows\n\t\tif (rows === this.getDisplayRows()) {\n\n\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\n\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex + 1;\n\n\t\t\tfor (var _i4 = start; _i4 <= end; _i4++) {\n\t\t\t\tif (rows[_i4]) {\n\t\t\t\t\tthis.styleRow(rows[_i4], _i4);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nRowManager.prototype.clearData = function () {\n\tthis.setData([]);\n};\n\nRowManager.prototype.getRowIndex = function (row) {\n\treturn this.findRowIndex(row, this.rows);\n};\n\nRowManager.prototype.getDisplayRowIndex = function (row) {\n\tvar index = this.getDisplayRows().indexOf(row);\n\treturn index > -1 ? index : false;\n};\n\nRowManager.prototype.nextDisplayRow = function (row, rowOnly) {\n\tvar index = this.getDisplayRowIndex(row),\n\t    nextRow = false;\n\n\tif (index !== false && index < this.displayRowsCount - 1) {\n\t\tnextRow = this.getDisplayRows()[index + 1];\n\t}\n\n\tif (nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")) {\n\t\treturn this.nextDisplayRow(nextRow, rowOnly);\n\t}\n\n\treturn nextRow;\n};\n\nRowManager.prototype.prevDisplayRow = function (row, rowOnly) {\n\tvar index = this.getDisplayRowIndex(row),\n\t    prevRow = false;\n\n\tif (index) {\n\t\tprevRow = this.getDisplayRows()[index - 1];\n\t}\n\n\tif (rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")) {\n\t\treturn this.prevDisplayRow(prevRow, rowOnly);\n\t}\n\n\treturn prevRow;\n};\n\nRowManager.prototype.findRowIndex = function (row, list) {\n\tvar rowIndex;\n\n\trow = this.findRow(row);\n\n\tif (row) {\n\t\trowIndex = list.indexOf(row);\n\n\t\tif (rowIndex > -1) {\n\t\t\treturn rowIndex;\n\t\t}\n\t}\n\n\treturn false;\n};\n\nRowManager.prototype.getData = function (active, transform) {\n\tvar output = [],\n\t    rows = this.getRows(active);\n\n\trows.forEach(function (row) {\n\t\tif (row.type == \"row\") {\n\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t}\n\t});\n\n\treturn output;\n};\n\nRowManager.prototype.getComponents = function (active) {\n\tvar output = [],\n\t    rows = this.getRows(active);\n\n\trows.forEach(function (row) {\n\t\toutput.push(row.getComponent());\n\t});\n\n\treturn output;\n};\n\nRowManager.prototype.getDataCount = function (active) {\n\tvar rows = this.getRows(active);\n\n\treturn rows.length;\n};\n\nRowManager.prototype._genRemoteRequest = function () {\n\tvar _this15 = this;\n\n\tvar table = this.table,\n\t    options = table.options,\n\t    params = {};\n\n\tif (table.modExists(\"page\")) {\n\t\t//set sort data if defined\n\t\tif (options.ajaxSorting) {\n\t\t\tvar sorters = this.table.modules.sort.getSort();\n\n\t\t\tsorters.forEach(function (item) {\n\t\t\t\tdelete item.column;\n\t\t\t});\n\n\t\t\tparams[this.table.modules.page.paginationDataSentNames.sorters] = sorters;\n\t\t}\n\n\t\t//set filter data if defined\n\t\tif (options.ajaxFiltering) {\n\t\t\tvar filters = this.table.modules.filter.getFilters(true, true);\n\n\t\t\tparams[this.table.modules.page.paginationDataSentNames.filters] = filters;\n\t\t}\n\n\t\tthis.table.modules.ajax.setParams(params, true);\n\t}\n\n\ttable.modules.ajax.sendRequest().then(function (data) {\n\t\t_this15._setDataActual(data, true);\n\t}).catch(function (e) {});\n};\n\n//choose the path to refresh data after a filter update\nRowManager.prototype.filterRefresh = function () {\n\tvar table = this.table,\n\t    options = table.options,\n\t    left = this.scrollLeft;\n\n\tif (options.ajaxFiltering) {\n\t\tif (options.pagination == \"remote\" && table.modExists(\"page\")) {\n\t\t\ttable.modules.page.reset(true);\n\t\t\ttable.modules.page.setPage(1).then(function () {}).catch(function () {});\n\t\t} else if (options.ajaxProgressiveLoad) {\n\t\t\ttable.modules.ajax.loadData().then(function () {}).catch(function () {});\n\t\t} else {\n\t\t\t//assume data is url, make ajax call to url to get data\n\t\t\tthis._genRemoteRequest();\n\t\t}\n\t} else {\n\t\tthis.refreshActiveData(\"filter\");\n\t}\n\n\tthis.scrollHorizontal(left);\n};\n\n//choose the path to refresh data after a sorter update\nRowManager.prototype.sorterRefresh = function (loadOrignalData) {\n\tvar table = this.table,\n\t    options = this.table.options,\n\t    left = this.scrollLeft;\n\n\tif (options.ajaxSorting) {\n\t\tif ((options.pagination == \"remote\" || options.progressiveLoad) && table.modExists(\"page\")) {\n\t\t\ttable.modules.page.reset(true);\n\t\t\ttable.modules.page.setPage(1).then(function () {}).catch(function () {});\n\t\t} else if (options.ajaxProgressiveLoad) {\n\t\t\ttable.modules.ajax.loadData().then(function () {}).catch(function () {});\n\t\t} else {\n\t\t\t//assume data is url, make ajax call to url to get data\n\t\t\tthis._genRemoteRequest();\n\t\t}\n\t} else {\n\t\tthis.refreshActiveData(loadOrignalData ? \"filter\" : \"sort\");\n\t}\n\n\tthis.scrollHorizontal(left);\n};\n\nRowManager.prototype.scrollHorizontal = function (left) {\n\tthis.scrollLeft = left;\n\tthis.element.scrollLeft = left;\n\n\tif (this.table.options.groupBy) {\n\t\tthis.table.modules.groupRows.scrollHeaders(left);\n\t}\n\n\tif (this.table.modExists(\"columnCalcs\")) {\n\t\tthis.table.modules.columnCalcs.scrollHorizontal(left);\n\t}\n};\n\n//set active data set\nRowManager.prototype.refreshActiveData = function (stage, skipStage, renderInPosition) {\n\tvar self = this,\n\t    table = this.table,\n\t    cascadeOrder = [\"all\", \"filter\", \"sort\", \"display\", \"freeze\", \"group\", \"tree\", \"page\"],\n\t    displayIndex;\n\n\tif (this.redrawBlock) {\n\n\t\tif (!this.redrawBlockRestoreConfig || cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage)) {\n\t\t\tthis.redrawBlockRestoreConfig = {\n\t\t\t\tstage: stage,\n\t\t\t\tskipStage: skipStage,\n\t\t\t\trenderInPosition: renderInPosition\n\t\t\t};\n\t\t}\n\n\t\treturn;\n\t} else {\n\n\t\tif (self.table.modExists(\"edit\")) {\n\t\t\tself.table.modules.edit.cancelEdit();\n\t\t}\n\n\t\tif (!stage) {\n\t\t\tstage = \"all\";\n\t\t}\n\n\t\tif (table.options.selectable && !table.options.selectablePersistence && table.modExists(\"selectRow\")) {\n\t\t\ttable.modules.selectRow.deselectRows();\n\t\t}\n\n\t\t//cascade through data refresh stages\n\t\tswitch (stage) {\n\t\t\tcase \"all\":\n\n\t\t\tcase \"filter\":\n\t\t\t\tif (!skipStage) {\n\t\t\t\t\tif (table.modExists(\"filter\")) {\n\t\t\t\t\t\tself.setActiveRows(table.modules.filter.filter(self.rows));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.setActiveRows(self.rows.slice(0));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tskipStage = false;\n\t\t\t\t}\n\n\t\t\tcase \"sort\":\n\t\t\t\tif (!skipStage) {\n\t\t\t\t\tif (table.modExists(\"sort\")) {\n\t\t\t\t\t\ttable.modules.sort.sort(this.activeRows);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tskipStage = false;\n\t\t\t\t}\n\n\t\t\t\t//regenerate row numbers for row number formatter if in use\n\t\t\t\tthis.regenerateRowNumbers();\n\n\t\t\t//generic stage to allow for pipeline trigger after the data manipulation stage\n\t\t\tcase \"display\":\n\t\t\t\tthis.resetDisplayRows();\n\n\t\t\tcase \"freeze\":\n\t\t\t\tif (!skipStage) {\n\t\t\t\t\tif (this.table.modExists(\"frozenRows\")) {\n\t\t\t\t\t\tif (table.modules.frozenRows.isFrozen()) {\n\t\t\t\t\t\t\tif (!table.modules.frozenRows.getDisplayIndex()) {\n\t\t\t\t\t\t\t\ttable.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplayIndex = table.modules.frozenRows.getDisplayIndex();\n\n\t\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.frozenRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\t\tif (displayIndex !== true) {\n\t\t\t\t\t\t\t\ttable.modules.frozenRows.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tskipStage = false;\n\t\t\t\t}\n\n\t\t\tcase \"group\":\n\t\t\t\tif (!skipStage) {\n\t\t\t\t\tif (table.options.groupBy && table.modExists(\"groupRows\")) {\n\n\t\t\t\t\t\tif (!table.modules.groupRows.getDisplayIndex()) {\n\t\t\t\t\t\t\ttable.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdisplayIndex = table.modules.groupRows.getDisplayIndex();\n\n\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.groupRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\tif (displayIndex !== true) {\n\t\t\t\t\t\t\ttable.modules.groupRows.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tskipStage = false;\n\t\t\t\t}\n\n\t\t\tcase \"tree\":\n\n\t\t\t\tif (!skipStage) {\n\t\t\t\t\tif (table.options.dataTree && table.modExists(\"dataTree\")) {\n\t\t\t\t\t\tif (!table.modules.dataTree.getDisplayIndex()) {\n\t\t\t\t\t\t\ttable.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdisplayIndex = table.modules.dataTree.getDisplayIndex();\n\n\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.dataTree.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\tif (displayIndex !== true) {\n\t\t\t\t\t\t\ttable.modules.dataTree.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tskipStage = false;\n\t\t\t\t}\n\n\t\t\t\tif (table.options.pagination && table.modExists(\"page\") && !renderInPosition) {\n\t\t\t\t\tif (table.modules.page.getMode() == \"local\") {\n\t\t\t\t\t\ttable.modules.page.reset();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\tcase \"page\":\n\t\t\t\tif (!skipStage) {\n\t\t\t\t\tif (table.options.pagination && table.modExists(\"page\")) {\n\n\t\t\t\t\t\tif (!table.modules.page.getDisplayIndex()) {\n\t\t\t\t\t\t\ttable.modules.page.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdisplayIndex = table.modules.page.getDisplayIndex();\n\n\t\t\t\t\t\tif (table.modules.page.getMode() == \"local\") {\n\t\t\t\t\t\t\ttable.modules.page.setMaxRows(this.getDisplayRows(displayIndex - 1).length);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.page.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\tif (displayIndex !== true) {\n\t\t\t\t\t\t\ttable.modules.page.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tskipStage = false;\n\t\t\t\t}\n\t\t}\n\n\t\tif (Tabulator.prototype.helpers.elVisible(self.element)) {\n\t\t\tif (renderInPosition) {\n\t\t\t\tself.reRenderInPosition();\n\t\t\t} else {\n\n\t\t\t\tif (stage === \"all\" && this.table.options.virtualDomHoz) {\n\t\t\t\t\tthis.table.vdomHoz.dataChange();\n\t\t\t\t}\n\n\t\t\t\tself.renderTable();\n\n\t\t\t\tif (table.options.layoutColumnsOnNewData) {\n\t\t\t\t\tself.table.columnManager.redraw(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (table.modExists(\"columnCalcs\")) {\n\t\t\ttable.modules.columnCalcs.recalc(this.activeRows);\n\t\t}\n\t}\n};\n\n//regenerate row numbers for row number formatter if in use\nRowManager.prototype.regenerateRowNumbers = function () {\n\tvar _this16 = this;\n\n\tif (this.rowNumColumn) {\n\t\tthis.activeRows.forEach(function (row) {\n\t\t\tvar cell = row.getCell(_this16.rowNumColumn);\n\n\t\t\tif (cell) {\n\t\t\t\tcell._generateContents();\n\t\t\t}\n\t\t});\n\t}\n};\n\nRowManager.prototype.setActiveRows = function (activeRows) {\n\tthis.activeRows = activeRows;\n\tthis.activeRowsCount = this.activeRows.length;\n};\n\n//reset display rows array\nRowManager.prototype.resetDisplayRows = function () {\n\tthis.displayRows = [];\n\n\tthis.displayRows.push(this.activeRows.slice(0));\n\n\tthis.displayRowsCount = this.displayRows[0].length;\n\n\tif (this.table.modExists(\"frozenRows\")) {\n\t\tthis.table.modules.frozenRows.setDisplayIndex(0);\n\t}\n\n\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\tthis.table.modules.groupRows.setDisplayIndex(0);\n\t}\n\n\tif (this.table.options.pagination && this.table.modExists(\"page\")) {\n\t\tthis.table.modules.page.setDisplayIndex(0);\n\t}\n};\n\nRowManager.prototype.getNextDisplayIndex = function () {\n\treturn this.displayRows.length;\n};\n\n//set display row pipeline data\nRowManager.prototype.setDisplayRows = function (displayRows, index) {\n\n\tvar output = true;\n\n\tif (index && typeof this.displayRows[index] != \"undefined\") {\n\t\tthis.displayRows[index] = displayRows;\n\t\toutput = true;\n\t} else {\n\t\tthis.displayRows.push(displayRows);\n\t\toutput = index = this.displayRows.length - 1;\n\t}\n\n\tif (index == this.displayRows.length - 1) {\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n\t}\n\n\treturn output;\n};\n\nRowManager.prototype.getDisplayRows = function (index) {\n\tif (typeof index == \"undefined\") {\n\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length - 1] : [];\n\t} else {\n\t\treturn this.displayRows[index] || [];\n\t}\n};\n\nRowManager.prototype.getVisibleRows = function (viewable) {\n\tvar topEdge = this.element.scrollTop,\n\t    bottomEdge = this.element.clientHeight + topEdge,\n\t    topFound = false,\n\t    topRow = 0,\n\t    bottomRow = 0,\n\t    rows = this.getDisplayRows();\n\n\tif (viewable) {\n\n\t\tthis.getDisplayRows();\n\t\tfor (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n\t\t\tif (rows[i]) {\n\t\t\t\tif (!topFound) {\n\t\t\t\t\tif (topEdge - rows[i].getElement().offsetTop >= 0) {\n\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttopFound = true;\n\n\t\t\t\t\t\tif (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\ttopRow = this.vDomTop;\n\t\tbottomRow = this.vDomBottom;\n\t}\n\n\treturn rows.slice(topRow, bottomRow + 1);\n};\n\n//repeat action accross display rows\nRowManager.prototype.displayRowIterator = function (callback) {\n\tthis.displayRows.forEach(callback);\n\n\tthis.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n};\n\n//return only actual rows (not group headers etc)\nRowManager.prototype.getRows = function (active) {\n\tvar rows;\n\n\tswitch (active) {\n\t\tcase \"active\":\n\t\t\trows = this.activeRows;\n\t\t\tbreak;\n\n\t\tcase \"display\":\n\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\tbreak;\n\n\t\tcase \"visible\":\n\t\t\trows = this.getVisibleRows(true);\n\t\t\tbreak;\n\n\t\tcase \"selected\":\n\t\t\trows = this.table.modules.selectRow.selectedRows;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\trows = this.rows;\n\t}\n\n\treturn rows;\n};\n\n///////////////// Table Rendering /////////////////\n\n//trigger rerender of table in current position\nRowManager.prototype.reRenderInPosition = function (callback) {\n\tif (this.getRenderMode() == \"virtual\") {\n\n\t\tif (this.redrawBlock) {\n\t\t\tif (callback) {\n\t\t\t\tcallback();\n\t\t\t} else {\n\t\t\t\tthis.redrawBlockRederInPosition = true;\n\t\t\t}\n\t\t} else {\n\t\t\tvar scrollTop = this.element.scrollTop;\n\t\t\tvar topRow = false;\n\t\t\tvar topOffset = false;\n\n\t\t\tvar left = this.scrollLeft;\n\n\t\t\tvar rows = this.getDisplayRows();\n\n\t\t\tfor (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n\n\t\t\t\tif (rows[i]) {\n\t\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\n\n\t\t\t\t\tif (topOffset === false || Math.abs(diff) < topOffset) {\n\t\t\t\t\t\ttopOffset = diff;\n\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (callback) {\n\t\t\t\tcallback();\n\t\t\t}\n\n\t\t\tthis._virtualRenderFill(topRow === false ? this.displayRowsCount - 1 : topRow, true, topOffset || 0);\n\n\t\t\tthis.scrollHorizontal(left);\n\t\t}\n\t} else {\n\t\tthis.renderTable();\n\n\t\tif (callback) {\n\t\t\tcallback();\n\t\t}\n\t}\n};\n\nRowManager.prototype.setRenderMode = function () {\n\n\tif (this.table.options.virtualDom) {\n\n\t\tthis.renderMode = \"virtual\";\n\n\t\tif (this.table.element.clientHeight || this.table.options.height) {\n\t\t\tthis.fixedHeight = true;\n\t\t} else {\n\t\t\tthis.fixedHeight = false;\n\t\t}\n\t} else {\n\t\tthis.renderMode = \"classic\";\n\t}\n};\n\nRowManager.prototype.getRenderMode = function () {\n\treturn this.renderMode;\n};\n\nRowManager.prototype.renderTable = function () {\n\n\tthis.table.options.renderStarted.call(this.table);\n\n\tthis.element.scrollTop = 0;\n\n\tswitch (this.renderMode) {\n\t\tcase \"classic\":\n\t\t\tthis._simpleRender();\n\t\t\tbreak;\n\n\t\tcase \"virtual\":\n\t\t\tthis._virtualRenderFill();\n\t\t\tbreak;\n\t}\n\n\tif (this.firstRender) {\n\t\tif (this.displayRowsCount) {\n\t\t\tthis.firstRender = false;\n\t\t\tthis.table.modules.layout.layout();\n\t\t} else {\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\t}\n\n\tif (this.table.modExists(\"frozenColumns\")) {\n\t\tthis.table.modules.frozenColumns.layout();\n\t}\n\n\tif (!this.displayRowsCount) {\n\t\tif (this.table.options.placeholder) {\n\n\t\t\tthis.table.options.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n\n\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\n\t\t\tthis.table.options.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n\t\t}\n\t}\n\n\tthis.table.options.renderComplete.call(this.table);\n};\n\n//simple render on heightless table\nRowManager.prototype._simpleRender = function () {\n\tthis._clearVirtualDom();\n\n\tif (this.displayRowsCount) {\n\t\tthis.checkClassicModeGroupHeaderWidth();\n\t} else {\n\t\tthis.renderEmptyScroll();\n\t}\n};\n\nRowManager.prototype.checkClassicModeGroupHeaderWidth = function () {\n\tvar self = this,\n\t    element = this.tableElement,\n\t    onlyGroupHeaders = true;\n\n\tself.getDisplayRows().forEach(function (row, index) {\n\t\tself.styleRow(row, index);\n\t\telement.appendChild(row.getElement());\n\t\trow.initialize(true);\n\n\t\tif (row.type !== \"group\") {\n\t\t\tonlyGroupHeaders = false;\n\t\t}\n\t});\n\n\tif (onlyGroupHeaders) {\n\t\telement.style.minWidth = self.table.columnManager.getWidth() + \"px\";\n\t} else {\n\t\telement.style.minWidth = \"\";\n\t}\n};\n\n//show scrollbars on empty table div\nRowManager.prototype.renderEmptyScroll = function () {\n\tif (this.table.options.placeholder) {\n\t\tthis.tableElement.style.display = \"none\";\n\t} else {\n\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t// this.tableElement.style.minHeight = \"1px\";\n\t\t// this.tableElement.style.visibility = \"hidden\";\n\t}\n};\n\nRowManager.prototype._clearVirtualDom = function () {\n\tvar element = this.tableElement;\n\n\tif (this.table.options.placeholder && this.table.options.placeholder.parentNode) {\n\t\tthis.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);\n\t}\n\n\t// element.children.detach();\n\twhile (element.firstChild) {\n\t\telement.removeChild(element.firstChild);\n\t}element.style.paddingTop = \"\";\n\telement.style.paddingBottom = \"\";\n\telement.style.minWidth = \"\";\n\telement.style.minHeight = \"\";\n\telement.style.display = \"\";\n\telement.style.visibility = \"\";\n\n\tthis.scrollTop = 0;\n\tthis.scrollLeft = 0;\n\tthis.vDomTop = 0;\n\tthis.vDomBottom = 0;\n\tthis.vDomTopPad = 0;\n\tthis.vDomBottomPad = 0;\n};\n\nRowManager.prototype.styleRow = function (row, index) {\n\tvar rowEl = row.getElement();\n\n\tif (index % 2) {\n\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t} else {\n\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t}\n};\n\n//full virtual render\nRowManager.prototype._virtualRenderFill = function (position, forceMove, offset) {\n\tvar self = this,\n\t    element = self.tableElement,\n\t    holder = self.element,\n\t    topPad = 0,\n\t    rowsHeight = 0,\n\t    topPadHeight = 0,\n\t    i = 0,\n\t    onlyGroupHeaders = true,\n\t    rows = self.getDisplayRows();\n\n\tposition = position || 0;\n\n\toffset = offset || 0;\n\n\tif (!position) {\n\t\tself._clearVirtualDom();\n\t} else {\n\t\twhile (element.firstChild) {\n\t\t\telement.removeChild(element.firstChild);\n\t\t} //check if position is too close to bottom of table\n\t\tvar heightOccupied = (self.displayRowsCount - position + 1) * self.vDomRowHeight;\n\n\t\tif (heightOccupied < self.height) {\n\t\t\tposition -= Math.ceil((self.height - heightOccupied) / self.vDomRowHeight);\n\n\t\t\tif (position < 0) {\n\t\t\t\tposition = 0;\n\t\t\t}\n\t\t}\n\n\t\t//calculate initial pad\n\t\ttopPad = Math.min(Math.max(Math.floor(self.vDomWindowBuffer / self.vDomRowHeight), self.vDomWindowMinMarginRows), position);\n\t\tposition -= topPad;\n\t}\n\n\tif (self.displayRowsCount && Tabulator.prototype.helpers.elVisible(self.element)) {\n\n\t\tself.vDomTop = position;\n\n\t\tself.vDomBottom = position - 1;\n\n\t\twhile ((rowsHeight <= self.height + self.vDomWindowBuffer || i < self.vDomWindowMinTotalRows) && self.vDomBottom < self.displayRowsCount - 1) {\n\t\t\tvar index = self.vDomBottom + 1,\n\t\t\t    row = rows[index],\n\t\t\t    rowHeight = 0;\n\n\t\t\tself.styleRow(row, index);\n\n\t\t\telement.appendChild(row.getElement());\n\n\t\t\trow.initialize();\n\n\t\t\tif (!row.heightInitialized) {\n\t\t\t\trow.normalizeHeight(true);\n\t\t\t}\n\n\t\t\t// if(!row.initialized){\n\t\t\t// \trow.initialize(true);\n\t\t\t// }else{\n\t\t\t// \tif(!row.heightInitialized){\n\t\t\t// \t\trow.normalizeHeight(true);\n\t\t\t// \t}\n\t\t\t// }\n\n\t\t\trowHeight = row.getHeight();\n\n\t\t\tif (i < topPad) {\n\t\t\t\ttopPadHeight += rowHeight;\n\t\t\t} else {\n\t\t\t\trowsHeight += rowHeight;\n\t\t\t}\n\n\t\t\tif (rowHeight > this.vDomWindowBuffer) {\n\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t}\n\n\t\t\tif (row.type !== \"group\") {\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\n\t\t\tself.vDomBottom++;\n\t\t\ti++;\n\t\t}\n\n\t\tif (!position) {\n\t\t\tthis.vDomTopPad = 0;\n\t\t\t//adjust rowheight to match average of rendered elements\n\t\t\tself.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\n\t\t\tself.vDomBottomPad = self.vDomRowHeight * (self.displayRowsCount - self.vDomBottom - 1);\n\n\t\t\tself.vDomScrollHeight = topPadHeight + rowsHeight + self.vDomBottomPad - self.height;\n\t\t} else {\n\t\t\tself.vDomTopPad = !forceMove ? self.scrollTop - topPadHeight : self.vDomRowHeight * this.vDomTop + offset;\n\t\t\tself.vDomBottomPad = self.vDomBottom == self.displayRowsCount - 1 ? 0 : Math.max(self.vDomScrollHeight - self.vDomTopPad - rowsHeight - topPadHeight, 0);\n\t\t}\n\n\t\telement.style.paddingTop = self.vDomTopPad + \"px\";\n\t\telement.style.paddingBottom = self.vDomBottomPad + \"px\";\n\n\t\tif (forceMove) {\n\t\t\tthis.scrollTop = self.vDomTopPad + topPadHeight + offset - (this.element.scrollWidth > this.element.clientWidth ? this.element.offsetHeight - this.element.clientHeight : 0);\n\t\t}\n\n\t\tthis.scrollTop = Math.min(this.scrollTop, this.element.scrollHeight - this.height);\n\n\t\t//adjust for horizontal scrollbar if present (and not at top of table)\n\t\tif (this.element.scrollWidth > this.element.offsetWidth && forceMove) {\n\t\t\tthis.scrollTop += this.element.offsetHeight - this.element.clientHeight;\n\t\t}\n\n\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\n\t\tholder.scrollTop = this.scrollTop;\n\n\t\telement.style.minWidth = onlyGroupHeaders ? self.table.columnManager.getWidth() + \"px\" : \"\";\n\n\t\tif (self.table.options.groupBy) {\n\t\t\tif (self.table.modules.layout.getMode() != \"fitDataFill\" && self.displayRowsCount == self.table.modules.groupRows.countGroups()) {\n\t\t\t\tself.tableElement.style.minWidth = self.table.columnManager.getWidth();\n\t\t\t}\n\t\t}\n\t} else {\n\t\tthis.renderEmptyScroll();\n\t}\n\n\tif (!this.fixedHeight) {\n\t\tthis.adjustTableSize();\n\t}\n};\n\n//handle vertical scrolling\nRowManager.prototype.scrollVertical = function (dir) {\n\tvar topDiff = this.scrollTop - this.vDomScrollPosTop;\n\tvar bottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n\tvar margin = this.vDomWindowBuffer * 2;\n\n\tif (-topDiff > margin || bottomDiff > margin) {\n\t\t//if big scroll redraw table;\n\t\tvar left = this.scrollLeft;\n\t\tthis._virtualRenderFill(Math.floor(this.element.scrollTop / this.element.scrollHeight * this.displayRowsCount));\n\t\tthis.scrollHorizontal(left);\n\t} else {\n\n\t\tif (dir) {\n\t\t\t//scrolling up\n\t\t\tif (topDiff < 0) {\n\n\t\t\t\tthis._addTopRow(-topDiff);\n\t\t\t}\n\n\t\t\tif (bottomDiff < 0) {\n\n\t\t\t\t//hide bottom row if needed\n\t\t\t\tif (this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer) {\n\t\t\t\t\tthis._removeBottomRow(-bottomDiff);\n\t\t\t\t} else {\n\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t//scrolling down\n\t\t\tif (topDiff >= 0) {\n\n\t\t\t\t//hide top row if needed\n\t\t\t\tif (this.scrollTop > this.vDomWindowBuffer) {\n\n\t\t\t\t\tthis._removeTopRow(topDiff);\n\t\t\t\t} else {\n\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (bottomDiff >= 0) {\n\n\t\t\t\tthis._addBottomRow(bottomDiff);\n\t\t\t}\n\t\t}\n\t}\n};\n\nRowManager.prototype._addTopRow = function (topDiff) {\n\tvar i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n\tvar table = this.tableElement,\n\t    rows = this.getDisplayRows();\n\n\tif (this.vDomTop) {\n\t\tvar index = this.vDomTop - 1,\n\t\t    topRow = rows[index],\n\t\t    topRowHeight = topRow.getHeight() || this.vDomRowHeight;\n\n\t\t//hide top row if needed\n\t\tif (topDiff >= topRowHeight) {\n\t\t\tthis.styleRow(topRow, index);\n\t\t\ttable.insertBefore(topRow.getElement(), table.firstChild);\n\t\t\tif (!topRow.initialized || !topRow.heightInitialized) {\n\t\t\t\tthis.vDomTopNewRows.push(topRow);\n\n\t\t\t\tif (!topRow.heightInitialized) {\n\t\t\t\t\ttopRow.clearCellHeight();\n\t\t\t\t}\n\t\t\t}\n\t\t\ttopRow.initialize();\n\n\t\t\tthis.vDomTopPad -= topRowHeight;\n\n\t\t\tif (this.vDomTopPad < 0) {\n\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\n\t\t\t}\n\n\t\t\tif (!index) {\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop -= topRowHeight;\n\t\t\tthis.vDomTop--;\n\t\t}\n\n\t\ttopDiff = -(this.scrollTop - this.vDomScrollPosTop);\n\n\t\tif (topRow.getHeight() > this.vDomWindowBuffer) {\n\t\t\tthis.vDomWindowBuffer = topRow.getHeight() * 2;\n\t\t}\n\n\t\tif (i < this.vDomMaxRenderChain && this.vDomTop && topDiff >= (rows[this.vDomTop - 1].getHeight() || this.vDomRowHeight)) {\n\t\t\tthis._addTopRow(topDiff, i + 1);\n\t\t} else {\n\t\t\tthis._quickNormalizeRowHeight(this.vDomTopNewRows);\n\t\t}\n\t}\n};\n\nRowManager.prototype._removeTopRow = function (topDiff) {\n\tvar table = this.tableElement,\n\t    topRow = this.getDisplayRows()[this.vDomTop],\n\t    topRowHeight = topRow.getHeight() || this.vDomRowHeight;\n\n\tif (topDiff >= topRowHeight) {\n\n\t\tvar rowEl = topRow.getElement();\n\t\trowEl.parentNode.removeChild(rowEl);\n\n\t\tthis.vDomTopPad += topRowHeight;\n\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\t\tthis.vDomScrollPosTop += this.vDomTop ? topRowHeight : topRowHeight + this.vDomWindowBuffer;\n\t\tthis.vDomTop++;\n\n\t\ttopDiff = this.scrollTop - this.vDomScrollPosTop;\n\n\t\tthis._removeTopRow(topDiff);\n\t}\n};\n\nRowManager.prototype._addBottomRow = function (bottomDiff) {\n\tvar i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n\tvar table = this.tableElement,\n\t    rows = this.getDisplayRows();\n\n\tif (this.vDomBottom < this.displayRowsCount - 1) {\n\t\tvar index = this.vDomBottom + 1,\n\t\t    bottomRow = rows[index],\n\t\t    bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\n\n\t\t//hide bottom row if needed\n\t\tif (bottomDiff >= bottomRowHeight) {\n\t\t\tthis.styleRow(bottomRow, index);\n\t\t\ttable.appendChild(bottomRow.getElement());\n\n\t\t\tif (!bottomRow.initialized || !bottomRow.heightInitialized) {\n\t\t\t\tthis.vDomBottomNewRows.push(bottomRow);\n\n\t\t\t\tif (!bottomRow.heightInitialized) {\n\t\t\t\t\tbottomRow.clearCellHeight();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbottomRow.initialize();\n\n\t\t\tthis.vDomBottomPad -= bottomRowHeight;\n\n\t\t\tif (this.vDomBottomPad < 0 || index == this.displayRowsCount - 1) {\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom += bottomRowHeight;\n\t\t\tthis.vDomBottom++;\n\t\t}\n\n\t\tbottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n\n\t\tif (bottomRow.getHeight() > this.vDomWindowBuffer) {\n\t\t\tthis.vDomWindowBuffer = bottomRow.getHeight() * 2;\n\t\t}\n\n\t\tif (i < this.vDomMaxRenderChain && this.vDomBottom < this.displayRowsCount - 1 && bottomDiff >= (rows[this.vDomBottom + 1].getHeight() || this.vDomRowHeight)) {\n\t\t\tthis._addBottomRow(bottomDiff, i + 1);\n\t\t} else {\n\t\t\tthis._quickNormalizeRowHeight(this.vDomBottomNewRows);\n\t\t}\n\t}\n};\n\nRowManager.prototype._removeBottomRow = function (bottomDiff) {\n\tvar table = this.tableElement,\n\t    bottomRow = this.getDisplayRows()[this.vDomBottom],\n\t    bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\n\n\tif (bottomDiff >= bottomRowHeight) {\n\n\t\tvar rowEl = bottomRow.getElement();\n\n\t\tif (rowEl.parentNode) {\n\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t}\n\n\t\tthis.vDomBottomPad += bottomRowHeight;\n\n\t\tif (this.vDomBottomPad < 0) {\n\t\t\tthis.vDomBottomPad = 0;\n\t\t}\n\n\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\tthis.vDomScrollPosBottom -= bottomRowHeight;\n\t\tthis.vDomBottom--;\n\n\t\tbottomDiff = -(this.scrollTop - this.vDomScrollPosBottom);\n\n\t\tthis._removeBottomRow(bottomDiff);\n\t}\n};\n\nRowManager.prototype._quickNormalizeRowHeight = function (rows) {\n\trows.forEach(function (row) {\n\t\trow.calcHeight();\n\t});\n\n\trows.forEach(function (row) {\n\t\trow.setCellHeight();\n\t});\n\n\trows.length = 0;\n};\n\n//normalize height of active rows\nRowManager.prototype.normalizeHeight = function () {\n\tthis.activeRows.forEach(function (row) {\n\t\trow.normalizeHeight();\n\t});\n};\n\n//adjust the height of the table holder to fit in the Tabulator element\nRowManager.prototype.adjustTableSize = function () {\n\tvar initialHeight = this.element.clientHeight,\n\t    modExists;\n\n\tif (this.renderMode === \"virtual\") {\n\t\tvar otherHeight = Math.floor(this.columnManager.getElement().offsetHeight + (this.table.footerManager && !this.table.footerManager.external ? this.table.footerManager.getElement().offsetHeight : 0));\n\n\t\tif (this.fixedHeight) {\n\t\t\tthis.element.style.minHeight = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\tthis.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\tthis.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t} else {\n\t\t\tthis.element.style.height = \"\";\n\t\t\tthis.element.style.height = Math.floor(this.table.element.clientHeight) - otherHeight + \"px\";\n\t\t\tthis.element.scrollTop = this.scrollTop;\n\t\t}\n\n\t\tthis.height = this.element.clientHeight;\n\t\tthis.vDomWindowBuffer = this.table.options.virtualDomBuffer || this.height;\n\n\t\t//check if the table has changed size when dealing with variable height tables\n\t\tif (!this.fixedHeight && Math.floor(initialHeight) != Math.floor(this.element.clientHeight)) {\n\t\t\tmodExists = this.table.modExists(\"resizeTable\");\n\n\t\t\tif (modExists && !this.table.modules.resizeTable.autoResize || !modExists) {\n\t\t\t\tthis.redraw();\n\t\t\t}\n\t\t}\n\t}\n};\n\n//renitialize all rows\nRowManager.prototype.reinitialize = function () {\n\tthis.rows.forEach(function (row) {\n\t\trow.reinitialize(true);\n\t});\n};\n\n//prevent table from being redrawn\nRowManager.prototype.blockRedraw = function () {\n\tthis.redrawBlock = true;\n\tthis.redrawBlockRestoreConfig = false;\n};\n\n//restore table redrawing\nRowManager.prototype.restoreRedraw = function () {\n\tthis.redrawBlock = false;\n\n\tif (this.redrawBlockRestoreConfig) {\n\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.stage, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n\n\t\tthis.redrawBlockRestoreConfig = false;\n\t} else {\n\t\tif (this.redrawBlockRederInPosition) {\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t}\n\n\tthis.redrawBlockRederInPosition = false;\n};\n\n//redraw table\nRowManager.prototype.redraw = function (force) {\n\tvar pos = 0,\n\t    left = this.scrollLeft;\n\n\tthis.adjustTableSize();\n\n\tthis.table.tableWidth = this.table.element.clientWidth;\n\n\tif (!force) {\n\t\tif (this.renderMode == \"classic\") {\n\n\t\t\tif (this.table.options.groupBy) {\n\t\t\t\tthis.refreshActiveData(\"group\", false, false);\n\t\t\t} else {\n\t\t\t\tthis._simpleRender();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.reRenderInPosition();\n\t\t\tthis.scrollHorizontal(left);\n\t\t}\n\n\t\tif (!this.displayRowsCount) {\n\t\t\tif (this.table.options.placeholder) {\n\t\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tthis.renderTable();\n\t}\n};\n\nRowManager.prototype.resetScroll = function () {\n\tthis.element.scrollLeft = 0;\n\tthis.element.scrollTop = 0;\n\n\tif (this.table.browser === \"ie\") {\n\t\tvar event = document.createEvent(\"Event\");\n\t\tevent.initEvent(\"scroll\", false, true);\n\t\tthis.element.dispatchEvent(event);\n\t} else {\n\t\tthis.element.dispatchEvent(new Event('scroll'));\n\t}\n};\n\nvar VDomHoz = function VDomHoz(table) {\n\tthis.table = table;\n\n\tthis.element = this.table.rowManager.tableElement;\n\tthis.holderEl = this.table.rowManager.element;\n\n\tthis.leftCol = 0;\n\tthis.rightCol = 0;\n\tthis.scrollLeft = 0;\n\n\tthis.vDomScrollPosLeft = 0;\n\tthis.vDomScrollPosRight = 0;\n\n\tthis.vDomPadLeft = 0;\n\tthis.vDomPadRight = 0;\n\n\tthis.fitDataColAvg = 0;\n\n\tthis.window = 200; //pixel margin to make column visible before it is shown on screen\n\n\tthis.initialized = false;\n\n\tthis.columns = [];\n\n\tif (this.compatabilityCheck()) {\n\t\tthis.initialize();\n\t}\n};\n\nVDomHoz.prototype.compatabilityCheck = function () {\n\tvar options = this.table.options,\n\t    frozen = false,\n\t    ok = true;\n\n\tif (options.layout == \"fitDataTable\") {\n\t\tconsole.warn(\"Horizontal Vitrual DOM is not compatible with fitDataTable layout mode\");\n\t\tok = false;\n\t}\n\n\tif (options.responsiveLayout) {\n\t\tconsole.warn(\"Horizontal Vitrual DOM is not compatible with responsive columns\");\n\t\tok = false;\n\t}\n\n\tif (this.table.rtl) {\n\t\tconsole.warn(\"Horizontal Vitrual DOM is not currently compatible with RTL text direction\");\n\t\tok = false;\n\t}\n\n\t// if(options.rowFormatter){\n\t// \tconsole.warn(\"Horizontal Vitrual DOM is not compatible with row formatters\");\n\t// \tok = false;\n\t// }\n\n\tif (options.columns) {\n\t\tfrozen = options.columns.find(function (col) {\n\t\t\treturn col.frozen;\n\t\t});\n\n\t\tif (frozen) {\n\t\t\tconsole.warn(\"Horizontal Vitrual DOM is not compatible with frozen columns\");\n\t\t\tok = false;\n\t\t}\n\t}\n\n\tif (!ok) {\n\t\toptions.virtualDomHoz = false;\n\t}\n\n\treturn ok;\n};\n\nVDomHoz.prototype.initialize = function () {\n\tvar _this17 = this;\n\n\tthis.holderEl.addEventListener(\"scroll\", function () {\n\t\tvar left = _this17.holderEl.scrollLeft;\n\n\t\tif (_this17.scrollLeft != left) {\n\t\t\t_this17.scrollLeft = left;\n\t\t\t_this17.scroll(left - (_this17.vDomScrollPosLeft + _this17.window));\n\t\t}\n\t});\n};\n\nVDomHoz.prototype.deinitialize = function () {\n\tthis.initialized = false;\n};\n\nVDomHoz.prototype.clear = function () {\n\tthis.columns = [];\n\n\tthis.leftCol = -1;\n\tthis.rightCol = 0;\n\n\tthis.vDomScrollPosLeft = 0;\n\tthis.vDomScrollPosRight = 0;\n\tthis.vDomPadLeft = 0;\n\tthis.vDomPadRight = 0;\n};\n\nVDomHoz.prototype.dataChange = function () {\n\tvar change = false,\n\t    collsWidth = 0,\n\t    colEnd = 0,\n\t    group,\n\t    row,\n\t    rowEl;\n\n\tif (this.table.options.layout === \"fitData\") {\n\t\tthis.table.columnManager.columnsByIndex.forEach(function (column) {\n\t\t\tif (!column.definition.width && column.visible) {\n\t\t\t\tchange = true;\n\t\t\t}\n\t\t});\n\n\t\tif (change) {\n\t\t\tif (change && this.table.rowManager.getDisplayRows().length) {\n\t\t\t\t// this.table.vdomHoz.deinitialize();\n\n\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.holderEl.clientWidth + this.window;\n\n\t\t\t\tif (this.table.options.groupBy) {\n\t\t\t\t\tgroup = this.table.modules.groupRows.getGroups(false)[0];\n\n\t\t\t\t\trow = group.getRows(false)[0];\n\t\t\t\t} else {\n\t\t\t\t\trow = this.table.rowManager.getDisplayRows()[0];\n\t\t\t\t}\n\n\t\t\t\tif (row) {\n\n\t\t\t\t\trowEl = row.getElement();\n\n\t\t\t\t\trow.generateCells();\n\n\t\t\t\t\tthis.element.appendChild(rowEl);\n\n\t\t\t\t\tfor (var colEnd = 0; colEnd < row.cells.length; colEnd++) {\n\t\t\t\t\t\tvar cell = row.cells[colEnd];\n\t\t\t\t\t\trowEl.appendChild(cell.getElement());\n\n\t\t\t\t\t\tcell.column.reinitializeWidth();\n\n\t\t\t\t\t\tcollsWidth += cell.column.getWidth();\n\n\t\t\t\t\t\tif (collsWidth > this.vDomScrollPosRight) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\n\t\t\t\t\tthis.fitDataColAvg = Math.floor(collsWidth / (colEnd + 1));\n\n\t\t\t\t\tfor (colEnd; colEnd < this.table.columnManager.columnsByIndex.length; colEnd++) {\n\t\t\t\t\t\tthis.table.columnManager.columnsByIndex[colEnd].setWidth(this.fitDataColAvg);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.reinitialize(false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (this.table.options.layout === \"fitColumns\") {\n\t\t\tthis.table.modules.layout.layout();\n\t\t\tthis.table.vdomHoz.reinitialize(false, true);\n\t\t}\n\t}\n};\n\nVDomHoz.prototype.fitDataLayoutOverride = function () {\n\tfor (var _i5 = this.leftCol; _i5 <= this.rightCol; _i5++) {\n\t\tthis.columns[_i5].reinitializeWidth();\n\t}\n};\n\nVDomHoz.prototype.reinitialize = function (update, blockRedraw) {\n\tvar _this18 = this;\n\n\tvar old = {\n\t\tcols: this.columns,\n\t\tleftCol: this.leftCol,\n\t\trightCol: this.rightCol\n\t};\n\n\tif (update && !this.initialized) {\n\t\treturn;\n\t}\n\n\tthis.clear();\n\n\tthis.scrollLeft = this.holderEl.scrollLeft;\n\n\tthis.vDomScrollPosLeft = this.scrollLeft - this.window;\n\tthis.vDomScrollPosRight = this.scrollLeft + this.holderEl.clientWidth + this.window;\n\n\tvar colPos = 0;\n\n\tthis.table.columnManager.columnsByIndex.forEach(function (column) {\n\t\tvar config = {};\n\n\t\tif (column.visible) {\n\t\t\tvar width = column.getWidth();\n\n\t\t\tconfig.leftPos = colPos;\n\t\t\tconfig.rightPos = colPos + width;\n\n\t\t\tif (colPos + width > _this18.vDomScrollPosLeft && colPos < _this18.vDomScrollPosRight) {\n\t\t\t\t//column is visible\n\n\t\t\t\tif (_this18.leftCol == -1) {\n\t\t\t\t\t_this18.leftCol = _this18.columns.length;\n\t\t\t\t\t_this18.vDomPadLeft = colPos;\n\t\t\t\t}\n\n\t\t\t\t_this18.rightCol = _this18.columns.length;\n\t\t\t} else {\n\t\t\t\t// column is hidden\n\t\t\t\tif (_this18.leftCol !== -1) {\n\t\t\t\t\t_this18.vDomPadRight += width;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_this18.columns.push(column);\n\n\t\t\tcolumn.modules.vdomHoz = config;\n\n\t\t\tcolPos += width;\n\t\t}\n\t});\n\n\tthis.element.style.paddingLeft = this.vDomPadLeft + \"px\";\n\tthis.element.style.paddingRight = this.vDomPadRight + \"px\";\n\n\tthis.initialized = true;\n\n\tif (!blockRedraw) {\n\t\tif (!update || this.reinitChanged(old)) {\n\t\t\tthis.renitializeRows();\n\t\t}\n\t}\n\n\tthis.holderEl.scrollLeft = this.scrollLeft;\n};\n\nVDomHoz.prototype.reinitChanged = function (old) {\n\tvar _this19 = this;\n\n\tvar match = true;\n\n\tif (old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol) {\n\t\treturn true;\n\t}\n\n\told.cols.forEach(function (col, i) {\n\t\tif (col !== _this19.columns[i]) {\n\t\t\tmatch = false;\n\t\t}\n\t});\n\n\treturn !match;\n};\n\nVDomHoz.prototype.renitializeRows = function () {\n\tvar _this20 = this;\n\n\tvar rows = this.table.rowManager.getVisibleRows();\n\trows.forEach(function (row) {\n\t\t_this20.reinitializeRow(row, true);\n\t});\n};\n\nVDomHoz.prototype.scroll = function (diff) {\n\tthis.vDomScrollPosLeft += diff;\n\tthis.vDomScrollPosRight += diff;\n\n\tif (diff > this.holderEl.clientWidth * .8) {\n\t\tthis.reinitialize();\n\t} else {\n\t\tif (diff > 0) {\n\t\t\t//scroll right\n\t\t\tthis.addColRight();\n\t\t\tthis.removeColLeft();\n\t\t} else {\n\t\t\t//scroll left\n\t\t\tthis.addColLeft();\n\t\t\tthis.removeColRight();\n\t\t}\n\t}\n};\n\nVDomHoz.prototype.colPositionAdjust = function (start, end, diff) {\n\tfor (var _i6 = start; _i6 < end; _i6++) {\n\t\tvar column = this.columns[_i6];\n\n\t\tcolumn.modules.vdomHoz.leftPos -= diff;\n\t\tcolumn.modules.vdomHoz.rightPos -= diff;\n\t}\n};\n\nVDomHoz.prototype.addColRight = function () {\n\tvar column = this.columns[this.rightCol + 1],\n\t    rows,\n\t    oldWidth,\n\t    widthDiff;\n\n\tif (column && column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight) {\n\n\t\trows = this.table.rowManager.getVisibleRows();\n\n\t\trows.forEach(function (row) {\n\t\t\tif (row.type !== \"group\") {\n\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\trow.getElement().appendChild(cell.getElement());\n\t\t\t\tcell.cellRendered();\n\t\t\t}\n\t\t});\n\n\t\tif (this.fitDataColAvg) {\n\n\t\t\toldWidth = column.getWidth();\n\n\t\t\tif (oldWidth === this.fitDataColAvg) {\n\t\t\t\tcolumn.reinitializeWidth();\n\n\t\t\t\twidthDiff = oldWidth - column.getWidth();\n\n\t\t\t\tif (widthDiff) {\n\t\t\t\t\tcolumn.modules.vdomHoz.rightPos -= widthDiff;\n\t\t\t\t\tthis.colPositionAdjust(this.rightCol + 1, this.columns.length, widthDiff);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.rightCol++;\n\n\t\tif (this.rightCol >= this.columns.length - 1) {\n\t\t\tthis.vDomPadRight = 0;\n\t\t} else {\n\t\t\tthis.vDomPadRight -= column.getWidth();\n\t\t}\n\n\t\tthis.element.style.paddingRight = this.vDomPadRight + \"px\";\n\n\t\tthis.addColRight();\n\t}\n};\n\nVDomHoz.prototype.addColLeft = function () {\n\tvar column = this.columns[this.leftCol - 1],\n\t    rows;\n\n\tif (column && column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft) {\n\t\tvar rows = this.table.rowManager.getVisibleRows();\n\n\t\trows.forEach(function (row) {\n\t\t\tif (row.type !== \"group\") {\n\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\trow.getElement().prepend(cell.getElement());\n\t\t\t\tcell.cellRendered();\n\t\t\t}\n\t\t});\n\n\t\tif (!this.leftCol) {\n\t\t\tthis.vDomPadLeft = 0;\n\t\t} else {\n\t\t\tthis.vDomPadLeft -= column.getWidth();\n\t\t}\n\n\t\tthis.element.style.paddingLeft = this.vDomPadLeft + \"px\";\n\n\t\tthis.leftCol--;\n\n\t\tthis.addColLeft();\n\t}\n};\n\nVDomHoz.prototype.removeColRight = function (column) {\n\tvar column = this.columns[this.rightCol],\n\t    rows;\n\n\tif (column && column.modules.vdomHoz.leftPos > this.vDomScrollPosRight) {\n\t\trows = this.table.rowManager.getVisibleRows();\n\n\t\tcolumn.modules.vdomHoz.visible = false;\n\n\t\trows.forEach(function (row) {\n\t\t\tif (row.type !== \"group\") {\n\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t}\n\t\t});\n\n\t\tthis.vDomPadRight += column.getWidth();\n\t\tthis.element.style.paddingRight = this.vDomPadRight + \"px\";\n\n\t\tthis.rightCol--;\n\n\t\tthis.removeColRight();\n\t}\n};\n\nVDomHoz.prototype.removeColLeft = function () {\n\tvar column = this.columns[this.leftCol],\n\t    rows;\n\n\tif (column && column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft) {\n\n\t\trows = this.table.rowManager.getVisibleRows();\n\n\t\trows.forEach(function (row) {\n\t\t\tif (row.type !== \"group\") {\n\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t}\n\t\t});\n\n\t\tthis.vDomPadLeft += column.getWidth();\n\t\tthis.element.style.paddingLeft = this.vDomPadLeft + \"px\";\n\n\t\tthis.leftCol++;\n\n\t\tthis.removeColLeft();\n\t}\n};\n\nVDomHoz.prototype.initializeRow = function (row) {\n\tif (row.type !== \"group\") {\n\t\trow.modules.vdomHoz = {\n\t\t\tleftCol: this.leftCol,\n\t\t\trightCol: this.rightCol\n\t\t};\n\n\t\tfor (var _i7 = this.leftCol; _i7 <= this.rightCol; _i7++) {\n\t\t\tvar column = this.columns[_i7];\n\n\t\t\tif (column.visible) {\n\t\t\t\tvar cell = row.getCell(column);\n\n\t\t\t\trow.element.appendChild(cell.getElement());\n\t\t\t\tcell.cellRendered();\n\t\t\t}\n\t\t}\n\t}\n};\n\nVDomHoz.prototype.reinitializeRow = function (row, force) {\n\tif (row.type !== \"group\") {\n\t\tif (force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol) {\n\t\t\twhile (row.element.firstChild) {\n\t\t\t\trow.element.removeChild(row.element.firstChild);\n\t\t\t}this.initializeRow(row);\n\t\t}\n\t}\n};\n//public row object\nvar RowComponent = function RowComponent(row) {\n\tthis._row = row;\n};\n\nRowComponent.prototype.getData = function (transform) {\n\treturn this._row.getData(transform);\n};\n\nRowComponent.prototype.getElement = function () {\n\treturn this._row.getElement();\n};\n\nRowComponent.prototype.getCells = function () {\n\tvar cells = [];\n\n\tthis._row.getCells().forEach(function (cell) {\n\t\tcells.push(cell.getComponent());\n\t});\n\n\treturn cells;\n};\n\nRowComponent.prototype.getCell = function (column) {\n\tvar cell = this._row.getCell(column);\n\treturn cell ? cell.getComponent() : false;\n};\n\nRowComponent.prototype.getIndex = function () {\n\treturn this._row.getData(\"data\")[this._row.table.options.index];\n};\n\nRowComponent.prototype.getPosition = function (active) {\n\treturn this._row.table.rowManager.getRowPosition(this._row, active);\n};\n\nRowComponent.prototype.delete = function () {\n\treturn this._row.delete();\n};\n\nRowComponent.prototype.scrollTo = function () {\n\treturn this._row.table.rowManager.scrollToRow(this._row);\n};\n\nRowComponent.prototype.pageTo = function () {\n\tif (this._row.table.modExists(\"page\", true)) {\n\t\treturn this._row.table.modules.page.setPageToRow(this._row);\n\t}\n};\n\nRowComponent.prototype.move = function (to, after) {\n\tthis._row.moveToRow(to, after);\n};\n\nRowComponent.prototype.update = function (data) {\n\treturn this._row.updateData(data);\n};\n\nRowComponent.prototype.normalizeHeight = function () {\n\tthis._row.normalizeHeight(true);\n};\n\nRowComponent.prototype.select = function () {\n\tthis._row.table.modules.selectRow.selectRows(this._row);\n};\n\nRowComponent.prototype.deselect = function () {\n\tthis._row.table.modules.selectRow.deselectRows(this._row);\n};\n\nRowComponent.prototype.toggleSelect = function () {\n\tthis._row.table.modules.selectRow.toggleRow(this._row);\n};\n\nRowComponent.prototype.isSelected = function () {\n\treturn this._row.table.modules.selectRow.isRowSelected(this._row);\n};\n\nRowComponent.prototype._getSelf = function () {\n\treturn this._row;\n};\n\nRowComponent.prototype.validate = function () {\n\treturn this._row.validate();\n};\n\nRowComponent.prototype.freeze = function () {\n\tif (this._row.table.modExists(\"frozenRows\", true)) {\n\t\tthis._row.table.modules.frozenRows.freezeRow(this._row);\n\t}\n};\n\nRowComponent.prototype.unfreeze = function () {\n\tif (this._row.table.modExists(\"frozenRows\", true)) {\n\t\tthis._row.table.modules.frozenRows.unfreezeRow(this._row);\n\t}\n};\n\nRowComponent.prototype.isFrozen = function () {\n\tif (this._row.table.modExists(\"frozenRows\", true)) {\n\t\tvar index = this._row.table.modules.frozenRows.rows.indexOf(this._row);\n\t\treturn index > -1;\n\t}\n\n\treturn false;\n};\n\nRowComponent.prototype.treeCollapse = function () {\n\tif (this._row.table.modExists(\"dataTree\", true)) {\n\t\tthis._row.table.modules.dataTree.collapseRow(this._row);\n\t}\n};\n\nRowComponent.prototype.treeExpand = function () {\n\tif (this._row.table.modExists(\"dataTree\", true)) {\n\t\tthis._row.table.modules.dataTree.expandRow(this._row);\n\t}\n};\n\nRowComponent.prototype.treeToggle = function () {\n\tif (this._row.table.modExists(\"dataTree\", true)) {\n\t\tthis._row.table.modules.dataTree.toggleRow(this._row);\n\t}\n};\n\nRowComponent.prototype.getTreeParent = function () {\n\tif (this._row.table.modExists(\"dataTree\", true)) {\n\t\treturn this._row.table.modules.dataTree.getTreeParent(this._row);\n\t}\n\n\treturn false;\n};\n\nRowComponent.prototype.getTreeChildren = function () {\n\tif (this._row.table.modExists(\"dataTree\", true)) {\n\t\treturn this._row.table.modules.dataTree.getTreeChildren(this._row, true);\n\t}\n\n\treturn false;\n};\n\nRowComponent.prototype.addTreeChild = function (data, pos, index) {\n\tif (this._row.table.modExists(\"dataTree\", true)) {\n\t\treturn this._row.table.modules.dataTree.addTreeChildRow(this._row, data, pos, index);\n\t}\n\n\treturn false;\n};\n\nRowComponent.prototype.reformat = function () {\n\treturn this._row.reinitialize();\n};\n\nRowComponent.prototype.getGroup = function () {\n\treturn this._row.getGroup().getComponent();\n};\n\nRowComponent.prototype.getTable = function () {\n\treturn this._row.table;\n};\n\nRowComponent.prototype.getNextRow = function () {\n\tvar row = this._row.nextRow();\n\treturn row ? row.getComponent() : row;\n};\n\nRowComponent.prototype.getPrevRow = function () {\n\tvar row = this._row.prevRow();\n\treturn row ? row.getComponent() : row;\n};\n\nvar Row = function Row(data, parent) {\n\tvar type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"row\";\n\n\tthis.table = parent.table;\n\tthis.parent = parent;\n\tthis.data = {};\n\tthis.type = type; //type of element\n\tthis.element = this.createElement();\n\tthis.modules = {}; //hold module variables;\n\tthis.cells = [];\n\tthis.height = 0; //hold element height\n\tthis.heightStyled = \"\"; //hold element height prestyled to improve render efficiency\n\tthis.manualHeight = false; //user has manually set row height\n\tthis.outerHeight = 0; //holde lements outer height\n\tthis.initialized = false; //element has been rendered\n\tthis.heightInitialized = false; //element has resized cells to fit\n\n\tthis.component = null;\n\n\tthis.setData(data);\n\tthis.generateElement();\n};\n\nRow.prototype.createElement = function () {\n\tvar el = document.createElement(\"div\");\n\n\tel.classList.add(\"tabulator-row\");\n\tel.setAttribute(\"role\", \"row\");\n\n\treturn el;\n};\n\nRow.prototype.getElement = function () {\n\treturn this.element;\n};\n\nRow.prototype.detachElement = function () {\n\tif (this.element && this.element.parentNode) {\n\t\tthis.element.parentNode.removeChild(this.element);\n\t}\n};\n\nRow.prototype.generateElement = function () {\n\tvar self = this,\n\t    dblTap,\n\t    tapHold,\n\t    tap;\n\n\t//set row selection characteristics\n\tif (self.table.options.selectable !== false && self.table.modExists(\"selectRow\")) {\n\t\tself.table.modules.selectRow.initializeRow(this);\n\t}\n\n\t//setup movable rows\n\tif (self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n\t\tself.table.modules.moveRow.initializeRow(this);\n\t}\n\n\t//setup data tree\n\tif (self.table.options.dataTree !== false && self.table.modExists(\"dataTree\")) {\n\t\tself.table.modules.dataTree.initializeRow(this);\n\t}\n\n\t//setup column colapse container\n\tif (self.table.options.responsiveLayout === \"collapse\" && self.table.modExists(\"responsiveLayout\")) {\n\t\tself.table.modules.responsiveLayout.initializeRow(this);\n\t}\n\n\t//set column menu\n\tif ((self.table.options.rowContextMenu || self.table.options.rowClickMenu) && this.table.modExists(\"menu\")) {\n\t\tself.table.modules.menu.initializeRow(this);\n\t}\n\n\t//handle row click events\n\tif (self.table.options.rowClick) {\n\t\tself.element.addEventListener(\"click\", function (e) {\n\t\t\tself.table.options.rowClick(e, self.getComponent());\n\t\t});\n\t}\n\n\tif (self.table.options.rowDblClick) {\n\t\tself.element.addEventListener(\"dblclick\", function (e) {\n\t\t\tself.table.options.rowDblClick(e, self.getComponent());\n\t\t});\n\t}\n\n\tif (self.table.options.rowContext) {\n\t\tself.element.addEventListener(\"contextmenu\", function (e) {\n\t\t\tself.table.options.rowContext(e, self.getComponent());\n\t\t});\n\t}\n\n\t//handle mouse events\n\tif (self.table.options.rowMouseEnter) {\n\t\tself.element.addEventListener(\"mouseenter\", function (e) {\n\t\t\tself.table.options.rowMouseEnter(e, self.getComponent());\n\t\t});\n\t}\n\n\tif (self.table.options.rowMouseLeave) {\n\t\tself.element.addEventListener(\"mouseleave\", function (e) {\n\t\t\tself.table.options.rowMouseLeave(e, self.getComponent());\n\t\t});\n\t}\n\n\tif (self.table.options.rowMouseOver) {\n\t\tself.element.addEventListener(\"mouseover\", function (e) {\n\t\t\tself.table.options.rowMouseOver(e, self.getComponent());\n\t\t});\n\t}\n\n\tif (self.table.options.rowMouseOut) {\n\t\tself.element.addEventListener(\"mouseout\", function (e) {\n\t\t\tself.table.options.rowMouseOut(e, self.getComponent());\n\t\t});\n\t}\n\n\tif (self.table.options.rowMouseMove) {\n\t\tself.element.addEventListener(\"mousemove\", function (e) {\n\t\t\tself.table.options.rowMouseMove(e, self.getComponent());\n\t\t});\n\t}\n\n\tif (self.table.options.rowTap) {\n\n\t\ttap = false;\n\n\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\t\t\ttap = true;\n\t\t}, { passive: true });\n\n\t\tself.element.addEventListener(\"touchend\", function (e) {\n\t\t\tif (tap) {\n\t\t\t\tself.table.options.rowTap(e, self.getComponent());\n\t\t\t}\n\n\t\t\ttap = false;\n\t\t});\n\t}\n\n\tif (self.table.options.rowDblTap) {\n\n\t\tdblTap = null;\n\n\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\tif (dblTap) {\n\t\t\t\tclearTimeout(dblTap);\n\t\t\t\tdblTap = null;\n\n\t\t\t\tself.table.options.rowDblTap(e, self.getComponent());\n\t\t\t} else {\n\n\t\t\t\tdblTap = setTimeout(function () {\n\t\t\t\t\tclearTimeout(dblTap);\n\t\t\t\t\tdblTap = null;\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (self.table.options.rowTapHold) {\n\n\t\ttapHold = null;\n\n\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\t\t\tclearTimeout(tapHold);\n\n\t\t\ttapHold = setTimeout(function () {\n\t\t\t\tclearTimeout(tapHold);\n\t\t\t\ttapHold = null;\n\t\t\t\ttap = false;\n\t\t\t\tself.table.options.rowTapHold(e, self.getComponent());\n\t\t\t}, 1000);\n\t\t}, { passive: true });\n\n\t\tself.element.addEventListener(\"touchend\", function (e) {\n\t\t\tclearTimeout(tapHold);\n\t\t\ttapHold = null;\n\t\t});\n\t}\n};\n\nRow.prototype.generateCells = function () {\n\tthis.cells = this.table.columnManager.generateCells(this);\n};\n\n//functions to setup on first render\nRow.prototype.initialize = function (force) {\n\tvar _this21 = this;\n\n\tif (!this.initialized || force) {\n\n\t\tthis.deleteCells();\n\n\t\twhile (this.element.firstChild) {\n\t\t\tthis.element.removeChild(this.element.firstChild);\n\t\t} //handle frozen cells\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\t\t\tthis.table.modules.frozenColumns.layoutRow(this);\n\t\t}\n\n\t\tthis.generateCells();\n\n\t\tif (this.table.options.virtualDomHoz && this.table.vdomHoz.initialized) {\n\t\t\tthis.table.vdomHoz.initializeRow(this);\n\t\t} else {\n\t\t\tthis.cells.forEach(function (cell) {\n\t\t\t\t_this21.element.appendChild(cell.getElement());\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\n\t\tif (force) {\n\t\t\tthis.normalizeHeight();\n\t\t}\n\n\t\t//setup movable rows\n\t\tif (this.table.options.dataTree && this.table.modExists(\"dataTree\")) {\n\t\t\tthis.table.modules.dataTree.layoutRow(this);\n\t\t}\n\n\t\t//setup column colapse container\n\t\tif (this.table.options.responsiveLayout === \"collapse\" && this.table.modExists(\"responsiveLayout\")) {\n\t\t\tthis.table.modules.responsiveLayout.layoutRow(this);\n\t\t}\n\n\t\tif (this.table.options.rowFormatter) {\n\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t}\n\n\t\t//set resizable handles\n\t\tif (this.table.options.resizableRows && this.table.modExists(\"resizeRows\")) {\n\t\t\tthis.table.modules.resizeRows.initializeRow(this);\n\t\t}\n\n\t\tthis.initialized = true;\n\t} else {\n\t\tif (this.table.options.virtualDomHoz) {\n\t\t\tthis.table.vdomHoz.reinitializeRow(this);\n\t\t}\n\t}\n};\n\nRow.prototype.reinitializeHeight = function () {\n\tthis.heightInitialized = false;\n\n\tif (this.element.offsetParent !== null) {\n\t\tthis.normalizeHeight(true);\n\t}\n};\n\nRow.prototype.reinitialize = function (children) {\n\tthis.initialized = false;\n\tthis.heightInitialized = false;\n\n\tif (!this.manualHeight) {\n\t\tthis.height = 0;\n\t\tthis.heightStyled = \"\";\n\t}\n\n\tif (this.element.offsetParent !== null) {\n\t\tthis.initialize(true);\n\t}\n\n\tif (this.table.options.dataTree && this.table.modExists(\"dataTree\", true)) {\n\t\tthis.table.modules.dataTree.getTreeChildren(this, false, true).forEach(function (child) {\n\t\t\tchild.reinitialize(true);\n\t\t});\n\t}\n};\n\n//get heights when doing bulk row style calcs in virtual DOM\nRow.prototype.calcHeight = function (force) {\n\n\tvar maxHeight = 0,\n\t    minHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n\n\tthis.cells.forEach(function (cell) {\n\t\tvar height = cell.getHeight();\n\t\tif (height > maxHeight) {\n\t\t\tmaxHeight = height;\n\t\t}\n\t});\n\n\tif (force) {\n\t\tthis.height = Math.max(maxHeight, minHeight);\n\t} else {\n\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n\t}\n\n\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\n\tthis.outerHeight = this.element.offsetHeight;\n};\n\n//set of cells\nRow.prototype.setCellHeight = function () {\n\tthis.cells.forEach(function (cell) {\n\t\tcell.setHeight();\n\t});\n\n\tthis.heightInitialized = true;\n};\n\nRow.prototype.clearCellHeight = function () {\n\tthis.cells.forEach(function (cell) {\n\t\tcell.clearHeight();\n\t});\n};\n\n//normalize the height of elements in the row\nRow.prototype.normalizeHeight = function (force) {\n\n\tif (force) {\n\t\tthis.clearCellHeight();\n\t}\n\n\tthis.calcHeight(force);\n\n\tthis.setCellHeight();\n};\n\n// Row.prototype.setHeight = function(height){\n// \tthis.height = height;\n\n// \tthis.setCellHeight();\n// };\n\n//set height of rows\nRow.prototype.setHeight = function (height, force) {\n\tif (this.height != height || force) {\n\n\t\tthis.manualHeight = true;\n\n\t\tthis.height = height;\n\t\tthis.heightStyled = height ? height + \"px\" : \"\";\n\n\t\tthis.setCellHeight();\n\n\t\t// this.outerHeight = this.element.outerHeight();\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t}\n};\n\n//return rows outer height\nRow.prototype.getHeight = function () {\n\treturn this.outerHeight;\n};\n\n//return rows outer Width\nRow.prototype.getWidth = function () {\n\treturn this.element.offsetWidth;\n};\n\n//////////////// Cell Management /////////////////\n\nRow.prototype.deleteCell = function (cell) {\n\tvar index = this.cells.indexOf(cell);\n\n\tif (index > -1) {\n\t\tthis.cells.splice(index, 1);\n\t}\n};\n\n//////////////// Data Management /////////////////\n\nRow.prototype.setData = function (data) {\n\tif (this.table.modExists(\"mutator\")) {\n\t\tdata = this.table.modules.mutator.transformRow(data, \"data\");\n\t}\n\n\tthis.data = data;\n\n\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n\t\tthis.table.modules.reactiveData.watchRow(this);\n\t}\n};\n\n//update the rows data\nRow.prototype.updateData = function (updatedData) {\n\tvar _this22 = this;\n\n\tvar visible = Tabulator.prototype.helpers.elVisible(this.element),\n\t    tempData = {},\n\t    newRowData;\n\n\treturn new Promise(function (resolve, reject) {\n\n\t\tif (typeof updatedData === \"string\") {\n\t\t\tupdatedData = JSON.parse(updatedData);\n\t\t}\n\n\t\tif (_this22.table.options.reactiveData && _this22.table.modExists(\"reactiveData\", true)) {\n\t\t\t_this22.table.modules.reactiveData.block();\n\t\t}\n\n\t\t//mutate incomming data if needed\n\t\tif (_this22.table.modExists(\"mutator\")) {\n\n\t\t\ttempData = Object.assign(tempData, _this22.data);\n\t\t\ttempData = Object.assign(tempData, updatedData);\n\n\t\t\tnewRowData = _this22.table.modules.mutator.transformRow(tempData, \"data\", updatedData);\n\t\t} else {\n\t\t\tnewRowData = updatedData;\n\t\t}\n\n\t\t//set data\n\t\tfor (var attrname in newRowData) {\n\t\t\t_this22.data[attrname] = newRowData[attrname];\n\t\t}\n\n\t\tif (_this22.table.options.reactiveData && _this22.table.modExists(\"reactiveData\", true)) {\n\t\t\t_this22.table.modules.reactiveData.unblock();\n\t\t}\n\n\t\t//update affected cells only\n\t\tfor (var attrname in updatedData) {\n\n\t\t\tvar columns = _this22.table.columnManager.getColumnsByFieldRoot(attrname);\n\n\t\t\tcolumns.forEach(function (column) {\n\t\t\t\tvar cell = _this22.getCell(column.getField());\n\n\t\t\t\tif (cell) {\n\t\t\t\t\tvar value = column.getFieldValue(newRowData);\n\t\t\t\t\tif (cell.getValue() != value) {\n\t\t\t\t\t\tcell.setValueProcessData(value);\n\n\t\t\t\t\t\tif (visible) {\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (_this22.table.options.groupUpdateOnCellEdit && _this22.table.options.groupBy && _this22.table.modExists(\"groupRows\")) {\n\t\t\t_this22.table.modules.groupRows.reassignRowToGroup(_this22.row);\n\t\t}\n\n\t\t//Partial reinitialization if visible\n\t\tif (visible) {\n\t\t\t_this22.normalizeHeight(true);\n\n\t\t\tif (_this22.table.options.rowFormatter) {\n\t\t\t\t_this22.table.options.rowFormatter(_this22.getComponent());\n\t\t\t}\n\t\t} else {\n\t\t\t_this22.initialized = false;\n\t\t\t_this22.height = 0;\n\t\t\t_this22.heightStyled = \"\";\n\t\t}\n\n\t\tif (_this22.table.options.dataTree !== false && _this22.table.modExists(\"dataTree\") && _this22.table.modules.dataTree.redrawNeeded(updatedData)) {\n\t\t\t_this22.table.modules.dataTree.initializeRow(_this22);\n\t\t\t_this22.table.modules.dataTree.layoutRow(_this22);\n\t\t\t_this22.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t\t}\n\n\t\t//this.reinitialize();\n\n\t\t_this22.table.options.rowUpdated.call(_this22.table, _this22.getComponent());\n\n\t\tif (_this22.table.options.dataChanged) {\n\t\t\t_this22.table.options.dataChanged.call(_this22.table, _this22.table.rowManager.getData());\n\t\t}\n\n\t\tresolve();\n\t});\n};\n\nRow.prototype.getData = function (transform) {\n\tif (transform) {\n\t\tif (this.table.modExists(\"accessor\")) {\n\t\t\treturn this.table.modules.accessor.transformRow(this, transform);\n\t\t}\n\t}\n\n\treturn this.data;\n};\n\nRow.prototype.getCell = function (column) {\n\tvar match = false;\n\n\tcolumn = this.table.columnManager.findColumn(column);\n\n\tmatch = this.cells.find(function (cell) {\n\t\treturn cell.column === column;\n\t});\n\n\treturn match;\n};\n\nRow.prototype.getCellIndex = function (findCell) {\n\treturn this.cells.findIndex(function (cell) {\n\t\treturn cell === findCell;\n\t});\n};\n\nRow.prototype.findNextEditableCell = function (index) {\n\tvar nextCell = false;\n\n\tif (index < this.cells.length - 1) {\n\t\tfor (var i = index + 1; i < this.cells.length; i++) {\n\t\t\tvar cell = this.cells[i];\n\n\t\t\tif (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n\t\t\t\tvar allowEdit = true;\n\n\t\t\t\tif (typeof cell.column.modules.edit.check == \"function\") {\n\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t}\n\n\t\t\t\tif (allowEdit) {\n\t\t\t\t\tnextCell = cell;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn nextCell;\n};\n\nRow.prototype.findPrevEditableCell = function (index) {\n\tvar prevCell = false;\n\n\tif (index > 0) {\n\t\tfor (var i = index - 1; i >= 0; i--) {\n\t\t\tvar cell = this.cells[i],\n\t\t\t    allowEdit = true;\n\n\t\t\tif (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n\t\t\t\tif (typeof cell.column.modules.edit.check == \"function\") {\n\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t}\n\n\t\t\t\tif (allowEdit) {\n\t\t\t\t\tprevCell = cell;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn prevCell;\n};\n\nRow.prototype.getCells = function () {\n\treturn this.cells;\n};\n\nRow.prototype.nextRow = function () {\n\tvar row = this.table.rowManager.nextDisplayRow(this, true);\n\treturn row || false;\n};\n\nRow.prototype.prevRow = function () {\n\tvar row = this.table.rowManager.prevDisplayRow(this, true);\n\treturn row || false;\n};\n\nRow.prototype.moveToRow = function (to, before) {\n\tvar toRow = this.table.rowManager.findRow(to);\n\n\tif (toRow) {\n\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\n\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\n\t} else {\n\t\tconsole.warn(\"Move Error - No matching row found:\", to);\n\t}\n};\n\nRow.prototype.validate = function () {\n\tvar invalid = [];\n\n\tthis.cells.forEach(function (cell) {\n\t\tif (!cell.validate()) {\n\t\t\tinvalid.push(cell.getComponent());\n\t\t}\n\t});\n\n\treturn invalid.length ? invalid : true;\n};\n\n///////////////////// Actions  /////////////////////\n\nRow.prototype.delete = function () {\n\tvar _this23 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar index, rows;\n\n\t\tif (_this23.table.options.history && _this23.table.modExists(\"history\")) {\n\n\t\t\tif (_this23.table.options.groupBy && _this23.table.modExists(\"groupRows\")) {\n\t\t\t\trows = _this23.getGroup().rows;\n\t\t\t\tindex = rows.indexOf(_this23);\n\n\t\t\t\tif (index) {\n\t\t\t\t\tindex = rows[index - 1];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tindex = _this23.table.rowManager.getRowIndex(_this23);\n\n\t\t\t\tif (index) {\n\t\t\t\t\tindex = _this23.table.rowManager.rows[index - 1];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_this23.table.modules.history.action(\"rowDelete\", _this23, { data: _this23.getData(), pos: !index, index: index });\n\t\t}\n\n\t\t_this23.deleteActual();\n\n\t\tresolve();\n\t});\n};\n\nRow.prototype.deleteActual = function (blockRedraw) {\n\tvar index = this.table.rowManager.getRowIndex(this);\n\n\tthis.detatchModules();\n\n\t// if(this.table.options.dataTree && this.table.modExists(\"dataTree\")){\n\t// \tthis.table.modules.dataTree.collapseRow(this, true);\n\t// }\n\n\t//remove any reactive data watchers from row object\n\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {}\n\t// this.table.modules.reactiveData.unwatchRow(this);\n\n\n\t//remove from group\n\tif (this.modules.group) {\n\t\tthis.modules.group.removeRow(this);\n\t}\n\n\tthis.table.rowManager.deleteRow(this, blockRedraw);\n\n\tthis.deleteCells();\n\n\tthis.initialized = false;\n\tthis.heightInitialized = false;\n\tthis.element = false;\n\n\tif (this.table.options.dataTree && this.table.modExists(\"dataTree\", true)) {\n\t\tthis.table.modules.dataTree.rowDelete(this);\n\t}\n\n\t//recalc column calculations if present\n\tif (this.table.modExists(\"columnCalcs\")) {\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\t\tthis.table.modules.columnCalcs.recalcRowGroup(this);\n\t\t} else {\n\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t}\n\t}\n};\n\nRow.prototype.detatchModules = function () {\n\t//deselect row if it is selected\n\tif (this.table.modExists(\"selectRow\")) {\n\t\tthis.table.modules.selectRow._deselectRow(this, true);\n\t}\n\n\t//cancel edit if row is currently being edited\n\tif (this.table.modExists(\"edit\")) {\n\t\tif (this.table.modules.edit.currentCell.row === this) {\n\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t}\n\t}\n\n\tif (this.table.modExists(\"frozenRows\")) {\n\t\tthis.table.modules.frozenRows.detachRow(this);\n\t}\n};\n\nRow.prototype.deleteCells = function () {\n\tvar cellCount = this.cells.length;\n\n\tfor (var _i8 = 0; _i8 < cellCount; _i8++) {\n\t\tthis.cells[0].delete();\n\t}\n};\n\nRow.prototype.wipe = function () {\n\tthis.detatchModules();\n\tthis.deleteCells();\n\n\twhile (this.element.firstChild) {\n\t\tthis.element.removeChild(this.element.firstChild);\n\t}this.element = false;\n\tthis.modules = {};\n\n\tif (this.element.parentNode) {\n\t\tthis.element.parentNode.removeChild(this.element);\n\t}\n};\n\nRow.prototype.getGroup = function () {\n\treturn this.modules.group || false;\n};\n\n//////////////// Object Generation /////////////////\nRow.prototype.getComponent = function () {\n\tif (!this.component) {\n\t\tthis.component = new RowComponent(this);\n\t}\n\n\treturn this.component;\n};\n\n//public row object\nvar CellComponent = function CellComponent(cell) {\n\tthis._cell = cell;\n};\n\nCellComponent.prototype.getValue = function () {\n\treturn this._cell.getValue();\n};\n\nCellComponent.prototype.getOldValue = function () {\n\treturn this._cell.getOldValue();\n};\n\nCellComponent.prototype.getInitialValue = function () {\n\treturn this._cell.initialValue;\n};\n\nCellComponent.prototype.getElement = function () {\n\treturn this._cell.getElement();\n};\n\nCellComponent.prototype.getRow = function () {\n\treturn this._cell.row.getComponent();\n};\n\nCellComponent.prototype.getData = function () {\n\treturn this._cell.row.getData();\n};\n\nCellComponent.prototype.getField = function () {\n\treturn this._cell.column.getField();\n};\n\nCellComponent.prototype.getColumn = function () {\n\treturn this._cell.column.getComponent();\n};\n\nCellComponent.prototype.setValue = function (value, mutate) {\n\tif (typeof mutate == \"undefined\") {\n\t\tmutate = true;\n\t}\n\n\tthis._cell.setValue(value, mutate);\n};\n\nCellComponent.prototype.restoreOldValue = function () {\n\tthis._cell.setValueActual(this._cell.getOldValue());\n};\n\nCellComponent.prototype.restoreInitialValue = function () {\n\tthis._cell.setValueActual(this._cell.initialValue);\n};\n\nCellComponent.prototype.edit = function (force) {\n\treturn this._cell.edit(force);\n};\n\nCellComponent.prototype.cancelEdit = function () {\n\tthis._cell.cancelEdit();\n};\n\nCellComponent.prototype.isEdited = function () {\n\treturn !!this._cell.modules.edit && this._cell.modules.edit.edited;\n};\n\nCellComponent.prototype.clearEdited = function () {\n\tif (self.table.modExists(\"edit\", true)) {\n\t\tthis._cell.table.modules.edit.clearEdited(this._cell);\n\t}\n};\n\nCellComponent.prototype.isValid = function () {\n\treturn this._cell.modules.validate ? !this._cell.modules.validate.invalid : true;\n};\n\nCellComponent.prototype.validate = function () {\n\treturn this._cell.validate();\n};\n\nCellComponent.prototype.clearValidation = function () {\n\tif (this._cell.table.modExists(\"validate\", true)) {\n\t\tthis._cell.table.modules.validate.clearValidation(this._cell);\n\t}\n};\n\nCellComponent.prototype.nav = function () {\n\treturn this._cell.nav();\n};\n\nCellComponent.prototype.checkHeight = function () {\n\tthis._cell.checkHeight();\n};\n\nCellComponent.prototype.getTable = function () {\n\treturn this._cell.table;\n};\n\nCellComponent.prototype._getSelf = function () {\n\treturn this._cell;\n};\n\nvar Cell = function Cell(column, row) {\n\n\tthis.table = column.table;\n\tthis.column = column;\n\tthis.row = row;\n\tthis.element = null;\n\tthis.value = null;\n\tthis.initialValue;\n\tthis.oldValue = null;\n\tthis.modules = {};\n\n\tthis.height = null;\n\tthis.width = null;\n\tthis.minWidth = null;\n\n\tthis.component = null;\n\n\tthis.loaded = false; //track if the cell has been added to the DOM yet\n\n\tthis.build();\n};\n\n//////////////// Setup Functions /////////////////\n\n//generate element\nCell.prototype.build = function () {\n\tthis.generateElement();\n\n\tthis.setWidth();\n\n\tthis._configureCell();\n\n\tthis.setValueActual(this.column.getFieldValue(this.row.data));\n\n\tthis.initialValue = this.value;\n};\n\nCell.prototype.generateElement = function () {\n\tthis.element = document.createElement('div');\n\tthis.element.className = \"tabulator-cell\";\n\tthis.element.setAttribute(\"role\", \"gridcell\");\n\tthis.element = this.element;\n};\n\nCell.prototype._configureCell = function () {\n\tvar self = this,\n\t    cellEvents = self.column.cellEvents,\n\t    element = self.element,\n\t    field = this.column.getField(),\n\t    vertAligns = {\n\t\ttop: \"flex-start\",\n\t\tbottom: \"flex-end\",\n\t\tmiddle: \"center\"\n\t},\n\t    hozAligns = {\n\t\tleft: \"flex-start\",\n\t\tright: \"flex-end\",\n\t\tcenter: \"center\"\n\t};\n\n\t//set text alignment\n\telement.style.textAlign = self.column.hozAlign;\n\n\tif (self.column.vertAlign) {\n\t\telement.style.display = \"inline-flex\";\n\n\t\telement.style.alignItems = vertAligns[self.column.vertAlign] || \"\";\n\n\t\tif (self.column.hozAlign) {\n\t\t\telement.style.justifyContent = hozAligns[self.column.hozAlign] || \"\";\n\t\t}\n\t}\n\n\tif (field) {\n\t\telement.setAttribute(\"tabulator-field\", field);\n\t}\n\n\t//add class to cell if needed\n\tif (self.column.definition.cssClass) {\n\t\tvar classNames = self.column.definition.cssClass.split(\" \");\n\t\tclassNames.forEach(function (className) {\n\t\t\telement.classList.add(className);\n\t\t});\n\t}\n\n\t//update tooltip on mouse enter\n\tif (this.table.options.tooltipGenerationMode === \"hover\") {\n\t\telement.addEventListener(\"mouseenter\", function (e) {\n\t\t\tself._generateTooltip();\n\t\t});\n\t}\n\n\tself._bindClickEvents(cellEvents);\n\n\tself._bindTouchEvents(cellEvents);\n\n\tself._bindMouseEvents(cellEvents);\n\n\tif (self.column.modules.edit) {\n\t\tself.table.modules.edit.bindEditor(self);\n\t}\n\n\tif (self.column.definition.rowHandle && self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n\t\tself.table.modules.moveRow.initializeCell(self);\n\t}\n\n\t//hide cell if not visible\n\tif (!self.column.visible) {\n\t\tself.hide();\n\t}\n};\n\nCell.prototype._bindClickEvents = function (cellEvents) {\n\tvar self = this,\n\t    element = self.element;\n\n\t//set event bindings\n\tif (cellEvents.cellClick || self.table.options.cellClick) {\n\t\telement.addEventListener(\"click\", function (e) {\n\t\t\tvar component = self.getComponent();\n\n\t\t\tif (cellEvents.cellClick) {\n\t\t\t\tcellEvents.cellClick.call(self.table, e, component);\n\t\t\t}\n\n\t\t\tif (self.table.options.cellClick) {\n\t\t\t\tself.table.options.cellClick.call(self.table, e, component);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (cellEvents.cellDblClick || this.table.options.cellDblClick) {\n\t\telement.addEventListener(\"dblclick\", function (e) {\n\t\t\tvar component = self.getComponent();\n\n\t\t\tif (cellEvents.cellDblClick) {\n\t\t\t\tcellEvents.cellDblClick.call(self.table, e, component);\n\t\t\t}\n\n\t\t\tif (self.table.options.cellDblClick) {\n\t\t\t\tself.table.options.cellDblClick.call(self.table, e, component);\n\t\t\t}\n\t\t});\n\t} else {\n\t\telement.addEventListener(\"dblclick\", function (e) {\n\n\t\t\tif (self.table.modExists(\"edit\")) {\n\t\t\t\tif (self.table.modules.edit.currentCell === self) {\n\t\t\t\t\treturn; //prevent instant selection of editor content\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.preventDefault();\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\t// IE\n\t\t\t\t\tvar range = document.body.createTextRange();\n\t\t\t\t\trange.moveToElementText(self.element);\n\t\t\t\t\trange.select();\n\t\t\t\t} else if (window.getSelection) {\n\t\t\t\t\tvar range = document.createRange();\n\t\t\t\t\trange.selectNode(self.element);\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t});\n\t}\n\n\tif (cellEvents.cellContext || this.table.options.cellContext) {\n\t\telement.addEventListener(\"contextmenu\", function (e) {\n\t\t\tvar component = self.getComponent();\n\n\t\t\tif (cellEvents.cellContext) {\n\t\t\t\tcellEvents.cellContext.call(self.table, e, component);\n\t\t\t}\n\n\t\t\tif (self.table.options.cellContext) {\n\t\t\t\tself.table.options.cellContext.call(self.table, e, component);\n\t\t\t}\n\t\t});\n\t}\n};\n\nCell.prototype._bindMouseEvents = function (cellEvents) {\n\tvar self = this,\n\t    element = self.element;\n\n\tif (cellEvents.cellMouseEnter || self.table.options.cellMouseEnter) {\n\t\telement.addEventListener(\"mouseenter\", function (e) {\n\t\t\tvar component = self.getComponent();\n\n\t\t\tif (cellEvents.cellMouseEnter) {\n\t\t\t\tcellEvents.cellMouseEnter.call(self.table, e, component);\n\t\t\t}\n\n\t\t\tif (self.table.options.cellMouseEnter) {\n\t\t\t\tself.table.options.cellMouseEnter.call(self.table, e, component);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (cellEvents.cellMouseLeave || self.table.options.cellMouseLeave) {\n\t\telement.addEventListener(\"mouseleave\", function (e) {\n\t\t\tvar component = self.getComponent();\n\n\t\t\tif (cellEvents.cellMouseLeave) {\n\t\t\t\tcellEvents.cellMouseLeave.call(self.table, e, component);\n\t\t\t}\n\n\t\t\tif (self.table.options.cellMouseLeave) {\n\t\t\t\tself.table.options.cellMouseLeave.call(self.table, e, component);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (cellEvents.cellMouseOver || self.table.options.cellMouseOver) {\n\t\telement.addEventListener(\"mouseover\", function (e) {\n\t\t\tvar component = self.getComponent();\n\n\t\t\tif (cellEvents.cellMouseOver) {\n\t\t\t\tcellEvents.cellMouseOver.call(self.table, e, component);\n\t\t\t}\n\n\t\t\tif (self.table.options.cellMouseOver) {\n\t\t\t\tself.table.options.cellMouseOver.call(self.table, e, component);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (cellEvents.cellMouseOut || self.table.options.cellMouseOut) {\n\t\telement.addEventListener(\"mouseout\", function (e) {\n\t\t\tvar component = self.getComponent();\n\n\t\t\tif (cellEvents.cellMouseOut) {\n\t\t\t\tcellEvents.cellMouseOut.call(self.table, e, component);\n\t\t\t}\n\n\t\t\tif (self.table.options.cellMouseOut) {\n\t\t\t\tself.table.options.cellMouseOut.call(self.table, e, component);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (cellEvents.cellMouseMove || self.table.options.cellMouseMove) {\n\t\telement.addEventListener(\"mousemove\", function (e) {\n\t\t\tvar component = self.getComponent();\n\n\t\t\tif (cellEvents.cellMouseMove) {\n\t\t\t\tcellEvents.cellMouseMove.call(self.table, e, component);\n\t\t\t}\n\n\t\t\tif (self.table.options.cellMouseMove) {\n\t\t\t\tself.table.options.cellMouseMove.call(self.table, e, component);\n\t\t\t}\n\t\t});\n\t}\n};\n\nCell.prototype._bindTouchEvents = function (cellEvents) {\n\tvar self = this,\n\t    element = self.element,\n\t    dblTap,\n\t    tapHold,\n\t    tap;\n\n\tif (cellEvents.cellTap || this.table.options.cellTap) {\n\t\ttap = false;\n\n\t\telement.addEventListener(\"touchstart\", function (e) {\n\t\t\ttap = true;\n\t\t}, { passive: true });\n\n\t\telement.addEventListener(\"touchend\", function (e) {\n\t\t\tif (tap) {\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellTap) {\n\t\t\t\t\tcellEvents.cellTap.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellTap) {\n\t\t\t\t\tself.table.options.cellTap.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttap = false;\n\t\t});\n\t}\n\n\tif (cellEvents.cellDblTap || this.table.options.cellDblTap) {\n\t\tdblTap = null;\n\n\t\telement.addEventListener(\"touchend\", function (e) {\n\n\t\t\tif (dblTap) {\n\t\t\t\tclearTimeout(dblTap);\n\t\t\t\tdblTap = null;\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellDblTap) {\n\t\t\t\t\tcellEvents.cellDblTap.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellDblTap) {\n\t\t\t\t\tself.table.options.cellDblTap.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tdblTap = setTimeout(function () {\n\t\t\t\t\tclearTimeout(dblTap);\n\t\t\t\t\tdblTap = null;\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (cellEvents.cellTapHold || this.table.options.cellTapHold) {\n\t\ttapHold = null;\n\n\t\telement.addEventListener(\"touchstart\", function (e) {\n\t\t\tclearTimeout(tapHold);\n\n\t\t\ttapHold = setTimeout(function () {\n\t\t\t\tclearTimeout(tapHold);\n\t\t\t\ttapHold = null;\n\t\t\t\ttap = false;\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellTapHold) {\n\t\t\t\t\tcellEvents.cellTapHold.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellTapHold) {\n\t\t\t\t\tself.table.options.cellTapHold.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t}, { passive: true });\n\n\t\telement.addEventListener(\"touchend\", function (e) {\n\t\t\tclearTimeout(tapHold);\n\t\t\ttapHold = null;\n\t\t});\n\t}\n};\n\n//generate cell contents\nCell.prototype._generateContents = function () {\n\tvar val;\n\n\tif (this.table.modExists(\"format\")) {\n\t\tval = this.table.modules.format.formatValue(this);\n\t} else {\n\t\tval = this.element.innerHTML = this.value;\n\t}\n\n\tswitch (typeof val === 'undefined' ? 'undefined' : _typeof(val)) {\n\t\tcase \"object\":\n\t\t\tif (val instanceof Node) {\n\n\t\t\t\t//clear previous cell contents\n\t\t\t\twhile (this.element.firstChild) {\n\t\t\t\t\tthis.element.removeChild(this.element.firstChild);\n\t\t\t\t}this.element.appendChild(val);\n\t\t\t} else {\n\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\tif (val != null) {\n\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"undefined\":\n\t\tcase \"null\":\n\t\t\tthis.element.innerHTML = \"\";\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.element.innerHTML = val;\n\t}\n};\n\nCell.prototype.cellRendered = function () {\n\tif (this.table.modExists(\"format\") && this.table.modules.format.cellRendered) {\n\t\tthis.table.modules.format.cellRendered(this);\n\t}\n};\n\n//generate tooltip text\nCell.prototype._generateTooltip = function () {\n\tvar tooltip = this.column.tooltip;\n\n\tif (tooltip) {\n\t\tif (tooltip === true) {\n\t\t\ttooltip = this.value;\n\t\t} else if (typeof tooltip == \"function\") {\n\t\t\ttooltip = tooltip(this.getComponent());\n\n\t\t\tif (tooltip === false) {\n\t\t\t\ttooltip = \"\";\n\t\t\t}\n\t\t}\n\n\t\tif (typeof tooltip === \"undefined\") {\n\t\t\ttooltip = \"\";\n\t\t}\n\n\t\tthis.element.setAttribute(\"title\", tooltip);\n\t} else {\n\t\tthis.element.setAttribute(\"title\", \"\");\n\t}\n};\n\n//////////////////// Getters ////////////////////\nCell.prototype.getElement = function () {\n\tif (!this.loaded) {\n\t\tthis.loaded = true;\n\t\tthis.layoutElement();\n\t}\n\n\treturn this.element;\n};\n\nCell.prototype.getValue = function () {\n\treturn this.value;\n};\n\nCell.prototype.getOldValue = function () {\n\treturn this.oldValue;\n};\n\n//////////////////// Actions ////////////////////\n\nCell.prototype.setValue = function (value, mutate) {\n\n\tvar changed = this.setValueProcessData(value, mutate),\n\t    component;\n\n\tif (changed) {\n\t\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\t\t\tthis.table.modules.history.action(\"cellEdit\", this, { oldValue: this.oldValue, newValue: this.value });\n\t\t}\n\n\t\tcomponent = this.getComponent();\n\n\t\tif (this.column.cellEvents.cellEdited) {\n\t\t\tthis.column.cellEvents.cellEdited.call(this.table, component);\n\t\t}\n\n\t\tif (this.table.options.groupUpdateOnCellEdit && this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\t\tthis.table.modules.groupRows.reassignRowToGroup(this.row);\n\t\t}\n\n\t\tthis.cellRendered();\n\n\t\tthis.table.options.cellEdited.call(this.table, component);\n\n\t\tif (this.table.options.dataChanged) {\n\t\t\tthis.table.options.dataChanged.call(this.table, this.table.rowManager.getData());\n\t\t}\n\t}\n};\n\nCell.prototype.setValueProcessData = function (value, mutate) {\n\tvar changed = false;\n\n\tif (this.value != value) {\n\n\t\tchanged = true;\n\n\t\tif (mutate) {\n\t\t\tif (this.column.modules.mutate) {\n\t\t\t\tvalue = this.table.modules.mutator.transformCell(this, value);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.setValueActual(value);\n\n\tif (changed && this.table.modExists(\"columnCalcs\")) {\n\t\tif (this.column.definition.topCalc || this.column.definition.bottomCalc) {\n\t\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\t\tif (this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\") {\n\t\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t\t\t}\n\n\t\t\t\tif (this.table.options.columnCalcs != \"table\") {\n\t\t\t\t\tthis.table.modules.columnCalcs.recalcRowGroup(this.row);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn changed;\n};\n\nCell.prototype.setValueActual = function (value) {\n\tthis.oldValue = this.value;\n\n\tthis.value = value;\n\n\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n\t\tthis.table.modules.reactiveData.block();\n\t}\n\n\tthis.column.setFieldValue(this.row.data, value);\n\n\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n\t\tthis.table.modules.reactiveData.unblock();\n\t}\n\n\tif (this.loaded) {\n\t\tthis.layoutElement();\n\t}\n};\n\nCell.prototype.layoutElement = function () {\n\tthis._generateContents();\n\tthis._generateTooltip();\n\n\t//set resizable handles\n\tif (this.table.options.resizableColumns && this.table.modExists(\"resizeColumns\") && this.row.type === \"row\") {\n\t\tthis.table.modules.resizeColumns.initializeColumn(\"cell\", this.column, this.element);\n\t}\n\n\tif ((this.column.definition.contextMenu || this.column.definition.clickMenu) && this.table.modExists(\"menu\")) {\n\t\tthis.table.modules.menu.initializeCell(this);\n\t}\n\n\t//handle frozen cells\n\tif (this.table.modExists(\"frozenColumns\")) {\n\t\tthis.table.modules.frozenColumns.layoutElement(this.element, this.column);\n\t}\n};\n\nCell.prototype.setWidth = function () {\n\tthis.width = this.column.width;\n\tthis.element.style.width = this.column.widthStyled;\n};\n\nCell.prototype.clearWidth = function () {\n\tthis.width = \"\";\n\tthis.element.style.width = \"\";\n};\n\nCell.prototype.getWidth = function () {\n\treturn this.width || this.element.offsetWidth;\n};\n\nCell.prototype.setMinWidth = function () {\n\tthis.minWidth = this.column.minWidth;\n\tthis.element.style.minWidth = this.column.minWidthStyled;\n};\n\nCell.prototype.checkHeight = function () {\n\t// var height = this.element.css(\"height\");\n\tthis.row.reinitializeHeight();\n};\n\nCell.prototype.clearHeight = function () {\n\tthis.element.style.height = \"\";\n\tthis.height = null;\n};\n\nCell.prototype.setHeight = function () {\n\tthis.height = this.row.height;\n\tthis.element.style.height = this.row.heightStyled;\n};\n\nCell.prototype.getHeight = function () {\n\treturn this.height || this.element.offsetHeight;\n};\n\nCell.prototype.show = function () {\n\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n};\n\nCell.prototype.hide = function () {\n\tthis.element.style.display = \"none\";\n};\n\nCell.prototype.edit = function (force) {\n\tif (this.table.modExists(\"edit\", true)) {\n\t\treturn this.table.modules.edit.editCell(this, force);\n\t}\n};\n\nCell.prototype.cancelEdit = function () {\n\tif (this.table.modExists(\"edit\", true)) {\n\t\tvar editing = this.table.modules.edit.getCurrentCell();\n\n\t\tif (editing && editing._getSelf() === this) {\n\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t} else {\n\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n\t\t}\n\t}\n};\n\nCell.prototype.validate = function () {\n\tif (this.column.modules.validate && this.table.modExists(\"validate\", true)) {\n\t\tvar valid = this.table.modules.validate.validate(this.column.modules.validate, this, this.getValue());\n\n\t\treturn valid === true;\n\t} else {\n\t\treturn true;\n\t}\n};\n\nCell.prototype.delete = function () {\n\tif (!this.table.rowManager.redrawBlock && this.element.parentNode) {\n\t\tthis.element.parentNode.removeChild(this.element);\n\t}\n\n\tif (this.modules.validate && this.modules.validate.invalid) {\n\t\tthis.table.modules.validate.clearValidation(this);\n\t}\n\n\tif (this.modules.edit && this.modules.edit.edited) {\n\t\tthis.table.modules.edit.clearEdited(this);\n\t}\n\n\tif (this.table.options.history) {\n\t\tthis.table.modules.history.clearComponentHistory(this);\n\t}\n\n\tthis.element = false;\n\tthis.column.deleteCell(this);\n\tthis.row.deleteCell(this);\n\tthis.calcs = {};\n};\n\n//////////////// Navigation /////////////////\n\nCell.prototype.nav = function () {\n\n\tvar self = this,\n\t    nextCell = false,\n\t    index = this.row.getCellIndex(this);\n\n\treturn {\n\t\tnext: function next() {\n\t\t\tvar nextCell = this.right(),\n\t\t\t    nextRow;\n\n\t\t\tif (!nextCell) {\n\t\t\t\tnextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n\t\t\t\tif (nextRow) {\n\t\t\t\t\tnextCell = nextRow.findNextEditableCell(-1);\n\n\t\t\t\t\tif (nextCell) {\n\t\t\t\t\t\tnextCell.edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tprev: function prev() {\n\t\t\tvar nextCell = this.left(),\n\t\t\t    prevRow;\n\n\t\t\tif (!nextCell) {\n\t\t\t\tprevRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n\t\t\t\tif (prevRow) {\n\t\t\t\t\tnextCell = prevRow.findPrevEditableCell(prevRow.cells.length);\n\n\t\t\t\t\tif (nextCell) {\n\t\t\t\t\t\tnextCell.edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tleft: function left() {\n\n\t\t\tnextCell = self.row.findPrevEditableCell(index);\n\n\t\t\tif (nextCell) {\n\t\t\t\tnextCell.edit();\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tright: function right() {\n\t\t\tnextCell = self.row.findNextEditableCell(index);\n\n\t\t\tif (nextCell) {\n\t\t\t\tnextCell.edit();\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tup: function up() {\n\t\t\tvar nextRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n\t\t\tif (nextRow) {\n\t\t\t\tnextRow.cells[index].edit();\n\t\t\t}\n\t\t},\n\t\tdown: function down() {\n\t\t\tvar nextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n\t\t\tif (nextRow) {\n\t\t\t\tnextRow.cells[index].edit();\n\t\t\t}\n\t\t}\n\n\t};\n};\n\nCell.prototype.getIndex = function () {\n\tthis.row.getCellIndex(this);\n};\n\n//////////////// Object Generation /////////////////\nCell.prototype.getComponent = function () {\n\n\tif (!this.component) {\n\t\tthis.component = new CellComponent(this);\n\t}\n\n\treturn this.component;\n};\nvar FooterManager = function FooterManager(table) {\n\tthis.table = table;\n\tthis.active = false;\n\tthis.element = this.createElement(); //containing element\n\tthis.external = false;\n\tthis.links = [];\n\n\tthis._initialize();\n};\n\nFooterManager.prototype.createElement = function () {\n\tvar el = document.createElement(\"div\");\n\n\tel.classList.add(\"tabulator-footer\");\n\n\treturn el;\n};\n\nFooterManager.prototype._initialize = function (element) {\n\tif (this.table.options.footerElement) {\n\n\t\tswitch (_typeof(this.table.options.footerElement)) {\n\t\t\tcase \"string\":\n\n\t\t\t\tif (this.table.options.footerElement[0] === \"<\") {\n\t\t\t\t\tthis.element.innerHTML = this.table.options.footerElement;\n\t\t\t\t} else {\n\t\t\t\t\tthis.external = true;\n\t\t\t\t\tthis.element = document.querySelector(this.table.options.footerElement);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.element = this.table.options.footerElement;\n\t\t\t\tbreak;\n\t\t}\n\t}\n};\n\nFooterManager.prototype.getElement = function () {\n\treturn this.element;\n};\n\nFooterManager.prototype.append = function (element, parent) {\n\tthis.activate(parent);\n\n\tthis.element.appendChild(element);\n\tthis.table.rowManager.adjustTableSize();\n};\n\nFooterManager.prototype.prepend = function (element, parent) {\n\tthis.activate(parent);\n\n\tthis.element.insertBefore(element, this.element.firstChild);\n\tthis.table.rowManager.adjustTableSize();\n};\n\nFooterManager.prototype.remove = function (element) {\n\telement.parentNode.removeChild(element);\n\tthis.deactivate();\n};\n\nFooterManager.prototype.deactivate = function (force) {\n\tif (!this.element.firstChild || force) {\n\t\tif (!this.external) {\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t\tthis.active = false;\n\t}\n\n\t// this.table.rowManager.adjustTableSize();\n};\n\nFooterManager.prototype.activate = function (parent) {\n\tif (!this.active) {\n\t\tthis.active = true;\n\t\tif (!this.external) {\n\t\t\tthis.table.element.appendChild(this.getElement());\n\t\t\tthis.table.element.style.display = '';\n\t\t}\n\t}\n\n\tif (parent) {\n\t\tthis.links.push(parent);\n\t}\n};\n\nFooterManager.prototype.redraw = function () {\n\tthis.links.forEach(function (link) {\n\t\tlink.footerRedraw();\n\t});\n};\n\nvar Tabulator = function Tabulator(element, options) {\n\n\tthis.options = {};\n\n\tthis.columnManager = null; // hold Column Manager\n\tthis.rowManager = null; //hold Row Manager\n\tthis.footerManager = null; //holder Footer Manager\n\tthis.vdomHoz = null; //holder horizontal virtual dom\n\n\n\tthis.browser = \"\"; //hold current browser type\n\tthis.browserSlow = false; //handle reduced functionality for slower browsers\n\tthis.browserMobile = false; //check if running on moble, prevent resize cancelling edit on keyboard appearence\n\tthis.rtl = false; //check if the table is in RTL mode\n\n\tthis.modules = {}; //hold all modules bound to this table\n\n\tif (this.initializeElement(element)) {\n\t\tthis.initializeOptions(options || {});\n\t\tthis._create();\n\t}\n\n\tTabulator.prototype.comms.register(this); //register table for inderdevice communication\n};\n\n//default setup options\nTabulator.prototype.defaultOptions = {\n\n\theight: false, //height of tabulator\n\tminHeight: false, //minimum height of tabulator\n\tmaxHeight: false, //maximum height of tabulator\n\n\tlayout: \"fitData\", ///layout type \"fitColumns\" | \"fitData\"\n\tlayoutColumnsOnNewData: false, //update column widths on setData\n\n\tcolumnMinWidth: 40, //minimum global width for a column\n\tcolumnHeaderVertAlign: \"top\", //vertical alignment of column headers\n\tcolumnVertAlign: false, // DEPRECATED - Left to allow warning\n\n\tresizableColumns: true, //resizable columns\n\tresizableRows: false, //resizable rows\n\tautoResize: true, //auto resize table\n\n\tcolumns: [], //store for colum header info\n\n\tcellHozAlign: \"\", //horizontal align columns\n\tcellVertAlign: \"\", //vertical align columns\n\theaderHozAlign: \"\", //horizontal header alignment\n\n\n\tdata: [], //default starting data\n\n\tautoColumns: false, //build columns from data row structure\n\tautoColumnsDefinitions: false,\n\n\treactiveData: false, //enable data reactivity\n\n\tnestedFieldSeparator: \".\", //seperatpr for nested data\n\n\ttooltips: false, //Tool tip value\n\ttooltipsHeader: false, //Tool tip for headers\n\ttooltipGenerationMode: \"load\", //when to generate tooltips\n\n\tinitialSort: false, //initial sorting criteria\n\tinitialFilter: false, //initial filtering criteria\n\tinitialHeaderFilter: false, //initial header filtering criteria\n\n\tcolumnHeaderSortMulti: true, //multiple or single column sorting\n\n\tsortOrderReverse: false, //reverse internal sort ordering\n\n\theaderSort: true, //set default global header sort\n\theaderSortTristate: false, //set default tristate header sorting\n\theaderSortElement: \"<div class='tabulator-arrow'></div>\", //header sort element\n\n\tfooterElement: false, //hold footer element\n\n\tindex: \"id\", //filed for row index\n\n\ttextDirection: \"auto\",\n\n\tkeybindings: [], //array for keybindings\n\n\ttabEndNewRow: false, //create new row when tab to end of table\n\n\tinvalidOptionWarnings: true, //allow toggling of invalid option warnings\n\n\tclipboard: false, //enable clipboard\n\tclipboardCopyStyled: true, //formatted table data\n\tclipboardCopyConfig: false, //clipboard config\n\tclipboardCopyFormatter: false, //DEPRICATED - REMOVE in 5.0\n\tclipboardCopyRowRange: \"active\", //restrict clipboard to visible rows only\n\tclipboardPasteParser: \"table\", //convert pasted clipboard data to rows\n\tclipboardPasteAction: \"insert\", //how to insert pasted data into the table\n\n\tclipboardCopied: function clipboardCopied() {}, //data has been copied to the clipboard\n\tclipboardPasted: function clipboardPasted() {}, //data has been pasted into the table\n\tclipboardPasteError: function clipboardPasteError() {}, //data has not successfully been pasted into the table\n\n\tdownloadDataFormatter: false, //function to manipulate table data before it is downloaded\n\tdownloadReady: function downloadReady(data, blob) {\n\t\treturn blob;\n\t}, //function to manipulate download data\n\tdownloadComplete: false, //function to manipulate download data\n\tdownloadConfig: {}, //download config\n\tdownloadRowRange: \"active\", //restrict download to active rows only\n\n\tdataTree: false, //enable data tree\n\tdataTreeFilter: true, //filter child rows\n\tdataTreeSort: true, //sort child rows\n\tdataTreeElementColumn: false,\n\tdataTreeBranchElement: true, //show data tree branch element\n\tdataTreeChildIndent: 9, //data tree child indent in px\n\tdataTreeChildField: \"_children\", //data tre column field to look for child rows\n\tdataTreeCollapseElement: false, //data tree row collapse element\n\tdataTreeExpandElement: false, //data tree row expand element\n\tdataTreeStartExpanded: false,\n\tdataTreeRowExpanded: function dataTreeRowExpanded() {}, //row has been expanded\n\tdataTreeRowCollapsed: function dataTreeRowCollapsed() {}, //row has been collapsed\n\tdataTreeChildColumnCalcs: false, //include visible data tree rows in column calculations\n\tdataTreeSelectPropagate: false, //seleccting a parent row selects its children\n\n\tprintAsHtml: false, //enable print as html\n\tprintFormatter: false, //printing page formatter\n\tprintHeader: false, //page header contents\n\tprintFooter: false, //page footer contents\n\tprintCopyStyle: true, //DEPRICATED - REMOVE in 5.0\n\tprintStyled: true, //enable print as html styling\n\tprintVisibleRows: true, //DEPRICATED - REMOVE in 5.0\n\tprintRowRange: \"visible\", //restrict print to visible rows only\n\tprintConfig: {}, //print config options\n\n\taddRowPos: \"bottom\", //position to insert blank rows, top|bottom\n\n\tselectable: \"highlight\", //highlight rows on hover\n\tselectableRangeMode: \"drag\", //highlight rows on hover\n\tselectableRollingSelection: true, //roll selection once maximum number of selectable rows is reached\n\tselectablePersistence: true, // maintain selection when table view is updated\n\tselectableCheck: function selectableCheck(data, row) {\n\t\treturn true;\n\t}, //check wheather row is selectable\n\n\theaderFilterLiveFilterDelay: 300, //delay before updating column after user types in header filter\n\theaderFilterPlaceholder: false, //placeholder text to display in header filters\n\n\theaderVisible: true, //hide header\n\n\thistory: false, //enable edit history\n\n\tlocale: false, //current system language\n\tlangs: {},\n\n\tvirtualDom: true, //enable DOM virtualization\n\tvirtualDomBuffer: 0, // set virtual DOM buffer size\n\tvirtualDomHoz: false, //enable horizontal DOM virtualization\n\n\tpersistentLayout: false, //DEPRICATED - REMOVE in 5.0\n\tpersistentSort: false, //DEPRICATED - REMOVE in 5.0\n\tpersistentFilter: false, //DEPRICATED - REMOVE in 5.0\n\tpersistenceID: \"\", //key for persistent storage\n\tpersistenceMode: true, //mode for storing persistence information\n\tpersistenceReaderFunc: false, //function for handling persistence data reading\n\tpersistenceWriterFunc: false, //function for handling persistence data writing\n\n\tpersistence: false,\n\n\tresponsiveLayout: false, //responsive layout flags\n\tresponsiveLayoutCollapseStartOpen: true, //start showing collapsed data\n\tresponsiveLayoutCollapseUseFormatters: true, //responsive layout collapse formatter\n\tresponsiveLayoutCollapseFormatter: false, //responsive layout collapse formatter\n\n\tpagination: false, //set pagination type\n\tpaginationSize: false, //set number of rows to a page\n\tpaginationInitialPage: 1, //initail page to show on load\n\tpaginationButtonCount: 5, // set count of page button\n\tpaginationSizeSelector: false, //add pagination size selector element\n\tpaginationElement: false, //element to hold pagination numbers\n\tpaginationDataSent: {}, //pagination data sent to the server\n\tpaginationDataReceived: {}, //pagination data received from the server\n\tpaginationAddRow: \"page\", //add rows on table or page\n\n\tajaxURL: false, //url for ajax loading\n\tajaxURLGenerator: false,\n\tajaxParams: {}, //params for ajax loading\n\tajaxConfig: \"get\", //ajax request type\n\tajaxContentType: \"form\", //ajax request type\n\tajaxRequestFunc: false, //promise function\n\tajaxLoader: true, //show loader\n\tajaxLoaderLoading: false, //loader element\n\tajaxLoaderError: false, //loader element\n\tajaxFiltering: false,\n\tajaxSorting: false,\n\tajaxProgressiveLoad: false, //progressive loading\n\tajaxProgressiveLoadDelay: 0, //delay between requests\n\tajaxProgressiveLoadScrollMargin: 0, //margin before scroll begins\n\n\tgroupBy: false, //enable table grouping and set field to group by\n\tgroupStartOpen: true, //starting state of group\n\tgroupValues: false,\n\tgroupUpdateOnCellEdit: false,\n\n\tgroupHeader: false, //header generation function\n\tgroupHeaderPrint: null,\n\tgroupHeaderClipboard: null,\n\tgroupHeaderHtmlOutput: null,\n\tgroupHeaderDownload: null,\n\n\thtmlOutputConfig: false, //html outypu config\n\n\tmovableColumns: false, //enable movable columns\n\n\tmovableRows: false, //enable movable rows\n\tmovableRowsConnectedTables: false, //tables for movable rows to be connected to\n\tmovableRowsConnectedElements: false, //other elements for movable rows to be connected to\n\tmovableRowsSender: false,\n\tmovableRowsReceiver: \"insert\",\n\tmovableRowsSendingStart: function movableRowsSendingStart() {},\n\tmovableRowsSent: function movableRowsSent() {},\n\tmovableRowsSentFailed: function movableRowsSentFailed() {},\n\tmovableRowsSendingStop: function movableRowsSendingStop() {},\n\tmovableRowsReceivingStart: function movableRowsReceivingStart() {},\n\tmovableRowsReceived: function movableRowsReceived() {},\n\tmovableRowsReceivedFailed: function movableRowsReceivedFailed() {},\n\tmovableRowsReceivingStop: function movableRowsReceivingStop() {},\n\tmovableRowsElementDrop: function movableRowsElementDrop() {},\n\n\tscrollToRowPosition: \"top\",\n\tscrollToRowIfVisible: true,\n\n\tscrollToColumnPosition: \"left\",\n\tscrollToColumnIfVisible: true,\n\n\trowFormatter: false,\n\trowFormatterPrint: null,\n\trowFormatterClipboard: null,\n\trowFormatterHtmlOutput: null,\n\n\tplaceholder: false,\n\n\t//table building callbacks\n\ttableBuilding: function tableBuilding() {},\n\ttableBuilt: function tableBuilt() {},\n\n\t//render callbacks\n\trenderStarted: function renderStarted() {},\n\trenderComplete: function renderComplete() {},\n\n\t//row callbacks\n\trowClick: false,\n\trowDblClick: false,\n\trowContext: false,\n\trowTap: false,\n\trowDblTap: false,\n\trowTapHold: false,\n\trowMouseEnter: false,\n\trowMouseLeave: false,\n\trowMouseOver: false,\n\trowMouseOut: false,\n\trowMouseMove: false,\n\trowContextMenu: false,\n\trowClickMenu: false,\n\trowAdded: function rowAdded() {},\n\trowDeleted: function rowDeleted() {},\n\trowMoved: function rowMoved() {},\n\trowUpdated: function rowUpdated() {},\n\trowSelectionChanged: function rowSelectionChanged() {},\n\trowSelected: function rowSelected() {},\n\trowDeselected: function rowDeselected() {},\n\trowResized: function rowResized() {},\n\n\t//cell callbacks\n\t//row callbacks\n\tcellClick: false,\n\tcellDblClick: false,\n\tcellContext: false,\n\tcellTap: false,\n\tcellDblTap: false,\n\tcellTapHold: false,\n\tcellMouseEnter: false,\n\tcellMouseLeave: false,\n\tcellMouseOver: false,\n\tcellMouseOut: false,\n\tcellMouseMove: false,\n\tcellEditing: function cellEditing() {},\n\tcellEdited: function cellEdited() {},\n\tcellEditCancelled: function cellEditCancelled() {},\n\n\t//column callbacks\n\tcolumnMoved: false,\n\tcolumnResized: function columnResized() {},\n\tcolumnTitleChanged: function columnTitleChanged() {},\n\tcolumnVisibilityChanged: function columnVisibilityChanged() {},\n\n\t//HTML iport callbacks\n\thtmlImporting: function htmlImporting() {},\n\thtmlImported: function htmlImported() {},\n\n\t//data callbacks\n\tdataLoading: function dataLoading() {},\n\tdataLoaded: function dataLoaded() {},\n\tdataEdited: false, //DEPRECATED\n\tdataChanged: false,\n\n\t//ajax callbacks\n\tajaxRequesting: function ajaxRequesting() {},\n\tajaxResponse: false,\n\tajaxError: function ajaxError() {},\n\n\t//filtering callbacks\n\tdataFiltering: false,\n\tdataFiltered: false,\n\n\t//sorting callbacks\n\tdataSorting: function dataSorting() {},\n\tdataSorted: function dataSorted() {},\n\n\t//grouping callbacks\n\tgroupToggleElement: \"arrow\",\n\tgroupClosedShowCalcs: false,\n\tdataGrouping: function dataGrouping() {},\n\tdataGrouped: false,\n\tgroupVisibilityChanged: function groupVisibilityChanged() {},\n\tgroupClick: false,\n\tgroupDblClick: false,\n\tgroupContext: false,\n\tgroupContextMenu: false,\n\tgroupClickMenu: false,\n\tgroupTap: false,\n\tgroupDblTap: false,\n\tgroupTapHold: false,\n\n\tcolumnCalcs: true,\n\n\t//pagination callbacks\n\tpageLoaded: function pageLoaded() {},\n\n\t//localization callbacks\n\tlocalized: function localized() {},\n\n\t//validation callbacks\n\tvalidationMode: \"blocking\",\n\tvalidationFailed: function validationFailed() {},\n\n\t//history callbacks\n\thistoryUndo: function historyUndo() {},\n\thistoryRedo: function historyRedo() {},\n\n\t//scroll callbacks\n\tscrollHorizontal: function scrollHorizontal() {},\n\tscrollVertical: function scrollVertical() {}\n};\n\nTabulator.prototype.initializeOptions = function (options) {\n\n\t//warn user if option is not available\n\tif (options.invalidOptionWarnings !== false) {\n\t\tfor (var key in options) {\n\t\t\tif (typeof this.defaultOptions[key] === \"undefined\") {\n\t\t\t\tconsole.warn(\"Invalid table constructor option:\", key);\n\t\t\t}\n\t\t}\n\t}\n\n\t//assign options to table\n\tfor (var key in this.defaultOptions) {\n\t\tif (key in options) {\n\t\t\tthis.options[key] = options[key];\n\t\t} else {\n\t\t\tif (Array.isArray(this.defaultOptions[key])) {\n\t\t\t\tthis.options[key] = [];\n\t\t\t} else if (_typeof(this.defaultOptions[key]) === \"object\" && this.defaultOptions[key] !== null) {\n\t\t\t\tthis.options[key] = {};\n\t\t\t} else {\n\t\t\t\tthis.options[key] = this.defaultOptions[key];\n\t\t\t}\n\t\t}\n\t}\n};\n\nTabulator.prototype.initializeElement = function (element) {\n\n\tif (typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement) {\n\t\tthis.element = element;\n\t\treturn true;\n\t} else if (typeof element === \"string\") {\n\t\tthis.element = document.querySelector(element);\n\n\t\tif (this.element) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.rtlCheck = function () {\n\tvar style = window.getComputedStyle(this.element);\n\n\tswitch (this.options.textDirection) {\n\t\tcase \"auto\":\n\t\t\tif (style.direction !== \"rtl\") {\n\t\t\t\tbreak;\n\t\t\t};\n\n\t\tcase \"rtl\":\n\t\t\tthis.element.classList.add(\"tabulator-rtl\");\n\t\t\tthis.rtl = true;\n\t\t\tbreak;\n\n\t\tcase \"ltr\":\n\t\t\tthis.element.classList.add(\"tabulator-ltr\");\n\n\t\tdefault:\n\t\t\tthis.rtl = false;\n\t}\n};\n\n//convert depricated functionality to new functions\nTabulator.prototype._mapDepricatedFunctionality = function () {\n\n\t//map depricated persistance setup options\n\tif (this.options.persistentLayout || this.options.persistentSort || this.options.persistentFilter) {\n\t\tif (!this.options.persistence) {\n\t\t\tthis.options.persistence = {};\n\t\t}\n\t}\n\n\tif (this.options.dataEdited) {\n\t\tconsole.warn(\"DEPRECATION WARNING - dataEdited option has been deprecated, please use the dataChanged option instead\");\n\t\tthis.options.dataChanged = this.options.dataEdited;\n\t}\n\n\tif (this.options.downloadDataFormatter) {\n\t\tconsole.warn(\"DEPRECATION WARNING - downloadDataFormatter option has been deprecated\");\n\t}\n\n\tif (typeof this.options.clipboardCopyHeader !== \"undefined\") {\n\t\tthis.options.columnHeaders = this.options.clipboardCopyHeader;\n\t\tconsole.warn(\"DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option\");\n\t}\n\n\tif (this.options.printVisibleRows !== true) {\n\t\tconsole.warn(\"printVisibleRows option is deprecated, you should now use the printRowRange option\");\n\n\t\tthis.options.persistence.printRowRange = \"active\";\n\t}\n\n\tif (this.options.printCopyStyle !== true) {\n\t\tconsole.warn(\"printCopyStyle option is deprecated, you should now use the printStyled option\");\n\n\t\tthis.options.persistence.printStyled = this.options.printCopyStyle;\n\t}\n\n\tif (this.options.persistentLayout) {\n\t\tconsole.warn(\"persistentLayout option is deprecated, you should now use the persistence option\");\n\n\t\tif (this.options.persistence !== true && typeof this.options.persistence.columns === \"undefined\") {\n\t\t\tthis.options.persistence.columns = true;\n\t\t}\n\t}\n\n\tif (this.options.persistentSort) {\n\t\tconsole.warn(\"persistentSort option is deprecated, you should now use the persistence option\");\n\n\t\tif (this.options.persistence !== true && typeof this.options.persistence.sort === \"undefined\") {\n\t\t\tthis.options.persistence.sort = true;\n\t\t}\n\t}\n\n\tif (this.options.persistentFilter) {\n\t\tconsole.warn(\"persistentFilter option is deprecated, you should now use the persistence option\");\n\n\t\tif (this.options.persistence !== true && typeof this.options.persistence.filter === \"undefined\") {\n\t\t\tthis.options.persistence.filter = true;\n\t\t}\n\t}\n\n\tif (this.options.columnVertAlign) {\n\t\tconsole.warn(\"columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option\");\n\n\t\tthis.options.columnHeaderVertAlign = this.options.columnVertAlign;\n\t}\n};\n\nTabulator.prototype._clearSelection = function () {\n\n\tthis.element.classList.add(\"tabulator-block-select\");\n\n\tif (window.getSelection) {\n\t\tif (window.getSelection().empty) {\n\t\t\t// Chrome\n\t\t\twindow.getSelection().empty();\n\t\t} else if (window.getSelection().removeAllRanges) {\n\t\t\t// Firefox\n\t\t\twindow.getSelection().removeAllRanges();\n\t\t}\n\t} else if (document.selection) {\n\t\t// IE?\n\t\tdocument.selection.empty();\n\t}\n\n\tthis.element.classList.remove(\"tabulator-block-select\");\n};\n\n//concreate table\nTabulator.prototype._create = function () {\n\tthis._clearObjectPointers();\n\n\tthis._mapDepricatedFunctionality();\n\n\tthis.bindModules();\n\n\tthis.rtlCheck();\n\n\tif (this.element.tagName === \"TABLE\") {\n\t\tif (this.modExists(\"htmlTableImport\", true)) {\n\t\t\tthis.modules.htmlTableImport.parseTable();\n\t\t}\n\t}\n\n\tthis.columnManager = new ColumnManager(this);\n\tthis.rowManager = new RowManager(this);\n\tthis.footerManager = new FooterManager(this);\n\n\tthis.columnManager.setRowManager(this.rowManager);\n\tthis.rowManager.setColumnManager(this.columnManager);\n\n\tif (this.options.virtualDomHoz) {\n\t\tthis.vdomHoz = new VDomHoz(this);\n\t}\n\n\tthis._buildElement();\n\n\tthis._loadInitialData();\n};\n\n//clear pointers to objects in default config object\nTabulator.prototype._clearObjectPointers = function () {\n\tthis.options.columns = this.options.columns.slice(0);\n\n\tif (!this.options.reactiveData) {\n\t\tthis.options.data = this.options.data.slice(0);\n\t}\n};\n\n//build tabulator element\nTabulator.prototype._buildElement = function () {\n\tvar _this24 = this;\n\n\tvar element = this.element,\n\t    mod = this.modules,\n\t    options = this.options;\n\n\toptions.tableBuilding.call(this);\n\n\telement.classList.add(\"tabulator\");\n\telement.setAttribute(\"role\", \"grid\");\n\n\t//empty element\n\twhile (element.firstChild) {\n\t\telement.removeChild(element.firstChild);\n\t} //set table height\n\tif (options.height) {\n\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\n\t\telement.style.height = options.height;\n\t}\n\n\t//set table min height\n\tif (options.minHeight !== false) {\n\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n\t\telement.style.minHeight = options.minHeight;\n\t}\n\n\t//set table maxHeight\n\tif (options.maxHeight !== false) {\n\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n\t\telement.style.maxHeight = options.maxHeight;\n\t}\n\n\tthis.columnManager.initialize();\n\tthis.rowManager.initialize();\n\n\tthis._detectBrowser();\n\n\tif (this.modExists(\"layout\", true)) {\n\t\tmod.layout.initialize(options.layout);\n\t}\n\n\t//set localization\n\n\tmod.localize.initialize();\n\n\tif (options.headerFilterPlaceholder !== false) {\n\t\tmod.localize.setHeaderFilterPlaceholder(options.headerFilterPlaceholder);\n\t}\n\n\tfor (var locale in options.langs) {\n\t\tmod.localize.installLang(locale, options.langs[locale]);\n\t}\n\n\tmod.localize.setLocale(options.locale);\n\n\t//configure placeholder element\n\tif (typeof options.placeholder == \"string\") {\n\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-placeholder\");\n\n\t\tvar span = document.createElement(\"span\");\n\t\tspan.innerHTML = options.placeholder;\n\n\t\tel.appendChild(span);\n\n\t\toptions.placeholder = el;\n\t}\n\n\t//build table elements\n\telement.appendChild(this.columnManager.getElement());\n\telement.appendChild(this.rowManager.getElement());\n\n\tif (options.footerElement) {\n\t\tthis.footerManager.activate();\n\t}\n\n\tif (options.persistence && this.modExists(\"persistence\", true)) {\n\t\tmod.persistence.initialize();\n\t}\n\n\tif (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.columns) {\n\t\toptions.columns = mod.persistence.load(\"columns\", options.columns);\n\t}\n\n\tif (options.movableRows && this.modExists(\"moveRow\")) {\n\t\tmod.moveRow.initialize();\n\t}\n\n\tif (options.autoColumns && this.options.data) {\n\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\n\t}\n\n\tif (this.modExists(\"columnCalcs\")) {\n\t\tmod.columnCalcs.initialize();\n\t}\n\n\tthis.columnManager.setColumns(options.columns);\n\n\tif (options.dataTree && this.modExists(\"dataTree\", true)) {\n\t\tmod.dataTree.initialize();\n\t}\n\n\tif (this.modExists(\"frozenRows\")) {\n\t\tthis.modules.frozenRows.initialize();\n\t}\n\n\tif ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort || options.initialSort) && this.modExists(\"sort\", true)) {\n\t\tvar sorters = [];\n\n\t\tif (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort) {\n\t\t\tsorters = mod.persistence.load(\"sort\");\n\n\t\t\tif (sorters === false && options.initialSort) {\n\t\t\t\tsorters = options.initialSort;\n\t\t\t}\n\t\t} else if (options.initialSort) {\n\t\t\tsorters = options.initialSort;\n\t\t}\n\n\t\tmod.sort.setSort(sorters);\n\t}\n\n\tif ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter || options.initialFilter) && this.modExists(\"filter\", true)) {\n\t\tvar filters = [];\n\n\t\tif (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter) {\n\t\t\tfilters = mod.persistence.load(\"filter\");\n\n\t\t\tif (filters === false && options.initialFilter) {\n\t\t\t\tfilters = options.initialFilter;\n\t\t\t}\n\t\t} else if (options.initialFilter) {\n\t\t\tfilters = options.initialFilter;\n\t\t}\n\n\t\tmod.filter.setFilter(filters);\n\t}\n\n\tif (options.initialHeaderFilter && this.modExists(\"filter\", true)) {\n\t\toptions.initialHeaderFilter.forEach(function (item) {\n\n\t\t\tvar column = _this24.columnManager.findColumn(item.field);\n\n\t\t\tif (column) {\n\t\t\t\tmod.filter.setHeaderFilterValue(column, item.value);\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t}\n\n\tif (this.modExists(\"ajax\")) {\n\t\tmod.ajax.initialize();\n\t}\n\n\tif (options.pagination && this.modExists(\"page\", true)) {\n\t\tmod.page.initialize();\n\t}\n\n\tif (options.groupBy && this.modExists(\"groupRows\", true)) {\n\t\tmod.groupRows.initialize();\n\t}\n\n\tif (this.modExists(\"keybindings\")) {\n\t\tmod.keybindings.initialize();\n\t}\n\n\tif (this.modExists(\"selectRow\")) {\n\t\tmod.selectRow.clearSelectionData(true);\n\t}\n\n\tif (options.autoResize && this.modExists(\"resizeTable\")) {\n\t\tmod.resizeTable.initialize();\n\t}\n\n\tif (this.modExists(\"clipboard\")) {\n\t\tmod.clipboard.initialize();\n\t}\n\n\tif (options.printAsHtml && this.modExists(\"print\")) {\n\t\tmod.print.initialize();\n\t}\n\n\toptions.tableBuilt.call(this);\n};\n\nTabulator.prototype._loadInitialData = function () {\n\tvar self = this;\n\n\tif (self.options.pagination && self.modExists(\"page\")) {\n\t\tself.modules.page.reset(true, true);\n\n\t\tif (self.options.pagination == \"local\") {\n\t\t\tif (self.options.data.length) {\n\t\t\t\tself.rowManager.setData(self.options.data, false, true);\n\t\t\t} else {\n\t\t\t\tif ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n\t\t\t\t\tself.modules.ajax.loadData(false, true).then(function () {}).catch(function () {\n\t\t\t\t\t\tif (self.options.paginationInitialPage) {\n\t\t\t\t\t\t\tself.modules.page.setPage(self.options.paginationInitialPage);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tself.rowManager.setData(self.options.data, false, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (self.options.paginationInitialPage) {\n\t\t\t\tself.modules.page.setPage(self.options.paginationInitialPage);\n\t\t\t}\n\t\t} else {\n\t\t\tif (self.options.ajaxURL) {\n\t\t\t\tself.modules.page.setPage(self.options.paginationInitialPage).then(function () {}).catch(function () {});\n\t\t\t} else {\n\t\t\t\tself.rowManager.setData([], false, true);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (self.options.data.length) {\n\t\t\tself.rowManager.setData(self.options.data);\n\t\t} else {\n\t\t\tif ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n\t\t\t\tself.modules.ajax.loadData(false, true).then(function () {}).catch(function () {});\n\t\t\t} else {\n\t\t\t\tself.rowManager.setData(self.options.data, false, true);\n\t\t\t}\n\t\t}\n\t}\n};\n\n//deconstructor\nTabulator.prototype.destroy = function () {\n\tvar element = this.element;\n\n\tTabulator.prototype.comms.deregister(this); //deregister table from inderdevice communication\n\n\tif (this.options.reactiveData && this.modExists(\"reactiveData\", true)) {\n\t\tthis.modules.reactiveData.unwatchData();\n\t}\n\n\t//clear row data\n\tthis.rowManager.rows.forEach(function (row) {\n\t\trow.wipe();\n\t});\n\n\tthis.rowManager.rows = [];\n\tthis.rowManager.activeRows = [];\n\tthis.rowManager.displayRows = [];\n\n\t//clear event bindings\n\tif (this.options.autoResize && this.modExists(\"resizeTable\")) {\n\t\tthis.modules.resizeTable.clearBindings();\n\t}\n\n\tif (this.modExists(\"keybindings\")) {\n\t\tthis.modules.keybindings.clearBindings();\n\t}\n\n\t//clear DOM\n\twhile (element.firstChild) {\n\t\telement.removeChild(element.firstChild);\n\t}element.classList.remove(\"tabulator\");\n};\n\nTabulator.prototype._detectBrowser = function () {\n\tvar ua = navigator.userAgent || navigator.vendor || window.opera;\n\n\tif (ua.indexOf(\"Trident\") > -1) {\n\t\tthis.browser = \"ie\";\n\t\tthis.browserSlow = true;\n\t} else if (ua.indexOf(\"Edge\") > -1) {\n\t\tthis.browser = \"edge\";\n\t\tthis.browserSlow = true;\n\t} else if (ua.indexOf(\"Firefox\") > -1) {\n\t\tthis.browser = \"firefox\";\n\t\tthis.browserSlow = false;\n\t} else {\n\t\tthis.browser = \"other\";\n\t\tthis.browserSlow = false;\n\t}\n\n\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(ua.substr(0, 4));\n};\n\n////////////////// Data Handling //////////////////\n\n//block table redrawing\nTabulator.prototype.blockRedraw = function () {\n\treturn this.rowManager.blockRedraw();\n};\n\n//restore table redrawing\nTabulator.prototype.restoreRedraw = function () {\n\treturn this.rowManager.restoreRedraw();\n};\n\n//local data from local file\nTabulator.prototype.setDataFromLocalFile = function (extensions) {\n\tvar _this25 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar input = document.createElement(\"input\");\n\t\tinput.type = \"file\";\n\t\tinput.accept = extensions || \".json,application/json\";\n\n\t\tinput.addEventListener(\"change\", function (e) {\n\t\t\tvar file = input.files[0],\n\t\t\t    reader = new FileReader(),\n\t\t\t    data;\n\n\t\t\treader.readAsText(file);\n\n\t\t\treader.onload = function (e) {\n\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.parse(reader.result);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn(\"File Load Error - File contents is invalid JSON\", e);\n\t\t\t\t\treject(e);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t_this25.setData(data).then(function (data) {\n\t\t\t\t\tresolve(data);\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\tresolve(err);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\treader.onerror = function (e) {\n\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\n\t\t\t\treject();\n\t\t\t};\n\t\t});\n\n\t\tinput.click();\n\t});\n};\n\n//load data\nTabulator.prototype.setData = function (data, params, config) {\n\tif (this.modExists(\"ajax\")) {\n\t\tthis.modules.ajax.blockActiveRequest();\n\t}\n\n\treturn this._setData(data, params, config, false, true);\n};\n\nTabulator.prototype._setData = function (data, params, config, inPosition, columnsChanged) {\n\tvar self = this;\n\n\tif (typeof data === \"string\") {\n\t\tif (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0) {\n\t\t\t//data is a json encoded string\n\t\t\treturn self.rowManager.setData(JSON.parse(data), inPosition, columnsChanged);\n\t\t} else {\n\n\t\t\tif (self.modExists(\"ajax\", true)) {\n\t\t\t\tif (params) {\n\t\t\t\t\tself.modules.ajax.setParams(params);\n\t\t\t\t}\n\n\t\t\t\tif (config) {\n\t\t\t\t\tself.modules.ajax.setConfig(config);\n\t\t\t\t}\n\n\t\t\t\tself.modules.ajax.setUrl(data);\n\n\t\t\t\tif (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n\t\t\t\t\tself.modules.page.reset(true, true);\n\t\t\t\t\treturn self.modules.page.setPage(1);\n\t\t\t\t} else {\n\t\t\t\t\t//assume data is url, make ajax call to url to get data\n\t\t\t\t\treturn self.modules.ajax.loadData(inPosition, columnsChanged);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (data) {\n\t\t\t//asume data is already an object\n\t\t\treturn self.rowManager.setData(data, inPosition, columnsChanged);\n\t\t} else {\n\n\t\t\t//no data provided, check if ajaxURL is present;\n\t\t\tif (self.modExists(\"ajax\") && (self.modules.ajax.getUrl || self.options.ajaxURLGenerator)) {\n\n\t\t\t\tif (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n\t\t\t\t\tself.modules.page.reset(true, true);\n\t\t\t\t\treturn self.modules.page.setPage(1);\n\t\t\t\t} else {\n\t\t\t\t\treturn self.modules.ajax.loadData(inPosition, columnsChanged);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//empty data\n\t\t\t\treturn self.rowManager.setData([], inPosition, columnsChanged);\n\t\t\t}\n\t\t}\n\t}\n};\n\n//clear data\nTabulator.prototype.clearData = function () {\n\tif (this.modExists(\"ajax\")) {\n\t\tthis.modules.ajax.blockActiveRequest();\n\t}\n\n\tthis.rowManager.clearData();\n};\n\n//get table data array\nTabulator.prototype.getData = function (active) {\n\n\tif (active === true) {\n\t\tconsole.warn(\"passing a boolean to the getData function is deprecated, you should now pass the string 'active'\");\n\t\tactive = \"active\";\n\t}\n\n\treturn this.rowManager.getData(active);\n};\n\n//get table data array count\nTabulator.prototype.getDataCount = function (active) {\n\n\tif (active === true) {\n\t\tconsole.warn(\"passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'\");\n\t\tactive = \"active\";\n\t}\n\n\treturn this.rowManager.getDataCount(active);\n};\n\n//search for specific row components\nTabulator.prototype.searchRows = function (field, type, value) {\n\tif (this.modExists(\"filter\", true)) {\n\t\treturn this.modules.filter.search(\"rows\", field, type, value);\n\t}\n};\n\n//search for specific data\nTabulator.prototype.searchData = function (field, type, value) {\n\tif (this.modExists(\"filter\", true)) {\n\t\treturn this.modules.filter.search(\"data\", field, type, value);\n\t}\n};\n\n//get table html\nTabulator.prototype.getHtml = function (visible, style, config) {\n\tif (this.modExists(\"export\", true)) {\n\t\treturn this.modules.export.getHtml(visible, style, config);\n\t}\n};\n\n//get print html\nTabulator.prototype.print = function (visible, style, config) {\n\tif (this.modExists(\"print\", true)) {\n\t\treturn this.modules.print.printFullscreen(visible, style, config);\n\t}\n};\n\n//retrieve Ajax URL\nTabulator.prototype.getAjaxUrl = function () {\n\tif (this.modExists(\"ajax\", true)) {\n\t\treturn this.modules.ajax.getUrl();\n\t}\n};\n\n//replace data, keeping table in position with same sort\nTabulator.prototype.replaceData = function (data, params, config) {\n\tif (this.modExists(\"ajax\")) {\n\t\tthis.modules.ajax.blockActiveRequest();\n\t}\n\n\treturn this._setData(data, params, config, true);\n};\n\n//update table data\nTabulator.prototype.updateData = function (data) {\n\tvar _this26 = this;\n\n\tvar self = this;\n\tvar responses = 0;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tif (_this26.modExists(\"ajax\")) {\n\t\t\t_this26.modules.ajax.blockActiveRequest();\n\t\t}\n\n\t\tif (typeof data === \"string\") {\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif (data) {\n\t\t\tdata.forEach(function (item) {\n\t\t\t\tvar row = self.rowManager.findRow(item[self.options.index]);\n\n\t\t\t\tif (row) {\n\t\t\t\t\tresponses++;\n\n\t\t\t\t\trow.updateData(item).then(function () {\n\t\t\t\t\t\tresponses--;\n\n\t\t\t\t\t\tif (!responses) {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\treject(\"Update Error - No data provided\");\n\t\t}\n\t});\n};\n\nTabulator.prototype.addData = function (data, pos, index) {\n\tvar _this27 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tif (_this27.modExists(\"ajax\")) {\n\t\t\t_this27.modules.ajax.blockActiveRequest();\n\t\t}\n\n\t\tif (typeof data === \"string\") {\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif (data) {\n\t\t\t_this27.rowManager.addRows(data, pos, index).then(function (rows) {\n\t\t\t\tvar output = [];\n\n\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\toutput.push(row.getComponent());\n\t\t\t\t});\n\n\t\t\t\tresolve(output);\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\treject(\"Update Error - No data provided\");\n\t\t}\n\t});\n};\n\n//update table data\nTabulator.prototype.updateOrAddData = function (data) {\n\tvar _this28 = this;\n\n\tvar self = this,\n\t    rows = [],\n\t    responses = 0;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tif (_this28.modExists(\"ajax\")) {\n\t\t\t_this28.modules.ajax.blockActiveRequest();\n\t\t}\n\n\t\tif (typeof data === \"string\") {\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif (data) {\n\t\t\tdata.forEach(function (item) {\n\t\t\t\tvar row = self.rowManager.findRow(item[self.options.index]);\n\n\t\t\t\tresponses++;\n\n\t\t\t\tif (row) {\n\t\t\t\t\trow.updateData(item).then(function () {\n\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\trows.push(row.getComponent());\n\n\t\t\t\t\t\tif (!responses) {\n\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tself.rowManager.addRows(item).then(function (newRows) {\n\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\trows.push(newRows[0].getComponent());\n\n\t\t\t\t\t\tif (!responses) {\n\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\treject(\"Update Error - No data provided\");\n\t\t}\n\t});\n};\n\n//get row object\nTabulator.prototype.getRow = function (index) {\n\tvar row = this.rowManager.findRow(index);\n\n\tif (row) {\n\t\treturn row.getComponent();\n\t} else {\n\t\tconsole.warn(\"Find Error - No matching row found:\", index);\n\t\treturn false;\n\t}\n};\n\n//get row object\nTabulator.prototype.getRowFromPosition = function (position, active) {\n\tvar row = this.rowManager.getRowFromPosition(position, active);\n\n\tif (row) {\n\t\treturn row.getComponent();\n\t} else {\n\t\tconsole.warn(\"Find Error - No matching row found:\", position);\n\t\treturn false;\n\t}\n};\n\n//delete row from table\nTabulator.prototype.deleteRow = function (index) {\n\tvar _this29 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar self = _this29,\n\t\t    count = 0,\n\t\t    successCount = 0,\n\t\t    foundRows = [];\n\n\t\tfunction doneCheck() {\n\t\t\tcount++;\n\n\t\t\tif (count == index.length) {\n\t\t\t\tif (successCount) {\n\t\t\t\t\tself.rowManager.reRenderInPosition();\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!Array.isArray(index)) {\n\t\t\tindex = [index];\n\t\t}\n\n\t\t//find matching rows\n\t\tindex.forEach(function (item) {\n\t\t\tvar row = _this29.rowManager.findRow(item, true);\n\n\t\t\tif (row) {\n\t\t\t\tfoundRows.push(row);\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Delete Error - No matching row found:\", item);\n\t\t\t\treject(\"Delete Error - No matching row found\");\n\t\t\t\tdoneCheck();\n\t\t\t}\n\t\t});\n\n\t\t//sort rows into correct order to ensure smooth delete from table\n\t\tfoundRows.sort(function (a, b) {\n\t\t\treturn _this29.rowManager.rows.indexOf(a) > _this29.rowManager.rows.indexOf(b) ? 1 : -1;\n\t\t});\n\n\t\tfoundRows.forEach(function (row) {\n\t\t\trow.delete().then(function () {\n\t\t\t\tsuccessCount++;\n\t\t\t\tdoneCheck();\n\t\t\t}).catch(function (err) {\n\t\t\t\tdoneCheck();\n\t\t\t\treject(err);\n\t\t\t});\n\t\t});\n\t});\n};\n\n//add row to table\nTabulator.prototype.addRow = function (data, pos, index) {\n\tvar _this30 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tif (typeof data === \"string\") {\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\t_this30.rowManager.addRows(data, pos, index).then(function (rows) {\n\t\t\t//recalc column calculations if present\n\t\t\tif (_this30.modExists(\"columnCalcs\")) {\n\t\t\t\t_this30.modules.columnCalcs.recalc(_this30.rowManager.activeRows);\n\t\t\t}\n\n\t\t\tresolve(rows[0].getComponent());\n\t\t});\n\t});\n};\n\n//update a row if it exitsts otherwise create it\nTabulator.prototype.updateOrAddRow = function (index, data) {\n\tvar _this31 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar row = _this31.rowManager.findRow(index);\n\n\t\tif (typeof data === \"string\") {\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif (row) {\n\t\t\trow.updateData(data).then(function () {\n\t\t\t\t//recalc column calculations if present\n\t\t\t\tif (_this31.modExists(\"columnCalcs\")) {\n\t\t\t\t\t_this31.modules.columnCalcs.recalc(_this31.rowManager.activeRows);\n\t\t\t\t}\n\n\t\t\t\tresolve(row.getComponent());\n\t\t\t}).catch(function (err) {\n\t\t\t\treject(err);\n\t\t\t});\n\t\t} else {\n\t\t\trow = _this31.rowManager.addRows(data).then(function (rows) {\n\t\t\t\t//recalc column calculations if present\n\t\t\t\tif (_this31.modExists(\"columnCalcs\")) {\n\t\t\t\t\t_this31.modules.columnCalcs.recalc(_this31.rowManager.activeRows);\n\t\t\t\t}\n\n\t\t\t\tresolve(rows[0].getComponent());\n\t\t\t}).catch(function (err) {\n\t\t\t\treject(err);\n\t\t\t});\n\t\t}\n\t});\n};\n\n//update row data\nTabulator.prototype.updateRow = function (index, data) {\n\tvar _this32 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar row = _this32.rowManager.findRow(index);\n\n\t\tif (typeof data === \"string\") {\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif (row) {\n\t\t\trow.updateData(data).then(function () {\n\t\t\t\tresolve(row.getComponent());\n\t\t\t}).catch(function (err) {\n\t\t\t\treject(err);\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\n\t\t\treject(\"Update Error - No matching row found\");\n\t\t}\n\t});\n};\n\n//scroll to row in DOM\nTabulator.prototype.scrollToRow = function (index, position, ifVisible) {\n\tvar _this33 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar row = _this33.rowManager.findRow(index);\n\n\t\tif (row) {\n\t\t\t_this33.rowManager.scrollToRow(row, position, ifVisible).then(function () {\n\t\t\t\tresolve();\n\t\t\t}).catch(function (err) {\n\t\t\t\treject(err);\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\n\t\t\treject(\"Scroll Error - No matching row found\");\n\t\t}\n\t});\n};\n\nTabulator.prototype.moveRow = function (from, to, after) {\n\tvar fromRow = this.rowManager.findRow(from);\n\n\tif (fromRow) {\n\t\tfromRow.moveToRow(to, after);\n\t} else {\n\t\tconsole.warn(\"Move Error - No matching row found:\", from);\n\t}\n};\n\nTabulator.prototype.getRows = function (active) {\n\n\tif (active === true) {\n\t\tconsole.warn(\"passing a boolean to the getRows function is deprecated, you should now pass the string 'active'\");\n\t\tactive = \"active\";\n\t}\n\n\treturn this.rowManager.getComponents(active);\n};\n\n//get position of row in table\nTabulator.prototype.getRowPosition = function (index, active) {\n\tvar row = this.rowManager.findRow(index);\n\n\tif (row) {\n\t\treturn this.rowManager.getRowPosition(row, active);\n\t} else {\n\t\tconsole.warn(\"Position Error - No matching row found:\", index);\n\t\treturn false;\n\t}\n};\n\n//copy table data to clipboard\nTabulator.prototype.copyToClipboard = function (selector) {\n\tif (this.modExists(\"clipboard\", true)) {\n\t\tthis.modules.clipboard.copy(selector);\n\t}\n};\n\n/////////////// Column Functions  ///////////////\n\nTabulator.prototype.setColumns = function (definition) {\n\tthis.columnManager.setColumns(definition);\n};\n\nTabulator.prototype.getColumns = function (structured) {\n\treturn this.columnManager.getComponents(structured);\n};\n\nTabulator.prototype.getColumn = function (field) {\n\tvar col = this.columnManager.findColumn(field);\n\n\tif (col) {\n\t\treturn col.getComponent();\n\t} else {\n\t\tconsole.warn(\"Find Error - No matching column found:\", field);\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.getColumnDefinitions = function () {\n\treturn this.columnManager.getDefinitionTree();\n};\n\nTabulator.prototype.getColumnLayout = function () {\n\tif (this.modExists(\"persistence\", true)) {\n\t\treturn this.modules.persistence.parseColumns(this.columnManager.getColumns());\n\t}\n};\n\nTabulator.prototype.setColumnLayout = function (layout) {\n\tif (this.modExists(\"persistence\", true)) {\n\t\tthis.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns, layout));\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nTabulator.prototype.showColumn = function (field) {\n\tvar column = this.columnManager.findColumn(field);\n\n\tif (column) {\n\t\tcolumn.show();\n\n\t\tif (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n\t\t\tthis.modules.responsiveLayout.update();\n\t\t}\n\t} else {\n\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.hideColumn = function (field) {\n\tvar column = this.columnManager.findColumn(field);\n\n\tif (column) {\n\t\tcolumn.hide();\n\n\t\tif (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n\t\t\tthis.modules.responsiveLayout.update();\n\t\t}\n\t} else {\n\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.toggleColumn = function (field) {\n\tvar column = this.columnManager.findColumn(field);\n\n\tif (column) {\n\t\tif (column.visible) {\n\t\t\tcolumn.hide();\n\t\t} else {\n\t\t\tcolumn.show();\n\t\t}\n\t} else {\n\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.addColumn = function (definition, before, field) {\n\tvar _this34 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar column = _this34.columnManager.findColumn(field);\n\n\t\t_this34.columnManager.addColumn(definition, before, column).then(function (column) {\n\t\t\tresolve(column.getComponent());\n\t\t}).catch(function (err) {\n\t\t\treject(err);\n\t\t});\n\t});\n};\n\nTabulator.prototype.deleteColumn = function (field) {\n\tvar _this35 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar column = _this35.columnManager.findColumn(field);\n\n\t\tif (column) {\n\t\t\tcolumn.delete().then(function () {\n\t\t\t\tresolve();\n\t\t\t}).catch(function (err) {\n\t\t\t\treject(err);\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\n\t\t\treject();\n\t\t}\n\t});\n};\n\nTabulator.prototype.updateColumnDefinition = function (field, definition) {\n\tvar _this36 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar column = _this36.columnManager.findColumn(field);\n\n\t\tif (column) {\n\t\t\tcolumn.updateDefinition(definition).then(function (col) {\n\t\t\t\tresolve(col);\n\t\t\t}).catch(function (err) {\n\t\t\t\treject(err);\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\n\t\t\treject();\n\t\t}\n\t});\n};\n\nTabulator.prototype.moveColumn = function (from, to, after) {\n\tvar fromColumn = this.columnManager.findColumn(from);\n\tvar toColumn = this.columnManager.findColumn(to);\n\n\tif (fromColumn) {\n\t\tif (toColumn) {\n\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after);\n\t\t} else {\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t}\n\t} else {\n\t\tconsole.warn(\"Move Error - No matching column found:\", from);\n\t}\n};\n\n//scroll to column in DOM\nTabulator.prototype.scrollToColumn = function (field, position, ifVisible) {\n\tvar _this37 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar column = _this37.columnManager.findColumn(field);\n\n\t\tif (column) {\n\t\t\t_this37.columnManager.scrollToColumn(column, position, ifVisible).then(function () {\n\t\t\t\tresolve();\n\t\t\t}).catch(function (err) {\n\t\t\t\treject(err);\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\n\t\t\treject(\"Scroll Error - No matching column found\");\n\t\t}\n\t});\n};\n\n//////////// Localization Functions  ////////////\nTabulator.prototype.setLocale = function (locale) {\n\tthis.modules.localize.setLocale(locale);\n};\n\nTabulator.prototype.getLocale = function () {\n\treturn this.modules.localize.getLocale();\n};\n\nTabulator.prototype.getLang = function (locale) {\n\treturn this.modules.localize.getLang(locale);\n};\n\n//////////// General Public Functions ////////////\n\n//redraw list without updating data\nTabulator.prototype.redraw = function (force) {\n\tthis.columnManager.redraw(force);\n\tthis.rowManager.redraw(force);\n};\n\nTabulator.prototype.setHeight = function (height) {\n\n\tif (this.rowManager.renderMode !== \"classic\") {\n\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\n\t\tthis.element.style.height = this.options.height;\n\t\tthis.rowManager.setRenderMode();\n\t\tthis.rowManager.redraw();\n\t} else {\n\t\tconsole.warn(\"setHeight function is not available in classic render mode\");\n\t}\n};\n\n///////////////////// Sorting ////////////////////\n\n//trigger sort\nTabulator.prototype.setSort = function (sortList, dir) {\n\tif (this.modExists(\"sort\", true)) {\n\t\tthis.modules.sort.setSort(sortList, dir);\n\t\tthis.rowManager.sorterRefresh();\n\t}\n};\n\nTabulator.prototype.getSorters = function () {\n\tif (this.modExists(\"sort\", true)) {\n\t\treturn this.modules.sort.getSort();\n\t}\n};\n\nTabulator.prototype.clearSort = function () {\n\tif (this.modExists(\"sort\", true)) {\n\t\tthis.modules.sort.clear();\n\t\tthis.rowManager.sorterRefresh();\n\t}\n};\n\n///////////////////// Filtering ////////////////////\n\n//set standard filters\nTabulator.prototype.setFilter = function (field, type, value, params) {\n\tif (this.modExists(\"filter\", true)) {\n\t\tthis.modules.filter.setFilter(field, type, value, params);\n\t\tthis.rowManager.filterRefresh();\n\t}\n};\n\n//add filter to array\nTabulator.prototype.addFilter = function (field, type, value, params) {\n\tif (this.modExists(\"filter\", true)) {\n\t\tthis.modules.filter.addFilter(field, type, value, params);\n\t\tthis.rowManager.filterRefresh();\n\t}\n};\n\n//get all filters\nTabulator.prototype.getFilters = function (all) {\n\tif (this.modExists(\"filter\", true)) {\n\t\treturn this.modules.filter.getFilters(all);\n\t}\n};\n\nTabulator.prototype.setHeaderFilterFocus = function (field) {\n\tif (this.modExists(\"filter\", true)) {\n\t\tvar column = this.columnManager.findColumn(field);\n\n\t\tif (column) {\n\t\t\tthis.modules.filter.setHeaderFilterFocus(column);\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n};\n\nTabulator.prototype.getHeaderFilterValue = function (field) {\n\tif (this.modExists(\"filter\", true)) {\n\t\tvar column = this.columnManager.findColumn(field);\n\n\t\tif (column) {\n\t\t\treturn this.modules.filter.getHeaderFilterValue(column);\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t}\n\t}\n};\n\nTabulator.prototype.setHeaderFilterValue = function (field, value) {\n\tif (this.modExists(\"filter\", true)) {\n\t\tvar column = this.columnManager.findColumn(field);\n\n\t\tif (column) {\n\t\t\tthis.modules.filter.setHeaderFilterValue(column, value);\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n};\n\nTabulator.prototype.getHeaderFilters = function () {\n\tif (this.modExists(\"filter\", true)) {\n\t\treturn this.modules.filter.getHeaderFilters();\n\t}\n};\n\n//remove filter from array\nTabulator.prototype.removeFilter = function (field, type, value) {\n\tif (this.modExists(\"filter\", true)) {\n\t\tthis.modules.filter.removeFilter(field, type, value);\n\t\tthis.rowManager.filterRefresh();\n\t}\n};\n\n//clear filters\nTabulator.prototype.clearFilter = function (all) {\n\tif (this.modExists(\"filter\", true)) {\n\t\tthis.modules.filter.clearFilter(all);\n\t\tthis.rowManager.filterRefresh();\n\t}\n};\n\n//clear header filters\nTabulator.prototype.clearHeaderFilter = function () {\n\tif (this.modExists(\"filter\", true)) {\n\t\tthis.modules.filter.clearHeaderFilter();\n\t\tthis.rowManager.filterRefresh();\n\t}\n};\n\n///////////////////// select ////////////////////\nTabulator.prototype.selectRow = function (rows) {\n\tif (this.modExists(\"selectRow\", true)) {\n\t\tif (rows === true) {\n\t\t\tconsole.warn(\"passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'\");\n\t\t\trows = \"active\";\n\t\t}\n\t\tthis.modules.selectRow.selectRows(rows);\n\t}\n};\n\nTabulator.prototype.deselectRow = function (rows) {\n\tif (this.modExists(\"selectRow\", true)) {\n\t\tthis.modules.selectRow.deselectRows(rows);\n\t}\n};\n\nTabulator.prototype.toggleSelectRow = function (row) {\n\tif (this.modExists(\"selectRow\", true)) {\n\t\tthis.modules.selectRow.toggleRow(row);\n\t}\n};\n\nTabulator.prototype.getSelectedRows = function () {\n\tif (this.modExists(\"selectRow\", true)) {\n\t\treturn this.modules.selectRow.getSelectedRows();\n\t}\n};\n\nTabulator.prototype.getSelectedData = function () {\n\tif (this.modExists(\"selectRow\", true)) {\n\t\treturn this.modules.selectRow.getSelectedData();\n\t}\n};\n\n///////////////////// validation  ////////////////////\nTabulator.prototype.getInvalidCells = function () {\n\tif (this.modExists(\"validate\", true)) {\n\t\treturn this.modules.validate.getInvalidCells();\n\t}\n};\n\nTabulator.prototype.clearCellValidation = function (cells) {\n\tvar _this38 = this;\n\n\tif (this.modExists(\"validate\", true)) {\n\n\t\tif (!cells) {\n\t\t\tcells = this.modules.validate.getInvalidCells();\n\t\t}\n\n\t\tif (!Array.isArray(cells)) {\n\t\t\tcells = [cells];\n\t\t}\n\n\t\tcells.forEach(function (cell) {\n\t\t\t_this38.modules.validate.clearValidation(cell._getSelf());\n\t\t});\n\t}\n};\n\nTabulator.prototype.validate = function (cells) {\n\tvar output = [];\n\n\t//clear row data\n\tthis.rowManager.rows.forEach(function (row) {\n\t\tvar valid = row.validate();\n\n\t\tif (valid !== true) {\n\t\t\toutput = output.concat(valid);\n\t\t}\n\t});\n\n\treturn output.length ? output : true;\n};\n\n//////////// Pagination Functions  ////////////\n\nTabulator.prototype.setMaxPage = function (max) {\n\tif (this.options.pagination && this.modExists(\"page\")) {\n\t\tthis.modules.page.setMaxPage(max);\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.setPage = function (page) {\n\tif (this.options.pagination && this.modExists(\"page\")) {\n\t\treturn this.modules.page.setPage(page);\n\t} else {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\treject();\n\t\t});\n\t}\n};\n\nTabulator.prototype.setPageToRow = function (row) {\n\tvar _this39 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tif (_this39.options.pagination && _this39.modExists(\"page\")) {\n\t\t\trow = _this39.rowManager.findRow(row);\n\n\t\t\tif (row) {\n\t\t\t\t_this39.modules.page.setPageToRow(row).then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function () {\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treject();\n\t\t\t}\n\t\t} else {\n\t\t\treject();\n\t\t}\n\t});\n};\n\nTabulator.prototype.setPageSize = function (size) {\n\tif (this.options.pagination && this.modExists(\"page\")) {\n\t\tthis.modules.page.setPageSize(size);\n\t\tthis.modules.page.setPage(1).then(function () {}).catch(function () {});\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.getPageSize = function () {\n\tif (this.options.pagination && this.modExists(\"page\", true)) {\n\t\treturn this.modules.page.getPageSize();\n\t}\n};\n\nTabulator.prototype.previousPage = function () {\n\tif (this.options.pagination && this.modExists(\"page\")) {\n\t\tthis.modules.page.previousPage();\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.nextPage = function () {\n\tif (this.options.pagination && this.modExists(\"page\")) {\n\t\tthis.modules.page.nextPage();\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.getPage = function () {\n\tif (this.options.pagination && this.modExists(\"page\")) {\n\t\treturn this.modules.page.getPage();\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.getPageMax = function () {\n\tif (this.options.pagination && this.modExists(\"page\")) {\n\t\treturn this.modules.page.getPageMax();\n\t} else {\n\t\treturn false;\n\t}\n};\n\n///////////////// Grouping Functions ///////////////\n\nTabulator.prototype.setGroupBy = function (groups) {\n\tif (this.modExists(\"groupRows\", true)) {\n\t\tthis.options.groupBy = groups;\n\t\tthis.modules.groupRows.initialize();\n\t\tthis.rowManager.refreshActiveData(\"display\");\n\n\t\tif (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n\t\t\tthis.modules.persistence.save(\"group\");\n\t\t}\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.setGroupValues = function (groupValues) {\n\tif (this.modExists(\"groupRows\", true)) {\n\t\tthis.options.groupValues = groupValues;\n\t\tthis.modules.groupRows.initialize();\n\t\tthis.rowManager.refreshActiveData(\"display\");\n\n\t\tif (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n\t\t\tthis.modules.persistence.save(\"group\");\n\t\t}\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.setGroupStartOpen = function (values) {\n\tif (this.modExists(\"groupRows\", true)) {\n\t\tthis.options.groupStartOpen = values;\n\t\tthis.modules.groupRows.initialize();\n\t\tif (this.options.groupBy) {\n\t\t\tthis.rowManager.refreshActiveData(\"group\");\n\n\t\t\tif (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n\t\t\t\tthis.modules.persistence.save(\"group\");\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.setGroupHeader = function (values) {\n\tif (this.modExists(\"groupRows\", true)) {\n\t\tthis.options.groupHeader = values;\n\t\tthis.modules.groupRows.initialize();\n\t\tif (this.options.groupBy) {\n\t\t\tthis.rowManager.refreshActiveData(\"group\");\n\n\t\t\tif (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n\t\t\t\tthis.modules.persistence.save(\"group\");\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.getGroups = function (values) {\n\tif (this.modExists(\"groupRows\", true)) {\n\t\treturn this.modules.groupRows.getGroups(true);\n\t} else {\n\t\treturn false;\n\t}\n};\n\n// get grouped table data in the same format as getData()\nTabulator.prototype.getGroupedData = function () {\n\tif (this.modExists(\"groupRows\", true)) {\n\t\treturn this.options.groupBy ? this.modules.groupRows.getGroupedData() : this.getData();\n\t}\n};\n\nTabulator.prototype.getEditedCells = function () {\n\tif (this.modExists(\"edit\", true)) {\n\t\treturn this.modules.edit.getEditedCells();\n\t}\n};\n\nTabulator.prototype.clearCellEdited = function (cells) {\n\tvar _this40 = this;\n\n\tif (this.modExists(\"edit\", true)) {\n\n\t\tif (!cells) {\n\t\t\tcells = this.modules.edit.getEditedCells();\n\t\t}\n\n\t\tif (!Array.isArray(cells)) {\n\t\t\tcells = [cells];\n\t\t}\n\n\t\tcells.forEach(function (cell) {\n\t\t\t_this40.modules.edit.clearEdited(cell._getSelf());\n\t\t});\n\t}\n};\n\n///////////////// Column Calculation Functions ///////////////\nTabulator.prototype.getCalcResults = function () {\n\tif (this.modExists(\"columnCalcs\", true)) {\n\t\treturn this.modules.columnCalcs.getResults();\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.recalc = function () {\n\tif (this.modExists(\"columnCalcs\", true)) {\n\t\tthis.modules.columnCalcs.recalcAll(this.rowManager.activeRows);\n\t}\n};\n\n/////////////// Navigation Management //////////////\n\nTabulator.prototype.navigatePrev = function () {\n\tvar cell = false;\n\n\tif (this.modExists(\"edit\", true)) {\n\t\tcell = this.modules.edit.currentCell;\n\n\t\tif (cell) {\n\t\t\treturn cell.nav().prev();\n\t\t}\n\t}\n\n\treturn false;\n};\n\nTabulator.prototype.navigateNext = function () {\n\tvar cell = false;\n\n\tif (this.modExists(\"edit\", true)) {\n\t\tcell = this.modules.edit.currentCell;\n\n\t\tif (cell) {\n\t\t\treturn cell.nav().next();\n\t\t}\n\t}\n\n\treturn false;\n};\n\nTabulator.prototype.navigateLeft = function () {\n\tvar cell = false;\n\n\tif (this.modExists(\"edit\", true)) {\n\t\tcell = this.modules.edit.currentCell;\n\n\t\tif (cell) {\n\t\t\te.preventDefault();\n\t\t\treturn cell.nav().left();\n\t\t}\n\t}\n\n\treturn false;\n};\n\nTabulator.prototype.navigateRight = function () {\n\tvar cell = false;\n\n\tif (this.modExists(\"edit\", true)) {\n\t\tcell = this.modules.edit.currentCell;\n\n\t\tif (cell) {\n\t\t\te.preventDefault();\n\t\t\treturn cell.nav().right();\n\t\t}\n\t}\n\n\treturn false;\n};\n\nTabulator.prototype.navigateUp = function () {\n\tvar cell = false;\n\n\tif (this.modExists(\"edit\", true)) {\n\t\tcell = this.modules.edit.currentCell;\n\n\t\tif (cell) {\n\t\t\te.preventDefault();\n\t\t\treturn cell.nav().up();\n\t\t}\n\t}\n\n\treturn false;\n};\n\nTabulator.prototype.navigateDown = function () {\n\tvar cell = false;\n\n\tif (this.modExists(\"edit\", true)) {\n\t\tcell = this.modules.edit.currentCell;\n\n\t\tif (cell) {\n\t\t\te.preventDefault();\n\t\t\treturn cell.nav().down();\n\t\t}\n\t}\n\n\treturn false;\n};\n\n/////////////// History Management //////////////\nTabulator.prototype.undo = function () {\n\tif (this.options.history && this.modExists(\"history\", true)) {\n\t\treturn this.modules.history.undo();\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.redo = function () {\n\tif (this.options.history && this.modExists(\"history\", true)) {\n\t\treturn this.modules.history.redo();\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.getHistoryUndoSize = function () {\n\tif (this.options.history && this.modExists(\"history\", true)) {\n\t\treturn this.modules.history.getHistoryUndoSize();\n\t} else {\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.getHistoryRedoSize = function () {\n\tif (this.options.history && this.modExists(\"history\", true)) {\n\t\treturn this.modules.history.getHistoryRedoSize();\n\t} else {\n\t\treturn false;\n\t}\n};\n\n/////////////// Download Management //////////////\n\nTabulator.prototype.download = function (type, filename, options, active) {\n\tif (this.modExists(\"download\", true)) {\n\t\tthis.modules.download.download(type, filename, options, active);\n\t}\n};\n\nTabulator.prototype.downloadToTab = function (type, filename, options, active) {\n\tif (this.modExists(\"download\", true)) {\n\t\tthis.modules.download.download(type, filename, options, active, true);\n\t}\n};\n\n/////////// Inter Table Communications ///////////\n\nTabulator.prototype.tableComms = function (table, module, action, data) {\n\tthis.modules.comms.receive(table, module, action, data);\n};\n\n////////////// Extension Management //////////////\n\n//object to hold module\nTabulator.prototype.moduleBindings = {};\n\n//extend module\nTabulator.prototype.extendModule = function (name, property, values) {\n\n\tif (Tabulator.prototype.moduleBindings[name]) {\n\t\tvar source = Tabulator.prototype.moduleBindings[name].prototype[property];\n\n\t\tif (source) {\n\t\t\tif ((typeof values === 'undefined' ? 'undefined' : _typeof(values)) == \"object\") {\n\t\t\t\tfor (var key in values) {\n\t\t\t\t\tsource[key] = values[key];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\n\t\t}\n\t} else {\n\t\tconsole.warn(\"Module Error - module does not exist:\", name);\n\t}\n};\n\n//add module to tabulator\nTabulator.prototype.registerModule = function (name, module) {\n\tvar self = this;\n\tTabulator.prototype.moduleBindings[name] = module;\n};\n\n//ensure that module are bound to instantiated function\nTabulator.prototype.bindModules = function () {\n\tthis.modules = {};\n\n\tfor (var name in Tabulator.prototype.moduleBindings) {\n\t\tthis.modules[name] = new Tabulator.prototype.moduleBindings[name](this);\n\t}\n};\n\n//Check for module\nTabulator.prototype.modExists = function (plugin, required) {\n\tif (this.modules[plugin]) {\n\t\treturn true;\n\t} else {\n\t\tif (required) {\n\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\n\t\t}\n\t\treturn false;\n\t}\n};\n\nTabulator.prototype.helpers = {\n\n\telVisible: function elVisible(el) {\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n\t},\n\n\telOffset: function elOffset(el) {\n\t\tvar box = el.getBoundingClientRect();\n\n\t\treturn {\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\n\t\t};\n\t},\n\n\tdeepClone: function deepClone(obj) {\n\t\tvar clone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n\n\t\tfor (var i in obj) {\n\t\t\tif (obj[i] != null && _typeof(obj[i]) === \"object\") {\n\t\t\t\tif (obj[i] instanceof Date) {\n\t\t\t\t\tclone[i] = new Date(obj[i]);\n\t\t\t\t} else {\n\t\t\t\t\tclone[i] = this.deepClone(obj[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn clone;\n\t}\n};\n\nTabulator.prototype.comms = {\n\ttables: [],\n\tregister: function register(table) {\n\t\tTabulator.prototype.comms.tables.push(table);\n\t},\n\tderegister: function deregister(table) {\n\t\tvar index = Tabulator.prototype.comms.tables.indexOf(table);\n\n\t\tif (index > -1) {\n\t\t\tTabulator.prototype.comms.tables.splice(index, 1);\n\t\t}\n\t},\n\tlookupTable: function lookupTable(query, silent) {\n\t\tvar results = [],\n\t\t    matches,\n\t\t    match;\n\n\t\tif (typeof query === \"string\") {\n\t\t\tmatches = document.querySelectorAll(query);\n\n\t\t\tif (matches.length) {\n\t\t\t\tfor (var i = 0; i < matches.length; i++) {\n\t\t\t\t\tmatch = Tabulator.prototype.comms.matchElement(matches[i]);\n\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tresults.push(match);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement || query instanceof Tabulator) {\n\t\t\tmatch = Tabulator.prototype.comms.matchElement(query);\n\n\t\t\tif (match) {\n\t\t\t\tresults.push(match);\n\t\t\t}\n\t\t} else if (Array.isArray(query)) {\n\t\t\tquery.forEach(function (item) {\n\t\t\t\tresults = results.concat(Tabulator.prototype.comms.lookupTable(item));\n\t\t\t});\n\t\t} else {\n\t\t\tif (!silent) {\n\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t},\n\tmatchElement: function matchElement(element) {\n\t\treturn Tabulator.prototype.comms.tables.find(function (table) {\n\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\n\t\t});\n\t}\n};\n\nTabulator.prototype.findTable = function (query) {\n\tvar results = Tabulator.prototype.comms.lookupTable(query, true);\n\treturn Array.isArray(results) && !results.length ? false : results;\n};\n\nvar Layout = function Layout(table) {\n\n\tthis.table = table;\n\n\tthis.mode = null;\n};\n\n//initialize layout system\n\nLayout.prototype.initialize = function (layout) {\n\n\tif (this.modes[layout]) {\n\n\t\tthis.mode = layout;\n\t} else {\n\n\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n\n\t\tthis.mode = 'fitData';\n\t}\n\n\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\n};\n\nLayout.prototype.getMode = function () {\n\n\treturn this.mode;\n};\n\n//trigger table layout\n\nLayout.prototype.layout = function () {\n\n\tthis.modes[this.mode].call(this, this.table.columnManager.columnsByIndex);\n};\n\n//layout render functions\n\nLayout.prototype.modes = {\n\n\t//resize columns to fit data they contain\n\n\t\"fitData\": function fitData(columns) {\n\n\t\tif (this.table.options.virtualDomHoz) {\n\n\t\t\tthis.table.vdomHoz.fitDataLayoutOverride();\n\t\t} else {\n\n\t\t\tcolumns.forEach(function (column) {\n\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t});\n\t\t}\n\n\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\t},\n\n\t//resize columns to fit data they contain and stretch row to fill table\n\n\t\"fitDataFill\": function fitDataFill(columns) {\n\n\t\tcolumns.forEach(function (column) {\n\n\t\t\tcolumn.reinitializeWidth();\n\t\t});\n\n\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\t},\n\n\t//resize columns to fit data they contain\n\n\t\"fitDataTable\": function fitDataTable(columns) {\n\n\t\tcolumns.forEach(function (column) {\n\n\t\t\tcolumn.reinitializeWidth();\n\t\t});\n\n\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\t},\n\n\t//resize columns to fit data the contain and stretch last column to fill table\n\n\t\"fitDataStretch\": function fitDataStretch(columns) {\n\t\tvar _this41 = this;\n\n\t\tvar colsWidth = 0,\n\t\t    tableWidth = this.table.rowManager.element.clientWidth,\n\t\t    gap = 0,\n\t\t    lastCol = false;\n\n\t\tcolumns.forEach(function (column, i) {\n\n\t\t\tif (!column.widthFixed) {\n\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\n\t\t\tif (_this41.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible) {\n\n\t\t\t\tlastCol = column;\n\t\t\t}\n\n\t\t\tif (column.visible) {\n\n\t\t\t\tcolsWidth += column.getWidth();\n\t\t\t}\n\t\t});\n\n\t\tif (lastCol) {\n\n\t\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tlastCol.setWidth(0);\n\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\n\t\t\tif (gap > 0) {\n\n\t\t\t\tlastCol.setWidth(gap);\n\t\t\t} else {\n\n\t\t\t\tlastCol.reinitializeWidth();\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t}\n\t},\n\n\t//resize columns to fit\n\n\t\"fitColumns\": function fitColumns(columns) {\n\n\t\tvar self = this;\n\n\t\tvar totalWidth = self.table.element.clientWidth; //table element width\n\n\t\tvar fixedWidth = 0; //total width of columns with a defined width\n\n\t\tvar flexWidth = 0; //total width available to flexible columns\n\n\t\tvar flexGrowUnits = 0; //total number of widthGrow blocks accross all columns\n\n\t\tvar flexColWidth = 0; //desired width of flexible columns\n\n\t\tvar flexColumns = []; //array of flexible width columns\n\n\t\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\n\t\tvar flexShrinkUnits = 0; //total number of widthShrink blocks accross all columns\n\n\t\tvar overflowWidth = 0; //horizontal overflow width\n\n\t\tvar gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n\n\t\tfunction calcWidth(width) {\n\n\t\t\tvar colWidth;\n\n\t\t\tif (typeof width == \"string\") {\n\n\t\t\t\tif (width.indexOf(\"%\") > -1) {\n\n\t\t\t\t\tcolWidth = totalWidth / 100 * parseInt(width);\n\t\t\t\t} else {\n\n\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tcolWidth = width;\n\t\t\t}\n\n\t\t\treturn colWidth;\n\t\t}\n\n\t\t//ensure columns resize to take up the correct amount of space\n\n\t\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols) {\n\n\t\t\tvar oversizeCols = [],\n\t\t\t    oversizeSpace = 0,\n\t\t\t    remainingSpace = 0,\n\t\t\t    nextColWidth = 0,\n\t\t\t    gap = 0,\n\t\t\t    changeUnits = 0,\n\t\t\t    undersizeCols = [];\n\n\t\t\tfunction calcGrow(col) {\n\n\t\t\t\treturn colWidth * (col.column.definition.widthGrow || 1);\n\t\t\t}\n\n\t\t\tfunction calcShrink(col) {\n\n\t\t\t\treturn calcWidth(col.width) - colWidth * (col.column.definition.widthShrink || 0);\n\t\t\t}\n\n\t\t\tcolumns.forEach(function (col, i) {\n\n\t\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\n\t\t\t\tif (col.column.minWidth >= width) {\n\n\t\t\t\t\toversizeCols.push(col);\n\t\t\t\t} else {\n\n\t\t\t\t\tundersizeCols.push(col);\n\n\t\t\t\t\tchangeUnits += shrinkCols ? col.column.definition.widthShrink || 1 : col.column.definition.widthGrow || 1;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (oversizeCols.length) {\n\n\t\t\t\toversizeCols.forEach(function (col) {\n\n\t\t\t\t\toversizeSpace += shrinkCols ? col.width - col.column.minWidth : col.column.minWidth;\n\n\t\t\t\t\tcol.width = col.column.minWidth;\n\t\t\t\t});\n\n\t\t\t\tremainingSpace = freeSpace - oversizeSpace;\n\n\t\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace / changeUnits) : remainingSpace;\n\n\t\t\t\tgap = remainingSpace - nextColWidth * changeUnits;\n\n\t\t\t\tgap += scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n\t\t\t} else {\n\n\t\t\t\tgap = changeUnits ? freeSpace - Math.floor(freeSpace / changeUnits) * changeUnits : freeSpace;\n\n\t\t\t\tundersizeCols.forEach(function (column) {\n\n\t\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn gap;\n\t\t}\n\n\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\n\t\t//adjust for vertical scrollbar if present\n\n\t\tif (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\n\n\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t\t}\n\n\t\tcolumns.forEach(function (column) {\n\n\t\t\tvar width, minWidth, colWidth;\n\n\t\t\tif (column.visible) {\n\n\t\t\t\twidth = column.definition.width;\n\n\t\t\t\tminWidth = parseInt(column.minWidth);\n\n\t\t\t\tif (width) {\n\n\t\t\t\t\tcolWidth = calcWidth(width);\n\n\t\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t\t\tif (column.definition.widthShrink) {\n\n\t\t\t\t\t\tfixedShrinkColumns.push({\n\n\t\t\t\t\t\t\tcolumn: column,\n\n\t\t\t\t\t\t\twidth: colWidth > minWidth ? colWidth : minWidth\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tflexColumns.push({\n\n\t\t\t\t\t\tcolumn: column,\n\n\t\t\t\t\t\twidth: 0\n\n\t\t\t\t\t});\n\n\t\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//calculate available space\n\n\t\tflexWidth = totalWidth - fixedWidth;\n\n\t\t//calculate correct column size\n\n\t\tflexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n\t\t//generate column widths\n\n\t\tvar gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n\t\t//increase width of last column to account for rounding errors\n\n\t\tif (flexColumns.length && gapFill > 0) {\n\n\t\t\tflexColumns[flexColumns.length - 1].width += +gapFill;\n\t\t}\n\n\t\t//caculate space for columns to be shrunk into\n\n\t\tflexColumns.forEach(function (col) {\n\n\t\t\tflexWidth -= col.width;\n\t\t});\n\n\t\toverflowWidth = Math.abs(gapFill) + flexWidth;\n\n\t\t//shrink oversize columns if there is no available space\n\n\t\tif (overflowWidth > 0 && flexShrinkUnits) {\n\n\t\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n\t\t}\n\n\t\t//decrease width of last column to account for rounding errors\n\n\t\tif (fixedShrinkColumns.length) {\n\n\t\t\tfixedShrinkColumns[fixedShrinkColumns.length - 1].width -= gapFill;\n\t\t}\n\n\t\tflexColumns.forEach(function (col) {\n\n\t\t\tcol.column.setWidth(col.width);\n\t\t});\n\n\t\tfixedShrinkColumns.forEach(function (col) {\n\n\t\t\tcol.column.setWidth(col.width);\n\t\t});\n\t}\n\n};\n\nTabulator.prototype.registerModule(\"layout\", Layout);\nvar Localize = function Localize(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.locale = \"default\"; //current locale\n\tthis.lang = false; //current language\n\tthis.bindings = {}; //update events to call when locale is changed\n\tthis.langList = {};\n};\n\nLocalize.prototype.initialize = function () {\n\tthis.langList = Tabulator.prototype.helpers.deepClone(this.langs);\n};\n\n//set header placehoder\nLocalize.prototype.setHeaderFilterPlaceholder = function (placeholder) {\n\tthis.langList.default.headerFilters.default = placeholder;\n};\n\n//set header filter placeholder by column\nLocalize.prototype.setHeaderFilterColumnPlaceholder = function (column, placeholder) {\n\tthis.langList.default.headerFilters.columns[column] = placeholder;\n\n\tif (this.lang && !this.lang.headerFilters.columns[column]) {\n\t\tthis.lang.headerFilters.columns[column] = placeholder;\n\t}\n};\n\n//setup a lang description object\nLocalize.prototype.installLang = function (locale, lang) {\n\tif (this.langList[locale]) {\n\t\tthis._setLangProp(this.langList[locale], lang);\n\t} else {\n\t\tthis.langList[locale] = lang;\n\t}\n};\n\nLocalize.prototype._setLangProp = function (lang, values) {\n\tfor (var key in values) {\n\t\tif (lang[key] && _typeof(lang[key]) == \"object\") {\n\t\t\tthis._setLangProp(lang[key], values[key]);\n\t\t} else {\n\t\t\tlang[key] = values[key];\n\t\t}\n\t}\n};\n\n//set current locale\nLocalize.prototype.setLocale = function (desiredLocale) {\n\tvar self = this;\n\n\tdesiredLocale = desiredLocale || \"default\";\n\n\t//fill in any matching languge values\n\tfunction traverseLang(trans, path) {\n\t\tfor (var prop in trans) {\n\t\t\tif (_typeof(trans[prop]) == \"object\") {\n\t\t\t\tif (!path[prop]) {\n\t\t\t\t\tpath[prop] = {};\n\t\t\t\t}\n\t\t\t\ttraverseLang(trans[prop], path[prop]);\n\t\t\t} else {\n\t\t\t\tpath[prop] = trans[prop];\n\t\t\t}\n\t\t}\n\t}\n\n\t//determing correct locale to load\n\tif (desiredLocale === true && navigator.language) {\n\t\t//get local from system\n\t\tdesiredLocale = navigator.language.toLowerCase();\n\t}\n\n\tif (desiredLocale) {\n\n\t\t//if locale is not set, check for matching top level locale else use default\n\t\tif (!self.langList[desiredLocale]) {\n\t\t\tvar prefix = desiredLocale.split(\"-\")[0];\n\n\t\t\tif (self.langList[prefix]) {\n\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n\t\t\t\tdesiredLocale = prefix;\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n\t\t\t\tdesiredLocale = \"default\";\n\t\t\t}\n\t\t}\n\t}\n\n\tself.locale = desiredLocale;\n\n\t//load default lang template\n\tself.lang = Tabulator.prototype.helpers.deepClone(self.langList.default || {});\n\n\tif (desiredLocale != \"default\") {\n\t\ttraverseLang(self.langList[desiredLocale], self.lang);\n\t}\n\n\tself.table.options.localized.call(self.table, self.locale, self.lang);\n\n\tself._executeBindings();\n};\n\n//get current locale\nLocalize.prototype.getLocale = function (locale) {\n\treturn self.locale;\n};\n\n//get lang object for given local or current if none provided\nLocalize.prototype.getLang = function (locale) {\n\treturn locale ? this.langList[locale] : this.lang;\n};\n\n//get text for current locale\nLocalize.prototype.getText = function (path, value) {\n\tvar path = value ? path + \"|\" + value : path,\n\t    pathArray = path.split(\"|\"),\n\t    text = this._getLangElement(pathArray, this.locale);\n\n\t// if(text === false){\n\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n\t// }\n\n\treturn text || \"\";\n};\n\n//traverse langs object and find localized copy\nLocalize.prototype._getLangElement = function (path, locale) {\n\tvar self = this;\n\tvar root = self.lang;\n\n\tpath.forEach(function (level) {\n\t\tvar rootPath;\n\n\t\tif (root) {\n\t\t\trootPath = root[level];\n\n\t\t\tif (typeof rootPath != \"undefined\") {\n\t\t\t\troot = rootPath;\n\t\t\t} else {\n\t\t\t\troot = false;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn root;\n};\n\n//set update binding\nLocalize.prototype.bind = function (path, callback) {\n\tif (!this.bindings[path]) {\n\t\tthis.bindings[path] = [];\n\t}\n\n\tthis.bindings[path].push(callback);\n\n\tcallback(this.getText(path), this.lang);\n};\n\n//itterate through bindings and trigger updates\nLocalize.prototype._executeBindings = function () {\n\tvar self = this;\n\n\tvar _loop = function _loop(path) {\n\t\tself.bindings[path].forEach(function (binding) {\n\t\t\tbinding(self.getText(path), self.lang);\n\t\t});\n\t};\n\n\tfor (var path in self.bindings) {\n\t\t_loop(path);\n\t}\n};\n\n//Localized text listings\nLocalize.prototype.langs = {\n\t\"default\": { //hold default locale text\n\t\t\"groups\": {\n\t\t\t\"item\": \"item\",\n\t\t\t\"items\": \"items\"\n\t\t},\n\t\t\"columns\": {},\n\t\t\"ajax\": {\n\t\t\t\"loading\": \"Loading\",\n\t\t\t\"error\": \"Error\"\n\t\t},\n\t\t\"pagination\": {\n\t\t\t\"page_size\": \"Page Size\",\n\t\t\t\"page_title\": \"Show Page\",\n\t\t\t\"first\": \"First\",\n\t\t\t\"first_title\": \"First Page\",\n\t\t\t\"last\": \"Last\",\n\t\t\t\"last_title\": \"Last Page\",\n\t\t\t\"prev\": \"Prev\",\n\t\t\t\"prev_title\": \"Prev Page\",\n\t\t\t\"next\": \"Next\",\n\t\t\t\"next_title\": \"Next Page\",\n\t\t\t\"all\": \"All\"\n\t\t},\n\t\t\"headerFilters\": {\n\t\t\t\"default\": \"filter column...\",\n\t\t\t\"columns\": {}\n\t\t}\n\t}\n};\n\nTabulator.prototype.registerModule(\"localize\", Localize);\nvar Comms = function Comms(table) {\n\tthis.table = table;\n};\n\nComms.prototype.getConnections = function (selectors) {\n\tvar self = this,\n\t    connections = [],\n\t    connection;\n\n\tconnection = Tabulator.prototype.comms.lookupTable(selectors);\n\n\tconnection.forEach(function (con) {\n\t\tif (self.table !== con) {\n\t\t\tconnections.push(con);\n\t\t}\n\t});\n\n\treturn connections;\n};\n\nComms.prototype.send = function (selectors, module, action, data) {\n\tvar self = this,\n\t    connections = this.getConnections(selectors);\n\n\tconnections.forEach(function (connection) {\n\t\tconnection.tableComms(self.table.element, module, action, data);\n\t});\n\n\tif (!connections.length && selectors) {\n\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n\t}\n};\n\nComms.prototype.receive = function (table, module, action, data) {\n\tif (this.table.modExists(module)) {\n\t\treturn this.table.modules[module].commsReceived(table, action, data);\n\t} else {\n\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\n\t}\n};\n\nTabulator.prototype.registerModule(\"comms\", Comms);\n\nvar Accessor = function Accessor(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n};\n\n//initialize column accessor\nAccessor.prototype.initializeColumn = function (column) {\n\tvar self = this,\n\t    match = false,\n\t    config = {};\n\n\tthis.allowedTypes.forEach(function (type) {\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t    accessor;\n\n\t\tif (column.definition[key]) {\n\t\t\taccessor = self.lookupAccessor(column.definition[key]);\n\n\t\t\tif (accessor) {\n\t\t\t\tmatch = true;\n\n\t\t\t\tconfig[key] = {\n\t\t\t\t\taccessor: accessor,\n\t\t\t\t\tparams: column.definition[key + \"Params\"] || {}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\n\tif (match) {\n\t\tcolumn.modules.accessor = config;\n\t}\n};\n\nAccessor.prototype.lookupAccessor = function (value) {\n\tvar accessor = false;\n\n\t//set column accessor\n\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\tcase \"string\":\n\t\t\tif (this.accessors[value]) {\n\t\t\t\taccessor = this.accessors[value];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"function\":\n\t\t\taccessor = value;\n\t\t\tbreak;\n\t}\n\n\treturn accessor;\n};\n\n//apply accessor to row\nAccessor.prototype.transformRow = function (row, type) {\n\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t    rowComponent = row.getComponent();\n\n\t//clone data object with deep copy to isolate internal data from returned result\n\tvar data = Tabulator.prototype.helpers.deepClone(row.data || {});\n\n\tthis.table.columnManager.traverse(function (column) {\n\t\tvar value, accessor, params, colCompnent;\n\n\t\tif (column.modules.accessor) {\n\n\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n\t\t\tif (accessor) {\n\t\t\t\tvalue = column.getFieldValue(data);\n\n\t\t\t\tif (value != \"undefined\") {\n\t\t\t\t\tcolCompnent = column.getComponent();\n\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colCompnent, rowComponent) : accessor.params;\n\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colCompnent, rowComponent));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\treturn data;\n},\n\n//default accessors\nAccessor.prototype.accessors = {};\n\nTabulator.prototype.registerModule(\"accessor\", Accessor);\nvar Ajax = function Ajax(table) {\n\n\tthis.table = table; //hold Tabulator object\n\tthis.config = false; //hold config object for ajax request\n\tthis.url = \"\"; //request URL\n\tthis.urlGenerator = false;\n\tthis.params = false; //request parameters\n\n\tthis.loaderElement = this.createLoaderElement(); //loader message div\n\tthis.msgElement = this.createMsgElement(); //message element\n\tthis.loadingElement = false;\n\tthis.errorElement = false;\n\tthis.loaderPromise = false;\n\n\tthis.progressiveLoad = false;\n\tthis.loading = false;\n\n\tthis.requestOrder = 0; //prevent requests comming out of sequence if overridden by another load request\n};\n\n//initialize setup options\nAjax.prototype.initialize = function () {\n\tvar template;\n\n\tthis.loaderElement.appendChild(this.msgElement);\n\n\tif (this.table.options.ajaxLoaderLoading) {\n\t\tif (typeof this.table.options.ajaxLoaderLoading == \"string\") {\n\t\t\ttemplate = document.createElement('template');\n\t\t\ttemplate.innerHTML = this.table.options.ajaxLoaderLoading.trim();\n\t\t\tthis.loadingElement = template.content.firstChild;\n\t\t} else {\n\t\t\tthis.loadingElement = this.table.options.ajaxLoaderLoading;\n\t\t}\n\t}\n\n\tthis.loaderPromise = this.table.options.ajaxRequestFunc || this.defaultLoaderPromise;\n\n\tthis.urlGenerator = this.table.options.ajaxURLGenerator || this.defaultURLGenerator;\n\n\tif (this.table.options.ajaxLoaderError) {\n\t\tif (typeof this.table.options.ajaxLoaderError == \"string\") {\n\t\t\ttemplate = document.createElement('template');\n\t\t\ttemplate.innerHTML = this.table.options.ajaxLoaderError.trim();\n\t\t\tthis.errorElement = template.content.firstChild;\n\t\t} else {\n\t\t\tthis.errorElement = this.table.options.ajaxLoaderError;\n\t\t}\n\t}\n\n\tif (this.table.options.ajaxParams) {\n\t\tthis.setParams(this.table.options.ajaxParams);\n\t}\n\n\tif (this.table.options.ajaxConfig) {\n\t\tthis.setConfig(this.table.options.ajaxConfig);\n\t}\n\n\tif (this.table.options.ajaxURL) {\n\t\tthis.setUrl(this.table.options.ajaxURL);\n\t}\n\n\tif (this.table.options.ajaxProgressiveLoad) {\n\t\tif (this.table.options.pagination) {\n\t\t\tthis.progressiveLoad = false;\n\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n\t\t} else {\n\t\t\tif (this.table.modExists(\"page\")) {\n\t\t\t\tthis.progressiveLoad = this.table.options.ajaxProgressiveLoad;\n\t\t\t\tthis.table.modules.page.initializeProgressive(this.progressiveLoad);\n\t\t\t} else {\n\t\t\t\tconsole.error(\"Pagination plugin is required for progressive ajax loading\");\n\t\t\t}\n\t\t}\n\t}\n};\n\nAjax.prototype.createLoaderElement = function () {\n\tvar el = document.createElement(\"div\");\n\tel.classList.add(\"tabulator-loader\");\n\treturn el;\n};\n\nAjax.prototype.createMsgElement = function () {\n\tvar el = document.createElement(\"div\");\n\n\tel.classList.add(\"tabulator-loader-msg\");\n\tel.setAttribute(\"role\", \"alert\");\n\n\treturn el;\n};\n\n//set ajax params\nAjax.prototype.setParams = function (params, update) {\n\tif (update) {\n\t\tthis.params = this.params || {};\n\n\t\tfor (var key in params) {\n\t\t\tthis.params[key] = params[key];\n\t\t}\n\t} else {\n\t\tthis.params = params;\n\t}\n};\n\nAjax.prototype.getParams = function () {\n\treturn this.params || {};\n};\n\n//load config object\nAjax.prototype.setConfig = function (config) {\n\tthis._loadDefaultConfig();\n\n\tif (typeof config == \"string\") {\n\t\tthis.config.method = config;\n\t} else {\n\t\tfor (var key in config) {\n\t\t\tthis.config[key] = config[key];\n\t\t}\n\t}\n};\n\n//create config object from default\nAjax.prototype._loadDefaultConfig = function (force) {\n\tvar self = this;\n\tif (!self.config || force) {\n\n\t\tself.config = {};\n\n\t\t//load base config from defaults\n\t\tfor (var key in self.defaultConfig) {\n\t\t\tself.config[key] = self.defaultConfig[key];\n\t\t}\n\t}\n};\n\n//set request url\nAjax.prototype.setUrl = function (url) {\n\tthis.url = url;\n};\n\n//get request url\nAjax.prototype.getUrl = function () {\n\treturn this.url;\n};\n\n//lstandard loading function\nAjax.prototype.loadData = function (inPosition, columnsChanged) {\n\tvar self = this;\n\n\tif (this.progressiveLoad) {\n\t\treturn this._loadDataProgressive();\n\t} else {\n\t\treturn this._loadDataStandard(inPosition, columnsChanged);\n\t}\n};\n\nAjax.prototype.nextPage = function (diff) {\n\tvar margin;\n\n\tif (!this.loading) {\n\n\t\tmargin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.getElement().clientHeight * 2;\n\n\t\tif (diff < margin) {\n\t\t\tthis.table.modules.page.nextPage().then(function () {}).catch(function () {});\n\t\t}\n\t}\n};\n\nAjax.prototype.blockActiveRequest = function () {\n\tthis.requestOrder++;\n};\n\nAjax.prototype._loadDataProgressive = function () {\n\tthis.table.rowManager.setData([]);\n\treturn this.table.modules.page.setPage(1);\n};\n\nAjax.prototype._loadDataStandard = function (inPosition, columnsChanged) {\n\tvar _this42 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\t_this42.sendRequest(inPosition).then(function (data) {\n\t\t\t_this42.table.rowManager.setData(data, inPosition, columnsChanged).then(function () {\n\t\t\t\tresolve();\n\t\t\t}).catch(function (e) {\n\t\t\t\treject(e);\n\t\t\t});\n\t\t}).catch(function (e) {\n\t\t\treject(e);\n\t\t});\n\t});\n};\n\nAjax.prototype.generateParamsList = function (data, prefix) {\n\tvar self = this,\n\t    output = [];\n\n\tprefix = prefix || \"\";\n\n\tif (Array.isArray(data)) {\n\t\tdata.forEach(function (item, i) {\n\t\t\toutput = output.concat(self.generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t} else if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === \"object\") {\n\t\tfor (var key in data) {\n\t\t\toutput = output.concat(self.generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t} else {\n\t\toutput.push({ key: prefix, value: data });\n\t}\n\n\treturn output;\n};\n\nAjax.prototype.serializeParams = function (params) {\n\tvar output = this.generateParamsList(params),\n\t    encoded = [];\n\n\toutput.forEach(function (item) {\n\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n\t});\n\n\treturn encoded.join(\"&\");\n};\n\n//send ajax request\nAjax.prototype.sendRequest = function (silent) {\n\tvar _this43 = this;\n\n\tvar self = this,\n\t    url = self.url,\n\t    requestNo,\n\t    esc,\n\t    query;\n\n\tself.requestOrder++;\n\trequestNo = self.requestOrder;\n\n\tself._loadDefaultConfig();\n\n\treturn new Promise(function (resolve, reject) {\n\t\tif (self.table.options.ajaxRequesting.call(_this43.table, self.url, self.params) !== false) {\n\n\t\t\tself.loading = true;\n\n\t\t\tif (!silent) {\n\t\t\t\tself.showLoader();\n\t\t\t}\n\n\t\t\t_this43.loaderPromise(url, self.config, self.params).then(function (data) {\n\t\t\t\tif (requestNo === self.requestOrder) {\n\t\t\t\t\tif (self.table.options.ajaxResponse) {\n\t\t\t\t\t\tdata = self.table.options.ajaxResponse.call(self.table, self.url, self.params, data);\n\t\t\t\t\t}\n\t\t\t\t\tresolve(data);\n\n\t\t\t\t\tself.hideLoader();\n\t\t\t\t\tself.loading = false;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made\");\n\t\t\t\t}\n\t\t\t}).catch(function (error) {\n\t\t\t\tconsole.error(\"Ajax Load Error: \", error);\n\t\t\t\tself.table.options.ajaxError.call(self.table, error);\n\n\t\t\t\tself.showError();\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tself.hideLoader();\n\t\t\t\t}, 3000);\n\n\t\t\t\tself.loading = false;\n\n\t\t\t\treject();\n\t\t\t});\n\t\t} else {\n\t\t\treject();\n\t\t}\n\t});\n};\n\nAjax.prototype.showLoader = function () {\n\tvar shouldLoad = typeof this.table.options.ajaxLoader === \"function\" ? this.table.options.ajaxLoader() : this.table.options.ajaxLoader;\n\n\tif (shouldLoad) {\n\n\t\tthis.hideLoader();\n\n\t\twhile (this.msgElement.firstChild) {\n\t\t\tthis.msgElement.removeChild(this.msgElement.firstChild);\n\t\t}this.msgElement.classList.remove(\"tabulator-error\");\n\t\tthis.msgElement.classList.add(\"tabulator-loading\");\n\n\t\tif (this.loadingElement) {\n\t\t\tthis.msgElement.appendChild(this.loadingElement);\n\t\t} else {\n\t\t\tthis.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|loading\");\n\t\t}\n\n\t\tthis.table.element.appendChild(this.loaderElement);\n\t}\n};\n\nAjax.prototype.showError = function () {\n\tthis.hideLoader();\n\n\twhile (this.msgElement.firstChild) {\n\t\tthis.msgElement.removeChild(this.msgElement.firstChild);\n\t}this.msgElement.classList.remove(\"tabulator-loading\");\n\tthis.msgElement.classList.add(\"tabulator-error\");\n\n\tif (this.errorElement) {\n\t\tthis.msgElement.appendChild(this.errorElement);\n\t} else {\n\t\tthis.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|error\");\n\t}\n\n\tthis.table.element.appendChild(this.loaderElement);\n};\n\nAjax.prototype.hideLoader = function () {\n\tif (this.loaderElement.parentNode) {\n\t\tthis.loaderElement.parentNode.removeChild(this.loaderElement);\n\t}\n};\n\n//default ajax config object\nAjax.prototype.defaultConfig = {\n\tmethod: \"GET\"\n};\n\nAjax.prototype.defaultURLGenerator = function (url, config, params) {\n\n\tif (url) {\n\t\tif (params && Object.keys(params).length) {\n\t\t\tif (!config.method || config.method.toLowerCase() == \"get\") {\n\t\t\t\tconfig.method = \"get\";\n\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + this.serializeParams(params);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn url;\n};\n\nAjax.prototype.defaultLoaderPromise = function (url, config, params) {\n\tvar self = this,\n\t    contentType;\n\n\treturn new Promise(function (resolve, reject) {\n\n\t\t//set url\n\t\turl = self.urlGenerator(url, config, params);\n\n\t\t//set body content if not GET request\n\t\tif (config.method.toUpperCase() != \"GET\") {\n\t\t\tcontentType = _typeof(self.table.options.ajaxContentType) === \"object\" ? self.table.options.ajaxContentType : self.contentTypeFormatters[self.table.options.ajaxContentType];\n\t\t\tif (contentType) {\n\n\t\t\t\tfor (var key in contentType.headers) {\n\t\t\t\t\tif (!config.headers) {\n\t\t\t\t\t\tconfig.headers = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof config.headers[key] === \"undefined\") {\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconfig.body = contentType.body.call(self, url, config, params);\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", self.table.options.ajaxContentType);\n\t\t\t}\n\t\t}\n\n\t\tif (url) {\n\n\t\t\t//configure headers\n\t\t\tif (typeof config.headers === \"undefined\") {\n\t\t\t\tconfig.headers = {};\n\t\t\t}\n\n\t\t\tif (typeof config.headers.Accept === \"undefined\") {\n\t\t\t\tconfig.headers.Accept = \"application/json\";\n\t\t\t}\n\n\t\t\tif (typeof config.headers[\"X-Requested-With\"] === \"undefined\") {\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t}\n\n\t\t\tif (typeof config.mode === \"undefined\") {\n\t\t\t\tconfig.mode = \"cors\";\n\t\t\t}\n\n\t\t\tif (config.mode == \"cors\") {\n\n\t\t\t\tif (typeof config.headers[\"Access-Control-Allow-Origin\"] === \"undefined\") {\n\t\t\t\t\tconfig.headers[\"Access-Control-Allow-Origin\"] = window.location.origin;\n\t\t\t\t}\n\n\t\t\t\tif (typeof config.credentials === \"undefined\") {\n\t\t\t\t\tconfig.credentials = 'same-origin';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (typeof config.credentials === \"undefined\") {\n\t\t\t\t\tconfig.credentials = 'include';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//send request\n\t\t\tfetch(url, config).then(function (response) {\n\t\t\t\tif (response.ok) {\n\t\t\t\t\tresponse.json().then(function (data) {\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t}).catch(function (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\treject(response);\n\t\t\t\t}\n\t\t\t}).catch(function (error) {\n\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\n\t\t\t\treject(error);\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\n\t\t\tresolve([]);\n\t\t}\n\t});\n};\n\nAjax.prototype.contentTypeFormatters = {\n\t\"json\": {\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: function body(url, config, params) {\n\t\t\treturn JSON.stringify(params);\n\t\t}\n\t},\n\t\"form\": {\n\t\theaders: {},\n\t\tbody: function body(url, config, params) {\n\t\t\tvar output = this.generateParamsList(params),\n\t\t\t    form = new FormData();\n\n\t\t\toutput.forEach(function (item) {\n\t\t\t\tform.append(item.key, item.value);\n\t\t\t});\n\n\t\t\treturn form;\n\t\t}\n\t}\n};\n\nTabulator.prototype.registerModule(\"ajax\", Ajax);\n\n//public calc object\nvar CalcComponent = function CalcComponent(row) {\n\tthis._row = row;\n};\n\nCalcComponent.prototype.getData = function (transform) {\n\treturn this._row.getData(transform);\n};\n\nCalcComponent.prototype.getElement = function () {\n\treturn this._row.getElement();\n};\n\nCalcComponent.prototype.getTable = function () {\n\treturn this._row.table;\n};\n\nCalcComponent.prototype.getCells = function () {\n\tvar cells = [];\n\n\tthis._row.getCells().forEach(function (cell) {\n\t\tcells.push(cell.getComponent());\n\t});\n\n\treturn cells;\n};\n\nCalcComponent.prototype.getCell = function (column) {\n\tvar cell = this._row.getCell(column);\n\treturn cell ? cell.getComponent() : false;\n};\n\nCalcComponent.prototype._getSelf = function () {\n\treturn this._row;\n};\n\nvar ColumnCalcs = function ColumnCalcs(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.topCalcs = [];\n\tthis.botCalcs = [];\n\tthis.genColumn = false;\n\tthis.topElement = this.createElement();\n\tthis.botElement = this.createElement();\n\tthis.topRow = false;\n\tthis.botRow = false;\n\tthis.topInitialized = false;\n\tthis.botInitialized = false;\n\n\tthis.initialize();\n};\n\nColumnCalcs.prototype.createElement = function () {\n\tvar el = document.createElement(\"div\");\n\tel.classList.add(\"tabulator-calcs-holder\");\n\treturn el;\n};\n\nColumnCalcs.prototype.initialize = function () {\n\tthis.genColumn = new Column({ field: \"value\" }, this);\n};\n\n//dummy functions to handle being mock column manager\nColumnCalcs.prototype.registerColumnField = function () {};\n\n//initialize column calcs\nColumnCalcs.prototype.initializeColumn = function (column) {\n\tvar def = column.definition;\n\n\tvar config = {\n\t\ttopCalcParams: def.topCalcParams || {},\n\t\tbotCalcParams: def.bottomCalcParams || {}\n\t};\n\n\tif (def.topCalc) {\n\n\t\tswitch (_typeof(def.topCalc)) {\n\t\t\tcase \"string\":\n\t\t\t\tif (this.calculations[def.topCalc]) {\n\t\t\t\t\tconfig.topCalc = this.calculations[def.topCalc];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tconfig.topCalc = def.topCalc;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif (config.topCalc) {\n\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\tthis.topCalcs.push(column);\n\n\t\t\tif (this.table.options.columnCalcs != \"group\") {\n\t\t\t\tthis.initializeTopRow();\n\t\t\t}\n\t\t}\n\t}\n\n\tif (def.bottomCalc) {\n\t\tswitch (_typeof(def.bottomCalc)) {\n\t\t\tcase \"string\":\n\t\t\t\tif (this.calculations[def.bottomCalc]) {\n\t\t\t\t\tconfig.botCalc = this.calculations[def.bottomCalc];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tconfig.botCalc = def.bottomCalc;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif (config.botCalc) {\n\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\tthis.botCalcs.push(column);\n\n\t\t\tif (this.table.options.columnCalcs != \"group\") {\n\t\t\t\tthis.initializeBottomRow();\n\t\t\t}\n\t\t}\n\t}\n};\n\nColumnCalcs.prototype.removeCalcs = function () {\n\tvar changed = false;\n\n\tif (this.topInitialized) {\n\t\tthis.topInitialized = false;\n\t\tthis.topElement.parentNode.removeChild(this.topElement);\n\t\tchanged = true;\n\t}\n\n\tif (this.botInitialized) {\n\t\tthis.botInitialized = false;\n\t\tthis.table.footerManager.remove(this.botElement);\n\t\tchanged = true;\n\t}\n\n\tif (changed) {\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n};\n\nColumnCalcs.prototype.initializeTopRow = function () {\n\tif (!this.topInitialized) {\n\t\t// this.table.columnManager.headersElement.after(this.topElement);\n\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\t\tthis.topInitialized = true;\n\t}\n};\n\nColumnCalcs.prototype.initializeBottomRow = function () {\n\tif (!this.botInitialized) {\n\t\tthis.table.footerManager.prepend(this.botElement);\n\t\tthis.botInitialized = true;\n\t}\n};\n\nColumnCalcs.prototype.scrollHorizontal = function (left) {\n\tvar hozAdjust = 0,\n\t    scrollWidth = this.table.columnManager.getElement().scrollWidth - this.table.element.clientWidth;\n\n\tif (this.botInitialized && this.botRow) {\n\t\tthis.botRow.getElement().style.marginLeft = -left + \"px\";\n\t}\n};\n\nColumnCalcs.prototype.recalc = function (rows) {\n\tvar data, row;\n\n\tif (this.topInitialized || this.botInitialized) {\n\t\tdata = this.rowsToData(rows);\n\n\t\tif (this.topInitialized) {\n\t\t\tif (this.topRow) {\n\t\t\t\tthis.topRow.deleteCells();\n\t\t\t}\n\n\t\t\trow = this.generateRow(\"top\", this.rowsToData(rows));\n\t\t\tthis.topRow = row;\n\t\t\twhile (this.topElement.firstChild) {\n\t\t\t\tthis.topElement.removeChild(this.topElement.firstChild);\n\t\t\t}this.topElement.appendChild(row.getElement());\n\t\t\trow.initialize(true);\n\t\t}\n\n\t\tif (this.botInitialized) {\n\t\t\tif (this.botRow) {\n\t\t\t\tthis.botRow.deleteCells();\n\t\t\t}\n\n\t\t\trow = this.generateRow(\"bottom\", this.rowsToData(rows));\n\t\t\tthis.botRow = row;\n\t\t\twhile (this.botElement.firstChild) {\n\t\t\t\tthis.botElement.removeChild(this.botElement.firstChild);\n\t\t\t}this.botElement.appendChild(row.getElement());\n\t\t\trow.initialize(true);\n\t\t}\n\n\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t//set resizable handles\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t}\n\t}\n};\n\nColumnCalcs.prototype.recalcRowGroup = function (row) {\n\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n};\n\nColumnCalcs.prototype.recalcAll = function () {\n\tvar _this44 = this;\n\n\tif (this.topCalcs.length || this.botCalcs.length) {\n\t\tif (this.table.options.columnCalcs !== \"group\") {\n\t\t\tthis.recalc(this.table.rowManager.activeRows);\n\t\t}\n\n\t\tif (this.table.options.groupBy && this.table.options.columnCalcs !== \"table\") {\n\n\t\t\tvar groups = table.modules.groupRows.getChildGroups();\n\n\t\t\tgroups.forEach(function (group) {\n\t\t\t\t_this44.recalcGroup(group);\n\t\t\t});\n\t\t}\n\t}\n};\n\nColumnCalcs.prototype.recalcGroup = function (group) {\n\tvar data, rowData;\n\n\tif (group) {\n\t\tif (group.calcs) {\n\t\t\tif (group.calcs.bottom) {\n\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\trowData = this.generateRowData(\"bottom\", data);\n\n\t\t\t\tgroup.calcs.bottom.updateData(rowData);\n\t\t\t\tgroup.calcs.bottom.reinitialize();\n\t\t\t}\n\n\t\t\tif (group.calcs.top) {\n\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\trowData = this.generateRowData(\"top\", data);\n\n\t\t\t\tgroup.calcs.top.updateData(rowData);\n\t\t\t\tgroup.calcs.top.reinitialize();\n\t\t\t}\n\t\t}\n\t}\n};\n\n//generate top stats row\nColumnCalcs.prototype.generateTopRow = function (rows) {\n\treturn this.generateRow(\"top\", this.rowsToData(rows));\n};\n//generate bottom stats row\nColumnCalcs.prototype.generateBottomRow = function (rows) {\n\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\n};\n\nColumnCalcs.prototype.rowsToData = function (rows) {\n\tvar _this45 = this;\n\n\tvar data = [];\n\n\trows.forEach(function (row) {\n\t\tdata.push(row.getData());\n\n\t\tif (_this45.table.options.dataTree && _this45.table.options.dataTreeChildColumnCalcs) {\n\t\t\tif (row.modules.dataTree.open) {\n\t\t\t\tvar children = _this45.rowsToData(_this45.table.modules.dataTree.getFilteredTreeChildren(row));\n\t\t\t\tdata = data.concat(children);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn data;\n};\n\n//generate stats row\nColumnCalcs.prototype.generateRow = function (pos, data) {\n\tvar self = this,\n\t    rowData = this.generateRowData(pos, data),\n\t    row;\n\n\tif (self.table.modExists(\"mutator\")) {\n\t\tself.table.modules.mutator.disable();\n\t}\n\n\trow = new Row(rowData, this, \"calc\");\n\n\tif (self.table.modExists(\"mutator\")) {\n\t\tself.table.modules.mutator.enable();\n\t}\n\n\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\n\trow.component = false;\n\n\trow.getComponent = function () {\n\t\tif (!this.component) {\n\t\t\tthis.component = new CalcComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t};\n\n\trow.generateCells = function () {\n\n\t\tvar cells = [];\n\n\t\tself.table.columnManager.columnsByIndex.forEach(function (column) {\n\n\t\t\t//set field name of mock column\n\t\t\tself.genColumn.setField(column.getField());\n\t\t\tself.genColumn.hozAlign = column.hozAlign;\n\n\t\t\tif (column.definition[pos + \"CalcFormatter\"] && self.table.modExists(\"format\")) {\n\t\t\t\tself.genColumn.modules.format = {\n\t\t\t\t\tformatter: self.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tself.genColumn.modules.format = {\n\t\t\t\t\tformatter: self.table.modules.format.getFormatter(\"plaintext\"),\n\t\t\t\t\tparams: {}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t//ensure css class defintion is replicated to calculation cell\n\t\t\tself.genColumn.definition.cssClass = column.definition.cssClass;\n\n\t\t\t//generate cell and assign to correct column\n\t\t\tvar cell = new Cell(self.genColumn, row);\n\t\t\tcell.getElement();\n\t\t\tcell.column = column;\n\t\t\tcell.setWidth();\n\n\t\t\tcolumn.cells.push(cell);\n\t\t\tcells.push(cell);\n\n\t\t\tif (!column.visible) {\n\t\t\t\tcell.hide();\n\t\t\t}\n\t\t});\n\n\t\tthis.cells = cells;\n\t};\n\n\treturn row;\n};\n\n//generate stats row\nColumnCalcs.prototype.generateRowData = function (pos, data) {\n\tvar rowData = {},\n\t    calcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n\t    type = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n\t    params,\n\t    paramKey;\n\n\tcalcs.forEach(function (column) {\n\t\tvar values = [];\n\n\t\tif (column.modules.columnCalcs && column.modules.columnCalcs[type]) {\n\t\t\tdata.forEach(function (item) {\n\t\t\t\tvalues.push(column.getFieldValue(item));\n\t\t\t});\n\n\t\t\tparamKey = type + \"Params\";\n\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n\n\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n\t\t}\n\t});\n\n\treturn rowData;\n};\n\nColumnCalcs.prototype.hasTopCalcs = function () {\n\treturn !!this.topCalcs.length;\n};\n\nColumnCalcs.prototype.hasBottomCalcs = function () {\n\treturn !!this.botCalcs.length;\n};\n\n//handle table redraw\nColumnCalcs.prototype.redraw = function () {\n\tif (this.topRow) {\n\t\tthis.topRow.normalizeHeight(true);\n\t}\n\tif (this.botRow) {\n\t\tthis.botRow.normalizeHeight(true);\n\t}\n};\n\n//return the calculated\nColumnCalcs.prototype.getResults = function () {\n\tvar self = this,\n\t    results = {},\n\t    groups;\n\n\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\tgroups = this.table.modules.groupRows.getGroups(true);\n\n\t\tgroups.forEach(function (group) {\n\t\t\tresults[group.getKey()] = self.getGroupResults(group);\n\t\t});\n\t} else {\n\t\tresults = {\n\t\t\ttop: this.topRow ? this.topRow.getData() : {},\n\t\t\tbottom: this.botRow ? this.botRow.getData() : {}\n\t\t};\n\t}\n\n\treturn results;\n};\n\n//get results from a group\nColumnCalcs.prototype.getGroupResults = function (group) {\n\tvar self = this,\n\t    groupObj = group._getSelf(),\n\t    subGroups = group.getSubGroups(),\n\t    subGroupResults = {},\n\t    results = {};\n\n\tsubGroups.forEach(function (subgroup) {\n\t\tsubGroupResults[subgroup.getKey()] = self.getGroupResults(subgroup);\n\t});\n\n\tresults = {\n\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n\t\tgroups: subGroupResults\n\t};\n\n\treturn results;\n};\n\n//default calculations\nColumnCalcs.prototype.calculations = {\n\t\"avg\": function avg(values, data, calcParams) {\n\t\tvar output = 0,\n\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n\t\tif (values.length) {\n\t\t\toutput = values.reduce(function (sum, value) {\n\t\t\t\tvalue = Number(value);\n\t\t\t\treturn sum + value;\n\t\t\t});\n\n\t\t\toutput = output / values.length;\n\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\n\t\t}\n\n\t\treturn parseFloat(output).toString();\n\t},\n\t\"max\": function max(values, data, calcParams) {\n\t\tvar output = null,\n\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function (value) {\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif (value > output || output === null) {\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n\t},\n\t\"min\": function min(values, data, calcParams) {\n\t\tvar output = null,\n\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function (value) {\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif (value < output || output === null) {\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n\t},\n\t\"sum\": function sum(values, data, calcParams) {\n\t\tvar output = 0,\n\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tif (values.length) {\n\t\t\tvalues.forEach(function (value) {\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\n\t\t\t});\n\t\t}\n\n\t\treturn precision !== false ? output.toFixed(precision) : output;\n\t},\n\t\"concat\": function concat(values, data, calcParams) {\n\t\tvar output = 0;\n\n\t\tif (values.length) {\n\t\t\toutput = values.reduce(function (sum, value) {\n\t\t\t\treturn String(sum) + String(value);\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"count\": function count(values, data, calcParams) {\n\t\tvar output = 0;\n\n\t\tif (values.length) {\n\t\t\tvalues.forEach(function (value) {\n\t\t\t\tif (value) {\n\t\t\t\t\toutput++;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n};\n\nTabulator.prototype.registerModule(\"columnCalcs\", ColumnCalcs);\n\nvar Clipboard = function Clipboard(table) {\n\tthis.table = table;\n\tthis.mode = true;\n\n\tthis.pasteParser = function () {};\n\tthis.pasteAction = function () {};\n\tthis.customSelection = false;\n\tthis.rowRange = false;\n\tthis.blocked = true; //block copy actions not originating from this command\n};\n\nClipboard.prototype.initialize = function () {\n\tvar _this46 = this;\n\n\tthis.mode = this.table.options.clipboard;\n\n\tthis.rowRange = this.table.options.clipboardCopyRowRange;\n\n\tif (this.mode === true || this.mode === \"copy\") {\n\t\tthis.table.element.addEventListener(\"copy\", function (e) {\n\t\t\tvar plain, html, list;\n\n\t\t\tif (!_this46.blocked) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (_this46.customSelection) {\n\t\t\t\t\tplain = _this46.customSelection;\n\n\t\t\t\t\tif (_this46.table.options.clipboardCopyFormatter) {\n\t\t\t\t\t\tplain = _this46.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tvar list = _this46.table.modules.export.generateExportList(_this46.rowRange, _this46.table.options.clipboardCopyStyled, _this46.table.options.clipboardCopyConfig, \"clipboard\");\n\n\t\t\t\t\thtml = _this46.table.modules.export.genereateHTMLTable(list);\n\t\t\t\t\tplain = html ? _this46.generatePlainContent(list) : \"\";\n\n\t\t\t\t\tif (_this46.table.options.clipboardCopyFormatter) {\n\t\t\t\t\t\tplain = _this46.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\thtml = _this46.table.options.clipboardCopyFormatter(\"html\", html);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t\t\t\twindow.clipboardData.setData('Text', plain);\n\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\n\t\t\t\t\te.clipboardData.setData('text/plain', plain);\n\t\t\t\t\tif (html) {\n\t\t\t\t\t\te.clipboardData.setData('text/html', html);\n\t\t\t\t\t}\n\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\n\t\t\t\t\tif (html) {\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_this46.table.options.clipboardCopied.call(_this46.table, plain, html);\n\n\t\t\t\t_this46.reset();\n\t\t\t}\n\t\t});\n\t}\n\n\tif (this.mode === true || this.mode === \"paste\") {\n\t\tthis.table.element.addEventListener(\"paste\", function (e) {\n\t\t\t_this46.paste(e);\n\t\t});\n\t}\n\n\tthis.setPasteParser(this.table.options.clipboardPasteParser);\n\tthis.setPasteAction(this.table.options.clipboardPasteAction);\n};\n\nClipboard.prototype.reset = function () {\n\tthis.blocked = false;\n\tthis.originalSelectionText = \"\";\n};\n\nClipboard.prototype.generatePlainContent = function (list) {\n\tvar output = [];\n\n\tlist.forEach(function (row) {\n\t\tvar rowData = [];\n\n\t\trow.columns.forEach(function (col) {\n\t\t\tvar value = \"\";\n\n\t\t\tif (col) {\n\n\t\t\t\tif (row.type === \"group\") {\n\t\t\t\t\tcol.value = col.component.getKey();\n\t\t\t\t}\n\n\t\t\t\tif (col.value === null) {\n\t\t\t\t\tvalue = \"\";\n\t\t\t\t} else {\n\t\t\t\t\tswitch (_typeof(col.value)) {\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tvalue = col.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trowData.push(value);\n\t\t});\n\n\t\toutput.push(rowData.join(\"\\t\"));\n\t});\n\n\treturn output.join(\"\\n\");\n};\n\nClipboard.prototype.copy = function (range, internal) {\n\tvar range, sel, textRange;\n\tthis.blocked = false;\n\tthis.customSelection = false;\n\n\tif (this.mode === true || this.mode === \"copy\") {\n\n\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\trange = document.createRange();\n\t\t\trange.selectNodeContents(this.table.element);\n\t\t\tsel = window.getSelection();\n\n\t\t\tif (sel.toString() && internal) {\n\t\t\t\tthis.customSelection = sel.toString();\n\t\t\t}\n\n\t\t\tsel.removeAllRanges();\n\t\t\tsel.addRange(range);\n\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n\t\t\ttextRange = document.body.createTextRange();\n\t\t\ttextRange.moveToElementText(this.table.element);\n\t\t\ttextRange.select();\n\t\t}\n\n\t\tdocument.execCommand('copy');\n\n\t\tif (sel) {\n\t\t\tsel.removeAllRanges();\n\t\t}\n\t}\n};\n\n//PASTE EVENT HANDLING\n\nClipboard.prototype.setPasteAction = function (action) {\n\n\tswitch (typeof action === 'undefined' ? 'undefined' : _typeof(action)) {\n\t\tcase \"string\":\n\t\t\tthis.pasteAction = this.pasteActions[action];\n\n\t\t\tif (!this.pasteAction) {\n\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"function\":\n\t\t\tthis.pasteAction = action;\n\t\t\tbreak;\n\t}\n};\n\nClipboard.prototype.setPasteParser = function (parser) {\n\tswitch (typeof parser === 'undefined' ? 'undefined' : _typeof(parser)) {\n\t\tcase \"string\":\n\t\t\tthis.pasteParser = this.pasteParsers[parser];\n\n\t\t\tif (!this.pasteParser) {\n\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"function\":\n\t\t\tthis.pasteParser = parser;\n\t\t\tbreak;\n\t}\n};\n\nClipboard.prototype.paste = function (e) {\n\tvar data, rowData, rows;\n\n\tif (this.checkPaseOrigin(e)) {\n\n\t\tdata = this.getPasteData(e);\n\n\t\trowData = this.pasteParser.call(this, data);\n\n\t\tif (rowData) {\n\t\t\te.preventDefault();\n\n\t\t\tif (this.table.modExists(\"mutator\")) {\n\t\t\t\trowData = this.mutateData(rowData);\n\t\t\t}\n\n\t\t\trows = this.pasteAction.call(this, rowData);\n\t\t\tthis.table.options.clipboardPasted.call(this.table, data, rowData, rows);\n\t\t} else {\n\t\t\tthis.table.options.clipboardPasteError.call(this.table, data);\n\t\t}\n\t}\n};\n\nClipboard.prototype.mutateData = function (data) {\n\tvar self = this,\n\t    output = [];\n\n\tif (Array.isArray(data)) {\n\t\tdata.forEach(function (row) {\n\t\t\toutput.push(self.table.modules.mutator.transformRow(row, \"clipboard\"));\n\t\t});\n\t} else {\n\t\toutput = data;\n\t}\n\n\treturn output;\n};\n\nClipboard.prototype.checkPaseOrigin = function (e) {\n\tvar valid = true;\n\n\tif (e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell) {\n\t\tvalid = false;\n\t}\n\n\treturn valid;\n};\n\nClipboard.prototype.getPasteData = function (e) {\n\tvar data;\n\n\tif (window.clipboardData && window.clipboardData.getData) {\n\t\tdata = window.clipboardData.getData('Text');\n\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\tdata = e.clipboardData.getData('text/plain');\n\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\n\t}\n\n\treturn data;\n};\n\nClipboard.prototype.pasteParsers = {\n\ttable: function table(clipboard) {\n\t\tvar data = [],\n\t\t    success = false,\n\t\t    headerFindSuccess = true,\n\t\t    columns = this.table.columnManager.columns,\n\t\t    columnMap = [],\n\t\t    rows = [];\n\n\t\t//get data from clipboard into array of columns and rows.\n\t\tclipboard = clipboard.split(\"\\n\");\n\n\t\tclipboard.forEach(function (row) {\n\t\t\tdata.push(row.split(\"\\t\"));\n\t\t});\n\n\t\tif (data.length && !(data.length === 1 && data[0].length < 2)) {\n\t\t\tsuccess = true;\n\n\t\t\t//check if headers are present by title\n\t\t\tdata[0].forEach(function (value) {\n\t\t\t\tvar column = columns.find(function (column) {\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n\t\t\t\t});\n\n\t\t\t\tif (column) {\n\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t} else {\n\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//check if column headers are present by field\n\t\t\tif (!headerFindSuccess) {\n\t\t\t\theaderFindSuccess = true;\n\t\t\t\tcolumnMap = [];\n\n\t\t\t\tdata[0].forEach(function (value) {\n\t\t\t\t\tvar column = columns.find(function (column) {\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\n\t\t\t\t\t});\n\n\t\t\t\t\tif (column) {\n\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t} else {\n\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!headerFindSuccess) {\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//remove header row if found\n\t\t\tif (headerFindSuccess) {\n\t\t\t\tdata.shift();\n\t\t\t}\n\n\t\t\tdata.forEach(function (item) {\n\t\t\t\tvar row = {};\n\n\t\t\t\titem.forEach(function (value, i) {\n\t\t\t\t\tif (columnMap[i]) {\n\t\t\t\t\t\trow[columnMap[i].field] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trows.push(row);\n\t\t\t});\n\n\t\t\treturn rows;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n};\n\nClipboard.prototype.pasteActions = {\n\treplace: function replace(rows) {\n\t\treturn this.table.setData(rows);\n\t},\n\tupdate: function update(rows) {\n\t\treturn this.table.updateOrAddData(rows);\n\t},\n\tinsert: function insert(rows) {\n\t\treturn this.table.addData(rows);\n\t}\n};\n\nTabulator.prototype.registerModule(\"clipboard\", Clipboard);\n\nvar DataTree = function DataTree(table) {\n\tthis.table = table;\n\tthis.indent = 10;\n\tthis.field = \"\";\n\tthis.collapseEl = null;\n\tthis.expandEl = null;\n\tthis.branchEl = null;\n\tthis.elementField = false;\n\n\tthis.startOpen = function () {};\n\n\tthis.displayIndex = 0;\n};\n\nDataTree.prototype.initialize = function () {\n\tvar dummyEl = null,\n\t    firstCol = this.table.columnManager.getFirstVisibileColumn(),\n\t    options = this.table.options;\n\n\tthis.field = options.dataTreeChildField;\n\tthis.indent = options.dataTreeChildIndent;\n\tthis.elementField = options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\n\tif (options.dataTreeBranchElement) {\n\n\t\tif (options.dataTreeBranchElement === true) {\n\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\n\t\t} else {\n\t\t\tif (typeof options.dataTreeBranchElement === \"string\") {\n\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\n\t\t\t\tthis.branchEl = dummyEl.firstChild;\n\t\t\t} else {\n\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (options.dataTreeCollapseElement) {\n\t\tif (typeof options.dataTreeCollapseElement === \"string\") {\n\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\n\t\t\tthis.collapseEl = dummyEl.firstChild;\n\t\t} else {\n\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\n\t\t}\n\t} else {\n\t\tthis.collapseEl = document.createElement(\"div\");\n\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\n\t\tthis.collapseEl.tabIndex = 0;\n\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n\t}\n\n\tif (options.dataTreeExpandElement) {\n\t\tif (typeof options.dataTreeExpandElement === \"string\") {\n\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\n\t\t\tthis.expandEl = dummyEl.firstChild;\n\t\t} else {\n\t\t\tthis.expandEl = options.dataTreeExpandElement;\n\t\t}\n\t} else {\n\t\tthis.expandEl = document.createElement(\"div\");\n\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\n\t\tthis.expandEl.tabIndex = 0;\n\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n\t}\n\n\tswitch (_typeof(options.dataTreeStartExpanded)) {\n\t\tcase \"boolean\":\n\t\t\tthis.startOpen = function (row, index) {\n\t\t\t\treturn options.dataTreeStartExpanded;\n\t\t\t};\n\t\t\tbreak;\n\n\t\tcase \"function\":\n\t\t\tthis.startOpen = options.dataTreeStartExpanded;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthis.startOpen = function (row, index) {\n\t\t\t\treturn options.dataTreeStartExpanded[index];\n\t\t\t};\n\t\t\tbreak;\n\t}\n};\n\nDataTree.prototype.initializeRow = function (row) {\n\tvar childArray = row.getData()[this.field];\n\tvar isArray = Array.isArray(childArray);\n\n\tvar children = isArray || !isArray && (typeof childArray === 'undefined' ? 'undefined' : _typeof(childArray)) === \"object\" && childArray !== null;\n\n\tif (!children && row.modules.dataTree && row.modules.dataTree.branchEl) {\n\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n\t}\n\n\tif (!children && row.modules.dataTree && row.modules.dataTree.controlEl) {\n\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n\t}\n\n\trow.modules.dataTree = {\n\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\n\t\topen: children ? row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0) : false,\n\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n\t\tchildren: children\n\t};\n};\n\nDataTree.prototype.layoutRow = function (row) {\n\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n\t    el = cell.getElement(),\n\t    config = row.modules.dataTree;\n\n\tif (config.branchEl) {\n\t\tif (config.branchEl.parentNode) {\n\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\n\t\t}\n\t\tconfig.branchEl = false;\n\t}\n\n\tif (config.controlEl) {\n\t\tif (config.controlEl.parentNode) {\n\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\n\t\t}\n\t\tconfig.controlEl = false;\n\t}\n\n\tthis.generateControlElement(row, el);\n\n\trow.element.classList.add(\"tabulator-tree-level-\" + config.index);\n\n\tif (config.index) {\n\t\tif (this.branchEl) {\n\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\n\t\t\tel.insertBefore(config.branchEl, el.firstChild);\n\n\t\t\tif (this.table.rtl) {\n\t\t\t\tconfig.branchEl.style.marginRight = (config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1) + config.index * this.indent + \"px\";\n\t\t\t} else {\n\t\t\t\tconfig.branchEl.style.marginLeft = (config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1) + config.index * this.indent + \"px\";\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (this.table.rtl) {\n\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + config.index * this.indent + \"px\";\n\t\t\t} else {\n\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + config.index * this.indent + \"px\";\n\t\t\t}\n\t\t}\n\t}\n};\n\nDataTree.prototype.generateControlElement = function (row, el) {\n\tvar _this47 = this;\n\n\tvar config = row.modules.dataTree,\n\t    el = el || row.getCells()[0].getElement(),\n\t    oldControl = config.controlEl;\n\n\tif (config.children !== false) {\n\n\t\tif (config.open) {\n\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\n\t\t\tconfig.controlEl.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\t_this47.collapseRow(row);\n\t\t\t});\n\t\t} else {\n\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\n\t\t\tconfig.controlEl.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\t_this47.expandRow(row);\n\t\t\t});\n\t\t}\n\n\t\tconfig.controlEl.addEventListener(\"mousedown\", function (e) {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif (oldControl && oldControl.parentNode === el) {\n\t\t\toldControl.parentNode.replaceChild(config.controlEl, oldControl);\n\t\t} else {\n\t\t\tel.insertBefore(config.controlEl, el.firstChild);\n\t\t}\n\t}\n};\n\nDataTree.prototype.setDisplayIndex = function (index) {\n\tthis.displayIndex = index;\n};\n\nDataTree.prototype.getDisplayIndex = function () {\n\treturn this.displayIndex;\n};\n\nDataTree.prototype.getRows = function (rows) {\n\tvar _this48 = this;\n\n\tvar output = [];\n\n\trows.forEach(function (row, i) {\n\t\tvar config, children;\n\n\t\toutput.push(row);\n\n\t\tif (row instanceof Row) {\n\n\t\t\tconfig = row.modules.dataTree.children;\n\n\t\t\tif (!config.index && config.children !== false) {\n\t\t\t\tchildren = _this48.getChildren(row);\n\n\t\t\t\tchildren.forEach(function (child) {\n\t\t\t\t\toutput.push(child);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\treturn output;\n};\n\nDataTree.prototype.getChildren = function (row) {\n\tvar _this49 = this;\n\n\tvar config = row.modules.dataTree,\n\t    children = [],\n\t    output = [];\n\n\tif (config.children !== false && config.open) {\n\t\tif (!Array.isArray(config.children)) {\n\t\t\tconfig.children = this.generateChildren(row);\n\t\t}\n\n\t\tif (this.table.modExists(\"filter\") && this.table.options.dataTreeFilter) {\n\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t} else {\n\t\t\tchildren = config.children;\n\t\t}\n\n\t\tif (this.table.modExists(\"sort\") && this.table.options.dataTreeSort) {\n\t\t\tthis.table.modules.sort.sort(children);\n\t\t}\n\n\t\tchildren.forEach(function (child) {\n\t\t\toutput.push(child);\n\n\t\t\tvar subChildren = _this49.getChildren(child);\n\n\t\t\tsubChildren.forEach(function (sub) {\n\t\t\t\toutput.push(sub);\n\t\t\t});\n\t\t});\n\t}\n\n\treturn output;\n};\n\nDataTree.prototype.generateChildren = function (row) {\n\tvar _this50 = this;\n\n\tvar children = [];\n\n\tvar childArray = row.getData()[this.field];\n\n\tif (!Array.isArray(childArray)) {\n\t\tchildArray = [childArray];\n\t}\n\n\tchildArray.forEach(function (childData) {\n\t\tvar childRow = new Row(childData || {}, _this50.table.rowManager);\n\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n\t\tchildRow.modules.dataTree.parent = row;\n\t\tif (childRow.modules.dataTree.children) {\n\t\t\tchildRow.modules.dataTree.open = _this50.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n\t\t}\n\t\tchildren.push(childRow);\n\t});\n\n\treturn children;\n};\n\nDataTree.prototype.expandRow = function (row, silent) {\n\tvar config = row.modules.dataTree;\n\n\tif (config.children !== false) {\n\t\tconfig.open = true;\n\n\t\trow.reinitialize();\n\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\n\t\tthis.table.options.dataTreeRowExpanded(row.getComponent(), row.modules.dataTree.index);\n\t}\n};\n\nDataTree.prototype.collapseRow = function (row) {\n\tvar config = row.modules.dataTree;\n\n\tif (config.children !== false) {\n\t\tconfig.open = false;\n\n\t\trow.reinitialize();\n\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\n\t\tthis.table.options.dataTreeRowCollapsed(row.getComponent(), row.modules.dataTree.index);\n\t}\n};\n\nDataTree.prototype.toggleRow = function (row) {\n\tvar config = row.modules.dataTree;\n\n\tif (config.children !== false) {\n\t\tif (config.open) {\n\t\t\tthis.collapseRow(row);\n\t\t} else {\n\t\t\tthis.expandRow(row);\n\t\t}\n\t}\n};\n\nDataTree.prototype.getTreeParent = function (row) {\n\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n};\n\nDataTree.prototype.getFilteredTreeChildren = function (row) {\n\tvar config = row.modules.dataTree,\n\t    output = [],\n\t    children;\n\n\tif (config.children) {\n\n\t\tif (!Array.isArray(config.children)) {\n\t\t\tconfig.children = this.generateChildren(row);\n\t\t}\n\n\t\tif (this.table.modExists(\"filter\") && this.table.options.dataTreeFilter) {\n\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t} else {\n\t\t\tchildren = config.children;\n\t\t}\n\n\t\tchildren.forEach(function (childRow) {\n\t\t\tif (childRow instanceof Row) {\n\t\t\t\toutput.push(childRow);\n\t\t\t}\n\t\t});\n\t}\n\n\treturn output;\n};\n\nDataTree.prototype.rowDelete = function (row) {\n\tvar parent = row.modules.dataTree.parent,\n\t    childIndex;\n\n\tif (parent) {\n\t\tchildIndex = this.findChildIndex(row, parent);\n\n\t\tif (childIndex !== false) {\n\t\t\tparent.data[this.field].splice(childIndex, 1);\n\t\t}\n\n\t\tif (!parent.data[this.field].length) {\n\t\t\tdelete parent.data[this.field];\n\t\t}\n\n\t\tthis.initializeRow(parent);\n\t\tthis.layoutRow(parent);\n\t}\n\n\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n};\n\nDataTree.prototype.addTreeChildRow = function (row, data, top, index) {\n\tvar childIndex = false;\n\n\tif (typeof data === \"string\") {\n\t\tdata = JSON.parse(data);\n\t}\n\n\tif (!Array.isArray(row.data[this.field])) {\n\t\trow.data[this.field] = [];\n\n\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n\t}\n\n\tif (typeof index !== \"undefined\") {\n\t\tchildIndex = this.findChildIndex(index, row);\n\n\t\tif (childIndex !== false) {\n\t\t\trow.data[this.field].splice(top ? childIndex : childIndex + 1, 0, data);\n\t\t}\n\t}\n\n\tif (childIndex === false) {\n\t\tif (top) {\n\t\t\trow.data[this.field].unshift(data);\n\t\t} else {\n\t\t\trow.data[this.field].push(data);\n\t\t}\n\t}\n\n\tthis.initializeRow(row);\n\tthis.layoutRow(row);\n\n\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n};\n\nDataTree.prototype.findChildIndex = function (subject, parent) {\n\tvar _this51 = this;\n\n\tvar match = false;\n\n\tif ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n\n\t\tif (subject instanceof Row) {\n\t\t\t//subject is row element\n\t\t\tmatch = subject.data;\n\t\t} else if (subject instanceof RowComponent) {\n\t\t\t//subject is public row component\n\t\t\tmatch = subject._getSelf().data;\n\t\t} else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n\t\t\tif (parent.modules.dataTree) {\n\t\t\t\tmatch = parent.modules.dataTree.children.find(function (childRow) {\n\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\n\t\t\t\t});\n\n\t\t\t\tif (match) {\n\t\t\t\t\tmatch = match.data;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else if (typeof subject == \"undefined\" || subject === null) {\n\t\tmatch = false;\n\t} else {\n\t\t//subject should be treated as the index of the row\n\t\tmatch = parent.data[this.field].find(function (row) {\n\t\t\treturn row.data[_this51.table.options.index] == subject;\n\t\t});\n\t}\n\n\tif (match) {\n\n\t\tif (Array.isArray(parent.data[this.field])) {\n\t\t\tmatch = parent.data[this.field].indexOf(match);\n\t\t}\n\n\t\tif (match == -1) {\n\t\t\tmatch = false;\n\t\t}\n\t}\n\n\t//catch all for any other type of input\n\n\treturn match;\n};\n\nDataTree.prototype.getTreeChildren = function (row, component, recurse) {\n\tvar _this52 = this;\n\n\tvar config = row.modules.dataTree,\n\t    output = [];\n\n\tif (config.children) {\n\n\t\tif (!Array.isArray(config.children)) {\n\t\t\tconfig.children = this.generateChildren(row);\n\t\t}\n\n\t\tconfig.children.forEach(function (childRow) {\n\t\t\tif (childRow instanceof Row) {\n\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\n\n\t\t\t\tif (recurse) {\n\t\t\t\t\toutput = output.concat(_this52.getTreeChildren(childRow, component, recurse));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\treturn output;\n};\n\nDataTree.prototype.checkForRestyle = function (cell) {\n\tif (!cell.row.cells.indexOf(cell)) {\n\t\tcell.row.reinitialize();\n\t}\n};\n\nDataTree.prototype.getChildField = function () {\n\treturn this.field;\n};\n\nDataTree.prototype.redrawNeeded = function (data) {\n\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n};\n\nTabulator.prototype.registerModule(\"dataTree\", DataTree);\n\nvar Download = function Download(table) {\n\tthis.table = table; //hold Tabulator object\n};\n\n//trigger file download\nDownload.prototype.download = function (type, filename, options, range, interceptCallback) {\n\tvar self = this,\n\t    downloadFunc = false;\n\n\tfunction buildLink(data, mime) {\n\t\tif (interceptCallback) {\n\t\t\tif (interceptCallback === true) {\n\t\t\t\tself.triggerDownload(data, mime, type, filename, true);\n\t\t\t} else {\n\t\t\t\tinterceptCallback(data);\n\t\t\t}\n\t\t} else {\n\t\t\tself.triggerDownload(data, mime, type, filename);\n\t\t}\n\t}\n\n\tif (typeof type == \"function\") {\n\t\tdownloadFunc = type;\n\t} else {\n\t\tif (self.downloaders[type]) {\n\t\t\tdownloadFunc = self.downloaders[type];\n\t\t} else {\n\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\n\t\t}\n\t}\n\n\tif (downloadFunc) {\n\t\tvar list = this.generateExportList(range);\n\n\t\tdownloadFunc.call(this.table, list, options || {}, buildLink);\n\t}\n};\n\nDownload.prototype.generateExportList = function (range) {\n\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n\t//assign group header formatter\n\tvar groupHeader = this.table.options.groupHeaderDownload;\n\n\tif (groupHeader && !Array.isArray(groupHeader)) {\n\t\tgroupHeader = [groupHeader];\n\t}\n\n\tlist.forEach(function (row) {\n\t\tvar group;\n\n\t\tif (row.type === \"group\") {\n\t\t\tgroup = row.columns[0];\n\n\t\t\tif (groupHeader && groupHeader[row.indent]) {\n\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn list;\n};\n\nDownload.prototype.triggerDownload = function (data, mime, type, filename, newTab) {\n\tvar element = document.createElement('a'),\n\t    blob = new Blob([data], { type: mime }),\n\t    filename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n\n\tblob = this.table.options.downloadReady.call(this.table, data, blob);\n\n\tif (blob) {\n\n\t\tif (newTab) {\n\t\t\twindow.open(window.URL.createObjectURL(blob));\n\t\t} else {\n\t\t\tif (navigator.msSaveOrOpenBlob) {\n\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\n\t\t\t} else {\n\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\n\n\t\t\t\t//set file title\n\t\t\t\telement.setAttribute('download', filename);\n\n\t\t\t\t//trigger download\n\t\t\t\telement.style.display = 'none';\n\t\t\t\tdocument.body.appendChild(element);\n\t\t\t\telement.click();\n\n\t\t\t\t//remove temporary link element\n\t\t\t\tdocument.body.removeChild(element);\n\t\t\t}\n\t\t}\n\n\t\tif (this.table.options.downloadComplete) {\n\t\t\tthis.table.options.downloadComplete();\n\t\t}\n\t}\n};\n\nDownload.prototype.commsReceived = function (table, action, data) {\n\tswitch (action) {\n\t\tcase \"intercept\":\n\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\n\t\t\tbreak;\n\t}\n};\n\n//downloaders\nDownload.prototype.downloaders = {\n\tcsv: function csv(list, options, setFileContents) {\n\t\tvar delimiter = options && options.delimiter ? options.delimiter : \",\",\n\t\t    fileContents = [],\n\t\t    headers = [];\n\n\t\tlist.forEach(function (row) {\n\t\t\tvar item = [];\n\n\t\t\tswitch (row.type) {\n\t\t\t\tcase \"group\":\n\t\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"calc\":\n\t\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"header\":\n\t\t\t\t\trow.columns.forEach(function (col, i) {\n\t\t\t\t\t\tif (col && col.depth === 1) {\n\t\t\t\t\t\t\theaders[i] = typeof col.value == \"undefined\" || col.value === null ? \"\" : '\"' + String(col.value).split('\"').join('\"\"') + '\"';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"row\":\n\t\t\t\t\trow.columns.forEach(function (col) {\n\n\t\t\t\t\t\tif (col) {\n\n\t\t\t\t\t\t\tswitch (_typeof(col.value)) {\n\t\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\t\tcol.value = JSON.stringify(col.value);\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tfileContents.push(item.join(delimiter));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tif (headers.length) {\n\t\t\tfileContents.unshift(headers.join(delimiter));\n\t\t}\n\n\t\tfileContents = fileContents.join(\"\\n\");\n\n\t\tif (options.bom) {\n\t\t\tfileContents = '\\uFEFF' + fileContents;\n\t\t}\n\n\t\tsetFileContents(fileContents, \"text/csv\");\n\t},\n\n\tjson: function json(list, options, setFileContents) {\n\t\tvar fileContents = [];\n\n\t\tlist.forEach(function (row) {\n\t\t\tvar item = {};\n\n\t\t\tswitch (row.type) {\n\t\t\t\tcase \"header\":\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"group\":\n\t\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"calc\":\n\t\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"row\":\n\t\t\t\t\trow.columns.forEach(function (col) {\n\t\t\t\t\t\tif (col) {\n\t\t\t\t\t\t\titem[col.component.getField()] = col.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tfileContents.push(item);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tfileContents = JSON.stringify(fileContents, null, '\\t');\n\n\t\tsetFileContents(fileContents, \"application/json\");\n\t},\n\n\tpdf: function pdf(list, options, setFileContents) {\n\t\tvar header = [],\n\t\t    body = [],\n\t\t    autoTableParams = {},\n\t\t    rowGroupStyles = options.rowGroupStyles || {\n\t\t\tfontStyle: \"bold\",\n\t\t\tfontSize: 12,\n\t\t\tcellPadding: 6,\n\t\t\tfillColor: 220\n\t\t},\n\t\t    rowCalcStyles = options.rowCalcStyles || {\n\t\t\tfontStyle: \"bold\",\n\t\t\tfontSize: 10,\n\t\t\tcellPadding: 4,\n\t\t\tfillColor: 232\n\t\t},\n\t\t    jsPDFParams = options.jsPDF || {},\n\t\t    title = options && options.title ? options.title : \"\";\n\n\t\tif (!jsPDFParams.orientation) {\n\t\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\n\t\t}\n\n\t\tif (!jsPDFParams.unit) {\n\t\t\tjsPDFParams.unit = \"pt\";\n\t\t}\n\n\t\t//parse row list\n\t\tlist.forEach(function (row) {\n\t\t\tvar item = {};\n\n\t\t\tswitch (row.type) {\n\t\t\t\tcase \"header\":\n\t\t\t\t\theader.push(parseRow(row));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"group\":\n\t\t\t\t\tbody.push(parseRow(row, rowGroupStyles));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"calc\":\n\t\t\t\t\tbody.push(parseRow(row, rowCalcStyles));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"row\":\n\t\t\t\t\tbody.push(parseRow(row));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tfunction parseRow(row, styles) {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach(function (col) {\n\t\t\t\tvar cell;\n\n\t\t\t\tif (col) {\n\t\t\t\t\tswitch (_typeof(col.value)) {\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tcol.value = JSON.stringify(col.value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcell = {\n\t\t\t\t\t\tcontent: col.value,\n\t\t\t\t\t\tcolSpan: col.width,\n\t\t\t\t\t\trowSpan: col.height\n\t\t\t\t\t};\n\n\t\t\t\t\tif (styles) {\n\t\t\t\t\t\tcell.styles = styles;\n\t\t\t\t\t}\n\n\t\t\t\t\trowData.push(cell);\n\t\t\t\t} else {\n\t\t\t\t\trowData.push(\"\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn rowData;\n\t\t}\n\n\t\t//configure PDF\n\t\tvar doc = new jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n\t\tif (options && options.autoTable) {\n\t\t\tif (typeof options.autoTable === \"function\") {\n\t\t\t\tautoTableParams = options.autoTable(doc) || {};\n\t\t\t} else {\n\t\t\t\tautoTableParams = options.autoTable;\n\t\t\t}\n\t\t}\n\n\t\tif (title) {\n\t\t\tautoTableParams.addPageContent = function (data) {\n\t\t\t\tdoc.text(title, 40, 30);\n\t\t\t};\n\t\t}\n\n\t\tautoTableParams.head = header;\n\t\tautoTableParams.body = body;\n\n\t\tdoc.autoTable(autoTableParams);\n\n\t\tif (options && options.documentProcessing) {\n\t\t\toptions.documentProcessing(doc);\n\t\t}\n\n\t\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n\t},\n\n\txlsx: function xlsx(list, options, setFileContents) {\n\t\tvar self = this,\n\t\t    sheetName = options.sheetName || \"Sheet1\",\n\t\t    workbook = XLSX.utils.book_new(),\n\t\t    output;\n\n\t\tworkbook.SheetNames = [];\n\t\tworkbook.Sheets = {};\n\n\t\tfunction generateSheet() {\n\t\t\tvar rows = [],\n\t\t\t    merges = [],\n\t\t\t    worksheet = {},\n\t\t\t    range = { s: { c: 0, r: 0 }, e: { c: list[0] ? list[0].columns.reduce(function (a, b) {\n\t\t\t\t\t\treturn a + (b && b.width ? b.width : 1);\n\t\t\t\t\t}, 0) : 0, r: list.length } };\n\n\t\t\t//parse row list\n\t\t\tlist.forEach(function (row, i) {\n\t\t\t\tvar rowData = [];\n\n\t\t\t\trow.columns.forEach(function (col, j) {\n\n\t\t\t\t\tif (col) {\n\t\t\t\t\t\trowData.push(!(col.value instanceof Date) && _typeof(col.value) === \"object\" ? JSON.stringify(col.value) : col.value);\n\n\t\t\t\t\t\tif (col.width > 1 || col.height > -1) {\n\t\t\t\t\t\t\tmerges.push({ s: { r: i, c: j }, e: { r: i + col.height - 1, c: j + col.width - 1 } });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\trowData.push(\"\");\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trows.push(rowData);\n\t\t\t});\n\n\t\t\t//convert rows to worksheet\n\t\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\n\n\t\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\n\n\t\t\tif (merges.length) {\n\t\t\t\tworksheet[\"!merges\"] = merges;\n\t\t\t}\n\n\t\t\treturn worksheet;\n\t\t}\n\n\t\tif (options.sheetOnly) {\n\t\t\tsetFileContents(generateSheet());\n\t\t\treturn;\n\t\t}\n\n\t\tif (options.sheets) {\n\t\t\tfor (var sheet in options.sheets) {\n\n\t\t\t\tif (options.sheets[sheet] === true) {\n\t\t\t\t\tworkbook.SheetNames.push(sheet);\n\t\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\n\t\t\t\t} else {\n\n\t\t\t\t\tworkbook.SheetNames.push(sheet);\n\n\t\t\t\t\tthis.modules.comms.send(options.sheets[sheet], \"download\", \"intercept\", {\n\t\t\t\t\t\ttype: \"xlsx\",\n\t\t\t\t\t\toptions: { sheetOnly: true },\n\t\t\t\t\t\tactive: self.active,\n\t\t\t\t\t\tintercept: function intercept(data) {\n\t\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tworkbook.SheetNames.push(sheetName);\n\t\t\tworkbook.Sheets[sheetName] = generateSheet();\n\t\t}\n\n\t\tif (options.documentProcessing) {\n\t\t\tworkbook = options.documentProcessing(workbook);\n\t\t}\n\n\t\t//convert workbook to binary array\n\t\tfunction s2ab(s) {\n\t\t\tvar buf = new ArrayBuffer(s.length);\n\t\t\tvar view = new Uint8Array(buf);\n\t\t\tfor (var i = 0; i != s.length; ++i) {\n\t\t\t\tview[i] = s.charCodeAt(i) & 0xFF;\n\t\t\t}return buf;\n\t\t}\n\n\t\toutput = XLSX.write(workbook, { bookType: 'xlsx', bookSST: true, type: 'binary' });\n\n\t\tsetFileContents(s2ab(output), \"application/octet-stream\");\n\t},\n\n\thtml: function html(list, options, setFileContents) {\n\t\tif (this.modExists(\"export\", true)) {\n\t\t\tsetFileContents(this.modules.export.genereateHTMLTable(list), \"text/html\");\n\t\t}\n\t}\n\n};\n\nTabulator.prototype.registerModule(\"download\", Download);\n\nvar Edit = function Edit(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.currentCell = false; //hold currently editing cell\n\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overriden by editor opening\n\tthis.recursionBlock = false; //prevent focus recursion\n\tthis.invalidEdit = false;\n\tthis.editedCells = [];\n};\n\n//initialize column editor\nEdit.prototype.initializeColumn = function (column) {\n\tvar self = this,\n\t    config = {\n\t\teditor: false,\n\t\tblocked: false,\n\t\tcheck: column.definition.editable,\n\t\tparams: column.definition.editorParams || {}\n\t};\n\n\t//set column editor\n\tswitch (_typeof(column.definition.editor)) {\n\t\tcase \"string\":\n\n\t\t\tif (column.definition.editor === \"tick\") {\n\t\t\t\tcolumn.definition.editor = \"tickCross\";\n\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n\t\t\t}\n\n\t\t\tif (self.editors[column.definition.editor]) {\n\t\t\t\tconfig.editor = self.editors[column.definition.editor];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"function\":\n\t\t\tconfig.editor = column.definition.editor;\n\t\t\tbreak;\n\n\t\tcase \"boolean\":\n\n\t\t\tif (column.definition.editor === true) {\n\n\t\t\t\tif (typeof column.definition.formatter !== \"function\") {\n\n\t\t\t\t\tif (column.definition.formatter === \"tick\") {\n\t\t\t\t\t\tcolumn.definition.formatter = \"tickCross\";\n\t\t\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.editors[column.definition.formatter]) {\n\t\t\t\t\t\tconfig.editor = self.editors[column.definition.formatter];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig.editor = self.editors[\"input\"];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t}\n\n\tif (config.editor) {\n\t\tcolumn.modules.edit = config;\n\t}\n};\n\nEdit.prototype.getCurrentCell = function () {\n\treturn this.currentCell ? this.currentCell.getComponent() : false;\n};\n\nEdit.prototype.clearEditor = function (cancel) {\n\tvar cell = this.currentCell,\n\t    cellEl;\n\n\tthis.invalidEdit = false;\n\n\tif (cell) {\n\t\tthis.currentCell = false;\n\n\t\tcellEl = cell.getElement();\n\n\t\tif (cancel) {\n\t\t\tcell.validate();\n\t\t} else {\n\t\t\tcellEl.classList.remove(\"tabulator-validation-fail\");\n\t\t}\n\n\t\tcellEl.classList.remove(\"tabulator-editing\");\n\t\twhile (cellEl.firstChild) {\n\t\t\tcellEl.removeChild(cellEl.firstChild);\n\t\t}cell.row.getElement().classList.remove(\"tabulator-row-editing\");\n\t}\n};\n\nEdit.prototype.cancelEdit = function () {\n\n\tif (this.currentCell) {\n\t\tvar cell = this.currentCell;\n\t\tvar component = this.currentCell.getComponent();\n\n\t\tthis.clearEditor(true);\n\t\tcell.setValueActual(cell.getValue());\n\t\tcell.cellRendered();\n\n\t\tif (cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight) {\n\t\t\tcell.row.normalizeHeight(true);\n\t\t}\n\n\t\tif (cell.column.cellEvents.cellEditCancelled) {\n\t\t\tcell.column.cellEvents.cellEditCancelled.call(this.table, component);\n\t\t}\n\n\t\tthis.table.options.cellEditCancelled.call(this.table, component);\n\t}\n};\n\n//return a formatted value for a cell\nEdit.prototype.bindEditor = function (cell) {\n\tvar self = this,\n\t    element = cell.getElement();\n\n\telement.setAttribute(\"tabindex\", 0);\n\n\telement.addEventListener(\"click\", function (e) {\n\t\tif (!element.classList.contains(\"tabulator-editing\")) {\n\t\t\telement.focus({ preventScroll: true });\n\t\t}\n\t});\n\n\telement.addEventListener(\"mousedown\", function (e) {\n\t\tif (e.button === 2) {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\tself.mouseClick = true;\n\t\t}\n\t});\n\n\telement.addEventListener(\"focus\", function (e) {\n\t\tif (!self.recursionBlock) {\n\t\t\tself.edit(cell, e, false);\n\t\t}\n\t});\n};\n\nEdit.prototype.focusCellNoEvent = function (cell, block) {\n\tthis.recursionBlock = true;\n\tif (!(block && this.table.browser === \"ie\")) {\n\t\tcell.getElement().focus({ preventScroll: true });\n\t}\n\tthis.recursionBlock = false;\n};\n\nEdit.prototype.editCell = function (cell, forceEdit) {\n\tthis.focusCellNoEvent(cell);\n\tthis.edit(cell, false, forceEdit);\n};\n\nEdit.prototype.focusScrollAdjust = function (cell) {\n\tif (this.table.rowManager.getRenderMode() == \"virtual\") {\n\t\tvar topEdge = this.table.rowManager.element.scrollTop,\n\t\t    bottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n\t\t    rowEl = cell.row.getElement(),\n\t\t    offset = rowEl.offsetTop;\n\n\t\tif (rowEl.offsetTop < topEdge) {\n\t\t\tthis.table.rowManager.element.scrollTop -= topEdge - rowEl.offsetTop;\n\t\t} else {\n\t\t\tif (rowEl.offsetTop + rowEl.offsetHeight > bottomEdge) {\n\t\t\t\tthis.table.rowManager.element.scrollTop += rowEl.offsetTop + rowEl.offsetHeight - bottomEdge;\n\t\t\t}\n\t\t}\n\n\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\n\t\t    rightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n\t\t    cellEl = cell.getElement(),\n\t\t    offset = cellEl.offsetLeft;\n\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin);\n\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin);\n\t\t}\n\n\t\tif (cellEl.offsetLeft < leftEdge) {\n\t\t\tthis.table.rowManager.element.scrollLeft -= leftEdge - cellEl.offsetLeft;\n\t\t} else {\n\t\t\tif (cellEl.offsetLeft + cellEl.offsetWidth > rightEdge) {\n\t\t\t\tthis.table.rowManager.element.scrollLeft += cellEl.offsetLeft + cellEl.offsetWidth - rightEdge;\n\t\t\t}\n\t\t}\n\t}\n};\n\nEdit.prototype.edit = function (cell, e, forceEdit) {\n\tvar self = this,\n\t    allowEdit = true,\n\t    rendered = function rendered() {},\n\t    element = cell.getElement(),\n\t    cellEditor,\n\t    component,\n\t    params;\n\n\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\tif (this.currentCell) {\n\t\tif (!this.invalidEdit) {\n\t\t\tthis.cancelEdit();\n\t\t}\n\t\treturn;\n\t}\n\n\t//handle successfull value change\n\tfunction success(value) {\n\t\tif (self.currentCell === cell) {\n\t\t\tvar valid = true;\n\n\t\t\tif (cell.column.modules.validate && self.table.modExists(\"validate\") && self.table.options.validationMode != \"manual\") {\n\t\t\t\tvalid = self.table.modules.validate.validate(cell.column.modules.validate, cell, value);\n\t\t\t}\n\n\t\t\tif (valid === true || self.table.options.validationMode === \"highlight\") {\n\t\t\t\tself.clearEditor();\n\n\t\t\t\tif (!cell.modules.edit) {\n\t\t\t\t\tcell.modules.edit = {};\n\t\t\t\t}\n\n\t\t\t\tcell.modules.edit.edited = true;\n\n\t\t\t\tif (self.editedCells.indexOf(cell) == -1) {\n\t\t\t\t\tself.editedCells.push(cell);\n\t\t\t\t}\n\n\t\t\t\tcell.setValue(value, true);\n\n\t\t\t\tif (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n\t\t\t\t\tself.table.modules.dataTree.checkForRestyle(cell);\n\t\t\t\t}\n\n\t\t\t\tif (valid !== true) {\n\t\t\t\t\telement.classList.add(\"tabulator-validation-fail\");\n\t\t\t\t\tself.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tself.invalidEdit = true;\n\t\t\t\telement.classList.add(\"tabulator-validation-fail\");\n\t\t\t\tself.focusCellNoEvent(cell, true);\n\t\t\t\trendered();\n\t\t\t\tself.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n\t\t}\n\t}\n\n\t//handle aborted edit\n\tfunction cancel() {\n\t\tif (self.currentCell === cell) {\n\t\t\tself.cancelEdit();\n\n\t\t\tif (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n\t\t\t\tself.table.modules.dataTree.checkForRestyle(cell);\n\t\t\t}\n\t\t} else {\n\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n\t\t}\n\t}\n\n\tfunction onRendered(callback) {\n\t\trendered = callback;\n\t}\n\n\tif (!cell.column.modules.edit.blocked) {\n\t\tif (e) {\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\tswitch (_typeof(cell.column.modules.edit.check)) {\n\t\t\tcase \"function\":\n\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\tbreak;\n\n\t\t\tcase \"boolean\":\n\t\t\t\tallowEdit = cell.column.modules.edit.check;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (allowEdit || forceEdit) {\n\n\t\t\tself.cancelEdit();\n\n\t\t\tself.currentCell = cell;\n\n\t\t\tthis.focusScrollAdjust(cell);\n\n\t\t\tcomponent = cell.getComponent();\n\n\t\t\tif (this.mouseClick) {\n\t\t\t\tthis.mouseClick = false;\n\n\t\t\t\tif (cell.column.cellEvents.cellClick) {\n\t\t\t\t\tcell.column.cellEvents.cellClick.call(this.table, e, component);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cell.column.cellEvents.cellEditing) {\n\t\t\t\tcell.column.cellEvents.cellEditing.call(this.table, component);\n\t\t\t}\n\n\t\t\tself.table.options.cellEditing.call(this.table, component);\n\n\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n\n\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\n\t\t\t//if editor returned, add to DOM, if false, abort edit\n\t\t\tif (cellEditor !== false) {\n\n\t\t\t\tif (cellEditor instanceof Node) {\n\t\t\t\t\telement.classList.add(\"tabulator-editing\");\n\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-row-editing\");\n\t\t\t\t\twhile (element.firstChild) {\n\t\t\t\t\t\telement.removeChild(element.firstChild);\n\t\t\t\t\t}element.appendChild(cellEditor);\n\n\t\t\t\t\t//trigger onRendered Callback\n\t\t\t\t\trendered();\n\n\t\t\t\t\t//prevent editing from triggering rowClick event\n\t\t\t\t\tvar children = element.children;\n\n\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function (e) {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n\t\t\t\t\telement.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\telement.blur();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.mouseClick = false;\n\t\t\telement.blur();\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\tthis.mouseClick = false;\n\t\telement.blur();\n\t\treturn false;\n\t}\n};\n\nEdit.prototype.maskInput = function (el, options) {\n\tvar mask = options.mask,\n\t    maskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n\t    maskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n\t    maskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\",\n\t    success = false;\n\n\tfunction fillSymbols(index) {\n\t\tvar symbol = mask[index];\n\t\tif (typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber) {\n\t\t\tel.value = el.value + \"\" + symbol;\n\t\t\tfillSymbols(index + 1);\n\t\t}\n\t}\n\n\tel.addEventListener(\"keydown\", function (e) {\n\t\tvar index = el.value.length,\n\t\t    char = e.key;\n\n\t\tif (e.keyCode > 46) {\n\t\t\tif (index >= mask.length) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tsuccess = false;\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tswitch (mask[index]) {\n\t\t\t\t\tcase maskLetter:\n\t\t\t\t\t\tif (char.toUpperCase() == char.toLowerCase()) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskNumber:\n\t\t\t\t\t\tif (isNaN(char)) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskWildcard:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (char !== mask[index]) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsuccess = true;\n\t\t}\n\n\t\treturn;\n\t});\n\n\tel.addEventListener(\"keyup\", function (e) {\n\t\tif (e.keyCode > 46) {\n\t\t\tif (options.maskAutoFill) {\n\t\t\t\tfillSymbols(el.value.length);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (!el.placeholder) {\n\t\tel.placeholder = mask;\n\t}\n\n\tif (options.maskAutoFill) {\n\t\tfillSymbols(el.value.length);\n\t}\n};\n\nEdit.prototype.getEditedCells = function () {\n\tvar output = [];\n\n\tthis.editedCells.forEach(function (cell) {\n\t\toutput.push(cell.getComponent());\n\t});\n\n\treturn output;\n};\n\nEdit.prototype.clearEdited = function (cell) {\n\tvar editIndex;\n\n\tif (cell.modules.validate && cell.modules.edit && cell.modules.edit.edited) {\n\t\tcell.modules.validate.invalid = false;\n\n\t\teditIndex = this.editedCells.indexOf(cell);\n\n\t\tif (editIndex > -1) {\n\t\t\tthis.editedCells.splice(editIndex, 1);\n\t\t}\n\t}\n};\n\n//default data editors\nEdit.prototype.editors = {\n\n\t//input element\n\tinput: function input(cell, onRendered, success, cancel, editorParams) {\n\n\t\t//create and style input\n\t\tvar cellValue = cell.getValue(),\n\t\t    input = document.createElement(\"input\");\n\n\t\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\n\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t} else {\n\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\n\t\tonRendered(function () {\n\t\t\tinput.focus({ preventScroll: true });\n\t\t\tinput.style.height = \"100%\";\n\t\t});\n\n\t\tfunction onChange(e) {\n\t\t\tif ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n\t\t\t\tif (success(input.value)) {\n\t\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcancel();\n\t\t\t}\n\t\t}\n\n\t\t//submit new value on blur or change\n\t\tinput.addEventListener(\"change\", onChange);\n\t\tinput.addEventListener(\"blur\", onChange);\n\n\t\t//submit new value on enter\n\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\t// case 9:\n\t\t\t\tcase 13:\n\t\t\t\t\tonChange(e);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 27:\n\t\t\t\t\tcancel();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 35:\n\t\t\t\tcase 36:\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tif (editorParams.mask) {\n\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t}\n\n\t\treturn input;\n\t},\n\n\t//resizable text area element\n\ttextarea: function textarea(cell, onRendered, success, cancel, editorParams) {\n\t\tvar self = this,\n\t\t    cellValue = cell.getValue(),\n\t\t    vertNav = editorParams.verticalNavigation || \"hybrid\",\n\t\t    value = String(cellValue !== null && typeof cellValue !== \"undefined\" ? cellValue : \"\"),\n\t\t    count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\n\t\t    input = document.createElement(\"textarea\"),\n\t\t    scrollHeight = 0;\n\n\t\t//create and style input\n\t\tinput.style.display = \"block\";\n\t\tinput.style.padding = \"2px\";\n\t\tinput.style.height = \"100%\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\t\tinput.style.whiteSpace = \"pre-wrap\";\n\t\tinput.style.resize = \"none\";\n\n\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t} else {\n\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinput.value = value;\n\n\t\tonRendered(function () {\n\t\t\tinput.focus({ preventScroll: true });\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tinput.scrollHeight;\n\t\t\tinput.style.height = input.scrollHeight + \"px\";\n\t\t\tcell.getRow().normalizeHeight();\n\t\t});\n\n\t\tfunction onChange(e) {\n\n\t\t\tif ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n\n\t\t\t\tif (success(input.value)) {\n\t\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t}\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t\t}, 300);\n\t\t\t} else {\n\t\t\t\tcancel();\n\t\t\t}\n\t\t}\n\n\t\t//submit new value on blur or change\n\t\tinput.addEventListener(\"change\", onChange);\n\t\tinput.addEventListener(\"blur\", onChange);\n\n\t\tinput.addEventListener(\"keyup\", function () {\n\n\t\t\tinput.style.height = \"\";\n\n\t\t\tvar heightNow = input.scrollHeight;\n\n\t\t\tinput.style.height = heightNow + \"px\";\n\n\t\t\tif (heightNow != scrollHeight) {\n\t\t\t\tscrollHeight = heightNow;\n\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t}\n\t\t});\n\n\t\tinput.addEventListener(\"keydown\", function (e) {\n\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 27:\n\t\t\t\t\tcancel();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 38:\n\t\t\t\t\t//up arrow\n\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 40:\n\t\t\t\t\t//down arrow\n\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart !== input.value.length) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 35:\n\t\t\t\tcase 36:\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tif (editorParams.mask) {\n\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t}\n\n\t\treturn input;\n\t},\n\n\t//input element with type of number\n\tnumber: function number(cell, onRendered, success, cancel, editorParams) {\n\n\t\tvar cellValue = cell.getValue(),\n\t\t    vertNav = editorParams.verticalNavigation || \"editor\",\n\t\t    input = document.createElement(\"input\");\n\n\t\tinput.setAttribute(\"type\", \"number\");\n\n\t\tif (typeof editorParams.max != \"undefined\") {\n\t\t\tinput.setAttribute(\"max\", editorParams.max);\n\t\t}\n\n\t\tif (typeof editorParams.min != \"undefined\") {\n\t\t\tinput.setAttribute(\"min\", editorParams.min);\n\t\t}\n\n\t\tif (typeof editorParams.step != \"undefined\") {\n\t\t\tinput.setAttribute(\"step\", editorParams.step);\n\t\t}\n\n\t\t//create and style input\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\n\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t} else {\n\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinput.value = cellValue;\n\n\t\tvar blurFunc = function blurFunc(e) {\n\t\t\tonChange();\n\t\t};\n\n\t\tonRendered(function () {\n\t\t\t//submit new value on blur\n\t\t\tinput.removeEventListener(\"blur\", blurFunc);\n\n\t\t\tinput.focus({ preventScroll: true });\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"blur\", blurFunc);\n\t\t});\n\n\t\tfunction onChange() {\n\t\t\tvar value = input.value;\n\n\t\t\tif (!isNaN(value) && value !== \"\") {\n\t\t\t\tvalue = Number(value);\n\t\t\t}\n\n\t\t\tif (value !== cellValue) {\n\t\t\t\tif (success(value)) {\n\t\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcancel();\n\t\t\t}\n\t\t}\n\n\t\t//submit new value on enter\n\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 13:\n\t\t\t\t\t// case 9:\n\t\t\t\t\tonChange();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 27:\n\t\t\t\t\tcancel();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 38: //up arrow\n\t\t\t\tcase 40:\n\t\t\t\t\t//down arrow\n\t\t\t\t\tif (vertNav == \"editor\") {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 35:\n\t\t\t\tcase 36:\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tif (editorParams.mask) {\n\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t}\n\n\t\treturn input;\n\t},\n\n\t//input element with type of number\n\trange: function range(cell, onRendered, success, cancel, editorParams) {\n\n\t\tvar cellValue = cell.getValue(),\n\t\t    input = document.createElement(\"input\");\n\n\t\tinput.setAttribute(\"type\", \"range\");\n\n\t\tif (typeof editorParams.max != \"undefined\") {\n\t\t\tinput.setAttribute(\"max\", editorParams.max);\n\t\t}\n\n\t\tif (typeof editorParams.min != \"undefined\") {\n\t\t\tinput.setAttribute(\"min\", editorParams.min);\n\t\t}\n\n\t\tif (typeof editorParams.step != \"undefined\") {\n\t\t\tinput.setAttribute(\"step\", editorParams.step);\n\t\t}\n\n\t\t//create and style input\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\n\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t} else {\n\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinput.value = cellValue;\n\n\t\tonRendered(function () {\n\t\t\tinput.focus({ preventScroll: true });\n\t\t\tinput.style.height = \"100%\";\n\t\t});\n\n\t\tfunction onChange() {\n\t\t\tvar value = input.value;\n\n\t\t\tif (!isNaN(value) && value !== \"\") {\n\t\t\t\tvalue = Number(value);\n\t\t\t}\n\n\t\t\tif (value != cellValue) {\n\t\t\t\tif (success(value)) {\n\t\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcancel();\n\t\t\t}\n\t\t}\n\n\t\t//submit new value on blur\n\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\tonChange();\n\t\t});\n\n\t\t//submit new value on enter\n\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 13:\n\t\t\t\t\t// case 9:\n\t\t\t\t\tonChange();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 27:\n\t\t\t\t\tcancel();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\treturn input;\n\t},\n\n\t//select\n\tselect: function select(cell, onRendered, success, cancel, editorParams) {\n\t\tvar _this53 = this;\n\n\t\tvar self = this,\n\t\t    cellEl = cell.getElement(),\n\t\t    initialValue = cell.getValue(),\n\t\t    vertNav = editorParams.verticalNavigation || \"editor\",\n\t\t    initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? Array.isArray(initialValue) ? initialValue : [initialValue] : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : [],\n\t\t    input = document.createElement(\"input\"),\n\t\t    listEl = document.createElement(\"div\"),\n\t\t    multiselect = editorParams.multiselect,\n\t\t    dataItems = [],\n\t\t    currentItem = {},\n\t\t    displayItems = [],\n\t\t    currentItems = [],\n\t\t    blurable = true,\n\t\t    blockListShow = false;\n\n\t\tif (Array.isArray(editorParams) || !Array.isArray(editorParams) && (typeof editorParams === 'undefined' ? 'undefined' : _typeof(editorParams)) === \"object\" && !editorParams.values) {\n\t\t\tconsole.warn(\"DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object\");\n\t\t\teditorParams = { values: editorParams };\n\t\t}\n\n\t\tfunction getUniqueColumnValues(field) {\n\t\t\tvar output = {},\n\t\t\t    data = self.table.getData(),\n\t\t\t    column;\n\n\t\t\tif (field) {\n\t\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\n\t\t\t} else {\n\t\t\t\tcolumn = cell.getColumn()._getSelf();\n\t\t\t}\n\n\t\t\tif (column) {\n\t\t\t\tdata.forEach(function (row) {\n\t\t\t\t\tvar val = column.getFieldValue(row);\n\n\t\t\t\t\tif (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n\t\t\t\t\t\toutput[val] = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (editorParams.sortValuesList) {\n\t\t\t\t\tif (editorParams.sortValuesList == \"asc\") {\n\t\t\t\t\t\toutput = Object.keys(output).sort();\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput = Object.keys(output).sort().reverse();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\toutput = Object.keys(output);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\n\t\t\t}\n\n\t\t\treturn output;\n\t\t}\n\n\t\tfunction parseItems(inputValues, curentValues) {\n\t\t\tvar dataList = [];\n\t\t\tvar displayList = [];\n\n\t\t\tfunction processComplexListItem(item) {\n\t\t\t\tvar item = {\n\t\t\t\t\tlabel: item.label,\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t\titemParams: item.itemParams,\n\t\t\t\t\telementAttributes: item.elementAttributes,\n\t\t\t\t\telement: false\n\t\t\t\t};\n\n\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n\t\t\t\t// \tsetCurrentItem(item);\n\t\t\t\t// }\n\n\t\t\t\tif (curentValues.indexOf(item.value) > -1) {\n\t\t\t\t\tsetItem(item);\n\t\t\t\t}\n\n\t\t\t\tdataList.push(item);\n\t\t\t\tdisplayList.push(item);\n\n\t\t\t\treturn item;\n\t\t\t}\n\n\t\t\tif (typeof inputValues == \"function\") {\n\t\t\t\tinputValues = inputValues(cell);\n\t\t\t}\n\n\t\t\tif (Array.isArray(inputValues)) {\n\t\t\t\tinputValues.forEach(function (value) {\n\t\t\t\t\tvar item;\n\n\t\t\t\t\tif ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\") {\n\n\t\t\t\t\t\tif (value.options) {\n\t\t\t\t\t\t\titem = {\n\t\t\t\t\t\t\t\tlabel: value.label,\n\t\t\t\t\t\t\t\tgroup: true,\n\t\t\t\t\t\t\t\titemParams: value.itemParams,\n\t\t\t\t\t\t\t\telementAttributes: value.elementAttributes,\n\t\t\t\t\t\t\t\telement: false\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tdisplayList.push(item);\n\n\t\t\t\t\t\t\tvalue.options.forEach(function (item) {\n\t\t\t\t\t\t\t\tprocessComplexListItem(item);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tprocessComplexListItem(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\titem = {\n\t\t\t\t\t\t\tlabel: value,\n\t\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\t\telement: false\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n\t\t\t\t\t\t// \tsetCurrentItem(item);\n\t\t\t\t\t\t// }\n\n\t\t\t\t\t\tif (curentValues.indexOf(item.value) > -1) {\n\t\t\t\t\t\t\tsetItem(item);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataList.push(item);\n\t\t\t\t\t\tdisplayList.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfor (var key in inputValues) {\n\t\t\t\t\tvar item = {\n\t\t\t\t\t\tlabel: inputValues[key],\n\t\t\t\t\t\tvalue: key,\n\t\t\t\t\t\telement: false\n\t\t\t\t\t};\n\n\t\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n\t\t\t\t\t// \tsetCurrentItem(item);\n\t\t\t\t\t// }\n\n\t\t\t\t\tif (curentValues.indexOf(item.value) > -1) {\n\t\t\t\t\t\tsetItem(item);\n\t\t\t\t\t}\n\n\t\t\t\t\tdataList.push(item);\n\t\t\t\t\tdisplayList.push(item);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdataItems = dataList;\n\t\t\tdisplayItems = displayList;\n\n\t\t\tfillList();\n\t\t}\n\n\t\tfunction fillList() {\n\t\t\twhile (listEl.firstChild) {\n\t\t\t\tlistEl.removeChild(listEl.firstChild);\n\t\t\t}displayItems.forEach(function (item) {\n\n\t\t\t\tvar el = item.element;\n\n\t\t\t\tif (!el) {\n\t\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\t\titem.label = editorParams.listItemFormatter ? editorParams.listItemFormatter(item.value, item.label, cell, el, item.itemParams) : item.label;\n\t\t\t\t\tif (item.group) {\n\t\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-group\");\n\t\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\n\t\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n\n\t\t\t\t\t\tel.addEventListener(\"click\", function () {\n\t\t\t\t\t\t\tblockListShow = true;\n\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tblockListShow = false;\n\t\t\t\t\t\t\t}, 10);\n\n\t\t\t\t\t\t\t// setCurrentItem(item);\n\t\t\t\t\t\t\t// chooseItem();\n\t\t\t\t\t\t\tif (multiselect) {\n\t\t\t\t\t\t\t\ttoggleItem(item);\n\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tchooseItem(item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// if(item === currentItem){\n\t\t\t\t\t\t// \tel.classList.add(\"active\");\n\t\t\t\t\t\t// }\n\n\t\t\t\t\t\tif (currentItems.indexOf(item) > -1) {\n\t\t\t\t\t\t\tel.classList.add(\"active\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (item.elementAttributes && _typeof(item.elementAttributes) == \"object\") {\n\t\t\t\t\t\tfor (var key in item.elementAttributes) {\n\t\t\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\t\t\tel.setAttribute(key, input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tel.addEventListener(\"mousedown\", function () {\n\t\t\t\t\t\tblurable = false;\n\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tblurable = true;\n\t\t\t\t\t\t}, 10);\n\t\t\t\t\t});\n\n\t\t\t\t\titem.element = el;\n\t\t\t\t}\n\n\t\t\t\tlistEl.appendChild(el);\n\t\t\t});\n\t\t}\n\n\t\tfunction setCurrentItem(item, active) {\n\n\t\t\tif (!multiselect && currentItem && currentItem.element) {\n\t\t\t\tcurrentItem.element.classList.remove(\"active\");\n\t\t\t}\n\n\t\t\tif (currentItem && currentItem.element) {\n\t\t\t\tcurrentItem.element.classList.remove(\"focused\");\n\t\t\t}\n\n\t\t\tcurrentItem = item;\n\n\t\t\tif (item.element) {\n\t\t\t\titem.element.classList.add(\"focused\");\n\t\t\t\tif (active) {\n\t\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// function chooseItem(){\n\t\t// \thideList();\n\n\t\t// \tif(initialValue !== currentItem.value){\n\t\t// \t\tinitialValue = currentItem.value;\n\t\t// \t\tsuccess(currentItem.value);\n\t\t// \t}else{\n\t\t// \t\tcancel();\n\t\t// \t}\n\t\t// }\n\n\t\tfunction setItem(item) {\n\t\t\tvar index = currentItems.indexOf(item);\n\n\t\t\tif (index == -1) {\n\t\t\t\tcurrentItems.push(item);\n\t\t\t\tsetCurrentItem(item, true);\n\t\t\t}\n\n\t\t\tfillInput();\n\t\t}\n\n\t\tfunction unsetItem(index) {\n\t\t\tvar item = currentItems[index];\n\n\t\t\tif (index > -1) {\n\t\t\t\tcurrentItems.splice(index, 1);\n\t\t\t\tif (item.element) {\n\t\t\t\t\titem.element.classList.remove(\"active\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction toggleItem(item) {\n\t\t\tif (!item) {\n\t\t\t\titem = currentItem;\n\t\t\t}\n\n\t\t\tvar index = currentItems.indexOf(item);\n\n\t\t\tif (index > -1) {\n\t\t\t\tunsetItem(index);\n\t\t\t} else {\n\t\t\t\tif (multiselect !== true && currentItems.length >= multiselect) {\n\t\t\t\t\tunsetItem(0);\n\t\t\t\t}\n\n\t\t\t\tsetItem(item);\n\t\t\t}\n\n\t\t\tfillInput();\n\t\t}\n\n\t\tfunction chooseItem(item) {\n\t\t\thideList();\n\n\t\t\tif (!item) {\n\t\t\t\titem = currentItem;\n\t\t\t}\n\n\t\t\tif (item) {\n\t\t\t\tinput.value = item.label;\n\t\t\t\tsuccess(item.value);\n\t\t\t}\n\n\t\t\tinitialDisplayValue = input.value;\n\t\t}\n\n\t\tfunction chooseItems(silent) {\n\t\t\tif (!silent) {\n\t\t\t\thideList();\n\t\t\t}\n\n\t\t\tvar output = [];\n\n\t\t\tcurrentItems.forEach(function (item) {\n\t\t\t\toutput.push(item.value);\n\t\t\t});\n\n\t\t\tinitialDisplayValue = input.value;\n\n\t\t\tsuccess(output);\n\t\t}\n\n\t\tfunction fillInput() {\n\t\t\tvar output = [];\n\n\t\t\tcurrentItems.forEach(function (item) {\n\t\t\t\toutput.push(item.label);\n\t\t\t});\n\n\t\t\tinput.value = output.join(\", \");\n\n\t\t\tif (self.currentCell === false) {\n\t\t\t\tchooseItems(true);\n\t\t\t}\n\t\t}\n\n\t\tfunction unsetItems() {\n\n\t\t\tvar len = currentItems.length;\n\n\t\t\tfor (var _i9 = 0; _i9 < len; _i9++) {\n\t\t\t\tunsetItem(0);\n\t\t\t}\n\t\t}\n\n\t\tfunction cancelItem() {\n\t\t\thideList();\n\t\t\tcancel();\n\t\t}\n\n\t\tfunction showList() {\n\t\t\tcurrentItems = [];\n\n\t\t\tif (!listEl.parentNode) {\n\t\t\t\tif (editorParams.values === true) {\n\t\t\t\t\tparseItems(getUniqueColumnValues(), initialDisplayValue);\n\t\t\t\t} else if (typeof editorParams.values === \"string\") {\n\t\t\t\t\tparseItems(getUniqueColumnValues(editorParams.values), initialDisplayValue);\n\t\t\t\t} else {\n\t\t\t\t\tparseItems(editorParams.values || [], initialDisplayValue);\n\t\t\t\t}\n\n\t\t\t\tvar offset = Tabulator.prototype.helpers.elOffset(cellEl);\n\n\t\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\n\n\t\t\t\tlistEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n\t\t\t\tlistEl.style.left = offset.left + \"px\";\n\n\t\t\t\tlistEl.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\tblurable = false;\n\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tblurable = true;\n\t\t\t\t\t}, 10);\n\t\t\t\t});\n\n\t\t\t\tdocument.body.appendChild(listEl);\n\t\t\t}\n\t\t}\n\n\t\tfunction hideList() {\n\t\t\tif (listEl.parentNode) {\n\t\t\t\tlistEl.parentNode.removeChild(listEl);\n\t\t\t}\n\n\t\t\tremoveScrollListener();\n\t\t}\n\n\t\tfunction removeScrollListener() {\n\t\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n\t\t}\n\n\t\t//style input\n\t\tinput.setAttribute(\"type\", \"text\");\n\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\t\tinput.style.cursor = \"default\";\n\t\tinput.readOnly = this.currentCell != false;\n\n\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t} else {\n\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinput.value = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : \"\";\n\n\t\t// if(editorParams.values === true){\n\t\t// \tparseItems(getUniqueColumnValues(), initialValue);\n\t\t// }else if(typeof editorParams.values === \"string\"){\n\t\t// \tparseItems(getUniqueColumnValues(editorParams.values), initialValue);\n\t\t// }else{\n\t\t// \tparseItems(editorParams.values || [], initialValue);\n\t\t// }\n\n\t\tinput.addEventListener(\"search\", function (e) {\n\t\t\tif (!input.value) {\n\t\t\t\tunsetItems();\n\t\t\t\tchooseItems();\n\t\t\t}\n\t\t});\n\n\t\t//allow key based navigation\n\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\tvar index;\n\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 38:\n\t\t\t\t\t//up arrow\n\t\t\t\t\tindex = dataItems.indexOf(currentItem);\n\n\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\tsetCurrentItem(dataItems[index - 1], !multiselect);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 40:\n\t\t\t\t\t//down arrow\n\t\t\t\t\tindex = dataItems.indexOf(currentItem);\n\n\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index < dataItems.length - 1) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif (index < dataItems.length - 1) {\n\t\t\t\t\t\t\tif (index == -1) {\n\t\t\t\t\t\t\t\tsetCurrentItem(dataItems[0], !multiselect);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetCurrentItem(dataItems[index + 1], !multiselect);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 37: //left arrow\n\t\t\t\tcase 39:\n\t\t\t\t\t//right arrow\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 13:\n\t\t\t\t\t//enter\n\t\t\t\t\t// chooseItem();\n\n\t\t\t\t\tif (multiselect) {\n\t\t\t\t\t\ttoggleItem();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchooseItem();\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 27:\n\t\t\t\t\t//escape\n\t\t\t\t\tcancelItem();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 9:\n\t\t\t\t\t//tab\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tif (self.currentCell === false) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\tif (blurable) {\n\t\t\t\tif (multiselect) {\n\t\t\t\t\tchooseItems();\n\t\t\t\t} else {\n\t\t\t\t\tcancelItem();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tinput.addEventListener(\"focus\", function (e) {\n\t\t\tif (!blockListShow) {\n\t\t\t\tshowList();\n\t\t\t}\n\t\t});\n\n\t\t//style list element\n\t\tlistEl = document.createElement(\"div\");\n\t\tlistEl.classList.add(\"tabulator-edit-select-list\");\n\n\t\tonRendered(function () {\n\t\t\tinput.style.height = \"100%\";\n\t\t\tinput.focus({ preventScroll: true });\n\t\t});\n\n\t\tsetTimeout(function () {\n\t\t\t_this53.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\n\t\t}, 10);\n\n\t\treturn input;\n\t},\n\n\t//autocomplete\n\tautocomplete: function autocomplete(cell, onRendered, success, cancel, editorParams) {\n\t\tvar _this54 = this;\n\n\t\tvar self = this,\n\t\t    cellEl = cell.getElement(),\n\t\t    initialValue = cell.getValue(),\n\t\t    vertNav = editorParams.verticalNavigation || \"editor\",\n\t\t    initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\",\n\t\t    input = document.createElement(\"input\"),\n\t\t    listEl = document.createElement(\"div\"),\n\t\t    allItems = [],\n\t\t    displayItems = [],\n\t\t    values = [],\n\t\t    currentItem = false,\n\t\t    blurable = true,\n\t\t    uniqueColumnValues = false;\n\n\t\t//style input\n\t\tinput.setAttribute(\"type\", \"search\");\n\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\n\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t} else {\n\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//style list element\n\t\tlistEl.classList.add(\"tabulator-edit-select-list\");\n\n\t\tlistEl.addEventListener(\"mousedown\", function (e) {\n\t\t\tblurable = false;\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tblurable = true;\n\t\t\t}, 10);\n\t\t});\n\n\t\tfunction genUniqueColumnValues() {\n\t\t\tif (editorParams.values === true) {\n\t\t\t\tuniqueColumnValues = getUniqueColumnValues();\n\t\t\t} else if (typeof editorParams.values === \"string\") {\n\t\t\t\tuniqueColumnValues = getUniqueColumnValues(editorParams.values);\n\t\t\t}\n\t\t}\n\n\t\tfunction getUniqueColumnValues(field) {\n\t\t\tvar output = {},\n\t\t\t    data = self.table.getData(),\n\t\t\t    column;\n\n\t\t\tif (field) {\n\t\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\n\t\t\t} else {\n\t\t\t\tcolumn = cell.getColumn()._getSelf();\n\t\t\t}\n\n\t\t\tif (column) {\n\t\t\t\tdata.forEach(function (row) {\n\t\t\t\t\tvar val = column.getFieldValue(row);\n\n\t\t\t\t\tif (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n\t\t\t\t\t\toutput[val] = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (editorParams.sortValuesList) {\n\t\t\t\t\tif (editorParams.sortValuesList == \"asc\") {\n\t\t\t\t\t\toutput = Object.keys(output).sort();\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput = Object.keys(output).sort().reverse();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\toutput = Object.keys(output);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"unable to find matching column to create autocomplete lookup list:\", field);\n\t\t\t}\n\n\t\t\treturn output;\n\t\t}\n\n\t\tfunction filterList(term, intialLoad) {\n\t\t\tvar matches = [],\n\t\t\t    values,\n\t\t\t    items,\n\t\t\t    searchEl;\n\n\t\t\t//lookup base values list\n\t\t\tif (uniqueColumnValues) {\n\t\t\t\tvalues = uniqueColumnValues;\n\t\t\t} else {\n\t\t\t\tvalues = editorParams.values || [];\n\t\t\t}\n\n\t\t\tif (editorParams.searchFunc) {\n\t\t\t\tmatches = editorParams.searchFunc(term, values);\n\n\t\t\t\tif (matches instanceof Promise) {\n\n\t\t\t\t\taddNotice(typeof editorParams.searchingPlaceholder !== \"undefined\" ? editorParams.searchingPlaceholder : \"Searching...\");\n\n\t\t\t\t\tmatches.then(function (result) {\n\t\t\t\t\t\tfillListIfNotEmpty(parseItems(result), intialLoad);\n\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\tconsole.err(\"error in autocomplete search promise:\", err);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tfillListIfNotEmpty(parseItems(matches), intialLoad);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titems = parseItems(values);\n\n\t\t\t\tif (term === \"\") {\n\t\t\t\t\tif (editorParams.showListOnEmpty) {\n\t\t\t\t\t\tmatches = items;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\titems.forEach(function (item) {\n\t\t\t\t\t\tif (item.value !== null || typeof item.value !== \"undefined\") {\n\t\t\t\t\t\t\tif (String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1) {\n\t\t\t\t\t\t\t\tmatches.push(item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfillListIfNotEmpty(matches, intialLoad);\n\t\t\t}\n\t\t}\n\n\t\tfunction addNotice(notice) {\n\t\t\tvar searchEl = document.createElement(\"div\");\n\n\t\t\tclearList();\n\n\t\t\tif (notice !== false) {\n\t\t\t\tsearchEl.classList.add(\"tabulator-edit-select-list-notice\");\n\t\t\t\tsearchEl.tabIndex = 0;\n\n\t\t\t\tif (notice instanceof Node) {\n\t\t\t\t\tsearchEl.appendChild(notice);\n\t\t\t\t} else {\n\t\t\t\t\tsearchEl.innerHTML = notice;\n\t\t\t\t}\n\n\t\t\t\tlistEl.appendChild(searchEl);\n\t\t\t}\n\t\t}\n\n\t\tfunction parseItems(inputValues) {\n\t\t\tvar itemList = [];\n\n\t\t\tif (Array.isArray(inputValues)) {\n\t\t\t\tinputValues.forEach(function (value) {\n\n\t\t\t\t\tvar item = {};\n\n\t\t\t\t\tif ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\") {\n\t\t\t\t\t\titem.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value.value, value.label) : value.label;\n\t\t\t\t\t\titem.value = value.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value;\n\t\t\t\t\t\titem.value = value;\n\t\t\t\t\t}\n\n\t\t\t\t\titemList.push(item);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfor (var key in inputValues) {\n\t\t\t\t\tvar item = {\n\t\t\t\t\t\ttitle: editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\n\t\t\t\t\t\tvalue: key\n\t\t\t\t\t};\n\n\t\t\t\t\titemList.push(item);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn itemList;\n\t\t}\n\n\t\tfunction clearList() {\n\t\t\twhile (listEl.firstChild) {\n\t\t\t\tlistEl.removeChild(listEl.firstChild);\n\t\t\t}\n\t\t}\n\n\t\tfunction fillListIfNotEmpty(items, intialLoad) {\n\t\t\tif (items.length) {\n\t\t\t\tfillList(items, intialLoad);\n\t\t\t} else {\n\t\t\t\tif (editorParams.emptyPlaceholder) {\n\t\t\t\t\taddNotice(editorParams.emptyPlaceholder);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction fillList(items, intialLoad) {\n\t\t\tvar current = false;\n\n\t\t\tclearList();\n\n\t\t\tdisplayItems = items;\n\n\t\t\tdisplayItems.forEach(function (item) {\n\t\t\t\tvar el = item.element;\n\n\t\t\t\tif (!el) {\n\t\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\n\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\tel.innerHTML = item.title;\n\n\t\t\t\t\tel.addEventListener(\"click\", function (e) {\n\t\t\t\t\t\tsetCurrentItem(item);\n\t\t\t\t\t\tchooseItem();\n\t\t\t\t\t});\n\n\t\t\t\t\tel.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\t\tblurable = false;\n\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tblurable = true;\n\t\t\t\t\t\t}, 10);\n\t\t\t\t\t});\n\n\t\t\t\t\titem.element = el;\n\n\t\t\t\t\tif (intialLoad && item.value == initialValue) {\n\t\t\t\t\t\tinput.value = item.title;\n\t\t\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t\t\t\tcurrent = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (item === currentItem) {\n\t\t\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t\t\t\tcurrent = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlistEl.appendChild(el);\n\t\t\t});\n\n\t\t\tif (!current) {\n\t\t\t\tsetCurrentItem(false);\n\t\t\t}\n\t\t}\n\n\t\tfunction chooseItem() {\n\t\t\thideList();\n\n\t\t\tif (currentItem) {\n\t\t\t\tif (initialValue !== currentItem.value) {\n\t\t\t\t\tinitialValue = currentItem.value;\n\t\t\t\t\tinput.value = currentItem.title;\n\t\t\t\t\tsuccess(currentItem.value);\n\t\t\t\t} else {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (editorParams.freetext) {\n\t\t\t\t\tinitialValue = input.value;\n\t\t\t\t\tsuccess(input.value);\n\t\t\t\t} else {\n\t\t\t\t\tif (editorParams.allowEmpty && input.value === \"\") {\n\t\t\t\t\t\tinitialValue = input.value;\n\t\t\t\t\t\tsuccess(input.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction showList() {\n\t\t\tif (!listEl.parentNode) {\n\t\t\t\twhile (listEl.firstChild) {\n\t\t\t\t\tlistEl.removeChild(listEl.firstChild);\n\t\t\t\t}var offset = Tabulator.prototype.helpers.elOffset(cellEl);\n\n\t\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\n\n\t\t\t\tlistEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n\t\t\t\tlistEl.style.left = offset.left + \"px\";\n\t\t\t\tdocument.body.appendChild(listEl);\n\t\t\t}\n\t\t}\n\n\t\tfunction setCurrentItem(item, showInputValue) {\n\t\t\tif (currentItem && currentItem.element) {\n\t\t\t\tcurrentItem.element.classList.remove(\"active\");\n\t\t\t}\n\n\t\t\tcurrentItem = item;\n\n\t\t\tif (item && item.element) {\n\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t}\n\t\t}\n\n\t\tfunction hideList() {\n\t\t\tif (listEl.parentNode) {\n\t\t\t\tlistEl.parentNode.removeChild(listEl);\n\t\t\t}\n\n\t\t\tremoveScrollListener();\n\t\t}\n\n\t\tfunction cancelItem() {\n\t\t\thideList();\n\t\t\tcancel();\n\t\t}\n\n\t\tfunction removeScrollListener() {\n\t\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n\t\t}\n\n\t\t//allow key based navigation\n\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\tvar index;\n\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 38:\n\t\t\t\t\t//up arrow\n\t\t\t\t\tindex = displayItems.indexOf(currentItem);\n\n\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\tsetCurrentItem(displayItems[index - 1]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetCurrentItem(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 40:\n\t\t\t\t\t//down arrow\n\n\t\t\t\t\tindex = displayItems.indexOf(currentItem);\n\n\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index < displayItems.length - 1) {\n\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif (index < displayItems.length - 1) {\n\t\t\t\t\t\t\tif (index == -1) {\n\t\t\t\t\t\t\t\tsetCurrentItem(displayItems[0]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetCurrentItem(displayItems[index + 1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 37: //left arrow\n\t\t\t\tcase 39:\n\t\t\t\t\t//right arrow\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t// e.preventDefault();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 13:\n\t\t\t\t\t//enter\n\t\t\t\t\tchooseItem();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 27:\n\t\t\t\t\t//escape\n\t\t\t\t\tcancelItem();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 36: //home\n\t\t\t\tcase 35:\n\t\t\t\t\t//end\n\t\t\t\t\t//prevent table navigation while using input element\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tinput.addEventListener(\"keyup\", function (e) {\n\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 38: //up arrow\n\t\t\t\tcase 37: //left arrow\n\t\t\t\tcase 39: //up arrow\n\t\t\t\tcase 40: //right arrow\n\t\t\t\tcase 13: //enter\n\t\t\t\tcase 27:\n\t\t\t\t\t//escape\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tfilterList(input.value);\n\t\t\t}\n\t\t});\n\n\t\tinput.addEventListener(\"search\", function (e) {\n\t\t\tfilterList(input.value);\n\t\t});\n\n\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\tif (blurable) {\n\t\t\t\tchooseItem();\n\t\t\t}\n\t\t});\n\n\t\tinput.addEventListener(\"focus\", function (e) {\n\t\t\tvar value = initialDisplayValue;\n\t\t\tgenUniqueColumnValues();\n\t\t\tshowList();\n\t\t\tinput.value = value;\n\t\t\tfilterList(value, true);\n\t\t});\n\n\t\tonRendered(function () {\n\t\t\tinput.style.height = \"100%\";\n\t\t\tinput.focus({ preventScroll: true });\n\t\t});\n\n\t\tif (editorParams.mask) {\n\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t}\n\n\t\tsetTimeout(function () {\n\t\t\t_this54.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\n\t\t}, 10);\n\n\t\tgenUniqueColumnValues();\n\t\tinput.value = initialDisplayValue;\n\t\tfilterList(initialDisplayValue, true);\n\n\t\treturn input;\n\t},\n\n\t//star rating\n\tstar: function star(cell, onRendered, success, cancel, editorParams) {\n\t\tvar self = this,\n\t\t    element = cell.getElement(),\n\t\t    value = cell.getValue(),\n\t\t    maxStars = element.getElementsByTagName(\"svg\").length || 5,\n\t\t    size = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n\t\t    stars = [],\n\t\t    starsHolder = document.createElement(\"div\"),\n\t\t    star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n\t\t//change star type\n\t\tfunction starChange(val) {\n\t\t\tstars.forEach(function (star, i) {\n\t\t\t\tif (i < val) {\n\t\t\t\t\tif (self.table.browser == \"ie\") {\n\t\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n\t\t\t\t\t}\n\n\t\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t\t} else {\n\t\t\t\t\tif (self.table.browser == \"ie\") {\n\t\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n\t\t\t\t\t}\n\n\t\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t//build stars\n\t\tfunction buildStar(i) {\n\n\t\t\tvar starHolder = document.createElement(\"span\");\n\t\t\tvar nextStar = star.cloneNode(true);\n\n\t\t\tstars.push(nextStar);\n\n\t\t\tstarHolder.addEventListener(\"mouseenter\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tstarChange(i);\n\t\t\t});\n\n\t\t\tstarHolder.addEventListener(\"mousemove\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t});\n\n\t\t\tstarHolder.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tsuccess(i);\n\t\t\t\telement.blur();\n\t\t\t});\n\n\t\t\tstarHolder.appendChild(nextStar);\n\t\t\tstarsHolder.appendChild(starHolder);\n\t\t}\n\n\t\t//handle keyboard navigation value change\n\t\tfunction changeValue(val) {\n\t\t\tvalue = val;\n\t\t\tstarChange(val);\n\t\t}\n\n\t\t//style cell\n\t\telement.style.whiteSpace = \"nowrap\";\n\t\telement.style.overflow = \"hidden\";\n\t\telement.style.textOverflow = \"ellipsis\";\n\n\t\t//style holding element\n\t\tstarsHolder.style.verticalAlign = \"middle\";\n\t\tstarsHolder.style.display = \"inline-block\";\n\t\tstarsHolder.style.padding = \"4px\";\n\n\t\t//style star\n\t\tstar.setAttribute(\"width\", size);\n\t\tstar.setAttribute(\"height\", size);\n\t\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\t\tstar.setAttribute(\"xml:space\", \"preserve\");\n\t\tstar.style.padding = \"0 1px\";\n\n\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t} else {\n\t\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//create correct number of stars\n\t\tfor (var i = 1; i <= maxStars; i++) {\n\t\t\tbuildStar(i);\n\t\t}\n\n\t\t//ensure value does not exceed number of stars\n\t\tvalue = Math.min(parseInt(value), maxStars);\n\n\t\t// set initial styling of stars\n\t\tstarChange(value);\n\n\t\tstarsHolder.addEventListener(\"mousemove\", function (e) {\n\t\t\tstarChange(0);\n\t\t});\n\n\t\tstarsHolder.addEventListener(\"click\", function (e) {\n\t\t\tsuccess(0);\n\t\t});\n\n\t\telement.addEventListener(\"blur\", function (e) {\n\t\t\tcancel();\n\t\t});\n\n\t\t//allow key based navigation\n\t\telement.addEventListener(\"keydown\", function (e) {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 39:\n\t\t\t\t\t//right arrow\n\t\t\t\t\tchangeValue(value + 1);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 37:\n\t\t\t\t\t//left arrow\n\t\t\t\t\tchangeValue(value - 1);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 13:\n\t\t\t\t\t//enter\n\t\t\t\t\tsuccess(value);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 27:\n\t\t\t\t\t//escape\n\t\t\t\t\tcancel();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\treturn starsHolder;\n\t},\n\n\t//draggable progress bar\n\tprogress: function progress(cell, onRendered, success, cancel, editorParams) {\n\t\tvar element = cell.getElement(),\n\t\t    max = typeof editorParams.max === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"max\") || 100 : editorParams.max,\n\t\t    min = typeof editorParams.min === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"min\") || 0 : editorParams.min,\n\t\t    percent = (max - min) / 100,\n\t\t    value = cell.getValue() || 0,\n\t\t    handle = document.createElement(\"div\"),\n\t\t    bar = document.createElement(\"div\"),\n\t\t    mouseDrag,\n\t\t    mouseDragWidth;\n\n\t\t//set new value\n\t\tfunction updateValue() {\n\t\t\tvar calcVal = percent * Math.round(bar.offsetWidth / (element.clientWidth / 100)) + min;\n\t\t\tsuccess(calcVal);\n\t\t\telement.setAttribute(\"aria-valuenow\", calcVal);\n\t\t\telement.setAttribute(\"aria-label\", value);\n\t\t}\n\n\t\t//style handle\n\t\thandle.style.position = \"absolute\";\n\t\thandle.style.right = \"0\";\n\t\thandle.style.top = \"0\";\n\t\thandle.style.bottom = \"0\";\n\t\thandle.style.width = \"5px\";\n\t\thandle.classList.add(\"tabulator-progress-handle\");\n\n\t\t//style bar\n\t\tbar.style.display = \"inline-block\";\n\t\tbar.style.position = \"relative\";\n\t\t// bar.style.top = \"8px\";\n\t\t// bar.style.bottom = \"8px\";\n\t\t// bar.style.left = \"4px\";\n\t\t// bar.style.marginRight = \"4px\";\n\t\tbar.style.height = \"100%\";\n\t\tbar.style.backgroundColor = \"#488CE9\";\n\t\tbar.style.maxWidth = \"100%\";\n\t\tbar.style.minWidth = \"0%\";\n\n\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t} else {\n\t\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//style cell\n\t\telement.style.padding = \"4px 4px\";\n\n\t\t//make sure value is in range\n\t\tvalue = Math.min(parseFloat(value), max);\n\t\tvalue = Math.max(parseFloat(value), min);\n\n\t\t//workout percentage\n\t\tvalue = Math.round((value - min) / percent);\n\t\t// bar.style.right = value + \"%\";\n\t\tbar.style.width = value + \"%\";\n\n\t\telement.setAttribute(\"aria-valuemin\", min);\n\t\telement.setAttribute(\"aria-valuemax\", max);\n\n\t\tbar.appendChild(handle);\n\n\t\thandle.addEventListener(\"mousedown\", function (e) {\n\t\t\tmouseDrag = e.screenX;\n\t\t\tmouseDragWidth = bar.offsetWidth;\n\t\t});\n\n\t\thandle.addEventListener(\"mouseover\", function () {\n\t\t\thandle.style.cursor = \"ew-resize\";\n\t\t});\n\n\t\telement.addEventListener(\"mousemove\", function (e) {\n\t\t\tif (mouseDrag) {\n\t\t\t\tbar.style.width = mouseDragWidth + e.screenX - mouseDrag + \"px\";\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"mouseup\", function (e) {\n\t\t\tif (mouseDrag) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.stopImmediatePropagation();\n\n\t\t\t\tmouseDrag = false;\n\t\t\t\tmouseDragWidth = false;\n\n\t\t\t\tupdateValue();\n\t\t\t}\n\t\t});\n\n\t\t//allow key based navigation\n\t\telement.addEventListener(\"keydown\", function (e) {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 39:\n\t\t\t\t\t//right arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tbar.style.width = bar.clientWidth + element.clientWidth / 100 + \"px\";\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 37:\n\t\t\t\t\t//left arrow\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tbar.style.width = bar.clientWidth - element.clientWidth / 100 + \"px\";\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 9: //tab\n\t\t\t\tcase 13:\n\t\t\t\t\t//enter\n\t\t\t\t\tupdateValue();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 27:\n\t\t\t\t\t//escape\n\t\t\t\t\tcancel();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"blur\", function () {\n\t\t\tcancel();\n\t\t});\n\n\t\treturn bar;\n\t},\n\n\t//checkbox\n\ttickCross: function tickCross(cell, onRendered, success, cancel, editorParams) {\n\t\tvar value = cell.getValue(),\n\t\t    input = document.createElement(\"input\"),\n\t\t    tristate = editorParams.tristate,\n\t\t    indetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n\t\t    indetermState = false;\n\n\t\tinput.setAttribute(\"type\", \"checkbox\");\n\t\tinput.style.marginTop = \"5px\";\n\t\tinput.style.boxSizing = \"border-box\";\n\n\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t} else {\n\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinput.value = value;\n\n\t\tif (tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")) {\n\t\t\tindetermState = true;\n\t\t\tinput.indeterminate = true;\n\t\t}\n\n\t\tif (this.table.browser != \"firefox\") {\n\t\t\t//prevent blur issue on mac firefox\n\t\t\tonRendered(function () {\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t});\n\t\t}\n\n\t\tinput.checked = value === true || value === \"true\" || value === \"True\" || value === 1;\n\n\t\tonRendered(function () {\n\t\t\tinput.focus();\n\t\t});\n\n\t\tfunction setValue(blur) {\n\t\t\tif (tristate) {\n\t\t\t\tif (!blur) {\n\t\t\t\t\tif (input.checked && !indetermState) {\n\t\t\t\t\t\tinput.checked = false;\n\t\t\t\t\t\tinput.indeterminate = true;\n\t\t\t\t\t\tindetermState = true;\n\t\t\t\t\t\treturn indetermValue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tindetermState = false;\n\t\t\t\t\t\treturn input.checked;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (indetermState) {\n\t\t\t\t\t\treturn indetermValue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn input.checked;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn input.checked;\n\t\t\t}\n\t\t}\n\n\t\t//submit new value on blur\n\t\tinput.addEventListener(\"change\", function (e) {\n\t\t\tsuccess(setValue());\n\t\t});\n\n\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\tsuccess(setValue(true));\n\t\t});\n\n\t\t//submit new value on enter\n\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\tif (e.keyCode == 13) {\n\t\t\t\tsuccess(setValue());\n\t\t\t}\n\t\t\tif (e.keyCode == 27) {\n\t\t\t\tcancel();\n\t\t\t}\n\t\t});\n\n\t\treturn input;\n\t}\n};\n\nTabulator.prototype.registerModule(\"edit\", Edit);\n\nvar ExportRow = function ExportRow(type, columns, component, indent) {\n\tthis.type = type;\n\tthis.columns = columns;\n\tthis.component = component || false;\n\tthis.indent = indent || 0;\n};\n\nvar ExportColumn = function ExportColumn(value, component, width, height, depth) {\n\tthis.value = value;\n\tthis.component = component || false;\n\tthis.width = width;\n\tthis.height = height;\n\tthis.depth = depth;\n};\n\nvar Export = function Export(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.config = {};\n\tthis.cloneTableStyle = true;\n\tthis.colVisProp = \"\";\n};\n\nExport.prototype.generateExportList = function (config, style, range, colVisProp) {\n\tthis.cloneTableStyle = style;\n\tthis.config = config || {};\n\tthis.colVisProp = colVisProp;\n\n\tvar headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\n\tvar body = this.bodyToExportRows(this.rowLookup(range));\n\n\treturn headers.concat(body);\n};\n\nExport.prototype.genereateTable = function (config, style, range, colVisProp) {\n\tvar list = this.generateExportList(config, style, range, colVisProp);\n\n\treturn this.genereateTableElement(list);\n};\n\nExport.prototype.rowLookup = function (range) {\n\tvar _this55 = this;\n\n\tvar rows = [];\n\n\tif (typeof range == \"function\") {\n\t\trange.call(this.table).forEach(function (row) {\n\t\t\trow = _this55.table.rowManager.findRow(row);\n\n\t\t\tif (row) {\n\t\t\t\trows.push(row);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tswitch (range) {\n\t\t\tcase true:\n\t\t\tcase \"visible\":\n\t\t\t\trows = this.table.rowManager.getVisibleRows(true);\n\t\t\t\tbreak;\n\n\t\t\tcase \"all\":\n\t\t\t\trows = this.table.rowManager.rows;\n\t\t\t\tbreak;\n\n\t\t\tcase \"selected\":\n\t\t\t\trows = this.table.modules.selectRow.selectedRows;\n\t\t\t\tbreak;\n\n\t\t\tcase \"active\":\n\t\t\tdefault:\n\t\t\t\tif (this.table.options.pagination) {\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\n\t\t\t\t} else {\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\t}\n\t\t}\n\t}\n\n\treturn Object.assign([], rows);\n};\n\nExport.prototype.generateColumnGroupHeaders = function () {\n\tvar _this56 = this;\n\n\tvar output = [];\n\n\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n\n\tcolumns.forEach(function (column) {\n\t\tvar colData = _this56.processColumnGroup(column);\n\n\t\tif (colData) {\n\t\t\toutput.push(colData);\n\t\t}\n\t});\n\n\treturn output;\n};\n\nExport.prototype.processColumnGroup = function (column) {\n\tvar _this57 = this;\n\n\tvar subGroups = column.columns,\n\t    maxDepth = 0,\n\t    title = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\n\n\tvar groupData = {\n\t\ttitle: title,\n\t\tcolumn: column,\n\t\tdepth: 1\n\t};\n\n\tif (subGroups.length) {\n\t\tgroupData.subGroups = [];\n\t\tgroupData.width = 0;\n\n\t\tsubGroups.forEach(function (subGroup) {\n\t\t\tvar subGroupData = _this57.processColumnGroup(subGroup);\n\n\t\t\tif (subGroupData) {\n\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\tgroupData.subGroups.push(subGroupData);\n\n\t\t\t\tif (subGroupData.depth > maxDepth) {\n\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tgroupData.depth += maxDepth;\n\n\t\tif (!groupData.width) {\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\tif (this.columnVisCheck(column)) {\n\t\t\tgroupData.width = 1;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn groupData;\n};\n\nExport.prototype.columnVisCheck = function (column) {\n\treturn column.definition[this.colVisProp] !== false && (column.visible || !column.visible && column.definition[this.colVisProp]);\n};\n\nExport.prototype.headersToExportRows = function (columns) {\n\tvar headers = [],\n\t    headerDepth = 0,\n\t    exportRows = [];\n\n\tfunction parseColumnGroup(column, level) {\n\n\t\tvar depth = headerDepth - level;\n\n\t\tif (typeof headers[level] === \"undefined\") {\n\t\t\theaders[level] = [];\n\t\t}\n\n\t\tcolumn.height = column.subGroups ? 1 : depth - column.depth + 1;\n\n\t\theaders[level].push(column);\n\n\t\tif (column.height > 1) {\n\t\t\tfor (var _i10 = 1; _i10 < column.height; _i10++) {\n\n\t\t\t\tif (typeof headers[level + _i10] === \"undefined\") {\n\t\t\t\t\theaders[level + _i10] = [];\n\t\t\t\t}\n\n\t\t\t\theaders[level + _i10].push(false);\n\t\t\t}\n\t\t}\n\n\t\tif (column.width > 1) {\n\t\t\tfor (var _i11 = 1; _i11 < column.width; _i11++) {\n\t\t\t\theaders[level].push(false);\n\t\t\t}\n\t\t}\n\n\t\tif (column.subGroups) {\n\t\t\tcolumn.subGroups.forEach(function (subGroup) {\n\t\t\t\tparseColumnGroup(subGroup, level + 1);\n\t\t\t});\n\t\t}\n\t}\n\n\t//calculate maximum header debth\n\tcolumns.forEach(function (column) {\n\t\tif (column.depth > headerDepth) {\n\t\t\theaderDepth = column.depth;\n\t\t}\n\t});\n\n\tcolumns.forEach(function (column) {\n\t\tparseColumnGroup(column, 0);\n\t});\n\n\theaders.forEach(function (header) {\n\t\tvar columns = [];\n\n\t\theader.forEach(function (col) {\n\t\t\tif (col) {\n\t\t\t\tcolumns.push(new ExportColumn(col.title, col.column.getComponent(), col.width, col.height, col.depth));\n\t\t\t} else {\n\t\t\t\tcolumns.push(null);\n\t\t\t}\n\t\t});\n\n\t\texportRows.push(new ExportRow(\"header\", columns));\n\t});\n\n\treturn exportRows;\n};\n\nExport.prototype.bodyToExportRows = function (rows) {\n\tvar _this58 = this;\n\n\tvar columns = [];\n\tvar exportRows = [];\n\n\tthis.table.columnManager.columnsByIndex.forEach(function (column) {\n\t\tif (_this58.columnVisCheck(column)) {\n\t\t\tcolumns.push(column.getComponent());\n\t\t}\n\t});\n\n\tif (this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")) {\n\t\tif (this.table.modules.columnCalcs.topInitialized) {\n\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\n\t\t}\n\n\t\tif (this.table.modules.columnCalcs.botInitialized) {\n\t\t\trows.push(this.table.modules.columnCalcs.botRow);\n\t\t}\n\t}\n\n\trows = rows.filter(function (row) {\n\t\tswitch (row.type) {\n\t\t\tcase \"group\":\n\t\t\t\treturn _this58.config.rowGroups !== false;\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\treturn _this58.config.columnCalcs !== false;\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\treturn !(_this58.table.options.dataTree && _this58.config.dataTree === false && row.modules.dataTree.parent);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn true;\n\t});\n\n\trows.forEach(function (row, i) {\n\t\tvar rowData = row.getData(_this58.colVisProp);\n\t\tvar exportCols = [];\n\t\tvar indent = 0;\n\n\t\tswitch (row.type) {\n\t\t\tcase \"group\":\n\t\t\t\tindent = row.level;\n\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\tcase \"row\":\n\t\t\t\tcolumns.forEach(function (col) {\n\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n\t\t\t\t});\n\n\t\t\t\tif (_this58.table.options.dataTree && _this58.config.dataTree !== false) {\n\t\t\t\t\tindent = row.modules.dataTree.index;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n\t});\n\n\treturn exportRows;\n};\n\nExport.prototype.genereateTableElement = function (list) {\n\tvar _this59 = this;\n\n\tvar table = document.createElement(\"table\"),\n\t    headerEl = document.createElement(\"thead\"),\n\t    bodyEl = document.createElement(\"tbody\"),\n\t    styles = this.lookupTableStyles(),\n\t    rowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\n\t    setup = {};\n\n\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\n\tif (this.table.options.dataTree && this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")) {\n\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\n\t}\n\n\t//assign group header formatter\n\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n\n\tif (setup.groupHeader && !Array.isArray(setup.groupHeader)) {\n\t\tsetup.groupHeader = [setup.groupHeader];\n\t}\n\n\ttable.classList.add(\"tabulator-print-table\");\n\n\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n\tif (list.length > 1000) {\n\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n\t}\n\n\tlist.forEach(function (row, i) {\n\t\tswitch (row.type) {\n\t\t\tcase \"header\":\n\t\t\t\theaderEl.appendChild(_this59.genereateHeaderElement(row, setup, styles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tbodyEl.appendChild(_this59.genereateGroupElement(row, setup, styles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tbodyEl.appendChild(_this59.genereateCalcElement(row, setup, styles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\tvar rowEl = _this59.genereateRowElement(row, setup, styles);\n\t\t\t\t_this59.mapElementStyles(i % 2 && styles.evenRow ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\t\tbodyEl.appendChild(rowEl);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif (headerEl.innerHTML) {\n\t\ttable.appendChild(headerEl);\n\t}\n\n\ttable.appendChild(bodyEl);\n\n\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n\treturn table;\n};\n\nExport.prototype.lookupTableStyles = function () {\n\tvar styles = {};\n\n\t//lookup row styles\n\tif (this.cloneTableStyle && window.getComputedStyle) {\n\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\n\t\tif (styles.firstRow) {\n\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n\t\t\tstyles.firstCell = styles.styleCells[0];\n\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n\t\t}\n\t}\n\n\treturn styles;\n};\n\nExport.prototype.genereateHeaderElement = function (row, setup, styles) {\n\tvar _this60 = this;\n\n\tvar rowEl = document.createElement(\"tr\");\n\n\trow.columns.forEach(function (column) {\n\t\tif (column) {\n\t\t\tvar cellEl = document.createElement(\"th\");\n\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n\n\t\t\tcellEl.colSpan = column.width;\n\t\t\tcellEl.rowSpan = column.height;\n\n\t\t\tcellEl.innerHTML = column.value;\n\n\t\t\tif (_this60.cloneTableStyle) {\n\t\t\t\tcellEl.style.boxSizing = \"border-box\";\n\t\t\t}\n\n\t\t\tclassNames.forEach(function (className) {\n\t\t\t\tcellEl.classList.add(className);\n\t\t\t});\n\n\t\t\t_this60.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\t_this60.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\n\t\t\tif (column.component._column.visible) {\n\t\t\t\t_this60.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n\t\t\t} else {\n\t\t\t\tif (column.component._column.definition.width) {\n\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (column.component._column.parent) {\n\t\t\t\t_this60.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n\t\t\t}\n\n\t\t\trowEl.appendChild(cellEl);\n\t\t}\n\t});\n\n\treturn rowEl;\n};\n\nExport.prototype.genereateGroupElement = function (row, setup, styles) {\n\n\tvar rowEl = document.createElement(\"tr\"),\n\t    cellEl = document.createElement(\"td\"),\n\t    group = row.columns[0];\n\n\trowEl.classList.add(\"tabulator-print-table-row\");\n\n\tif (setup.groupHeader && setup.groupHeader[row.indent]) {\n\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t} else {\n\t\tif (setup.groupHeader === false) {\n\t\t\tgroup.value = group.value;\n\t\t} else {\n\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t}\n\t}\n\n\tcellEl.colSpan = group.width;\n\tcellEl.innerHTML = group.value;\n\n\trowEl.classList.add(\"tabulator-print-table-group\");\n\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\n\tif (group.component.isVisible()) {\n\t\trowEl.classList.add(\"tabulator-group-visible\");\n\t}\n\n\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\n\trowEl.appendChild(cellEl);\n\n\treturn rowEl;\n};\n\nExport.prototype.genereateCalcElement = function (row, setup, styles) {\n\tvar rowEl = this.genereateRowElement(row, setup, styles);\n\n\trowEl.classList.add(\"tabulator-print-table-calcs\");\n\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\n\treturn rowEl;\n};\n\nExport.prototype.genereateRowElement = function (row, setup, styles) {\n\tvar _this61 = this;\n\n\tvar rowEl = document.createElement(\"tr\");\n\n\trowEl.classList.add(\"tabulator-print-table-row\");\n\n\trow.columns.forEach(function (col) {\n\n\t\tif (col) {\n\t\t\tvar cellEl = document.createElement(\"td\"),\n\t\t\t    column = col.component._column,\n\t\t\t    value = col.value;\n\n\t\t\tvar cellWrapper = {\n\t\t\t\tmodules: {},\n\t\t\t\tgetValue: function getValue() {\n\t\t\t\t\treturn value;\n\t\t\t\t},\n\t\t\t\tgetField: function getField() {\n\t\t\t\t\treturn column.definition.field;\n\t\t\t\t},\n\t\t\t\tgetElement: function getElement() {\n\t\t\t\t\treturn cellEl;\n\t\t\t\t},\n\t\t\t\tgetColumn: function getColumn() {\n\t\t\t\t\treturn column.getComponent();\n\t\t\t\t},\n\t\t\t\tgetData: function getData() {\n\t\t\t\t\treturn row.component.getData();\n\t\t\t\t},\n\t\t\t\tgetRow: function getRow() {\n\t\t\t\t\treturn row.component;\n\t\t\t\t},\n\t\t\t\tgetComponent: function getComponent() {\n\t\t\t\t\treturn cellWrapper;\n\t\t\t\t},\n\t\t\t\tcolumn: column\n\t\t\t};\n\n\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n\n\t\t\tclassNames.forEach(function (className) {\n\t\t\t\tcellEl.classList.add(className);\n\t\t\t});\n\n\t\t\tif (_this61.table.modExists(\"format\") && _this61.config.formatCells !== false) {\n\t\t\t\tvalue = _this61.table.modules.format.formatExportValue(cellWrapper, _this61.colVisProp);\n\t\t\t} else {\n\t\t\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tvalue = JSON.stringify(value);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value instanceof Node) {\n\t\t\t\tcellEl.appendChild(value);\n\t\t\t} else {\n\t\t\t\tcellEl.innerHTML = value;\n\t\t\t}\n\n\t\t\tif (styles.firstCell) {\n\t\t\t\t_this61.mapElementStyles(styles.firstCell, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n\t\t\t\tif (column.definition.align) {\n\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (_this61.table.options.dataTree && _this61.config.dataTree !== false) {\n\t\t\t\tif (setup.treeElementField && setup.treeElementField == column.field || !setup.treeElementField && i == 0) {\n\t\t\t\t\tif (row.component._row.modules.dataTree.controlEl) {\n\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif (row.component._row.modules.dataTree.branchEl) {\n\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trowEl.appendChild(cellEl);\n\n\t\t\tif (cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback) {\n\t\t\t\tcellWrapper.modules.format.renderedCallback();\n\t\t\t}\n\n\t\t\tif (setup.rowFormatter && _this61.config.formatCells !== false) {\n\t\t\t\tsetup.rowFormatter(row.component);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn rowEl;\n};\n\nExport.prototype.genereateHTMLTable = function (list) {\n\tvar holder = document.createElement(\"div\");\n\n\tholder.appendChild(this.genereateTableElement(list));\n\n\treturn holder.innerHTML;\n};\n\nExport.prototype.getHtml = function (visible, style, config, colVisProp) {\n\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n\n\treturn this.genereateHTMLTable(list);\n};\n\nExport.prototype.mapElementStyles = function (from, to, props) {\n\tif (this.cloneTableStyle && from && to) {\n\n\t\tvar lookup = {\n\t\t\t\"background-color\": \"backgroundColor\",\n\t\t\t\"color\": \"fontColor\",\n\t\t\t\"width\": \"width\",\n\t\t\t\"font-weight\": \"fontWeight\",\n\t\t\t\"font-family\": \"fontFamily\",\n\t\t\t\"font-size\": \"fontSize\",\n\t\t\t\"text-align\": \"textAlign\",\n\t\t\t\"border-top\": \"borderTop\",\n\t\t\t\"border-left\": \"borderLeft\",\n\t\t\t\"border-right\": \"borderRight\",\n\t\t\t\"border-bottom\": \"borderBottom\",\n\t\t\t\"padding-top\": \"paddingTop\",\n\t\t\t\"padding-left\": \"paddingLeft\",\n\t\t\t\"padding-right\": \"paddingRight\",\n\t\t\t\"padding-bottom\": \"paddingBottom\"\n\t\t};\n\n\t\tif (window.getComputedStyle) {\n\t\t\tvar fromStyle = window.getComputedStyle(from);\n\n\t\t\tprops.forEach(function (prop) {\n\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n\t\t\t});\n\t\t}\n\t}\n};\n\nTabulator.prototype.registerModule(\"export\", Export);\n\nvar Filter = function Filter(table) {\n\n\tthis.table = table; //hold Tabulator object\n\n\tthis.filterList = []; //hold filter list\n\tthis.headerFilters = {}; //hold column filters\n\tthis.headerFilterColumns = []; //hold columns that use header filters\n\n\tthis.prevHeaderFilterChangeCheck = \"\";\n\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\tthis.changed = false; //has filtering changed since last render\n};\n\n//initialize column header filter\nFilter.prototype.initializeColumn = function (column, value) {\n\tvar self = this,\n\t    field = column.getField(),\n\t    params;\n\n\t//handle successfull value change\n\tfunction success(value) {\n\t\tvar filterType = column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\" || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n\t\t    type = \"\",\n\t\t    filterChangeCheck = \"\",\n\t\t    filterFunc;\n\n\t\tif (typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value) {\n\n\t\t\tcolumn.modules.filter.prevSuccess = value;\n\n\t\t\tif (!column.modules.filter.emptyFunc(value)) {\n\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\tswitch (_typeof(column.definition.headerFilterFunc)) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tif (self.filters[column.definition.headerFilterFunc]) {\n\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\n\t\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\treturn self.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\ttype = filterFunc;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (!filterFunc) {\n\t\t\t\t\tswitch (filterType) {\n\t\t\t\t\t\tcase \"partial\":\n\t\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tif (typeof colVal !== 'undefined' && colVal !== null) {\n\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\ttype = \"like\";\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\ttype = \"=\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tself.headerFilters[field] = { value: value, func: filterFunc, type: type, params: params || {} };\n\t\t\t} else {\n\t\t\t\tdelete self.headerFilters[field];\n\t\t\t}\n\n\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\n\n\t\t\tif (self.prevHeaderFilterChangeCheck !== filterChangeCheck) {\n\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\n\n\t\t\t\tself.changed = true;\n\t\t\t\tself.table.rowManager.filterRefresh();\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tcolumn.modules.filter = {\n\t\tsuccess: success,\n\t\tattrType: false,\n\t\ttagType: false,\n\t\temptyFunc: false\n\t};\n\n\tthis.generateHeaderFilterElement(column);\n};\n\nFilter.prototype.generateHeaderFilterElement = function (column, initialValue, reinitialize) {\n\tvar _this62 = this;\n\n\tvar self = this,\n\t    success = column.modules.filter.success,\n\t    field = column.getField(),\n\t    filterElement,\n\t    editor,\n\t    editorElement,\n\t    cellWrapper,\n\t    typingTimer,\n\t    searchTrigger,\n\t    params;\n\n\t//handle aborted edit\n\tfunction cancel() {}\n\n\tif (column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode) {\n\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n\t}\n\n\tif (field) {\n\n\t\t//set empty value function\n\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function (value) {\n\t\t\treturn !value && value !== \"0\";\n\t\t};\n\n\t\tfilterElement = document.createElement(\"div\");\n\t\tfilterElement.classList.add(\"tabulator-header-filter\");\n\n\t\t//set column editor\n\t\tswitch (_typeof(column.definition.headerFilter)) {\n\t\t\tcase \"string\":\n\t\t\t\tif (self.table.modules.edit.editors[column.definition.headerFilter]) {\n\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n\t\t\t\t\tif ((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function (value) {\n\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\teditor = column.definition.headerFilter;\n\t\t\t\tbreak;\n\n\t\t\tcase \"boolean\":\n\t\t\t\tif (column.modules.edit && column.modules.edit.editor) {\n\t\t\t\t\teditor = column.modules.edit.editor;\n\t\t\t\t} else {\n\t\t\t\t\tif (column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]) {\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\n\n\t\t\t\t\t\tif ((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function (value) {\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (editor) {\n\n\t\t\tcellWrapper = {\n\t\t\t\tgetValue: function getValue() {\n\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\n\t\t\t\t},\n\t\t\t\tgetField: function getField() {\n\t\t\t\t\treturn column.definition.field;\n\t\t\t\t},\n\t\t\t\tgetElement: function getElement() {\n\t\t\t\t\treturn filterElement;\n\t\t\t\t},\n\t\t\t\tgetColumn: function getColumn() {\n\t\t\t\t\treturn column.getComponent();\n\t\t\t\t},\n\t\t\t\tgetRow: function getRow() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tnormalizeHeight: function normalizeHeight() {}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tparams = column.definition.headerFilterParams || {};\n\n\t\t\tparams = typeof params === \"function\" ? params.call(self.table) : params;\n\n\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, function () {}, success, cancel, params);\n\n\t\t\tif (!editorElement) {\n\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!(editorElement instanceof Node)) {\n\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//set Placeholder Text\n\t\t\tif (field) {\n\t\t\t\tself.table.modules.localize.bind(\"headerFilters|columns|\" + column.definition.field, function (value) {\n\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : self.table.modules.localize.getText(\"headerFilters|default\"));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tself.table.modules.localize.bind(\"headerFilters|default\", function (value) {\n\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof self.column.definition.headerFilterPlaceholder !== \"undefined\" && self.column.definition.headerFilterPlaceholder ? self.column.definition.headerFilterPlaceholder : value);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//focus on element on click\n\t\t\teditorElement.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\teditorElement.focus();\n\t\t\t});\n\n\t\t\teditorElement.addEventListener(\"focus\", function (e) {\n\t\t\t\tvar left = _this62.table.columnManager.element.scrollLeft;\n\n\t\t\t\tif (left !== _this62.table.rowManager.element.scrollLeft) {\n\t\t\t\t\t_this62.table.rowManager.scrollHorizontal(left);\n\t\t\t\t\t_this62.table.columnManager.scrollHorizontal(left);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//live update filters as user types\n\t\t\ttypingTimer = false;\n\n\t\t\tsearchTrigger = function searchTrigger(e) {\n\t\t\t\tif (typingTimer) {\n\t\t\t\t\tclearTimeout(typingTimer);\n\t\t\t\t}\n\n\t\t\t\ttypingTimer = setTimeout(function () {\n\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t}, self.table.options.headerFilterLiveFilterDelay);\n\t\t\t};\n\n\t\t\tcolumn.modules.filter.headerElement = editorElement;\n\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\";\n\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n\t\t\tif (column.definition.headerFilterLiveFilter !== false) {\n\n\t\t\t\tif (!(column.definition.headerFilter === 'autocomplete' || column.definition.headerFilter === 'tickCross' || (column.definition.editor === 'autocomplete' || column.definition.editor === 'tickCross') && column.definition.headerFilter === true)) {\n\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\n\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\n\n\t\t\t\t\t//update number filtered columns on change\n\t\t\t\t\tif (column.modules.filter.attrType == \"number\") {\n\t\t\t\t\t\teditorElement.addEventListener(\"change\", function (e) {\n\t\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\n\t\t\t\t\tif (column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\") {\n\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//prevent input and select elements from propegating click to column sorters etc\n\t\t\t\tif (column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\") {\n\t\t\t\t\teditorElement.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfilterElement.appendChild(editorElement);\n\n\t\t\tcolumn.contentElement.appendChild(filterElement);\n\n\t\t\tif (!reinitialize) {\n\t\t\t\tself.headerFilterColumns.push(column);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n\t}\n};\n\n//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\nFilter.prototype.hideHeaderFilterElements = function () {\n\tthis.headerFilterColumns.forEach(function (column) {\n\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\n\t\t}\n\t});\n};\n\n//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\nFilter.prototype.showHeaderFilterElements = function () {\n\tthis.headerFilterColumns.forEach(function (column) {\n\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\tcolumn.modules.filter.headerElement.style.display = '';\n\t\t}\n\t});\n};\n\n//programatically set focus of header filter\nFilter.prototype.setHeaderFilterFocus = function (column) {\n\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\tcolumn.modules.filter.headerElement.focus();\n\t} else {\n\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n\t}\n};\n\n//programmatically get value of header filter\nFilter.prototype.getHeaderFilterValue = function (column) {\n\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\treturn column.modules.filter.headerElement.value;\n\t} else {\n\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t}\n};\n\n//programatically set value of header filter\nFilter.prototype.setHeaderFilterValue = function (column, value) {\n\tif (column) {\n\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\tthis.generateHeaderFilterElement(column, value, true);\n\t\t\tcolumn.modules.filter.success(value);\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n};\n\nFilter.prototype.reloadHeaderFilter = function (column) {\n\tif (column) {\n\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n};\n\n//check if the filters has changed since last use\nFilter.prototype.hasChanged = function () {\n\tvar changed = this.changed;\n\tthis.changed = false;\n\treturn changed;\n};\n\n//set standard filters\nFilter.prototype.setFilter = function (field, type, value, params) {\n\tvar self = this;\n\n\tself.filterList = [];\n\n\tif (!Array.isArray(field)) {\n\t\tfield = [{ field: field, type: type, value: value, params: params }];\n\t}\n\n\tself.addFilter(field);\n};\n\n//add filter to array\nFilter.prototype.addFilter = function (field, type, value, params) {\n\tvar self = this;\n\n\tif (!Array.isArray(field)) {\n\t\tfield = [{ field: field, type: type, value: value, params: params }];\n\t}\n\n\tfield.forEach(function (filter) {\n\n\t\tfilter = self.findFilter(filter);\n\n\t\tif (filter) {\n\t\t\tself.filterList.push(filter);\n\n\t\t\tself.changed = true;\n\t\t}\n\t});\n\n\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n\t\tthis.table.modules.persistence.save(\"filter\");\n\t}\n};\n\nFilter.prototype.findFilter = function (filter) {\n\tvar self = this,\n\t    column;\n\n\tif (Array.isArray(filter)) {\n\t\treturn this.findSubFilters(filter);\n\t}\n\n\tvar filterFunc = false;\n\n\tif (typeof filter.field == \"function\") {\n\t\tfilterFunc = function filterFunc(data) {\n\t\t\treturn filter.field(data, filter.type || {}); // pass params to custom filter function\n\t\t};\n\t} else {\n\n\t\tif (self.filters[filter.type]) {\n\n\t\t\tcolumn = self.table.columnManager.getColumnByField(filter.field);\n\n\t\t\tif (column) {\n\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\treturn self.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\treturn self.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n\t\t\t\t};\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n\t\t}\n\t}\n\n\tfilter.func = filterFunc;\n\n\treturn filter.func ? filter : false;\n};\n\nFilter.prototype.findSubFilters = function (filters) {\n\tvar self = this,\n\t    output = [];\n\n\tfilters.forEach(function (filter) {\n\t\tfilter = self.findFilter(filter);\n\n\t\tif (filter) {\n\t\t\toutput.push(filter);\n\t\t}\n\t});\n\n\treturn output.length ? output : false;\n};\n\n//get all filters\nFilter.prototype.getFilters = function (all, ajax) {\n\tvar output = [];\n\n\tif (all) {\n\t\toutput = this.getHeaderFilters();\n\t}\n\n\tif (ajax) {\n\t\toutput.forEach(function (item) {\n\t\t\tif (typeof item.type == \"function\") {\n\t\t\t\titem.type = \"function\";\n\t\t\t}\n\t\t});\n\t}\n\n\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\n\n\treturn output;\n};\n\n//filter to Object\nFilter.prototype.filtersToArray = function (filterList, ajax) {\n\tvar _this63 = this;\n\n\tvar output = [];\n\n\tfilterList.forEach(function (filter) {\n\t\tvar item;\n\n\t\tif (Array.isArray(filter)) {\n\t\t\toutput.push(_this63.filtersToArray(filter, ajax));\n\t\t} else {\n\t\t\titem = { field: filter.field, type: filter.type, value: filter.value };\n\n\t\t\tif (ajax) {\n\t\t\t\tif (typeof item.type == \"function\") {\n\t\t\t\t\titem.type = \"function\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toutput.push(item);\n\t\t}\n\t});\n\n\treturn output;\n};\n\n//get all filters\nFilter.prototype.getHeaderFilters = function () {\n\tvar self = this,\n\t    output = [];\n\n\tfor (var key in this.headerFilters) {\n\t\toutput.push({ field: key, type: this.headerFilters[key].type, value: this.headerFilters[key].value });\n\t}\n\n\treturn output;\n};\n\n//remove filter from array\nFilter.prototype.removeFilter = function (field, type, value) {\n\tvar self = this;\n\n\tif (!Array.isArray(field)) {\n\t\tfield = [{ field: field, type: type, value: value }];\n\t}\n\n\tfield.forEach(function (filter) {\n\t\tvar index = -1;\n\n\t\tif (_typeof(filter.field) == \"object\") {\n\t\t\tindex = self.filterList.findIndex(function (element) {\n\t\t\t\treturn filter === element;\n\t\t\t});\n\t\t} else {\n\t\t\tindex = self.filterList.findIndex(function (element) {\n\t\t\t\treturn filter.field === element.field && filter.type === element.type && filter.value === element.value;\n\t\t\t});\n\t\t}\n\n\t\tif (index > -1) {\n\t\t\tself.filterList.splice(index, 1);\n\t\t\tself.changed = true;\n\t\t} else {\n\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n\t\t}\n\t});\n\n\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n\t\tthis.table.modules.persistence.save(\"filter\");\n\t}\n};\n\n//clear filters\nFilter.prototype.clearFilter = function (all) {\n\tthis.filterList = [];\n\n\tif (all) {\n\t\tthis.clearHeaderFilter();\n\t}\n\n\tthis.changed = true;\n\n\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n\t\tthis.table.modules.persistence.save(\"filter\");\n\t}\n};\n\n//clear header filters\nFilter.prototype.clearHeaderFilter = function () {\n\tvar self = this;\n\n\tthis.headerFilters = {};\n\tself.prevHeaderFilterChangeCheck = \"{}\";\n\n\tthis.headerFilterColumns.forEach(function (column) {\n\t\tcolumn.modules.filter.value = null;\n\t\tcolumn.modules.filter.prevSuccess = undefined;\n\t\tself.reloadHeaderFilter(column);\n\t});\n\n\tthis.changed = true;\n};\n\n//search data and return matching rows\nFilter.prototype.search = function (searchType, field, type, value) {\n\tvar self = this,\n\t    activeRows = [],\n\t    filterList = [];\n\n\tif (!Array.isArray(field)) {\n\t\tfield = [{ field: field, type: type, value: value }];\n\t}\n\n\tfield.forEach(function (filter) {\n\t\tfilter = self.findFilter(filter);\n\n\t\tif (filter) {\n\t\t\tfilterList.push(filter);\n\t\t}\n\t});\n\n\tthis.table.rowManager.rows.forEach(function (row) {\n\t\tvar match = true;\n\n\t\tfilterList.forEach(function (filter) {\n\t\t\tif (!self.filterRecurse(filter, row.getData())) {\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\t\tif (match) {\n\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n\t\t}\n\t});\n\n\treturn activeRows;\n};\n\n//filter row array\nFilter.prototype.filter = function (rowList, filters) {\n\tvar self = this,\n\t    activeRows = [],\n\t    activeRowComponents = [];\n\n\tif (self.table.options.dataFiltering) {\n\t\tself.table.options.dataFiltering.call(self.table, self.getFilters());\n\t}\n\n\tif (!self.table.options.ajaxFiltering && (self.filterList.length || Object.keys(self.headerFilters).length)) {\n\n\t\trowList.forEach(function (row) {\n\t\t\tif (self.filterRow(row)) {\n\t\t\t\tactiveRows.push(row);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tactiveRows = rowList.slice(0);\n\t}\n\n\tif (self.table.options.dataFiltered) {\n\n\t\tactiveRows.forEach(function (row) {\n\t\t\tactiveRowComponents.push(row.getComponent());\n\t\t});\n\n\t\tself.table.options.dataFiltered.call(self.table, self.getFilters(), activeRowComponents);\n\t}\n\n\treturn activeRows;\n};\n\n//filter individual row\nFilter.prototype.filterRow = function (row, filters) {\n\tvar self = this,\n\t    match = true,\n\t    data = row.getData();\n\n\tself.filterList.forEach(function (filter) {\n\t\tif (!self.filterRecurse(filter, data)) {\n\t\t\tmatch = false;\n\t\t}\n\t});\n\n\tfor (var field in self.headerFilters) {\n\t\tif (!self.headerFilters[field].func(data)) {\n\t\t\tmatch = false;\n\t\t}\n\t}\n\n\treturn match;\n};\n\nFilter.prototype.filterRecurse = function (filter, data) {\n\tvar self = this,\n\t    match = false;\n\n\tif (Array.isArray(filter)) {\n\t\tfilter.forEach(function (subFilter) {\n\t\t\tif (self.filterRecurse(subFilter, data)) {\n\t\t\t\tmatch = true;\n\t\t\t}\n\t\t});\n\t} else {\n\t\tmatch = filter.func(data);\n\t}\n\n\treturn match;\n};\n\n//list of available filters\nFilter.prototype.filters = {\n\n\t//equal to\n\t\"=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\treturn rowVal == filterVal ? true : false;\n\t},\n\n\t//less than\n\t\"<\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\treturn rowVal < filterVal ? true : false;\n\t},\n\n\t//less than or equal to\n\t\"<=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\treturn rowVal <= filterVal ? true : false;\n\t},\n\n\t//greater than\n\t\">\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\treturn rowVal > filterVal ? true : false;\n\t},\n\n\t//greater than or equal to\n\t\">=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\treturn rowVal >= filterVal ? true : false;\n\t},\n\n\t//not equal to\n\t\"!=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\treturn rowVal != filterVal ? true : false;\n\t},\n\n\t\"regex\": function regex(filterVal, rowVal, rowData, filterParams) {\n\n\t\tif (typeof filterVal == \"string\") {\n\t\t\tfilterVal = new RegExp(filterVal);\n\t\t}\n\n\t\treturn filterVal.test(rowVal);\n\t},\n\n\t//contains the string\n\t\"like\": function like(filterVal, rowVal, rowData, filterParams) {\n\t\tif (filterVal === null || typeof filterVal === \"undefined\") {\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t} else {\n\t\t\tif (typeof rowVal !== 'undefined' && rowVal !== null) {\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//contains the keywords\n\t\"keywords\": function keywords(filterVal, rowVal, rowData, filterParams) {\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n\t\t    value = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n\t\t    matches = [];\n\n\t\tkeywords.forEach(function (keyword) {\n\t\t\tif (value.includes(keyword)) {\n\t\t\t\tmatches.push(true);\n\t\t\t}\n\t\t});\n\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n\t},\n\n\t//starts with the string\n\t\"starts\": function starts(filterVal, rowVal, rowData, filterParams) {\n\t\tif (filterVal === null || typeof filterVal === \"undefined\") {\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t} else {\n\t\t\tif (typeof rowVal !== 'undefined' && rowVal !== null) {\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//ends with the string\n\t\"ends\": function ends(filterVal, rowVal, rowData, filterParams) {\n\t\tif (filterVal === null || typeof filterVal === \"undefined\") {\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t} else {\n\t\t\tif (typeof rowVal !== 'undefined' && rowVal !== null) {\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//in array\n\t\"in\": function _in(filterVal, rowVal, rowData, filterParams) {\n\t\tif (Array.isArray(filterVal)) {\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n\t\t} else {\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\n\t\t\treturn false;\n\t\t}\n\t}\n};\n\nTabulator.prototype.registerModule(\"filter\", Filter);\n\nvar Format = function Format(table) {\n\tthis.table = table; //hold Tabulator object\n};\n\n//initialize column formatter\nFormat.prototype.initializeColumn = function (column) {\n\tcolumn.modules.format = this.lookupFormatter(column, \"\");\n\n\tif (typeof column.definition.formatterPrint !== \"undefined\") {\n\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\n\t}\n\n\tif (typeof column.definition.formatterClipboard !== \"undefined\") {\n\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n\t}\n\n\tif (typeof column.definition.formatterHtmlOutput !== \"undefined\") {\n\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n\t}\n};\n\nFormat.prototype.lookupFormatter = function (column, type) {\n\tvar config = { params: column.definition[\"formatter\" + type + \"Params\"] || {} },\n\t    formatter = column.definition[\"formatter\" + type];\n\n\t//set column formatter\n\tswitch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n\t\tcase \"string\":\n\n\t\t\tif (formatter === \"tick\") {\n\t\t\t\tformatter = \"tickCross\";\n\n\t\t\t\tif (typeof config.params.crossElement == \"undefined\") {\n\t\t\t\t\tconfig.params.crossElement = false;\n\t\t\t\t}\n\n\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false\");\n\t\t\t}\n\n\t\t\tif (this.formatters[formatter]) {\n\t\t\t\tconfig.formatter = this.formatters[formatter];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\tconfig.formatter = this.formatters.plaintext;\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"function\":\n\t\t\tconfig.formatter = formatter;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconfig.formatter = this.formatters.plaintext;\n\t\t\tbreak;\n\t}\n\n\treturn config;\n};\n\nFormat.prototype.cellRendered = function (cell) {\n\tif (cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered) {\n\t\tcell.modules.format.renderedCallback();\n\t\tcell.modules.format.rendered = true;\n\t}\n};\n\n//return a formatted value for a cell\nFormat.prototype.formatValue = function (cell) {\n\tvar component = cell.getComponent(),\n\t    params = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\n\tfunction onRendered(callback) {\n\t\tif (!cell.modules.format) {\n\t\t\tcell.modules.format = {};\n\t\t}\n\n\t\tcell.modules.format.renderedCallback = callback;\n\t\tcell.modules.format.rendered = false;\n\t}\n\n\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\n};\n\nFormat.prototype.formatExportValue = function (cell, type) {\n\tvar formatter = cell.column.modules.format[type],\n\t    params;\n\n\tif (formatter) {\n\t\tvar onRendered = function onRendered(callback) {\n\t\t\tif (!cell.modules.format) {\n\t\t\t\tcell.modules.format = {};\n\t\t\t}\n\n\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\tcell.modules.format.rendered = false;\n\t\t};\n\n\t\tparams = typeof formatter.params === \"function\" ? formatter.params(component) : formatter.params;\n\n\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n\t} else {\n\t\treturn this.formatValue(cell);\n\t}\n};\n\nFormat.prototype.sanitizeHTML = function (value) {\n\tif (value) {\n\t\tvar entityMap = {\n\t\t\t'&': '&amp;',\n\t\t\t'<': '&lt;',\n\t\t\t'>': '&gt;',\n\t\t\t'\"': '&quot;',\n\t\t\t\"'\": '&#39;',\n\t\t\t'/': '&#x2F;',\n\t\t\t'`': '&#x60;',\n\t\t\t'=': '&#x3D;'\n\t\t};\n\n\t\treturn String(value).replace(/[&<>\"'`=\\/]/g, function (s) {\n\t\t\treturn entityMap[s];\n\t\t});\n\t} else {\n\t\treturn value;\n\t}\n};\n\nFormat.prototype.emptyToSpace = function (value) {\n\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n};\n\n//get formatter for cell\nFormat.prototype.getFormatter = function (formatter) {\n\tvar formatter;\n\n\tswitch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n\t\tcase \"string\":\n\t\t\tif (this.formatters[formatter]) {\n\t\t\t\tformatter = this.formatters[formatter];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\tformatter = this.formatters.plaintext;\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"function\":\n\t\t\tformatter = formatter;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tformatter = this.formatters.plaintext;\n\t\t\tbreak;\n\t}\n\n\treturn formatter;\n};\n\n//default data formatters\nFormat.prototype.formatters = {\n\t//plain text value\n\tplaintext: function plaintext(cell, formatterParams, onRendered) {\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t},\n\n\t//html text value\n\thtml: function html(cell, formatterParams, onRendered) {\n\t\treturn cell.getValue();\n\t},\n\n\t//multiline text area\n\ttextarea: function textarea(cell, formatterParams, onRendered) {\n\t\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t},\n\n\t//currency formatting\n\tmoney: function money(cell, formatterParams, onRendered) {\n\t\tvar floatVal = parseFloat(cell.getValue()),\n\t\t    number,\n\t\t    integer,\n\t\t    decimal,\n\t\t    rgx;\n\n\t\tvar decimalSym = formatterParams.decimal || \".\";\n\t\tvar thousandSym = formatterParams.thousand || \",\";\n\t\tvar symbol = formatterParams.symbol || \"\";\n\t\tvar after = !!formatterParams.symbolAfter;\n\t\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n\t\tif (isNaN(floatVal)) {\n\t\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t\t}\n\n\t\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\n\t\tnumber = String(number).split(\".\");\n\n\t\tinteger = number[0];\n\t\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\n\n\t\trgx = /(\\d+)(\\d{3})/;\n\n\t\twhile (rgx.test(integer)) {\n\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n\t\t}\n\n\t\treturn after ? integer + decimal + symbol : symbol + integer + decimal;\n\t},\n\n\t//clickable anchor tag\n\tlink: function link(cell, formatterParams, onRendered) {\n\t\tvar value = cell.getValue(),\n\t\t    urlPrefix = formatterParams.urlPrefix || \"\",\n\t\t    download = formatterParams.download,\n\t\t    label = value,\n\t\t    el = document.createElement(\"a\"),\n\t\t    data;\n\n\t\tif (formatterParams.labelField) {\n\t\t\tdata = cell.getData();\n\t\t\tlabel = data[formatterParams.labelField];\n\t\t}\n\n\t\tif (formatterParams.label) {\n\t\t\tswitch (_typeof(formatterParams.label)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tlabel = formatterParams.label;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tlabel = formatterParams.label(cell);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (label) {\n\t\t\tif (formatterParams.urlField) {\n\t\t\t\tdata = cell.getData();\n\t\t\t\tvalue = data[formatterParams.urlField];\n\t\t\t}\n\n\t\t\tif (formatterParams.url) {\n\t\t\t\tswitch (_typeof(formatterParams.url)) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tvalue = formatterParams.url;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tvalue = formatterParams.url(cell);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tel.setAttribute(\"href\", urlPrefix + value);\n\n\t\t\tif (formatterParams.target) {\n\t\t\t\tel.setAttribute(\"target\", formatterParams.target);\n\t\t\t}\n\n\t\t\tif (formatterParams.download) {\n\n\t\t\t\tif (typeof download == \"function\") {\n\t\t\t\t\tdownload = download(cell);\n\t\t\t\t} else {\n\t\t\t\t\tdownload = download === true ? \"\" : download;\n\t\t\t\t}\n\n\t\t\t\tel.setAttribute(\"download\", download);\n\t\t\t}\n\n\t\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n\n\t\t\treturn el;\n\t\t} else {\n\t\t\treturn \"&nbsp;\";\n\t\t}\n\t},\n\n\t//image element\n\timage: function image(cell, formatterParams, onRendered) {\n\t\tvar el = document.createElement(\"img\");\n\t\tel.setAttribute(\"src\", cell.getValue());\n\n\t\tswitch (_typeof(formatterParams.height)) {\n\t\t\tcase \"number\":\n\t\t\t\tel.style.height = formatterParams.height + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase \"string\":\n\t\t\t\tel.style.height = formatterParams.height;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch (_typeof(formatterParams.width)) {\n\t\t\tcase \"number\":\n\t\t\t\tel.style.width = formatterParams.width + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase \"string\":\n\t\t\t\tel.style.width = formatterParams.width;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tel.addEventListener(\"load\", function () {\n\t\t\tcell.getRow().normalizeHeight();\n\t\t});\n\n\t\treturn el;\n\t},\n\n\t//tick or cross\n\ttickCross: function tickCross(cell, formatterParams, onRendered) {\n\t\tvar value = cell.getValue(),\n\t\t    element = cell.getElement(),\n\t\t    empty = formatterParams.allowEmpty,\n\t\t    truthy = formatterParams.allowTruthy,\n\t\t    tick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n\t\t    cross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n\t\tif (truthy && value || value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\") {\n\t\t\telement.setAttribute(\"aria-checked\", true);\n\t\t\treturn tick || \"\";\n\t\t} else {\n\t\t\tif (empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")) {\n\t\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\n\t\t\t\treturn \"\";\n\t\t\t} else {\n\t\t\t\telement.setAttribute(\"aria-checked\", false);\n\t\t\t\treturn cross || \"\";\n\t\t\t}\n\t\t}\n\t},\n\n\tdatetime: function datetime(cell, formatterParams, onRendered) {\n\t\tvar inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n\t\tvar outputFormat = formatterParams.outputFormat || \"DD/MM/YYYY hh:mm:ss\";\n\t\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\t\tvar value = cell.getValue();\n\n\t\tvar newDatetime = moment(value, inputFormat);\n\n\t\tif (newDatetime.isValid()) {\n\t\t\treturn formatterParams.timezone ? newDatetime.tz(formatterParams.timezone).format(outputFormat) : newDatetime.format(outputFormat);\n\t\t} else {\n\n\t\t\tif (invalid === true) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\treturn invalid(value);\n\t\t\t} else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t},\n\n\tdatetimediff: function datetime(cell, formatterParams, onRendered) {\n\t\tvar inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n\t\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\t\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n\t\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : undefined;\n\t\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n\t\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : moment();\n\t\tvar value = cell.getValue();\n\n\t\tvar newDatetime = moment(value, inputFormat);\n\n\t\tif (newDatetime.isValid()) {\n\t\t\tif (humanize) {\n\t\t\t\treturn moment.duration(newDatetime.diff(date)).humanize(suffix);\n\t\t\t} else {\n\t\t\t\treturn newDatetime.diff(date, unit) + (suffix ? \" \" + suffix : \"\");\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (invalid === true) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\treturn invalid(value);\n\t\t\t} else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t},\n\n\t//select\n\tlookup: function lookup(cell, formatterParams, onRendered) {\n\t\tvar value = cell.getValue();\n\n\t\tif (typeof formatterParams[value] === \"undefined\") {\n\t\t\tconsole.warn('Missing display value for ' + value);\n\t\t\treturn value;\n\t\t}\n\n\t\treturn formatterParams[value];\n\t},\n\n\t//star rating\n\tstar: function star(cell, formatterParams, onRendered) {\n\t\tvar value = cell.getValue(),\n\t\t    element = cell.getElement(),\n\t\t    maxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n\t\t    stars = document.createElement(\"span\"),\n\t\t    star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n\t\t    starActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n\t\t    starInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n\t\t//style stars holder\n\t\tstars.style.verticalAlign = \"middle\";\n\n\t\t//style star\n\t\tstar.setAttribute(\"width\", \"14\");\n\t\tstar.setAttribute(\"height\", \"14\");\n\t\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\t\tstar.setAttribute(\"xml:space\", \"preserve\");\n\t\tstar.style.padding = \"0 1px\";\n\n\t\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\n\n\t\tvalue = Math.max(0, Math.min(value, maxStars));\n\n\t\tfor (var i = 1; i <= maxStars; i++) {\n\t\t\tvar nextStar = star.cloneNode(true);\n\t\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\n\n\t\t\tstars.appendChild(nextStar);\n\t\t}\n\n\t\telement.style.whiteSpace = \"nowrap\";\n\t\telement.style.overflow = \"hidden\";\n\t\telement.style.textOverflow = \"ellipsis\";\n\n\t\telement.setAttribute(\"aria-label\", value);\n\n\t\treturn stars;\n\t},\n\n\ttraffic: function traffic(cell, formatterParams, onRendered) {\n\t\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\t\t    el = document.createElement(\"span\"),\n\t\t    max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\t\t    min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\t\t    colors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n\t\t    color = \"#666666\",\n\t\t    percent,\n\t\t    percentValue;\n\n\t\tif (isNaN(value) || typeof cell.getValue() === \"undefined\") {\n\t\t\treturn;\n\t\t}\n\n\t\tel.classList.add(\"tabulator-traffic-light\");\n\n\t\t//make sure value is in range\n\t\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\t\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t\t//workout percentage\n\t\tpercent = (max - min) / 100;\n\t\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t\t//set color\n\t\tswitch (typeof colors === 'undefined' ? 'undefined' : _typeof(colors)) {\n\t\t\tcase \"string\":\n\t\t\t\tcolor = colors;\n\t\t\t\tbreak;\n\t\t\tcase \"function\":\n\t\t\t\tcolor = colors(value);\n\t\t\t\tbreak;\n\t\t\tcase \"object\":\n\t\t\t\tif (Array.isArray(colors)) {\n\t\t\t\t\tvar unit = 100 / colors.length;\n\t\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\t\tindex = Math.min(index, colors.length - 1);\n\t\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\t\tcolor = colors[index];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t}\n\n\t\tel.style.backgroundColor = color;\n\n\t\treturn el;\n\t},\n\n\t//progress bar\n\tprogress: function progress(cell, formatterParams, onRendered) {\n\t\t//progress bar\n\t\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\t\t    element = cell.getElement(),\n\t\t    max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\t\t    min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\t\t    legendAlign = formatterParams && formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n\t\t    percent,\n\t\t    percentValue,\n\t\t    color,\n\t\t    legend,\n\t\t    legendColor,\n\t\t    top,\n\t\t    left,\n\t\t    right,\n\t\t    bottom;\n\n\t\t//make sure value is in range\n\t\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\t\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t\t//workout percentage\n\t\tpercent = (max - min) / 100;\n\t\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t\t//set bar color\n\t\tswitch (_typeof(formatterParams.color)) {\n\t\t\tcase \"string\":\n\t\t\t\tcolor = formatterParams.color;\n\t\t\t\tbreak;\n\t\t\tcase \"function\":\n\t\t\t\tcolor = formatterParams.color(value);\n\t\t\t\tbreak;\n\t\t\tcase \"object\":\n\t\t\t\tif (Array.isArray(formatterParams.color)) {\n\t\t\t\t\tvar unit = 100 / formatterParams.color.length;\n\t\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\n\t\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\t\tcolor = formatterParams.color[index];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tdefault:\n\t\t\t\tcolor = \"#2DC214\";\n\t\t}\n\n\t\t//generate legend\n\t\tswitch (_typeof(formatterParams.legend)) {\n\t\t\tcase \"string\":\n\t\t\t\tlegend = formatterParams.legend;\n\t\t\t\tbreak;\n\t\t\tcase \"function\":\n\t\t\t\tlegend = formatterParams.legend(value);\n\t\t\t\tbreak;\n\t\t\tcase \"boolean\":\n\t\t\t\tlegend = value;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlegend = false;\n\t\t}\n\n\t\t//set legend color\n\t\tswitch (_typeof(formatterParams.legendColor)) {\n\t\t\tcase \"string\":\n\t\t\t\tlegendColor = formatterParams.legendColor;\n\t\t\t\tbreak;\n\t\t\tcase \"function\":\n\t\t\t\tlegendColor = formatterParams.legendColor(value);\n\t\t\t\tbreak;\n\t\t\tcase \"object\":\n\t\t\t\tif (Array.isArray(formatterParams.legendColor)) {\n\t\t\t\t\tvar unit = 100 / formatterParams.legendColor.length;\n\t\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\n\t\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\t\tlegendColor = formatterParams.legendColor[index];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlegendColor = \"#000\";\n\t\t}\n\n\t\telement.style.minWidth = \"30px\";\n\t\telement.style.position = \"relative\";\n\n\t\telement.setAttribute(\"aria-label\", percentValue);\n\n\t\tvar barEl = document.createElement(\"div\");\n\t\tbarEl.style.display = \"inline-block\";\n\t\tbarEl.style.position = \"relative\";\n\t\tbarEl.style.width = percentValue + \"%\";\n\t\tbarEl.style.backgroundColor = color;\n\t\tbarEl.style.height = \"100%\";\n\n\t\tbarEl.setAttribute('data-max', max);\n\t\tbarEl.setAttribute('data-min', min);\n\n\t\tif (legend) {\n\t\t\tvar legendEl = document.createElement(\"div\");\n\t\t\tlegendEl.style.position = \"absolute\";\n\t\t\tlegendEl.style.top = \"4px\";\n\t\t\tlegendEl.style.left = 0;\n\t\t\tlegendEl.style.textAlign = legendAlign;\n\t\t\tlegendEl.style.width = \"100%\";\n\t\t\tlegendEl.style.color = legendColor;\n\t\t\tlegendEl.innerHTML = legend;\n\t\t}\n\n\t\tonRendered(function () {\n\n\t\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\n\t\t\tif (!(cell instanceof CellComponent)) {\n\t\t\t\tvar holderEl = document.createElement(\"div\");\n\t\t\t\tholderEl.style.position = \"absolute\";\n\t\t\t\tholderEl.style.top = \"4px\";\n\t\t\t\tholderEl.style.bottom = \"4px\";\n\t\t\t\tholderEl.style.left = \"4px\";\n\t\t\t\tholderEl.style.right = \"4px\";\n\n\t\t\t\telement.appendChild(holderEl);\n\n\t\t\t\telement = holderEl;\n\t\t\t}\n\n\t\t\telement.appendChild(barEl);\n\n\t\t\tif (legend) {\n\t\t\t\telement.appendChild(legendEl);\n\t\t\t}\n\t\t});\n\n\t\treturn \"\";\n\t},\n\n\t//background color\n\tcolor: function color(cell, formatterParams, onRendered) {\n\t\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n\t\treturn \"\";\n\t},\n\n\t//tick icon\n\tbuttonTick: function buttonTick(cell, formatterParams, onRendered) {\n\t\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n\t},\n\n\t//cross icon\n\tbuttonCross: function buttonCross(cell, formatterParams, onRendered) {\n\t\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\t},\n\n\t//current row number\n\trownum: function rownum(cell, formatterParams, onRendered) {\n\t\treturn this.table.rowManager.activeRows.indexOf(cell.getRow()._getSelf()) + 1;\n\t},\n\n\t//row handle\n\thandle: function handle(cell, formatterParams, onRendered) {\n\t\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\t\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n\t},\n\n\tresponsiveCollapse: function responsiveCollapse(cell, formatterParams, onRendered) {\n\t\tvar self = this,\n\t\t    open = false,\n\t\t    el = document.createElement(\"div\"),\n\t\t    config = cell.getRow()._row.modules.responsiveLayout;\n\n\t\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\n\t\tel.innerHTML = \"<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>\";\n\n\t\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\n\t\tfunction toggleList(isOpen) {\n\t\t\tvar collapseEl = config.element;\n\n\t\t\tconfig.open = isOpen;\n\n\t\t\tif (collapseEl) {\n\n\t\t\t\tif (config.open) {\n\t\t\t\t\tel.classList.add(\"open\");\n\t\t\t\t\tcollapseEl.style.display = '';\n\t\t\t\t} else {\n\t\t\t\t\tel.classList.remove(\"open\");\n\t\t\t\t\tcollapseEl.style.display = 'none';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tel.addEventListener(\"click\", function (e) {\n\t\t\te.stopImmediatePropagation();\n\t\t\ttoggleList(!config.open);\n\t\t});\n\n\t\ttoggleList(config.open);\n\n\t\treturn el;\n\t},\n\n\trowSelection: function rowSelection(cell, formatterParams, onRendered) {\n\t\tvar _this64 = this;\n\n\t\tvar checkbox = document.createElement(\"input\");\n\n\t\tcheckbox.type = 'checkbox';\n\n\t\tif (this.table.modExists(\"selectRow\", true)) {\n\n\t\t\tcheckbox.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tif (typeof cell.getRow == 'function') {\n\t\t\t\tvar row = cell.getRow();\n\n\t\t\t\tif (row instanceof RowComponent) {\n\n\t\t\t\t\tcheckbox.addEventListener(\"change\", function (e) {\n\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t});\n\n\t\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\n\t\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n\t\t\t\t} else {\n\t\t\t\t\tcheckbox = \"\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcheckbox.addEventListener(\"change\", function (e) {\n\t\t\t\t\tif (_this64.table.modules.selectRow.selectedRows.length) {\n\t\t\t\t\t\t_this64.table.deselectRow();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this64.table.selectRow(formatterParams.rowRange);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n\t\t\t}\n\t\t}\n\t\treturn checkbox;\n\t}\n};\n\nTabulator.prototype.registerModule(\"format\", Format);\n\nvar FrozenColumns = function FrozenColumns(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.leftColumns = [];\n\tthis.rightColumns = [];\n\tthis.leftMargin = 0;\n\tthis.rightMargin = 0;\n\tthis.rightPadding = 0;\n\tthis.initializationMode = \"left\";\n\tthis.active = false;\n\tthis.scrollEndTimer = false;\n};\n\n//reset initial state\nFrozenColumns.prototype.reset = function () {\n\tthis.initializationMode = \"left\";\n\tthis.leftColumns = [];\n\tthis.rightColumns = [];\n\tthis.leftMargin = 0;\n\tthis.rightMargin = 0;\n\tthis.rightMargin = 0;\n\tthis.active = false;\n\n\tthis.table.columnManager.headersElement.style.marginLeft = 0;\n\tthis.table.columnManager.element.style.paddingRight = 0;\n};\n\n//initialize specific column\nFrozenColumns.prototype.initializeColumn = function (column) {\n\tvar config = { margin: 0, edge: false };\n\n\tif (!column.isGroup) {\n\n\t\tif (this.frozenCheck(column)) {\n\n\t\t\tconfig.position = this.initializationMode;\n\n\t\t\tif (this.initializationMode == \"left\") {\n\t\t\t\tthis.leftColumns.push(column);\n\t\t\t} else {\n\t\t\t\tthis.rightColumns.unshift(column);\n\t\t\t}\n\n\t\t\tthis.active = true;\n\n\t\t\tcolumn.modules.frozen = config;\n\t\t} else {\n\t\t\tthis.initializationMode = \"right\";\n\t\t}\n\t}\n};\n\nFrozenColumns.prototype.frozenCheck = function (column) {\n\tvar frozen = false;\n\n\tif (column.parent.isGroup && column.definition.frozen) {\n\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n\t}\n\n\tif (column.parent.isGroup) {\n\t\treturn this.frozenCheck(column.parent);\n\t} else {\n\t\treturn column.definition.frozen;\n\t}\n\n\treturn frozen;\n};\n\n//quick layout to smooth horizontal scrolling\nFrozenColumns.prototype.scrollHorizontal = function () {\n\tvar _this65 = this;\n\n\tvar rows;\n\n\tif (this.active) {\n\t\tclearTimeout(this.scrollEndTimer);\n\n\t\t//layout all rows after scroll is complete\n\t\tthis.scrollEndTimer = setTimeout(function () {\n\t\t\t_this65.layout();\n\t\t}, 100);\n\n\t\trows = this.table.rowManager.getVisibleRows();\n\n\t\tthis.calcMargins();\n\n\t\tthis.layoutColumnPosition();\n\n\t\tthis.layoutCalcRows();\n\n\t\trows.forEach(function (row) {\n\t\t\tif (row.type === \"row\") {\n\t\t\t\t_this65.layoutRow(row);\n\t\t\t}\n\t\t});\n\n\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n\t}\n};\n\n//calculate margins for rows\nFrozenColumns.prototype.calcMargins = function () {\n\tthis.leftMargin = this._calcSpace(this.leftColumns, this.leftColumns.length) + \"px\";\n\tthis.table.columnManager.headersElement.style.marginLeft = this.leftMargin;\n\n\tthis.rightMargin = this._calcSpace(this.rightColumns, this.rightColumns.length) + \"px\";\n\tthis.table.columnManager.element.style.paddingRight = this.rightMargin;\n\n\t//calculate right frozen columns\n\tthis.rightPadding = this.table.rowManager.element.clientWidth + this.table.columnManager.scrollLeft;\n};\n\n//layout calculation rows\nFrozenColumns.prototype.layoutCalcRows = function () {\n\tif (this.table.modExists(\"columnCalcs\")) {\n\t\tif (this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow) {\n\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\n\t\t}\n\t\tif (this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow) {\n\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\n\t\t}\n\t}\n};\n\n//calculate column positions and layout headers\nFrozenColumns.prototype.layoutColumnPosition = function (allCells) {\n\tvar _this66 = this;\n\n\tvar leftParents = [];\n\n\tthis.leftColumns.forEach(function (column, i) {\n\t\tcolumn.modules.frozen.margin = _this66._calcSpace(_this66.leftColumns, i) + _this66.table.columnManager.scrollLeft + \"px\";\n\n\t\tif (i == _this66.leftColumns.length - 1) {\n\t\t\tcolumn.modules.frozen.edge = true;\n\t\t} else {\n\t\t\tcolumn.modules.frozen.edge = false;\n\t\t}\n\n\t\tif (column.parent.isGroup) {\n\t\t\tvar parentEl = _this66.getColGroupParentElement(column);\n\t\t\tif (!leftParents.includes(parentEl)) {\n\t\t\t\t_this66.layoutElement(parentEl, column);\n\t\t\t\tleftParents.push(parentEl);\n\t\t\t}\n\n\t\t\tif (column.modules.frozen.edge) {\n\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t}\n\t\t} else {\n\t\t\t_this66.layoutElement(column.getElement(), column);\n\t\t}\n\n\t\tif (allCells) {\n\t\t\tcolumn.cells.forEach(function (cell) {\n\t\t\t\t_this66.layoutElement(cell.getElement(), column);\n\t\t\t});\n\t\t}\n\t});\n\n\tthis.rightColumns.forEach(function (column, i) {\n\t\tcolumn.modules.frozen.margin = _this66.rightPadding - _this66._calcSpace(_this66.rightColumns, i + 1) + \"px\";\n\n\t\tif (i == _this66.rightColumns.length - 1) {\n\t\t\tcolumn.modules.frozen.edge = true;\n\t\t} else {\n\t\t\tcolumn.modules.frozen.edge = false;\n\t\t}\n\n\t\tif (column.parent.isGroup) {\n\t\t\t_this66.layoutElement(_this66.getColGroupParentElement(column), column);\n\t\t} else {\n\t\t\t_this66.layoutElement(column.getElement(), column);\n\t\t}\n\n\t\tif (allCells) {\n\t\t\tcolumn.cells.forEach(function (cell) {\n\t\t\t\t_this66.layoutElement(cell.getElement(), column);\n\t\t\t});\n\t\t}\n\t});\n};\n\nFrozenColumns.prototype.getColGroupParentElement = function (column) {\n\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n};\n\n//layout columns appropropriatly\nFrozenColumns.prototype.layout = function () {\n\tvar self = this,\n\t    rightMargin = 0;\n\n\tif (self.active) {\n\n\t\t//calculate row padding\n\t\tthis.calcMargins();\n\n\t\t// self.table.rowManager.activeRows.forEach(function(row){\n\t\t// \tself.layoutRow(row);\n\t\t// });\n\n\t\t// if(self.table.options.dataTree){\n\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\tif (row.type === \"row\") {\n\t\t\t\tself.layoutRow(row);\n\t\t\t}\n\t\t});\n\t\t// }\n\n\t\tthis.layoutCalcRows();\n\n\t\t//calculate left columns\n\t\tthis.layoutColumnPosition(true);\n\n\t\t// if(tableHolder.scrollHeight > tableHolder.clientHeight){\n\t\t// \trightMargin -= tableHolder.offsetWidth - tableHolder.clientWidth;\n\t\t// }\n\n\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n\t}\n};\n\nFrozenColumns.prototype.layoutRow = function (row) {\n\tvar _this67 = this;\n\n\tvar rowEl = row.getElement();\n\n\trowEl.style.paddingLeft = this.leftMargin;\n\t// rowEl.style.paddingRight = this.rightMargin + \"px\";\n\n\tthis.leftColumns.forEach(function (column) {\n\t\tvar cell = row.getCell(column);\n\n\t\tif (cell) {\n\t\t\t_this67.layoutElement(cell.getElement(), column);\n\t\t}\n\t});\n\n\tthis.rightColumns.forEach(function (column) {\n\t\tvar cell = row.getCell(column);\n\n\t\tif (cell) {\n\t\t\t_this67.layoutElement(cell.getElement(), column);\n\t\t}\n\t});\n};\n\nFrozenColumns.prototype.layoutElement = function (element, column) {\n\n\tif (column.modules.frozen) {\n\t\telement.style.position = \"absolute\";\n\t\telement.style.left = column.modules.frozen.margin;\n\n\t\telement.classList.add(\"tabulator-frozen\");\n\n\t\tif (column.modules.frozen.edge) {\n\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t}\n\t}\n};\n\nFrozenColumns.prototype._calcSpace = function (columns, index) {\n\tvar width = 0;\n\n\tfor (var _i12 = 0; _i12 < index; _i12++) {\n\t\tif (columns[_i12].visible) {\n\t\t\twidth += columns[_i12].getWidth();\n\t\t}\n\t}\n\n\treturn width;\n};\n\nTabulator.prototype.registerModule(\"frozenColumns\", FrozenColumns);\nvar FrozenRows = function FrozenRows(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.topElement = document.createElement(\"div\");\n\tthis.rows = [];\n\tthis.displayIndex = 0; //index in display pipeline\n};\n\nFrozenRows.prototype.initialize = function () {\n\tthis.rows = [];\n\n\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\n\t// this.table.columnManager.element.append(this.topElement);\n\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n};\n\nFrozenRows.prototype.setDisplayIndex = function (index) {\n\tthis.displayIndex = index;\n};\n\nFrozenRows.prototype.getDisplayIndex = function () {\n\treturn this.displayIndex;\n};\n\nFrozenRows.prototype.isFrozen = function () {\n\treturn !!this.rows.length;\n};\n\n//filter frozen rows out of display data\nFrozenRows.prototype.getRows = function (rows) {\n\tvar self = this,\n\t    frozen = [],\n\t    output = rows.slice(0);\n\n\tthis.rows.forEach(function (row) {\n\t\tvar index = output.indexOf(row);\n\n\t\tif (index > -1) {\n\t\t\toutput.splice(index, 1);\n\t\t}\n\t});\n\n\treturn output;\n};\n\nFrozenRows.prototype.freezeRow = function (row) {\n\tif (!row.modules.frozen) {\n\t\trow.modules.frozen = true;\n\t\tthis.topElement.appendChild(row.getElement());\n\t\trow.initialize();\n\t\trow.normalizeHeight();\n\t\tthis.table.rowManager.adjustTableSize();\n\n\t\tthis.rows.push(row);\n\n\t\tthis.table.rowManager.refreshActiveData(\"display\");\n\n\t\tthis.styleRows();\n\t} else {\n\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\n\t}\n};\n\nFrozenRows.prototype.unfreezeRow = function (row) {\n\tvar index = this.rows.indexOf(row);\n\n\tif (row.modules.frozen) {\n\n\t\trow.modules.frozen = false;\n\n\t\tthis.detachRow(row);\n\n\t\tthis.table.rowManager.adjustTableSize();\n\n\t\tthis.table.rowManager.refreshActiveData(\"display\");\n\n\t\tif (this.rows.length) {\n\t\t\tthis.styleRows();\n\t\t}\n\t} else {\n\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\n\t}\n};\n\nFrozenRows.prototype.detachRow = function (row) {\n\tvar index = this.rows.indexOf(row);\n\n\tif (index > -1) {\n\t\tvar rowEl = row.getElement();\n\t\trowEl.parentNode.removeChild(rowEl);\n\n\t\tthis.rows.splice(index, 1);\n\t}\n};\n\nFrozenRows.prototype.styleRows = function (row) {\n\tvar self = this;\n\n\tthis.rows.forEach(function (row, i) {\n\t\tself.table.rowManager.styleRow(row, i);\n\t});\n};\n\nTabulator.prototype.registerModule(\"frozenRows\", FrozenRows);\n\n//public group object\nvar GroupComponent = function GroupComponent(group) {\n\tthis._group = group;\n\tthis.type = \"GroupComponent\";\n};\n\nGroupComponent.prototype.getKey = function () {\n\treturn this._group.key;\n};\n\nGroupComponent.prototype.getField = function () {\n\treturn this._group.field;\n};\n\nGroupComponent.prototype.getElement = function () {\n\treturn this._group.element;\n};\n\nGroupComponent.prototype.getRows = function () {\n\treturn this._group.getRows(true);\n};\n\nGroupComponent.prototype.getSubGroups = function () {\n\treturn this._group.getSubGroups(true);\n};\n\nGroupComponent.prototype.getParentGroup = function () {\n\treturn this._group.parent ? this._group.parent.getComponent() : false;\n};\n\nGroupComponent.prototype.getVisibility = function () {\n\tconsole.warn(\"getVisibility function is deprecated, you should now use the isVisible function\");\n\treturn this._group.visible;\n};\n\nGroupComponent.prototype.isVisible = function () {\n\treturn this._group.visible;\n};\n\nGroupComponent.prototype.show = function () {\n\tthis._group.show();\n};\n\nGroupComponent.prototype.hide = function () {\n\tthis._group.hide();\n};\n\nGroupComponent.prototype.toggle = function () {\n\tthis._group.toggleVisibility();\n};\n\nGroupComponent.prototype._getSelf = function () {\n\treturn this._group;\n};\n\nGroupComponent.prototype.getTable = function () {\n\treturn this._group.groupManager.table;\n};\n\n//////////////////////////////////////////////////\n//////////////// Group Functions /////////////////\n//////////////////////////////////////////////////\n\nvar Group = function Group(groupManager, parent, level, key, field, generator, oldGroup) {\n\n\tthis.groupManager = groupManager;\n\tthis.parent = parent;\n\tthis.key = key;\n\tthis.level = level;\n\tthis.field = field;\n\tthis.hasSubGroups = level < groupManager.groupIDLookups.length - 1;\n\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n\tthis.type = \"group\"; //type of element\n\tthis.old = oldGroup;\n\tthis.rows = [];\n\tthis.groups = [];\n\tthis.groupList = [];\n\tthis.generator = generator;\n\tthis.elementContents = false;\n\tthis.height = 0;\n\tthis.outerHeight = 0;\n\tthis.initialized = false;\n\tthis.calcs = {};\n\tthis.initialized = false;\n\tthis.modules = {};\n\tthis.arrowElement = false;\n\n\tthis.visible = oldGroup ? oldGroup.visible : typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0];\n\n\tthis.component = null;\n\n\tthis.createElements();\n\tthis.addBindings();\n\n\tthis.createValueGroups();\n};\n\nGroup.prototype.wipe = function () {\n\tif (this.groupList.length) {\n\t\tthis.groupList.forEach(function (group) {\n\t\t\tgroup.wipe();\n\t\t});\n\t} else {\n\t\tthis.element = false;\n\t\tthis.arrowElement = false;\n\t\tthis.elementContents = false;\n\t}\n};\n\nGroup.prototype.createElements = function () {\n\tvar arrow = document.createElement(\"div\");\n\tarrow.classList.add(\"tabulator-arrow\");\n\n\tthis.element = document.createElement(\"div\");\n\tthis.element.classList.add(\"tabulator-row\");\n\tthis.element.classList.add(\"tabulator-group\");\n\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\n\tthis.element.setAttribute(\"role\", \"rowgroup\");\n\n\tthis.arrowElement = document.createElement(\"div\");\n\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\n\tthis.arrowElement.appendChild(arrow);\n\n\t//setup movable rows\n\tif (this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")) {\n\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n\t}\n};\n\nGroup.prototype.createValueGroups = function () {\n\tvar _this68 = this;\n\n\tvar level = this.level + 1;\n\tif (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n\t\tthis.groupManager.allowedValues[level].forEach(function (value) {\n\t\t\t_this68._createGroup(value, level);\n\t\t});\n\t}\n};\n\nGroup.prototype.addBindings = function () {\n\tvar self = this,\n\t    dblTap,\n\t    tapHold,\n\t    tap,\n\t    toggleElement;\n\n\t//handle group click events\n\tif (self.groupManager.table.options.groupClick) {\n\t\tself.element.addEventListener(\"click\", function (e) {\n\t\t\tself.groupManager.table.options.groupClick.call(self.groupManager.table, e, self.getComponent());\n\t\t});\n\t}\n\n\tif (self.groupManager.table.options.groupDblClick) {\n\t\tself.element.addEventListener(\"dblclick\", function (e) {\n\t\t\tself.groupManager.table.options.groupDblClick.call(self.groupManager.table, e, self.getComponent());\n\t\t});\n\t}\n\n\tif (self.groupManager.table.options.groupContext) {\n\t\tself.element.addEventListener(\"contextmenu\", function (e) {\n\t\t\tself.groupManager.table.options.groupContext.call(self.groupManager.table, e, self.getComponent());\n\t\t});\n\t}\n\n\tif ((self.groupManager.table.options.groupContextMenu || self.groupManager.table.options.groupClickMenu) && self.groupManager.table.modExists(\"menu\")) {\n\t\tself.groupManager.table.modules.menu.initializeGroup.call(self.groupManager.table.modules.menu, self);\n\t}\n\n\tif (self.groupManager.table.options.groupTap) {\n\n\t\ttap = false;\n\n\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\t\t\ttap = true;\n\t\t}, { passive: true });\n\n\t\tself.element.addEventListener(\"touchend\", function (e) {\n\t\t\tif (tap) {\n\t\t\t\tself.groupManager.table.options.groupTap(e, self.getComponent());\n\t\t\t}\n\n\t\t\ttap = false;\n\t\t});\n\t}\n\n\tif (self.groupManager.table.options.groupDblTap) {\n\n\t\tdblTap = null;\n\n\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\tif (dblTap) {\n\t\t\t\tclearTimeout(dblTap);\n\t\t\t\tdblTap = null;\n\n\t\t\t\tself.groupManager.table.options.groupDblTap(e, self.getComponent());\n\t\t\t} else {\n\n\t\t\t\tdblTap = setTimeout(function () {\n\t\t\t\t\tclearTimeout(dblTap);\n\t\t\t\t\tdblTap = null;\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (self.groupManager.table.options.groupTapHold) {\n\n\t\ttapHold = null;\n\n\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\t\t\tclearTimeout(tapHold);\n\n\t\t\ttapHold = setTimeout(function () {\n\t\t\t\tclearTimeout(tapHold);\n\t\t\t\ttapHold = null;\n\t\t\t\ttap = false;\n\t\t\t\tself.groupManager.table.options.groupTapHold(e, self.getComponent());\n\t\t\t}, 1000);\n\t\t}, { passive: true });\n\n\t\tself.element.addEventListener(\"touchend\", function (e) {\n\t\t\tclearTimeout(tapHold);\n\t\t\ttapHold = null;\n\t\t});\n\t}\n\n\tif (self.groupManager.table.options.groupToggleElement) {\n\t\ttoggleElement = self.groupManager.table.options.groupToggleElement == \"arrow\" ? self.arrowElement : self.element;\n\n\t\ttoggleElement.addEventListener(\"click\", function (e) {\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tself.toggleVisibility();\n\t\t});\n\t}\n};\n\nGroup.prototype._createGroup = function (groupID, level) {\n\tvar groupKey = level + \"_\" + groupID;\n\tvar group = new Group(this.groupManager, this, level, groupID, this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n\n\tthis.groups[groupKey] = group;\n\tthis.groupList.push(group);\n};\n\nGroup.prototype._addRowToGroup = function (row) {\n\n\tvar level = this.level + 1;\n\n\tif (this.hasSubGroups) {\n\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n\t\t    groupKey = level + \"_\" + groupID;\n\n\t\tif (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n\t\t\tif (this.groups[groupKey]) {\n\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this.groups[groupKey]) {\n\t\t\t\tthis._createGroup(groupID, level);\n\t\t\t}\n\n\t\t\tthis.groups[groupKey].addRow(row);\n\t\t}\n\t}\n};\n\nGroup.prototype._addRow = function (row) {\n\tthis.rows.push(row);\n\trow.modules.group = this;\n};\n\nGroup.prototype.insertRow = function (row, to, after) {\n\tvar data = this.conformRowData({});\n\n\trow.updateData(data);\n\n\tvar toIndex = this.rows.indexOf(to);\n\n\tif (toIndex > -1) {\n\t\tif (after) {\n\t\t\tthis.rows.splice(toIndex + 1, 0, row);\n\t\t} else {\n\t\t\tthis.rows.splice(toIndex, 0, row);\n\t\t}\n\t} else {\n\t\tif (after) {\n\t\t\tthis.rows.push(row);\n\t\t} else {\n\t\t\tthis.rows.unshift(row);\n\t\t}\n\t}\n\n\trow.modules.group = this;\n\n\tthis.generateGroupHeaderContents();\n\n\tif (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t}\n\n\tthis.groupManager.updateGroupRows(true);\n};\n\nGroup.prototype.scrollHeader = function (left) {\n\tthis.arrowElement.style.marginLeft = left;\n\n\tthis.groupList.forEach(function (child) {\n\t\tchild.scrollHeader(left);\n\t});\n};\n\nGroup.prototype.getRowIndex = function (row) {};\n\n//update row data to match grouping contraints\nGroup.prototype.conformRowData = function (data) {\n\tif (this.field) {\n\t\tdata[this.field] = this.key;\n\t} else {\n\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n\t}\n\n\tif (this.parent) {\n\t\tdata = this.parent.conformRowData(data);\n\t}\n\n\treturn data;\n};\n\nGroup.prototype.removeRow = function (row) {\n\tvar index = this.rows.indexOf(row);\n\tvar el = row.getElement();\n\n\tif (index > -1) {\n\t\tthis.rows.splice(index, 1);\n\t}\n\n\tif (!this.groupManager.table.options.groupValues && !this.rows.length) {\n\t\tif (this.parent) {\n\t\t\tthis.parent.removeGroup(this);\n\t\t} else {\n\t\t\tthis.groupManager.removeGroup(this);\n\t\t}\n\n\t\tthis.groupManager.updateGroupRows(true);\n\t} else {\n\n\t\tif (el.parentNode) {\n\t\t\tel.parentNode.removeChild(el);\n\t\t}\n\n\t\tthis.generateGroupHeaderContents();\n\n\t\tif (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t}\n\t}\n};\n\nGroup.prototype.removeGroup = function (group) {\n\tvar groupKey = group.level + \"_\" + group.key,\n\t    index;\n\n\tif (this.groups[groupKey]) {\n\t\tdelete this.groups[groupKey];\n\n\t\tindex = this.groupList.indexOf(group);\n\n\t\tif (index > -1) {\n\t\t\tthis.groupList.splice(index, 1);\n\t\t}\n\n\t\tif (!this.groupList.length) {\n\t\t\tif (this.parent) {\n\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t} else {\n\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t}\n\t\t}\n\t}\n};\n\nGroup.prototype.getHeadersAndRows = function (noCalc) {\n\tvar output = [];\n\n\toutput.push(this);\n\n\tthis._visSet();\n\n\tif (this.visible) {\n\t\tif (this.groupList.length) {\n\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\toutput = output.concat(group.getHeadersAndRows(noCalc));\n\t\t\t});\n\t\t} else {\n\t\t\tif (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n\t\t\t\tif (this.calcs.top) {\n\t\t\t\t\tthis.calcs.top.detachElement();\n\t\t\t\t\tthis.calcs.top.deleteCells();\n\t\t\t\t}\n\n\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\toutput.push(this.calcs.top);\n\t\t\t}\n\n\t\t\toutput = output.concat(this.rows);\n\n\t\t\tif (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n\t\t\t\tif (this.calcs.bottom) {\n\t\t\t\t\tthis.calcs.bottom.detachElement();\n\t\t\t\t\tthis.calcs.bottom.deleteCells();\n\t\t\t\t}\n\n\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\") {\n\n\t\t\tif (this.groupManager.table.modExists(\"columnCalcs\")) {\n\n\t\t\t\tif (!noCalc && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n\t\t\t\t\tif (this.calcs.top) {\n\t\t\t\t\t\tthis.calcs.top.detachElement();\n\t\t\t\t\t\tthis.calcs.top.deleteCells();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.groupManager.table.options.groupClosedShowCalcs) {\n\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!noCalc && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n\t\t\t\t\tif (this.calcs.bottom) {\n\t\t\t\t\t\tthis.calcs.bottom.detachElement();\n\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.groupManager.table.options.groupClosedShowCalcs) {\n\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn output;\n};\n\nGroup.prototype.getData = function (visible, transform) {\n\tvar self = this,\n\t    output = [];\n\n\tthis._visSet();\n\n\tif (!visible || visible && this.visible) {\n\t\tthis.rows.forEach(function (row) {\n\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t});\n\t}\n\n\treturn output;\n};\n\n// Group.prototype.getRows = function(){\n// \tthis._visSet();\n\n// \treturn this.visible ? this.rows : [];\n// };\n\nGroup.prototype.getRowCount = function () {\n\tvar count = 0;\n\n\tif (this.groupList.length) {\n\t\tthis.groupList.forEach(function (group) {\n\t\t\tcount += group.getRowCount();\n\t\t});\n\t} else {\n\t\tcount = this.rows.length;\n\t}\n\treturn count;\n};\n\nGroup.prototype.toggleVisibility = function () {\n\tif (this.visible) {\n\t\tthis.hide();\n\t} else {\n\t\tthis.show();\n\t}\n};\n\nGroup.prototype.hide = function () {\n\tthis.visible = false;\n\n\tif (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n\n\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\n\t\tif (this.groupList.length) {\n\t\t\tthis.groupList.forEach(function (group) {\n\n\t\t\t\tvar rows = group.getHeadersAndRows();\n\n\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\trow.detachElement();\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tthis.rows.forEach(function (row) {\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t});\n\t\t}\n\n\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n\n\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n\t} else {\n\t\tthis.groupManager.updateGroupRows(true);\n\t}\n\n\tthis.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), false);\n};\n\nGroup.prototype.show = function () {\n\tvar self = this;\n\n\tself.visible = true;\n\n\tif (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n\n\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\n\t\tvar prev = self.getElement();\n\n\t\tif (this.groupList.length) {\n\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\tvar rows = group.getHeadersAndRows();\n\n\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\trow.initialize();\n\t\t\t\t\tprev = rowEl;\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tself.rows.forEach(function (row) {\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\trow.initialize();\n\t\t\t\tprev = rowEl;\n\t\t\t});\n\t\t}\n\n\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n\n\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n\t} else {\n\t\tthis.groupManager.updateGroupRows(true);\n\t}\n\n\tthis.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), true);\n};\n\nGroup.prototype._visSet = function () {\n\tvar data = [];\n\n\tif (typeof this.visible == \"function\") {\n\n\t\tthis.rows.forEach(function (row) {\n\t\t\tdata.push(row.getData());\n\t\t});\n\n\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n\t}\n};\n\nGroup.prototype.getRowGroup = function (row) {\n\tvar match = false;\n\tif (this.groupList.length) {\n\t\tthis.groupList.forEach(function (group) {\n\t\t\tvar result = group.getRowGroup(row);\n\n\t\t\tif (result) {\n\t\t\t\tmatch = result;\n\t\t\t}\n\t\t});\n\t} else {\n\t\tif (this.rows.find(function (item) {\n\t\t\treturn item === row;\n\t\t})) {\n\t\t\tmatch = this;\n\t\t}\n\t}\n\n\treturn match;\n};\n\nGroup.prototype.getSubGroups = function (component) {\n\tvar output = [];\n\n\tthis.groupList.forEach(function (child) {\n\t\toutput.push(component ? child.getComponent() : child);\n\t});\n\n\treturn output;\n};\n\nGroup.prototype.getRows = function (compoment) {\n\tvar output = [];\n\n\tthis.rows.forEach(function (row) {\n\t\toutput.push(compoment ? row.getComponent() : row);\n\t});\n\n\treturn output;\n};\n\nGroup.prototype.generateGroupHeaderContents = function () {\n\tvar data = [];\n\n\tthis.rows.forEach(function (row) {\n\t\tdata.push(row.getData());\n\t});\n\n\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\n\twhile (this.element.firstChild) {\n\t\tthis.element.removeChild(this.element.firstChild);\n\t}if (typeof this.elementContents === \"string\") {\n\t\tthis.element.innerHTML = this.elementContents;\n\t} else {\n\t\tthis.element.appendChild(this.elementContents);\n\t}\n\n\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\n};\n\nGroup.prototype.getPath = function () {\n\tvar path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n\tpath.unshift(this.key);\n\tif (this.parent) {\n\t\tthis.parent.getPath(path);\n\t}\n\treturn path;\n};\n////////////// Standard Row Functions //////////////\n\nGroup.prototype.getElement = function () {\n\tthis.addBindingsd = false;\n\n\tthis._visSet();\n\n\tif (this.visible) {\n\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t} else {\n\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t}\n\n\tfor (var i = 0; i < this.element.childNodes.length; ++i) {\n\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n\t}\n\n\tthis.generateGroupHeaderContents();\n\n\t// this.addBindings();\n\n\treturn this.element;\n};\n\nGroup.prototype.detachElement = function () {\n\tif (this.element && this.element.parentNode) {\n\t\tthis.element.parentNode.removeChild(this.element);\n\t}\n};\n\n//normalize the height of elements in the row\nGroup.prototype.normalizeHeight = function () {\n\tthis.setHeight(this.element.clientHeight);\n};\n\nGroup.prototype.initialize = function (force) {\n\tif (!this.initialized || force) {\n\t\tthis.normalizeHeight();\n\t\tthis.initialized = true;\n\t}\n};\n\nGroup.prototype.reinitialize = function () {\n\tthis.initialized = false;\n\tthis.height = 0;\n\n\tif (Tabulator.prototype.helpers.elVisible(this.element)) {\n\t\tthis.initialize(true);\n\t}\n};\n\nGroup.prototype.setHeight = function (height) {\n\tif (this.height != height) {\n\t\tthis.height = height;\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t}\n};\n\n//return rows outer height\nGroup.prototype.getHeight = function () {\n\treturn this.outerHeight;\n};\n\nGroup.prototype.getGroup = function () {\n\treturn this;\n};\n\nGroup.prototype.reinitializeHeight = function () {};\nGroup.prototype.calcHeight = function () {};\nGroup.prototype.setCellHeight = function () {};\nGroup.prototype.clearCellHeight = function () {};\n\n//////////////// Object Generation /////////////////\nGroup.prototype.getComponent = function () {\n\tif (!this.component) {\n\t\tthis.component = new GroupComponent(this);\n\t}\n\n\treturn this.component;\n};\n\n//////////////////////////////////////////////////\n////////////// Group Row Extension ///////////////\n//////////////////////////////////////////////////\n\nvar GroupRows = function GroupRows(table) {\n\n\tthis.table = table; //hold Tabulator object\n\n\tthis.groupIDLookups = false; //enable table grouping and set field to group by\n\tthis.startOpen = [function () {\n\t\treturn false;\n\t}]; //starting state of group\n\tthis.headerGenerator = [function () {\n\t\treturn \"\";\n\t}];\n\tthis.groupList = []; //ordered list of groups\n\tthis.allowedValues = false;\n\tthis.groups = {}; //hold row groups\n\tthis.displayIndex = 0; //index in display pipeline\n};\n\n//initialize group configuration\nGroupRows.prototype.initialize = function () {\n\tvar self = this,\n\t    groupBy = self.table.options.groupBy,\n\t    startOpen = self.table.options.groupStartOpen,\n\t    groupHeader = self.table.options.groupHeader;\n\n\tthis.allowedValues = self.table.options.groupValues;\n\n\tif (Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length) {\n\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n\t}\n\n\tself.headerGenerator = [function () {\n\t\treturn \"\";\n\t}];\n\tthis.startOpen = [function () {\n\t\treturn false;\n\t}]; //starting state of group\n\n\tself.table.modules.localize.bind(\"groups|item\", function (langValue, lang) {\n\t\tself.headerGenerator[0] = function (value, count, data) {\n\t\t\t//header layout function\n\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + (count === 1 ? langValue : lang.groups.items) + \")</span>\";\n\t\t};\n\t});\n\n\tthis.groupIDLookups = [];\n\n\tif (Array.isArray(groupBy) || groupBy) {\n\t\tif (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\") {\n\t\t\tthis.table.modules.columnCalcs.removeCalcs();\n\t\t}\n\t} else {\n\t\tif (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\") {\n\n\t\t\tvar cols = this.table.columnManager.getRealColumns();\n\n\t\t\tcols.forEach(function (col) {\n\t\t\t\tif (col.definition.topCalc) {\n\t\t\t\t\tself.table.modules.columnCalcs.initializeTopRow();\n\t\t\t\t}\n\n\t\t\t\tif (col.definition.bottomCalc) {\n\t\t\t\t\tself.table.modules.columnCalcs.initializeBottomRow();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tif (!Array.isArray(groupBy)) {\n\t\tgroupBy = [groupBy];\n\t}\n\n\tgroupBy.forEach(function (group, i) {\n\t\tvar lookupFunc, column;\n\n\t\tif (typeof group == \"function\") {\n\t\t\tlookupFunc = group;\n\t\t} else {\n\t\t\tcolumn = self.table.columnManager.getColumnByField(group);\n\n\t\t\tif (column) {\n\t\t\t\tlookupFunc = function lookupFunc(data) {\n\t\t\t\t\treturn column.getFieldValue(data);\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tlookupFunc = function lookupFunc(data) {\n\t\t\t\t\treturn data[group];\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tself.groupIDLookups.push({\n\t\t\tfield: typeof group === \"function\" ? false : group,\n\t\t\tfunc: lookupFunc,\n\t\t\tvalues: self.allowedValues ? self.allowedValues[i] : false\n\t\t});\n\t});\n\n\tif (startOpen) {\n\n\t\tif (!Array.isArray(startOpen)) {\n\t\t\tstartOpen = [startOpen];\n\t\t}\n\n\t\tstartOpen.forEach(function (level) {\n\t\t\tlevel = typeof level == \"function\" ? level : function () {\n\t\t\t\treturn true;\n\t\t\t};\n\t\t});\n\n\t\tself.startOpen = startOpen;\n\t}\n\n\tif (groupHeader) {\n\t\tself.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n\t}\n\n\tthis.initialized = true;\n};\n\nGroupRows.prototype.setDisplayIndex = function (index) {\n\tthis.displayIndex = index;\n};\n\nGroupRows.prototype.getDisplayIndex = function () {\n\treturn this.displayIndex;\n};\n\n//return appropriate rows with group headers\nGroupRows.prototype.getRows = function (rows) {\n\tif (this.groupIDLookups.length) {\n\n\t\tthis.table.options.dataGrouping.call(this.table);\n\n\t\tthis.generateGroups(rows);\n\n\t\tif (this.table.options.dataGrouped) {\n\t\t\tthis.table.options.dataGrouped.call(this.table, this.getGroups(true));\n\t\t}\n\n\t\treturn this.updateGroupRows();\n\t} else {\n\t\treturn rows.slice(0);\n\t}\n};\n\nGroupRows.prototype.getGroups = function (compoment) {\n\tvar groupComponents = [];\n\n\tthis.groupList.forEach(function (group) {\n\t\tgroupComponents.push(compoment ? group.getComponent() : group);\n\t});\n\n\treturn groupComponents;\n};\n\nGroupRows.prototype.getChildGroups = function (group) {\n\tvar _this69 = this;\n\n\tvar groupComponents = [];\n\n\tif (!group) {\n\t\tgroup = this;\n\t}\n\n\tgroup.groupList.forEach(function (child) {\n\t\tif (child.groupList.length) {\n\t\t\tgroupComponents = groupComponents.concat(_this69.getChildGroups(child));\n\t\t} else {\n\t\t\tgroupComponents.push(child);\n\t\t}\n\t});\n\n\treturn groupComponents;\n};\n\nGroupRows.prototype.wipe = function () {\n\tthis.groupList.forEach(function (group) {\n\t\tgroup.wipe();\n\t});\n};\n\nGroupRows.prototype.pullGroupListData = function (groupList) {\n\tvar self = this;\n\tvar groupListData = [];\n\n\tgroupList.forEach(function (group) {\n\t\tvar groupHeader = {};\n\t\tgroupHeader.level = 0;\n\t\tgroupHeader.rowCount = 0;\n\t\tgroupHeader.headerContent = \"\";\n\t\tvar childData = [];\n\n\t\tif (group.hasSubGroups) {\n\t\t\tchildData = self.pullGroupListData(group.groupList);\n\n\t\t\tgroupHeader.level = group.level;\n\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n\n\t\t\tgroupListData.push(groupHeader);\n\t\t\tgroupListData = groupListData.concat(childData);\n\t\t} else {\n\t\t\tgroupHeader.level = group.level;\n\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n\t\t\tgroupHeader.rowCount = group.getRows().length;\n\n\t\t\tgroupListData.push(groupHeader);\n\n\t\t\tgroup.getRows().forEach(function (row) {\n\t\t\t\tgroupListData.push(row.getData(\"data\"));\n\t\t\t});\n\t\t}\n\t});\n\n\treturn groupListData;\n};\n\nGroupRows.prototype.getGroupedData = function () {\n\n\treturn this.pullGroupListData(this.groupList);\n};\n\nGroupRows.prototype.getRowGroup = function (row) {\n\tvar match = false;\n\n\tthis.groupList.forEach(function (group) {\n\t\tvar result = group.getRowGroup(row);\n\n\t\tif (result) {\n\t\t\tmatch = result;\n\t\t}\n\t});\n\n\treturn match;\n};\n\nGroupRows.prototype.countGroups = function () {\n\treturn this.groupList.length;\n};\n\nGroupRows.prototype.generateGroups = function (rows) {\n\tvar self = this,\n\t    oldGroups = self.groups;\n\n\tself.groups = {};\n\tself.groupList = [];\n\n\tif (this.allowedValues && this.allowedValues[0]) {\n\t\tthis.allowedValues[0].forEach(function (value) {\n\t\t\tself.createGroup(value, 0, oldGroups);\n\t\t});\n\n\t\trows.forEach(function (row) {\n\t\t\tself.assignRowToExistingGroup(row, oldGroups);\n\t\t});\n\t} else {\n\t\trows.forEach(function (row) {\n\t\t\tself.assignRowToGroup(row, oldGroups);\n\t\t});\n\t}\n};\n\nGroupRows.prototype.createGroup = function (groupID, level, oldGroups) {\n\tvar groupKey = level + \"_\" + groupID,\n\t    group;\n\n\toldGroups = oldGroups || [];\n\n\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n\n\tthis.groups[groupKey] = group;\n\tthis.groupList.push(group);\n};\n\n// GroupRows.prototype.assignRowToGroup = function(row, oldGroups){\n// \tvar groupID = this.groupIDLookups[0].func(row.getData()),\n// \tgroupKey = \"0_\" + groupID;\n\n// \tif(!this.groups[groupKey]){\n// \t\tthis.createGroup(groupID, 0, oldGroups);\n// \t}\n\n// \tthis.groups[groupKey].addRow(row);\n// };\n\nGroupRows.prototype.assignRowToExistingGroup = function (row, oldGroups) {\n\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t    groupKey = \"0_\" + groupID;\n\n\tif (this.groups[groupKey]) {\n\t\tthis.groups[groupKey].addRow(row);\n\t}\n};\n\nGroupRows.prototype.assignRowToGroup = function (row, oldGroups) {\n\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t    newGroupNeeded = !this.groups[\"0_\" + groupID];\n\n\tif (newGroupNeeded) {\n\t\tthis.createGroup(groupID, 0, oldGroups);\n\t}\n\n\tthis.groups[\"0_\" + groupID].addRow(row);\n\n\treturn !newGroupNeeded;\n};\n\nGroupRows.prototype.reassignRowToGroup = function (row) {\n\tvar oldRowGroup = row.getGroup(),\n\t    oldGroupPath = oldRowGroup.getPath(),\n\t    newGroupPath = this.getExpectedPath(row),\n\t    samePath = true;\n\t// figure out if new group path is the same as old group path\n\tvar samePath = oldGroupPath.length == newGroupPath.length && oldGroupPath.every(function (element, index) {\n\t\treturn element === newGroupPath[index];\n\t});\n\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n\tif (!samePath) {\n\t\toldRowGroup.removeRow(row);\n\t\tthis.assignRowToGroup(row, self.groups);\n\t\tthis.table.rowManager.refreshActiveData(\"group\", false, true);\n\t}\n};\n\nGroupRows.prototype.getExpectedPath = function (row) {\n\tvar groupPath = [],\n\t    rowData = row.getData();\n\tthis.groupIDLookups.forEach(function (groupId) {\n\t\tgroupPath.push(groupId.func(rowData));\n\t});\n\treturn groupPath;\n};\n\nGroupRows.prototype.updateGroupRows = function (force) {\n\tvar self = this,\n\t    output = [],\n\t    oldRowCount;\n\n\tself.groupList.forEach(function (group) {\n\t\toutput = output.concat(group.getHeadersAndRows());\n\t});\n\n\t//force update of table display\n\tif (force) {\n\n\t\tvar displayIndex = self.table.rowManager.setDisplayRows(output, this.getDisplayIndex());\n\n\t\tif (displayIndex !== true) {\n\t\t\tthis.setDisplayIndex(displayIndex);\n\t\t}\n\n\t\tself.table.rowManager.refreshActiveData(\"group\", true, true);\n\t}\n\n\treturn output;\n};\n\nGroupRows.prototype.scrollHeaders = function (left) {\n\tif (this.table.options.virtualDomHoz) {\n\t\tleft -= this.table.vdomHoz.vDomPadLeft;\n\t}\n\n\tleft = left + \"px\";\n\n\tthis.groupList.forEach(function (group) {\n\t\tgroup.scrollHeader(left);\n\t});\n};\n\nGroupRows.prototype.removeGroup = function (group) {\n\tvar groupKey = group.level + \"_\" + group.key,\n\t    index;\n\n\tif (this.groups[groupKey]) {\n\t\tdelete this.groups[groupKey];\n\n\t\tindex = this.groupList.indexOf(group);\n\n\t\tif (index > -1) {\n\t\t\tthis.groupList.splice(index, 1);\n\t\t}\n\t}\n};\n\nTabulator.prototype.registerModule(\"groupRows\", GroupRows);\nvar History = function History(table) {\n\tthis.table = table; //hold Tabulator object\n\n\tthis.history = [];\n\tthis.index = -1;\n};\n\nHistory.prototype.clear = function () {\n\tthis.history = [];\n\tthis.index = -1;\n};\n\nHistory.prototype.action = function (type, component, data) {\n\n\tthis.history = this.history.slice(0, this.index + 1);\n\n\tthis.history.push({\n\t\ttype: type,\n\t\tcomponent: component,\n\t\tdata: data\n\t});\n\n\tthis.index++;\n};\n\nHistory.prototype.getHistoryUndoSize = function () {\n\treturn this.index + 1;\n};\n\nHistory.prototype.getHistoryRedoSize = function () {\n\treturn this.history.length - (this.index + 1);\n};\n\nHistory.prototype.clearComponentHistory = function (component) {\n\tvar index = this.history.findIndex(function (item) {\n\t\treturn item.component === component;\n\t});\n\n\tif (index > -1) {\n\t\tthis.history.splice(index, 1);\n\t\tif (index <= this.index) {\n\t\t\tthis.index--;\n\t\t}\n\n\t\tthis.clearComponentHistory(component);\n\t}\n};\n\nHistory.prototype.undo = function () {\n\n\tif (this.index > -1) {\n\t\tvar action = this.history[this.index];\n\n\t\tthis.undoers[action.type].call(this, action);\n\n\t\tthis.index--;\n\n\t\tthis.table.options.historyUndo.call(this.table, action.type, action.component.getComponent(), action.data);\n\n\t\treturn true;\n\t} else {\n\t\tconsole.warn(\"History Undo Error - No more history to undo\");\n\t\treturn false;\n\t}\n};\n\nHistory.prototype.redo = function () {\n\tif (this.history.length - 1 > this.index) {\n\n\t\tthis.index++;\n\n\t\tvar action = this.history[this.index];\n\n\t\tthis.redoers[action.type].call(this, action);\n\n\t\tthis.table.options.historyRedo.call(this.table, action.type, action.component.getComponent(), action.data);\n\n\t\treturn true;\n\t} else {\n\t\tconsole.warn(\"History Redo Error - No more history to redo\");\n\t\treturn false;\n\t}\n};\n\nHistory.prototype.undoers = {\n\tcellEdit: function cellEdit(action) {\n\t\taction.component.setValueProcessData(action.data.oldValue);\n\t},\n\n\trowAdd: function rowAdd(action) {\n\t\taction.component.deleteActual();\n\t},\n\n\trowDelete: function rowDelete(action) {\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowMove: function rowMove(action) {\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\n\t\tthis.table.rowManager.redraw();\n\t}\n};\n\nHistory.prototype.redoers = {\n\tcellEdit: function cellEdit(action) {\n\t\taction.component.setValueProcessData(action.data.newValue);\n\t},\n\n\trowAdd: function rowAdd(action) {\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowDelete: function rowDelete(action) {\n\t\taction.component.deleteActual();\n\t},\n\n\trowMove: function rowMove(action) {\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\n\t\tthis.table.rowManager.redraw();\n\t}\n};\n\n//rebind rows to new element after deletion\nHistory.prototype._rebindRow = function (oldRow, newRow) {\n\tthis.history.forEach(function (action) {\n\t\tif (action.component instanceof Row) {\n\t\t\tif (action.component === oldRow) {\n\t\t\t\taction.component = newRow;\n\t\t\t}\n\t\t} else if (action.component instanceof Cell) {\n\t\t\tif (action.component.row === oldRow) {\n\t\t\t\tvar field = action.component.column.getField();\n\n\t\t\t\tif (field) {\n\t\t\t\t\taction.component = newRow.getCell(field);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n};\n\nTabulator.prototype.registerModule(\"history\", History);\nvar HtmlTableImport = function HtmlTableImport(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.fieldIndex = [];\n\tthis.hasIndex = false;\n};\n\nHtmlTableImport.prototype.parseTable = function () {\n\tvar self = this,\n\t    element = self.table.element,\n\t    options = self.table.options,\n\t    columns = options.columns,\n\t    headers = element.getElementsByTagName(\"th\"),\n\t    rows = element.getElementsByTagName(\"tbody\")[0],\n\t    data = [],\n\t    newTable;\n\n\tself.hasIndex = false;\n\n\tself.table.options.htmlImporting.call(this.table);\n\n\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n\t//check for tablator inline options\n\tself._extractOptions(element, options);\n\n\tif (headers.length) {\n\t\tself._extractHeaders(headers, rows);\n\t} else {\n\t\tself._generateBlankHeaders(headers, rows);\n\t}\n\n\t//iterate through table rows and build data set\n\tfor (var index = 0; index < rows.length; index++) {\n\t\tvar row = rows[index],\n\t\t    cells = row.getElementsByTagName(\"td\"),\n\t\t    item = {};\n\n\t\t//create index if the dont exist in table\n\t\tif (!self.hasIndex) {\n\t\t\titem[options.index] = index;\n\t\t}\n\n\t\tfor (var i = 0; i < cells.length; i++) {\n\t\t\tvar cell = cells[i];\n\t\t\tif (typeof this.fieldIndex[i] !== \"undefined\") {\n\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\n\t\t\t}\n\t\t}\n\n\t\t//add row data to item\n\t\tdata.push(item);\n\t}\n\n\t//create new element\n\tvar newElement = document.createElement(\"div\");\n\n\t//transfer attributes to new element\n\tvar attributes = element.attributes;\n\n\t// loop through attributes and apply them on div\n\n\tfor (var i in attributes) {\n\t\tif (_typeof(attributes[i]) == \"object\") {\n\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\n\t\t}\n\t}\n\n\t// replace table with div element\n\telement.parentNode.replaceChild(newElement, element);\n\n\toptions.data = data;\n\n\tself.table.options.htmlImported.call(this.table);\n\n\t// // newElement.tabulator(options);\n\n\tthis.table.element = newElement;\n};\n\n//extract tabulator attribute options\nHtmlTableImport.prototype._extractOptions = function (element, options, defaultOptions) {\n\tvar attributes = element.attributes;\n\tvar optionsArr = defaultOptions ? Object.assign([], defaultOptions) : Object.keys(options);\n\tvar optionsList = {};\n\n\toptionsArr.forEach(function (item) {\n\t\toptionsList[item.toLowerCase()] = item;\n\t});\n\n\tfor (var index in attributes) {\n\t\tvar attrib = attributes[index];\n\t\tvar name;\n\n\t\tif (attrib && (typeof attrib === 'undefined' ? 'undefined' : _typeof(attrib)) == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0) {\n\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\n\n\t\t\tif (typeof optionsList[name] !== \"undefined\") {\n\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\n\t\t\t}\n\t\t}\n\t}\n};\n\n//get value of attribute\nHtmlTableImport.prototype._attribValue = function (value) {\n\tif (value === \"true\") {\n\t\treturn true;\n\t}\n\n\tif (value === \"false\") {\n\t\treturn false;\n\t}\n\n\treturn value;\n};\n\n//find column if it has already been defined\nHtmlTableImport.prototype._findCol = function (title) {\n\tvar match = this.table.options.columns.find(function (column) {\n\t\treturn column.title === title;\n\t});\n\n\treturn match || false;\n};\n\n//extract column from headers\nHtmlTableImport.prototype._extractHeaders = function (headers, rows) {\n\tfor (var index = 0; index < headers.length; index++) {\n\t\tvar header = headers[index],\n\t\t    exists = false,\n\t\t    col = this._findCol(header.textContent),\n\t\t    width,\n\t\t    attributes;\n\n\t\tif (col) {\n\t\t\texists = true;\n\t\t} else {\n\t\t\tcol = { title: header.textContent.trim() };\n\t\t}\n\n\t\tif (!col.field) {\n\t\t\tcol.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\n\t\t}\n\n\t\twidth = header.getAttribute(\"width\");\n\n\t\tif (width && !col.width) {\n\t\t\tcol.width = width;\n\t\t}\n\n\t\t//check for tablator inline options\n\t\tattributes = header.attributes;\n\n\t\t// //check for tablator inline options\n\t\tthis._extractOptions(header, col, Column.prototype.defaultOptionList);\n\n\t\tthis.fieldIndex[index] = col.field;\n\n\t\tif (col.field == this.table.options.index) {\n\t\t\tthis.hasIndex = true;\n\t\t}\n\n\t\tif (!exists) {\n\t\t\tthis.table.options.columns.push(col);\n\t\t}\n\t}\n};\n\n//generate blank headers\nHtmlTableImport.prototype._generateBlankHeaders = function (headers, rows) {\n\tfor (var index = 0; index < headers.length; index++) {\n\t\tvar header = headers[index],\n\t\t    col = { title: \"\", field: \"col\" + index };\n\n\t\tthis.fieldIndex[index] = col.field;\n\n\t\tvar width = header.getAttribute(\"width\");\n\n\t\tif (width) {\n\t\t\tcol.width = width;\n\t\t}\n\n\t\tthis.table.options.columns.push(col);\n\t}\n};\n\nTabulator.prototype.registerModule(\"htmlTableImport\", HtmlTableImport);\nvar Keybindings = function Keybindings(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.watchKeys = null;\n\tthis.pressedKeys = null;\n\tthis.keyupBinding = false;\n\tthis.keydownBinding = false;\n};\n\nKeybindings.prototype.initialize = function () {\n\tvar bindings = this.table.options.keybindings,\n\t    mergedBindings = {};\n\n\tthis.watchKeys = {};\n\tthis.pressedKeys = [];\n\n\tif (bindings !== false) {\n\n\t\tfor (var key in this.bindings) {\n\t\t\tmergedBindings[key] = this.bindings[key];\n\t\t}\n\n\t\tif (Object.keys(bindings).length) {\n\n\t\t\tfor (var _key in bindings) {\n\t\t\t\tmergedBindings[_key] = bindings[_key];\n\t\t\t}\n\t\t}\n\n\t\tthis.mapBindings(mergedBindings);\n\t\tthis.bindEvents();\n\t}\n};\n\nKeybindings.prototype.mapBindings = function (bindings) {\n\tvar _this70 = this;\n\n\tvar self = this;\n\n\tvar _loop2 = function _loop2(key) {\n\n\t\tif (_this70.actions[key]) {\n\n\t\t\tif (bindings[key]) {\n\n\t\t\t\tif (_typeof(bindings[key]) !== \"object\") {\n\t\t\t\t\tbindings[key] = [bindings[key]];\n\t\t\t\t}\n\n\t\t\t\tbindings[key].forEach(function (binding) {\n\t\t\t\t\tself.mapBinding(key, binding);\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\n\t\t}\n\t};\n\n\tfor (var key in bindings) {\n\t\t_loop2(key);\n\t}\n};\n\nKeybindings.prototype.mapBinding = function (action, symbolsList) {\n\tvar self = this;\n\n\tvar binding = {\n\t\taction: this.actions[action],\n\t\tkeys: [],\n\t\tctrl: false,\n\t\tshift: false,\n\t\tmeta: false\n\t};\n\n\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n\n\tsymbols.forEach(function (symbol) {\n\t\tswitch (symbol) {\n\t\t\tcase \"ctrl\":\n\t\t\t\tbinding.ctrl = true;\n\t\t\t\tbreak;\n\n\t\t\tcase \"shift\":\n\t\t\t\tbinding.shift = true;\n\t\t\t\tbreak;\n\n\t\t\tcase \"meta\":\n\t\t\t\tbinding.meta = true;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tsymbol = parseInt(symbol);\n\t\t\t\tbinding.keys.push(symbol);\n\n\t\t\t\tif (!self.watchKeys[symbol]) {\n\t\t\t\t\tself.watchKeys[symbol] = [];\n\t\t\t\t}\n\n\t\t\t\tself.watchKeys[symbol].push(binding);\n\t\t}\n\t});\n};\n\nKeybindings.prototype.bindEvents = function () {\n\tvar self = this;\n\n\tthis.keyupBinding = function (e) {\n\t\tvar code = e.keyCode;\n\t\tvar bindings = self.watchKeys[code];\n\n\t\tif (bindings) {\n\n\t\t\tself.pressedKeys.push(code);\n\n\t\t\tbindings.forEach(function (binding) {\n\t\t\t\tself.checkBinding(e, binding);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.keydownBinding = function (e) {\n\t\tvar code = e.keyCode;\n\t\tvar bindings = self.watchKeys[code];\n\n\t\tif (bindings) {\n\n\t\t\tvar index = self.pressedKeys.indexOf(code);\n\n\t\t\tif (index > -1) {\n\t\t\t\tself.pressedKeys.splice(index, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\n\n\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\n};\n\nKeybindings.prototype.clearBindings = function () {\n\tif (this.keyupBinding) {\n\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n\t}\n\n\tif (this.keydownBinding) {\n\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n\t}\n};\n\nKeybindings.prototype.checkBinding = function (e, binding) {\n\tvar self = this,\n\t    match = true;\n\n\tif (e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta) {\n\t\tbinding.keys.forEach(function (key) {\n\t\t\tvar index = self.pressedKeys.indexOf(key);\n\n\t\t\tif (index == -1) {\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\t\tif (match) {\n\t\t\tbinding.action.call(self, e);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n//default bindings\nKeybindings.prototype.bindings = {\n\tnavPrev: \"shift + 9\",\n\tnavNext: 9,\n\tnavUp: 38,\n\tnavDown: 40,\n\tscrollPageUp: 33,\n\tscrollPageDown: 34,\n\tscrollToStart: 36,\n\tscrollToEnd: 35,\n\tundo: \"ctrl + 90\",\n\tredo: \"ctrl + 89\",\n\tcopyToClipboard: \"ctrl + 67\"\n};\n\n//default actions\nKeybindings.prototype.actions = {\n\tkeyBlock: function keyBlock(e) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t},\n\tscrollPageUp: function scrollPageUp(e) {\n\t\tvar rowManager = this.table.rowManager,\n\t\t    newPos = rowManager.scrollTop - rowManager.height,\n\t\t    scrollMax = rowManager.element.scrollHeight;\n\n\t\te.preventDefault();\n\n\t\tif (rowManager.displayRowsCount) {\n\t\t\tif (newPos >= 0) {\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t} else {\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollPageDown: function scrollPageDown(e) {\n\t\tvar rowManager = this.table.rowManager,\n\t\t    newPos = rowManager.scrollTop + rowManager.height,\n\t\t    scrollMax = rowManager.element.scrollHeight;\n\n\t\te.preventDefault();\n\n\t\tif (rowManager.displayRowsCount) {\n\t\t\tif (newPos <= scrollMax) {\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t} else {\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollToStart: function scrollToStart(e) {\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif (rowManager.displayRowsCount) {\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollToEnd: function scrollToEnd(e) {\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif (rowManager.displayRowsCount) {\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tnavPrev: function navPrev(e) {\n\t\tvar cell = false;\n\n\t\tif (this.table.modExists(\"edit\")) {\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\t\t\t\te.preventDefault();\n\t\t\t\tcell.nav().prev();\n\t\t\t}\n\t\t}\n\t},\n\n\tnavNext: function navNext(e) {\n\t\tvar cell = false;\n\t\tvar newRow = this.table.options.tabEndNewRow;\n\t\tvar nav;\n\n\t\tif (this.table.modExists(\"edit\")) {\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tnav = cell.nav();\n\n\t\t\t\tif (!nav.next()) {\n\t\t\t\t\tif (newRow) {\n\n\t\t\t\t\t\tcell.getElement().firstChild.blur();\n\n\t\t\t\t\t\tif (newRow === true) {\n\t\t\t\t\t\t\tnewRow = this.table.addRow({});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (typeof newRow == \"function\") {\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewRow.then(function () {\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tnav.next();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tnavLeft: function navLeft(e) {\n\t\tvar cell = false;\n\n\t\tif (this.table.modExists(\"edit\")) {\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\t\t\t\te.preventDefault();\n\t\t\t\tcell.nav().left();\n\t\t\t}\n\t\t}\n\t},\n\n\tnavRight: function navRight(e) {\n\t\tvar cell = false;\n\n\t\tif (this.table.modExists(\"edit\")) {\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\t\t\t\te.preventDefault();\n\t\t\t\tcell.nav().right();\n\t\t\t}\n\t\t}\n\t},\n\n\tnavUp: function navUp(e) {\n\t\tvar cell = false;\n\n\t\tif (this.table.modExists(\"edit\")) {\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\t\t\t\te.preventDefault();\n\t\t\t\tcell.nav().up();\n\t\t\t}\n\t\t}\n\t},\n\n\tnavDown: function navDown(e) {\n\t\tvar cell = false;\n\n\t\tif (this.table.modExists(\"edit\")) {\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\t\t\t\te.preventDefault();\n\t\t\t\tcell.nav().down();\n\t\t\t}\n\t\t}\n\t},\n\n\tundo: function undo(e) {\n\t\tvar cell = false;\n\t\tif (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif (!cell) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.undo();\n\t\t\t}\n\t\t}\n\t},\n\n\tredo: function redo(e) {\n\t\tvar cell = false;\n\t\tif (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif (!cell) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.redo();\n\t\t\t}\n\t\t}\n\t},\n\n\tcopyToClipboard: function copyToClipboard(e) {\n\t\tif (!this.table.modules.edit.currentCell) {\n\t\t\tif (this.table.modExists(\"clipboard\", true)) {\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\n\t\t\t}\n\t\t}\n\t}\n};\n\nTabulator.prototype.registerModule(\"keybindings\", Keybindings);\nvar Menu = function Menu(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.menuEl = false;\n\tthis.blurEvent = this.hideMenu.bind(this);\n\tthis.escEvent = this.escMenu.bind(this);\n\tthis.nestedMenuBlock = false;\n};\n\nMenu.prototype.initializeColumnHeader = function (column) {\n\tvar _this71 = this;\n\n\tvar headerMenuEl;\n\n\tif (column.definition.headerContextMenu) {\n\t\tcolumn.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, column, column.definition.headerContextMenu));\n\t\tthis.tapHold(column, column.definition.headerContextMenu);\n\t}\n\n\t// if(column.definition.headerClickMenu){\n\t// \tcolumn.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, column, column.definition.headerClickMenu));\n\t// }\n\n\tif (column.definition.headerMenu) {\n\n\t\theaderMenuEl = document.createElement(\"span\");\n\t\theaderMenuEl.classList.add(\"tabulator-header-menu-button\");\n\t\theaderMenuEl.innerHTML = \"&vellip;\";\n\n\t\theaderMenuEl.addEventListener(\"click\", function (e) {\n\t\t\tvar menu = typeof column.definition.headerMenu == \"function\" ? column.definition.headerMenu(column.getComponent(), e) : column.definition.headerMenu;\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\t_this71.loadMenu(e, column, menu);\n\t\t});\n\n\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n\t}\n};\n\nMenu.prototype.LoadMenuEvent = function (component, menu, e) {\n\tmenu = typeof menu == \"function\" ? menu(component.getComponent(), e) : menu;\n\n\t// if(component instanceof Cell){\n\t// \te.stopImmediatePropagation();\n\t// }\n\n\tthis.loadMenu(e, component, menu);\n};\n\nMenu.prototype.tapHold = function (component, menu) {\n\tvar _this72 = this;\n\n\tvar element = component.getElement(),\n\t    tapHold = null,\n\t    loaded = false;\n\n\telement.addEventListener(\"touchstart\", function (e) {\n\t\tclearTimeout(tapHold);\n\t\tloaded = false;\n\n\t\ttapHold = setTimeout(function () {\n\t\t\tclearTimeout(tapHold);\n\t\t\ttapHold = null;\n\t\t\tloaded = true;\n\n\t\t\t_this72.LoadMenuEvent(component, menu, e);\n\t\t}, 1000);\n\t}, { passive: true });\n\n\telement.addEventListener(\"touchend\", function (e) {\n\t\tclearTimeout(tapHold);\n\t\ttapHold = null;\n\n\t\tif (loaded) {\n\t\t\te.preventDefault();\n\t\t}\n\t});\n};\n\nMenu.prototype.initializeCell = function (cell) {\n\tif (cell.column.definition.contextMenu) {\n\t\tcell.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, cell, cell.column.definition.contextMenu));\n\t\tthis.tapHold(cell, cell.column.definition.contextMenu);\n\t}\n\n\tif (cell.column.definition.clickMenu) {\n\t\tcell.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, cell, cell.column.definition.clickMenu));\n\t}\n};\n\nMenu.prototype.initializeRow = function (row) {\n\tif (this.table.options.rowContextMenu) {\n\t\trow.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, row, this.table.options.rowContextMenu));\n\t\tthis.tapHold(row, this.table.options.rowContextMenu);\n\t}\n\n\tif (this.table.options.rowClickMenu) {\n\t\trow.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, row, this.table.options.rowClickMenu));\n\t}\n};\n\nMenu.prototype.initializeGroup = function (group) {\n\tif (this.table.options.groupContextMenu) {\n\t\tgroup.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, group, this.table.options.groupContextMenu));\n\t\tthis.tapHold(group, this.table.options.groupContextMenu);\n\t}\n\n\tif (this.table.options.groupClickMenu) {\n\t\tgroup.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, group, this.table.options.groupClickMenu));\n\t}\n};\n\nMenu.prototype.loadMenu = function (e, component, menu) {\n\tvar _this73 = this;\n\n\tvar docHeight = Math.max(document.body.offsetHeight, window.innerHeight),\n\t    touch = !(e instanceof MouseEvent);\n\n\tif (!touch) {\n\t\te.preventDefault();\n\t}\n\n\t//abort if no menu set\n\tif (!menu || !menu.length) {\n\t\treturn;\n\t}\n\n\tif (this.nestedMenuBlock) {\n\t\t//abort if child menu already open\n\t\tif (this.isOpen()) {\n\t\t\treturn;\n\t\t}\n\t} else {\n\t\tthis.nestedMenuBlock = setTimeout(function () {\n\t\t\t_this73.nestedMenuBlock = false;\n\t\t}, 100);\n\t}\n\n\tthis.hideMenu();\n\n\tthis.menuEl = document.createElement(\"div\");\n\tthis.menuEl.classList.add(\"tabulator-menu\");\n\n\tmenu.forEach(function (item) {\n\t\tvar itemEl = document.createElement(\"div\");\n\t\tvar label = item.label;\n\t\tvar disabled = item.disabled;\n\n\t\tif (item.separator) {\n\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\n\t\t} else {\n\t\t\titemEl.classList.add(\"tabulator-menu-item\");\n\n\t\t\tif (typeof label == \"function\") {\n\t\t\t\tlabel = label(component.getComponent());\n\t\t\t}\n\n\t\t\tif (label instanceof Node) {\n\t\t\t\titemEl.appendChild(label);\n\t\t\t} else {\n\t\t\t\titemEl.innerHTML = label;\n\t\t\t}\n\n\t\t\tif (typeof disabled == \"function\") {\n\t\t\t\tdisabled = disabled(component.getComponent());\n\t\t\t}\n\n\t\t\tif (disabled) {\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\n\t\t\t\titemEl.addEventListener(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\titemEl.addEventListener(\"click\", function (e) {\n\t\t\t\t\t_this73.hideMenu();\n\t\t\t\t\titem.action(e, component.getComponent());\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t_this73.menuEl.appendChild(itemEl);\n\t});\n\n\tthis.menuEl.style.top = (touch ? e.touches[0].pageY : e.pageY) + \"px\";\n\tthis.menuEl.style.left = (touch ? e.touches[0].pageX : e.pageX) + \"px\";\n\n\tsetTimeout(function () {\n\t\t_this73.table.rowManager.element.addEventListener(\"scroll\", _this73.blurEvent);\n\t\tdocument.body.addEventListener(\"click\", _this73.blurEvent);\n\t\tdocument.body.addEventListener(\"contextmenu\", _this73.blurEvent);\n\t\tdocument.body.addEventListener(\"keydown\", _this73.escEvent);\n\t}, 100);\n\n\tdocument.body.appendChild(this.menuEl);\n\n\t//move menu to start on right edge if it is too close to the edge of the screen\n\tif (e.pageX + this.menuEl.offsetWidth >= document.body.offsetWidth) {\n\t\tthis.menuEl.style.left = \"\";\n\t\tthis.menuEl.style.right = document.body.offsetWidth - e.pageX + \"px\";\n\t}\n\n\t//move menu to start on bottom edge if it is too close to the edge of the screen\n\tif (e.pageY + this.menuEl.offsetHeight >= docHeight) {\n\t\tthis.menuEl.style.top = \"\";\n\t\tthis.menuEl.style.bottom = docHeight - e.pageY + \"px\";\n\t}\n};\n\nMenu.prototype.isOpen = function () {\n\treturn !!this.menuEl.parentNode;\n};\n\nMenu.prototype.escMenu = function (e) {\n\tif (e.keyCode == 27) {\n\t\tthis.hideMenu();\n\t}\n};\n\nMenu.prototype.hideMenu = function () {\n\tif (this.menuEl.parentNode) {\n\t\tthis.menuEl.parentNode.removeChild(this.menuEl);\n\t}\n\n\tif (this.escEvent) {\n\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\n\t}\n\n\tif (this.blurEvent) {\n\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\n\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\n\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n\t}\n};\n\n//default accessors\nMenu.prototype.menus = {};\n\nTabulator.prototype.registerModule(\"menu\", Menu);\nvar MoveColumns = function MoveColumns(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.placeholderElement = this.createPlaceholderElement();\n\tthis.hoverElement = false; //floating column header element\n\tthis.checkTimeout = false; //click check timeout holder\n\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\tthis.moving = false; //currently moving column\n\tthis.toCol = false; //destination column\n\tthis.toColAfter = false; //position of moving column relative to the desitnation column\n\tthis.startX = 0; //starting position within header element\n\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\n\tthis.autoScrollStep = 5; //auto scroll distance in pixels\n\tthis.autoScrollTimeout = false; //auto scroll timeout\n\tthis.touchMove = false;\n\n\tthis.moveHover = this.moveHover.bind(this);\n\tthis.endMove = this.endMove.bind(this);\n};\n\nMoveColumns.prototype.createPlaceholderElement = function () {\n\tvar el = document.createElement(\"div\");\n\n\tel.classList.add(\"tabulator-col\");\n\tel.classList.add(\"tabulator-col-placeholder\");\n\n\treturn el;\n};\n\nMoveColumns.prototype.initializeColumn = function (column) {\n\tvar self = this,\n\t    config = {},\n\t    colEl;\n\n\tif (!column.modules.frozen) {\n\n\t\tcolEl = column.getElement();\n\n\t\tconfig.mousemove = function (e) {\n\t\t\tif (column.parent === self.moving.parent) {\n\t\t\t\tif ((self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(colEl).left + self.table.columnManager.element.scrollLeft > column.getWidth() / 2) {\n\t\t\t\t\tif (self.toCol !== column || !self.toColAfter) {\n\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n\t\t\t\t\t\tself.moveColumn(column, true);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (self.toCol !== column || self.toColAfter) {\n\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\n\t\t\t\t\t\tself.moveColumn(column, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tcolEl.addEventListener(\"mousedown\", function (e) {\n\t\t\tself.touchMove = false;\n\t\t\tif (e.which === 1) {\n\t\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\t\tself.startMove(e, column);\n\t\t\t\t}, self.checkPeriod);\n\t\t\t}\n\t\t});\n\n\t\tcolEl.addEventListener(\"mouseup\", function (e) {\n\t\t\tif (e.which === 1) {\n\t\t\t\tif (self.checkTimeout) {\n\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tself.bindTouchEvents(column);\n\t}\n\n\tcolumn.modules.moveColumn = config;\n};\n\nMoveColumns.prototype.bindTouchEvents = function (column) {\n\tvar self = this,\n\t    colEl = column.getElement(),\n\t    startXMove = false,\n\t    //shifting center position of the cell\n\tdir = false,\n\t    currentCol,\n\t    nextCol,\n\t    prevCol,\n\t    nextColWidth,\n\t    prevColWidth,\n\t    nextColWidthLast,\n\t    prevColWidthLast;\n\n\tcolEl.addEventListener(\"touchstart\", function (e) {\n\t\tself.checkTimeout = setTimeout(function () {\n\t\t\tself.touchMove = true;\n\t\t\tcurrentCol = column;\n\t\t\tnextCol = column.nextColumn();\n\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\tprevCol = column.prevColumn();\n\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\tnextColWidthLast = 0;\n\t\t\tprevColWidthLast = 0;\n\t\t\tstartXMove = false;\n\n\t\t\tself.startMove(e, column);\n\t\t}, self.checkPeriod);\n\t}, { passive: true });\n\n\tcolEl.addEventListener(\"touchmove\", function (e) {\n\t\tvar halfCol, diff, moveToCol;\n\n\t\tif (self.moving) {\n\t\t\tself.moveHover(e);\n\n\t\t\tif (!startXMove) {\n\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t}\n\n\t\t\tdiff = e.touches[0].pageX - startXMove;\n\n\t\t\tif (diff > 0) {\n\t\t\t\tif (nextCol && diff - nextColWidthLast > nextColWidth) {\n\t\t\t\t\tmoveToCol = nextCol;\n\n\t\t\t\t\tif (moveToCol !== column) {\n\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement().nextSibling);\n\t\t\t\t\t\tself.moveColumn(moveToCol, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (prevCol && -diff - prevColWidthLast > prevColWidth) {\n\t\t\t\t\tmoveToCol = prevCol;\n\n\t\t\t\t\tif (moveToCol !== column) {\n\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement());\n\t\t\t\t\t\tself.moveColumn(moveToCol, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (moveToCol) {\n\t\t\t\tcurrentCol = moveToCol;\n\t\t\t\tnextCol = moveToCol.nextColumn();\n\t\t\t\tnextColWidthLast = nextColWidth;\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\tprevCol = moveToCol.prevColumn();\n\t\t\t\tprevColWidthLast = prevColWidth;\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t}\n\t\t}\n\t}, { passive: true });\n\n\tcolEl.addEventListener(\"touchend\", function (e) {\n\t\tif (self.checkTimeout) {\n\t\t\tclearTimeout(self.checkTimeout);\n\t\t}\n\t\tif (self.moving) {\n\t\t\tself.endMove(e);\n\t\t}\n\t});\n};\n\nMoveColumns.prototype.startMove = function (e, column) {\n\tvar element = column.getElement();\n\n\tthis.moving = column;\n\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(element).left;\n\n\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t//create placeholder\n\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\n\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\n\n\telement.parentNode.insertBefore(this.placeholderElement, element);\n\telement.parentNode.removeChild(element);\n\n\t//create hover element\n\tthis.hoverElement = element.cloneNode(true);\n\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\tthis.table.columnManager.getElement().appendChild(this.hoverElement);\n\n\tthis.hoverElement.style.left = \"0\";\n\tthis.hoverElement.style.bottom = \"0\";\n\n\tif (!this.touchMove) {\n\t\tthis._bindMouseMove();\n\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\t}\n\n\tthis.moveHover(e);\n};\n\nMoveColumns.prototype._bindMouseMove = function () {\n\tthis.table.columnManager.columnsByIndex.forEach(function (column) {\n\t\tif (column.modules.moveColumn.mousemove) {\n\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t}\n\t});\n};\n\nMoveColumns.prototype._unbindMouseMove = function () {\n\tthis.table.columnManager.columnsByIndex.forEach(function (column) {\n\t\tif (column.modules.moveColumn.mousemove) {\n\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t}\n\t});\n};\n\nMoveColumns.prototype.moveColumn = function (column, after) {\n\tvar movingCells = this.moving.getCells();\n\n\tthis.toCol = column;\n\tthis.toColAfter = after;\n\n\tif (after) {\n\t\tcolumn.getCells().forEach(function (cell, i) {\n\t\t\tvar cellEl = cell.getElement();\n\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n\t\t});\n\t} else {\n\t\tcolumn.getCells().forEach(function (cell, i) {\n\t\t\tvar cellEl = cell.getElement();\n\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n\t\t});\n\t}\n};\n\nMoveColumns.prototype.endMove = function (e) {\n\tif (e.which === 1 || this.touchMove) {\n\t\tthis._unbindMouseMove();\n\n\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\tif (this.toCol) {\n\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n\t\t}\n\n\t\tthis.moving = false;\n\t\tthis.toCol = false;\n\t\tthis.toColAfter = false;\n\n\t\tif (!this.touchMove) {\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\t\t}\n\t}\n};\n\nMoveColumns.prototype.moveHover = function (e) {\n\tvar self = this,\n\t    columnHolder = self.table.columnManager.getElement(),\n\t    scrollLeft = columnHolder.scrollLeft,\n\t    xPos = (self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(columnHolder).left + scrollLeft,\n\t    scrollPos;\n\n\tself.hoverElement.style.left = xPos - self.startX + \"px\";\n\n\tif (xPos - scrollLeft < self.autoScrollMargin) {\n\t\tif (!self.autoScrollTimeout) {\n\t\t\tself.autoScrollTimeout = setTimeout(function () {\n\t\t\t\tscrollPos = Math.max(0, scrollLeft - 5);\n\t\t\t\tself.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\tself.autoScrollTimeout = false;\n\t\t\t}, 1);\n\t\t}\n\t}\n\n\tif (scrollLeft + columnHolder.clientWidth - xPos < self.autoScrollMargin) {\n\t\tif (!self.autoScrollTimeout) {\n\t\t\tself.autoScrollTimeout = setTimeout(function () {\n\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft + 5);\n\t\t\t\tself.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\tself.autoScrollTimeout = false;\n\t\t\t}, 1);\n\t\t}\n\t}\n};\n\nTabulator.prototype.registerModule(\"moveColumn\", MoveColumns);\n\nvar MoveRows = function MoveRows(table) {\n\n\tthis.table = table; //hold Tabulator object\n\tthis.placeholderElement = this.createPlaceholderElement();\n\tthis.hoverElement = false; //floating row header element\n\tthis.checkTimeout = false; //click check timeout holder\n\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\tthis.moving = false; //currently moving row\n\tthis.toRow = false; //destination row\n\tthis.toRowAfter = false; //position of moving row relative to the desitnation row\n\tthis.hasHandle = false; //row has handle instead of fully movable row\n\tthis.startY = 0; //starting Y position within header element\n\tthis.startX = 0; //starting X position within header element\n\n\tthis.moveHover = this.moveHover.bind(this);\n\tthis.endMove = this.endMove.bind(this);\n\tthis.tableRowDropEvent = false;\n\n\tthis.touchMove = false;\n\n\tthis.connection = false;\n\tthis.connectionSelectorsTables = false;\n\tthis.connectionSelectorsElements = false;\n\tthis.connectionElements = [];\n\tthis.connections = [];\n\n\tthis.connectedTable = false;\n\tthis.connectedRow = false;\n};\n\nMoveRows.prototype.createPlaceholderElement = function () {\n\tvar el = document.createElement(\"div\");\n\n\tel.classList.add(\"tabulator-row\");\n\tel.classList.add(\"tabulator-row-placeholder\");\n\n\treturn el;\n};\n\nMoveRows.prototype.initialize = function (handle) {\n\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n\n\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n};\n\nMoveRows.prototype.setHandle = function (handle) {\n\tthis.hasHandle = handle;\n};\n\nMoveRows.prototype.initializeGroupHeader = function (group) {\n\tvar self = this,\n\t    config = {},\n\t    rowEl;\n\n\t//inter table drag drop\n\tconfig.mouseup = function (e) {\n\t\tself.tableRowDrop(e, row);\n\t}.bind(self);\n\n\t//same table drag drop\n\tconfig.mousemove = function (e) {\n\t\tif (e.pageY - Tabulator.prototype.helpers.elOffset(group.element).top + self.table.rowManager.element.scrollTop > group.getHeight() / 2) {\n\t\t\tif (self.toRow !== group || !self.toRowAfter) {\n\t\t\t\tvar rowEl = group.getElement();\n\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\tself.moveRow(group, true);\n\t\t\t}\n\t\t} else {\n\t\t\tif (self.toRow !== group || self.toRowAfter) {\n\t\t\t\tvar rowEl = group.getElement();\n\t\t\t\tif (rowEl.previousSibling) {\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\tself.moveRow(group, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}.bind(self);\n\n\tgroup.modules.moveRow = config;\n};\n\nMoveRows.prototype.initializeRow = function (row) {\n\tvar self = this,\n\t    config = {},\n\t    rowEl;\n\n\t//inter table drag drop\n\tconfig.mouseup = function (e) {\n\t\tself.tableRowDrop(e, row);\n\t}.bind(self);\n\n\t//same table drag drop\n\tconfig.mousemove = function (e) {\n\t\tif (e.pageY - Tabulator.prototype.helpers.elOffset(row.element).top + self.table.rowManager.element.scrollTop > row.getHeight() / 2) {\n\t\t\tif (self.toRow !== row || !self.toRowAfter) {\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\tself.moveRow(row, true);\n\t\t\t}\n\t\t} else {\n\t\t\tif (self.toRow !== row || self.toRowAfter) {\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\tself.moveRow(row, false);\n\t\t\t}\n\t\t}\n\t}.bind(self);\n\n\tif (!this.hasHandle) {\n\n\t\trowEl = row.getElement();\n\n\t\trowEl.addEventListener(\"mousedown\", function (e) {\n\t\t\tif (e.which === 1) {\n\t\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\t\tself.startMove(e, row);\n\t\t\t\t}, self.checkPeriod);\n\t\t\t}\n\t\t});\n\n\t\trowEl.addEventListener(\"mouseup\", function (e) {\n\t\t\tif (e.which === 1) {\n\t\t\t\tif (self.checkTimeout) {\n\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.bindTouchEvents(row, row.getElement());\n\t}\n\n\trow.modules.moveRow = config;\n};\n\nMoveRows.prototype.initializeCell = function (cell) {\n\tvar self = this,\n\t    cellEl = cell.getElement();\n\n\tcellEl.addEventListener(\"mousedown\", function (e) {\n\t\tif (e.which === 1) {\n\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\tself.startMove(e, cell.row);\n\t\t\t}, self.checkPeriod);\n\t\t}\n\t});\n\n\tcellEl.addEventListener(\"mouseup\", function (e) {\n\t\tif (e.which === 1) {\n\t\t\tif (self.checkTimeout) {\n\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t}\n\t\t}\n\t});\n\n\tthis.bindTouchEvents(cell.row, cell.getElement());\n};\n\nMoveRows.prototype.bindTouchEvents = function (row, element) {\n\tvar self = this,\n\t    startYMove = false,\n\t    //shifting center position of the cell\n\tdir = false,\n\t    currentRow,\n\t    nextRow,\n\t    prevRow,\n\t    nextRowHeight,\n\t    prevRowHeight,\n\t    nextRowHeightLast,\n\t    prevRowHeightLast;\n\n\telement.addEventListener(\"touchstart\", function (e) {\n\t\tself.checkTimeout = setTimeout(function () {\n\t\t\tself.touchMove = true;\n\t\t\tcurrentRow = row;\n\t\t\tnextRow = row.nextRow();\n\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\tprevRow = row.prevRow();\n\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\tnextRowHeightLast = 0;\n\t\t\tprevRowHeightLast = 0;\n\t\t\tstartYMove = false;\n\n\t\t\tself.startMove(e, row);\n\t\t}, self.checkPeriod);\n\t}, { passive: true });\n\tthis.moving, this.toRow, this.toRowAfter;\n\telement.addEventListener(\"touchmove\", function (e) {\n\n\t\tvar halfCol, diff, moveToRow;\n\n\t\tif (self.moving) {\n\t\t\te.preventDefault();\n\n\t\t\tself.moveHover(e);\n\n\t\t\tif (!startYMove) {\n\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t}\n\n\t\t\tdiff = e.touches[0].pageY - startYMove;\n\n\t\t\tif (diff > 0) {\n\t\t\t\tif (nextRow && diff - nextRowHeightLast > nextRowHeight) {\n\t\t\t\t\tmoveToRow = nextRow;\n\n\t\t\t\t\tif (moveToRow !== row) {\n\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement().nextSibling);\n\t\t\t\t\t\tself.moveRow(moveToRow, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (prevRow && -diff - prevRowHeightLast > prevRowHeight) {\n\t\t\t\t\tmoveToRow = prevRow;\n\n\t\t\t\t\tif (moveToRow !== row) {\n\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement());\n\t\t\t\t\t\tself.moveRow(moveToRow, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (moveToRow) {\n\t\t\t\tcurrentRow = moveToRow;\n\t\t\t\tnextRow = moveToRow.nextRow();\n\t\t\t\tnextRowHeightLast = nextRowHeight;\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\tprevRow = moveToRow.prevRow();\n\t\t\t\tprevRowHeightLast = prevRowHeight;\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t}\n\t\t}\n\t});\n\n\telement.addEventListener(\"touchend\", function (e) {\n\t\tif (self.checkTimeout) {\n\t\t\tclearTimeout(self.checkTimeout);\n\t\t}\n\t\tif (self.moving) {\n\t\t\tself.endMove(e);\n\t\t\tself.touchMove = false;\n\t\t}\n\t});\n};\n\nMoveRows.prototype._bindMouseMove = function () {\n\tvar self = this;\n\n\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\tif ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t}\n\t});\n};\n\nMoveRows.prototype._unbindMouseMove = function () {\n\tvar self = this;\n\n\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\tif ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t}\n\t});\n};\n\nMoveRows.prototype.startMove = function (e, row) {\n\tvar element = row.getElement();\n\n\tthis.setStartPosition(e, row);\n\n\tthis.moving = row;\n\n\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t//create placeholder\n\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\n\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\n\n\tif (!this.connection) {\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\telement.parentNode.removeChild(element);\n\t} else {\n\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\n\t\tthis.connectToTables(row);\n\t}\n\n\t//create hover element\n\tthis.hoverElement = element.cloneNode(true);\n\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\tif (this.connection) {\n\t\tdocument.body.appendChild(this.hoverElement);\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.top = \"0\";\n\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\n\t\tthis.hoverElement.style.overflow = \"hidden\";\n\t\tthis.hoverElement.style.pointerEvents = \"none\";\n\t} else {\n\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\n\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.top = \"0\";\n\n\t\tthis._bindMouseMove();\n\t}\n\n\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\n\tthis.moveHover(e);\n};\n\nMoveRows.prototype.setStartPosition = function (e, row) {\n\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n\t    pageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n\t    element,\n\t    position;\n\n\telement = row.getElement();\n\tif (this.connection) {\n\t\tposition = element.getBoundingClientRect();\n\n\t\tthis.startX = position.left - pageX + window.pageXOffset;\n\t\tthis.startY = position.top - pageY + window.pageYOffset;\n\t} else {\n\t\tthis.startY = pageY - element.getBoundingClientRect().top;\n\t}\n};\n\nMoveRows.prototype.endMove = function (e) {\n\tif (!e || e.which === 1 || this.touchMove) {\n\t\tthis._unbindMouseMove();\n\n\t\tif (!this.connection) {\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t}\n\n\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\tif (this.toRow) {\n\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n\t\t}\n\n\t\tthis.moving = false;\n\t\tthis.toRow = false;\n\t\tthis.toRowAfter = false;\n\n\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\n\t\tif (this.connection) {\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\n\t\t\tthis.disconnectFromTables();\n\t\t}\n\t}\n};\n\nMoveRows.prototype.moveRow = function (row, after) {\n\tthis.toRow = row;\n\tthis.toRowAfter = after;\n};\n\nMoveRows.prototype.moveHover = function (e) {\n\tif (this.connection) {\n\t\tthis.moveHoverConnections.call(this, e);\n\t} else {\n\t\tthis.moveHoverTable.call(this, e);\n\t}\n};\n\nMoveRows.prototype.moveHoverTable = function (e) {\n\tvar rowHolder = this.table.rowManager.getElement(),\n\t    scrollTop = rowHolder.scrollTop,\n\t    yPos = (this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top + scrollTop,\n\t    scrollPos;\n\n\tthis.hoverElement.style.top = yPos - this.startY + \"px\";\n};\n\nMoveRows.prototype.moveHoverConnections = function (e) {\n\tthis.hoverElement.style.left = this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX) + \"px\";\n\tthis.hoverElement.style.top = this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY) + \"px\";\n};\n\nMoveRows.prototype.elementRowDrop = function (e, element, row) {\n\tif (this.table.options.movableRowsElementDrop) {\n\t\tthis.table.options.movableRowsElementDrop(e, element, row ? row.getComponent() : false);\n\t}\n};\n\n//establish connection with other tables\nMoveRows.prototype.connectToTables = function (row) {\n\tvar _this74 = this;\n\n\tvar connectionTables;\n\n\tif (this.connectionSelectorsTables) {\n\t\tconnectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\n\n\t\tthis.table.options.movableRowsSendingStart.call(this.table, connectionTables);\n\n\t\tthis.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n\t\t\trow: row\n\t\t});\n\t}\n\n\tif (this.connectionSelectorsElements) {\n\n\t\tthis.connectionElements = [];\n\n\t\tif (!Array.isArray(this.connectionSelectorsElements)) {\n\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\n\t\t}\n\n\t\tthis.connectionSelectorsElements.forEach(function (query) {\n\t\t\tif (typeof query === \"string\") {\n\t\t\t\t_this74.connectionElements = _this74.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n\t\t\t} else {\n\t\t\t\t_this74.connectionElements.push(query);\n\t\t\t}\n\t\t});\n\n\t\tthis.connectionElements.forEach(function (element) {\n\t\t\tvar dropEvent = function dropEvent(e) {\n\t\t\t\t_this74.elementRowDrop(e, element, _this74.moving);\n\t\t\t};\n\n\t\t\telement.addEventListener(\"mouseup\", dropEvent);\n\t\t\telement.tabulatorElementDropEvent = dropEvent;\n\n\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\n\t\t});\n\t}\n};\n\n//disconnect from other tables\nMoveRows.prototype.disconnectFromTables = function () {\n\tvar connectionTables;\n\n\tif (this.connectionSelectorsTables) {\n\t\tconnectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\n\n\t\tthis.table.options.movableRowsSendingStop.call(this.table, connectionTables);\n\n\t\tthis.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n\t}\n\n\tthis.connectionElements.forEach(function (element) {\n\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\n\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n\t\tdelete element.tabulatorElementDropEvent;\n\t});\n};\n\n//accept incomming connection\nMoveRows.prototype.connect = function (table, row) {\n\tvar self = this;\n\tif (!this.connectedTable) {\n\t\tthis.connectedTable = table;\n\t\tthis.connectedRow = row;\n\n\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\n\n\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\tif (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t}\n\t\t});\n\n\t\tself.tableRowDropEvent = self.tableRowDrop.bind(self);\n\n\t\tself.table.element.addEventListener(\"mouseup\", self.tableRowDropEvent);\n\n\t\tthis.table.options.movableRowsReceivingStart.call(this.table, row, table);\n\n\t\treturn true;\n\t} else {\n\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n\t\treturn false;\n\t}\n};\n\n//close incomming connection\nMoveRows.prototype.disconnect = function (table) {\n\tvar self = this;\n\tif (table === this.connectedTable) {\n\t\tthis.connectedTable = false;\n\t\tthis.connectedRow = false;\n\n\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n\n\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\tif (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t}\n\t\t});\n\n\t\tself.table.element.removeEventListener(\"mouseup\", self.tableRowDropEvent);\n\n\t\tthis.table.options.movableRowsReceivingStop.call(this.table, table);\n\t} else {\n\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\");\n\t}\n};\n\nMoveRows.prototype.dropComplete = function (table, row, success) {\n\tvar sender = false;\n\n\tif (success) {\n\n\t\tswitch (_typeof(this.table.options.movableRowsSender)) {\n\t\t\tcase \"string\":\n\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tsender = this.table.options.movableRowsSender;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (sender) {\n\t\t\tsender.call(this, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t} else {\n\t\t\tif (this.table.options.movableRowsSender) {\n\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.options.movableRowsSent.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t} else {\n\t\tthis.table.options.movableRowsSentFailed.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t}\n\n\tthis.endMove();\n};\n\nMoveRows.prototype.tableRowDrop = function (e, row) {\n\tvar receiver = false,\n\t    success = false;\n\n\tconsole.trace(\"drop\");\n\n\te.stopImmediatePropagation();\n\n\tswitch (_typeof(this.table.options.movableRowsReceiver)) {\n\t\tcase \"string\":\n\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\n\t\t\tbreak;\n\n\t\tcase \"function\":\n\t\t\treceiver = this.table.options.movableRowsReceiver;\n\t\t\tbreak;\n\t}\n\n\tif (receiver) {\n\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t} else {\n\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n\t}\n\n\tif (success) {\n\t\tthis.table.options.movableRowsReceived.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t} else {\n\t\tthis.table.options.movableRowsReceivedFailed.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t}\n\n\tthis.table.modules.comms.send(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n\t\trow: row,\n\t\tsuccess: success\n\t});\n};\n\nMoveRows.prototype.receivers = {\n\tinsert: function insert(fromRow, toRow, fromTable) {\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\treturn true;\n\t},\n\n\tadd: function add(fromRow, toRow, fromTable) {\n\t\tthis.table.addRow(fromRow.getData());\n\t\treturn true;\n\t},\n\n\tupdate: function update(fromRow, toRow, fromTable) {\n\t\tif (toRow) {\n\t\t\ttoRow.update(fromRow.getData());\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\treplace: function replace(fromRow, toRow, fromTable) {\n\t\tif (toRow) {\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\t\ttoRow.delete();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n};\n\nMoveRows.prototype.senders = {\n\tdelete: function _delete(fromRow, toRow, toTable) {\n\t\tfromRow.delete();\n\t}\n};\n\nMoveRows.prototype.commsReceived = function (table, action, data) {\n\tswitch (action) {\n\t\tcase \"connect\":\n\t\t\treturn this.connect(table, data.row);\n\t\t\tbreak;\n\n\t\tcase \"disconnect\":\n\t\t\treturn this.disconnect(table);\n\t\t\tbreak;\n\n\t\tcase \"dropcomplete\":\n\t\t\treturn this.dropComplete(table, data.row, data.success);\n\t\t\tbreak;\n\t}\n};\n\nTabulator.prototype.registerModule(\"moveRow\", MoveRows);\nvar Mutator = function Mutator(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of muatation types\n\tthis.enabled = true;\n};\n\n//initialize column mutator\nMutator.prototype.initializeColumn = function (column) {\n\tvar self = this,\n\t    match = false,\n\t    config = {};\n\n\tthis.allowedTypes.forEach(function (type) {\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t    mutator;\n\n\t\tif (column.definition[key]) {\n\t\t\tmutator = self.lookupMutator(column.definition[key]);\n\n\t\t\tif (mutator) {\n\t\t\t\tmatch = true;\n\n\t\t\t\tconfig[key] = {\n\t\t\t\t\tmutator: mutator,\n\t\t\t\t\tparams: column.definition[key + \"Params\"] || {}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\n\tif (match) {\n\t\tcolumn.modules.mutate = config;\n\t}\n};\n\nMutator.prototype.lookupMutator = function (value) {\n\tvar mutator = false;\n\n\t//set column mutator\n\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\tcase \"string\":\n\t\t\tif (this.mutators[value]) {\n\t\t\t\tmutator = this.mutators[value];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"function\":\n\t\t\tmutator = value;\n\t\t\tbreak;\n\t}\n\n\treturn mutator;\n};\n\n//apply mutator to row\nMutator.prototype.transformRow = function (data, type, updatedData) {\n\tvar self = this,\n\t    key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t    value;\n\n\tif (this.enabled) {\n\n\t\tself.table.columnManager.traverse(function (column) {\n\t\t\tvar mutator, params, component;\n\n\t\t\tif (column.modules.mutate) {\n\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n\t\t\t\tif (mutator) {\n\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n\t\t\t\t\tif (type == \"data\" || typeof value !== \"undefined\") {\n\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\treturn data;\n};\n\n//apply mutator to new cell value\nMutator.prototype.transformCell = function (cell, value) {\n\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n\t    tempData = {};\n\n\tif (mutator) {\n\t\ttempData = Object.assign(tempData, cell.row.getData());\n\t\tcell.column.setFieldValue(tempData, value);\n\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n\t} else {\n\t\treturn value;\n\t}\n};\n\nMutator.prototype.enable = function () {\n\tthis.enabled = true;\n};\n\nMutator.prototype.disable = function () {\n\tthis.enabled = false;\n};\n\n//default mutators\nMutator.prototype.mutators = {};\n\nTabulator.prototype.registerModule(\"mutator\", Mutator);\nvar Page = function Page(table) {\n\n\tthis.table = table; //hold Tabulator object\n\n\tthis.mode = \"local\";\n\tthis.progressiveLoad = false;\n\n\tthis.size = 0;\n\tthis.page = 1;\n\tthis.count = 5;\n\tthis.max = 1;\n\n\tthis.displayIndex = 0; //index in display pipeline\n\n\tthis.initialLoad = true;\n\n\tthis.pageSizes = [];\n\n\tthis.dataReceivedNames = {};\n\tthis.dataSentNames = {};\n\n\tthis.createElements();\n};\n\nPage.prototype.createElements = function () {\n\n\tvar button;\n\n\tthis.element = document.createElement(\"span\");\n\tthis.element.classList.add(\"tabulator-paginator\");\n\n\tthis.pagesElement = document.createElement(\"span\");\n\tthis.pagesElement.classList.add(\"tabulator-pages\");\n\n\tbutton = document.createElement(\"button\");\n\tbutton.classList.add(\"tabulator-page\");\n\tbutton.setAttribute(\"type\", \"button\");\n\tbutton.setAttribute(\"role\", \"button\");\n\tbutton.setAttribute(\"aria-label\", \"\");\n\tbutton.setAttribute(\"title\", \"\");\n\n\tthis.firstBut = button.cloneNode(true);\n\tthis.firstBut.setAttribute(\"data-page\", \"first\");\n\n\tthis.prevBut = button.cloneNode(true);\n\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\n\n\tthis.nextBut = button.cloneNode(true);\n\tthis.nextBut.setAttribute(\"data-page\", \"next\");\n\n\tthis.lastBut = button.cloneNode(true);\n\tthis.lastBut.setAttribute(\"data-page\", \"last\");\n\n\tif (this.table.options.paginationSizeSelector) {\n\t\tthis.pageSizeSelect = document.createElement(\"select\");\n\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\n\t}\n};\n\nPage.prototype.generatePageSizeSelectList = function () {\n\tvar _this75 = this;\n\n\tvar pageSizes = [];\n\n\tif (this.pageSizeSelect) {\n\n\t\tif (Array.isArray(this.table.options.paginationSizeSelector)) {\n\t\t\tpageSizes = this.table.options.paginationSizeSelector;\n\t\t\tthis.pageSizes = pageSizes;\n\n\t\t\tif (this.pageSizes.indexOf(this.size) == -1) {\n\t\t\t\tpageSizes.unshift(this.size);\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (this.pageSizes.indexOf(this.size) == -1) {\n\t\t\t\tpageSizes = [];\n\n\t\t\t\tfor (var _i13 = 1; _i13 < 5; _i13++) {\n\t\t\t\t\tpageSizes.push(this.size * _i13);\n\t\t\t\t}\n\n\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t} else {\n\t\t\t\tpageSizes = this.pageSizes;\n\t\t\t}\n\t\t}\n\n\t\twhile (this.pageSizeSelect.firstChild) {\n\t\t\tthis.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n\t\t}pageSizes.forEach(function (item) {\n\t\t\tvar itemEl = document.createElement(\"option\");\n\t\t\titemEl.value = item;\n\n\t\t\tif (item === true) {\n\t\t\t\t_this75.table.modules.localize.bind(\"pagination|all\", function (value) {\n\t\t\t\t\titemEl.innerHTML = value;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\titemEl.innerHTML = item;\n\t\t\t}\n\n\t\t\t_this75.pageSizeSelect.appendChild(itemEl);\n\t\t});\n\n\t\tthis.pageSizeSelect.value = this.size;\n\t}\n};\n\n//setup pageination\nPage.prototype.initialize = function (hidden) {\n\tvar self = this,\n\t    pageSelectLabel,\n\t    testElRow,\n\t    testElCell;\n\n\t//update param names\n\tthis.dataSentNames = Object.assign({}, this.paginationDataSentNames);\n\tthis.dataSentNames = Object.assign(this.dataSentNames, this.table.options.paginationDataSent);\n\n\tthis.dataReceivedNames = Object.assign({}, this.paginationDataReceivedNames);\n\tthis.dataReceivedNames = Object.assign(this.dataReceivedNames, this.table.options.paginationDataReceived);\n\n\t//build pagination element\n\n\t//bind localizations\n\tself.table.modules.localize.bind(\"pagination|first\", function (value) {\n\t\tself.firstBut.innerHTML = value;\n\t});\n\n\tself.table.modules.localize.bind(\"pagination|first_title\", function (value) {\n\t\tself.firstBut.setAttribute(\"aria-label\", value);\n\t\tself.firstBut.setAttribute(\"title\", value);\n\t});\n\n\tself.table.modules.localize.bind(\"pagination|prev\", function (value) {\n\t\tself.prevBut.innerHTML = value;\n\t});\n\n\tself.table.modules.localize.bind(\"pagination|prev_title\", function (value) {\n\t\tself.prevBut.setAttribute(\"aria-label\", value);\n\t\tself.prevBut.setAttribute(\"title\", value);\n\t});\n\n\tself.table.modules.localize.bind(\"pagination|next\", function (value) {\n\t\tself.nextBut.innerHTML = value;\n\t});\n\n\tself.table.modules.localize.bind(\"pagination|next_title\", function (value) {\n\t\tself.nextBut.setAttribute(\"aria-label\", value);\n\t\tself.nextBut.setAttribute(\"title\", value);\n\t});\n\n\tself.table.modules.localize.bind(\"pagination|last\", function (value) {\n\t\tself.lastBut.innerHTML = value;\n\t});\n\n\tself.table.modules.localize.bind(\"pagination|last_title\", function (value) {\n\t\tself.lastBut.setAttribute(\"aria-label\", value);\n\t\tself.lastBut.setAttribute(\"title\", value);\n\t});\n\n\t//click bindings\n\tself.firstBut.addEventListener(\"click\", function () {\n\t\tself.setPage(1).then(function () {}).catch(function () {});\n\t});\n\n\tself.prevBut.addEventListener(\"click\", function () {\n\t\tself.previousPage().then(function () {}).catch(function () {});\n\t});\n\n\tself.nextBut.addEventListener(\"click\", function () {\n\t\tself.nextPage().then(function () {}).catch(function () {});\n\t});\n\n\tself.lastBut.addEventListener(\"click\", function () {\n\t\tself.setPage(self.max).then(function () {}).catch(function () {});\n\t});\n\n\tif (self.table.options.paginationElement) {\n\t\tself.element = self.table.options.paginationElement;\n\t}\n\n\tif (this.pageSizeSelect) {\n\t\tpageSelectLabel = document.createElement(\"label\");\n\n\t\tself.table.modules.localize.bind(\"pagination|page_size\", function (value) {\n\t\t\tself.pageSizeSelect.setAttribute(\"aria-label\", value);\n\t\t\tself.pageSizeSelect.setAttribute(\"title\", value);\n\t\t\tpageSelectLabel.innerHTML = value;\n\t\t});\n\n\t\tself.element.appendChild(pageSelectLabel);\n\t\tself.element.appendChild(self.pageSizeSelect);\n\n\t\tself.pageSizeSelect.addEventListener(\"change\", function (e) {\n\t\t\tself.setPageSize(self.pageSizeSelect.value == \"true\" ? true : self.pageSizeSelect.value);\n\t\t\tself.setPage(1).then(function () {}).catch(function () {});\n\t\t});\n\t}\n\n\t//append to DOM\n\tself.element.appendChild(self.firstBut);\n\tself.element.appendChild(self.prevBut);\n\tself.element.appendChild(self.pagesElement);\n\tself.element.appendChild(self.nextBut);\n\tself.element.appendChild(self.lastBut);\n\n\tif (!self.table.options.paginationElement && !hidden) {\n\t\tself.table.footerManager.append(self.element, self);\n\t}\n\n\t//set default values\n\tself.mode = self.table.options.pagination;\n\n\tif (self.table.options.paginationSize) {\n\t\tself.size = self.table.options.paginationSize;\n\t} else {\n\t\ttestElRow = document.createElement(\"div\");\n\t\ttestElRow.classList.add(\"tabulator-row\");\n\t\ttestElRow.style.visibility = hidden;\n\n\t\ttestElCell = document.createElement(\"div\");\n\t\ttestElCell.classList.add(\"tabulator-cell\");\n\t\ttestElCell.innerHTML = \"Page Row Test\";\n\n\t\ttestElRow.appendChild(testElCell);\n\n\t\tself.table.rowManager.getTableElement().appendChild(testElRow);\n\n\t\tself.size = Math.floor(self.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n\n\t\tself.table.rowManager.getTableElement().removeChild(testElRow);\n\t}\n\n\t// self.page = self.table.options.paginationInitialPage || 1;\n\tself.count = self.table.options.paginationButtonCount;\n\n\tself.generatePageSizeSelectList();\n};\n\nPage.prototype.initializeProgressive = function (mode) {\n\tthis.initialize(true);\n\tthis.mode = \"progressive_\" + mode;\n\tthis.progressiveLoad = true;\n};\n\nPage.prototype.setDisplayIndex = function (index) {\n\tthis.displayIndex = index;\n};\n\nPage.prototype.getDisplayIndex = function () {\n\treturn this.displayIndex;\n};\n\n//calculate maximum page from number of rows\nPage.prototype.setMaxRows = function (rowCount) {\n\tif (!rowCount) {\n\t\tthis.max = 1;\n\t} else {\n\t\tthis.max = this.size === true ? 1 : Math.ceil(rowCount / this.size);\n\t}\n\n\tif (this.page > this.max) {\n\t\tthis.page = this.max;\n\t}\n};\n\n//reset to first page without triggering action\nPage.prototype.reset = function (force, columnsChanged) {\n\tif (this.mode == \"local\" || force) {\n\t\tthis.page = 1;\n\t}\n\n\tif (columnsChanged) {\n\t\tthis.initialLoad = true;\n\t}\n\n\treturn true;\n};\n\n//set the maxmum page\nPage.prototype.setMaxPage = function (max) {\n\n\tmax = parseInt(max);\n\n\tthis.max = max || 1;\n\n\tif (this.page > this.max) {\n\t\tthis.page = this.max;\n\t\tthis.trigger();\n\t}\n};\n\n//set current page number\nPage.prototype.setPage = function (page) {\n\tvar _this76 = this;\n\n\tvar self = this;\n\n\tswitch (page) {\n\t\tcase \"first\":\n\t\t\treturn this.setPage(1);\n\t\t\tbreak;\n\n\t\tcase \"prev\":\n\t\t\treturn this.previousPage();\n\t\t\tbreak;\n\n\t\tcase \"next\":\n\t\t\treturn this.nextPage();\n\t\t\tbreak;\n\n\t\tcase \"last\":\n\t\t\treturn this.setPage(this.max);\n\t\t\tbreak;\n\t}\n\n\treturn new Promise(function (resolve, reject) {\n\n\t\tpage = parseInt(page);\n\n\t\tif (page > 0 && page <= _this76.max) {\n\t\t\t_this76.page = page;\n\t\t\t_this76.trigger().then(function () {\n\t\t\t\tresolve();\n\t\t\t}).catch(function () {\n\t\t\t\treject();\n\t\t\t});\n\n\t\t\tif (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.page) {\n\t\t\t\tself.table.modules.persistence.save(\"page\");\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + _this76.max + \":\", page);\n\t\t\treject();\n\t\t}\n\t});\n};\n\nPage.prototype.setPageToRow = function (row) {\n\tvar _this77 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\n\t\tvar rows = _this77.table.rowManager.getDisplayRows(_this77.displayIndex - 1);\n\t\tvar index = rows.indexOf(row);\n\n\t\tif (index > -1) {\n\t\t\tvar page = _this77.size === true ? 1 : Math.ceil((index + 1) / _this77.size);\n\n\t\t\t_this77.setPage(page).then(function () {\n\t\t\t\tresolve();\n\t\t\t}).catch(function () {\n\t\t\t\treject();\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\n\t\t\treject();\n\t\t}\n\t});\n};\n\nPage.prototype.setPageSize = function (size) {\n\tif (size !== true) {\n\t\tsize = parseInt(size);\n\t}\n\n\tif (size > 0) {\n\t\tthis.size = size;\n\t}\n\n\tif (this.pageSizeSelect) {\n\t\t// this.pageSizeSelect.value = size;\n\t\tthis.generatePageSizeSelectList();\n\t}\n\n\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page) {\n\t\tthis.table.modules.persistence.save(\"page\");\n\t}\n};\n\n//setup the pagination buttons\nPage.prototype._setPageButtons = function () {\n\tvar self = this;\n\n\tvar leftSize = Math.floor((this.count - 1) / 2);\n\tvar rightSize = Math.ceil((this.count - 1) / 2);\n\tvar min = this.max - this.page + leftSize + 1 < this.count ? this.max - this.count + 1 : Math.max(this.page - leftSize, 1);\n\tvar max = this.page <= rightSize ? Math.min(this.count, this.max) : Math.min(this.page + rightSize, this.max);\n\n\twhile (self.pagesElement.firstChild) {\n\t\tself.pagesElement.removeChild(self.pagesElement.firstChild);\n\t}if (self.page == 1) {\n\t\tself.firstBut.disabled = true;\n\t\tself.prevBut.disabled = true;\n\t} else {\n\t\tself.firstBut.disabled = false;\n\t\tself.prevBut.disabled = false;\n\t}\n\n\tif (self.page == self.max) {\n\t\tself.lastBut.disabled = true;\n\t\tself.nextBut.disabled = true;\n\t} else {\n\t\tself.lastBut.disabled = false;\n\t\tself.nextBut.disabled = false;\n\t}\n\n\tfor (var _i14 = min; _i14 <= max; _i14++) {\n\t\tif (_i14 > 0 && _i14 <= self.max) {\n\t\t\tself.pagesElement.appendChild(self._generatePageButton(_i14));\n\t\t}\n\t}\n\n\tthis.footerRedraw();\n};\n\nPage.prototype._generatePageButton = function (page) {\n\tvar self = this,\n\t    button = document.createElement(\"button\");\n\n\tbutton.classList.add(\"tabulator-page\");\n\tif (page == self.page) {\n\t\tbutton.classList.add(\"active\");\n\t}\n\n\tbutton.setAttribute(\"type\", \"button\");\n\tbutton.setAttribute(\"role\", \"button\");\n\n\tself.table.modules.localize.bind(\"pagination|page_title\", function (value) {\n\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\n\t\tbutton.setAttribute(\"title\", value + \" \" + page);\n\t});\n\n\tbutton.setAttribute(\"data-page\", page);\n\tbutton.textContent = page;\n\n\tbutton.addEventListener(\"click\", function (e) {\n\t\tself.setPage(page).then(function () {}).catch(function () {});\n\t});\n\n\treturn button;\n};\n\n//previous page\nPage.prototype.previousPage = function () {\n\tvar _this78 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tif (_this78.page > 1) {\n\t\t\t_this78.page--;\n\t\t\t_this78.trigger().then(function () {\n\t\t\t\tresolve();\n\t\t\t}).catch(function () {\n\t\t\t\treject();\n\t\t\t});\n\n\t\t\tif (_this78.table.options.persistence && _this78.table.modExists(\"persistence\", true) && _this78.table.modules.persistence.config.page) {\n\t\t\t\t_this78.table.modules.persistence.save(\"page\");\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n\t\t\treject();\n\t\t}\n\t});\n};\n\n//next page\nPage.prototype.nextPage = function () {\n\tvar _this79 = this;\n\n\treturn new Promise(function (resolve, reject) {\n\t\tif (_this79.page < _this79.max) {\n\t\t\t_this79.page++;\n\t\t\t_this79.trigger().then(function () {\n\t\t\t\tresolve();\n\t\t\t}).catch(function () {\n\t\t\t\treject();\n\t\t\t});\n\n\t\t\tif (_this79.table.options.persistence && _this79.table.modExists(\"persistence\", true) && _this79.table.modules.persistence.config.page) {\n\t\t\t\t_this79.table.modules.persistence.save(\"page\");\n\t\t\t}\n\t\t} else {\n\t\t\tif (!_this79.progressiveLoad) {\n\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + _this79.max + \":\", _this79.max + 1);\n\t\t\t}\n\t\t\treject();\n\t\t}\n\t});\n};\n\n//return current page number\nPage.prototype.getPage = function () {\n\treturn this.page;\n};\n\n//return max page number\nPage.prototype.getPageMax = function () {\n\treturn this.max;\n};\n\nPage.prototype.getPageSize = function (size) {\n\treturn this.size;\n};\n\nPage.prototype.getMode = function () {\n\treturn this.mode;\n};\n\n//return appropriate rows for current page\nPage.prototype.getRows = function (data) {\n\tvar output, start, end;\n\n\tif (this.mode == \"local\") {\n\t\toutput = [];\n\n\t\tif (this.size === true) {\n\t\t\tstart = 0;\n\t\t\tend = data.length;\n\t\t} else {\n\t\t\tstart = this.size * (this.page - 1);\n\t\t\tend = start + parseInt(this.size);\n\t\t}\n\n\t\tthis._setPageButtons();\n\n\t\tfor (var _i15 = start; _i15 < end; _i15++) {\n\t\t\tif (data[_i15]) {\n\t\t\t\toutput.push(data[_i15]);\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t} else {\n\n\t\tthis._setPageButtons();\n\n\t\treturn data.slice(0);\n\t}\n};\n\nPage.prototype.trigger = function () {\n\tvar _this80 = this;\n\n\tvar left;\n\n\treturn new Promise(function (resolve, reject) {\n\n\t\tswitch (_this80.mode) {\n\t\t\tcase \"local\":\n\t\t\t\tleft = _this80.table.rowManager.scrollLeft;\n\n\t\t\t\t_this80.table.rowManager.refreshActiveData(\"page\");\n\t\t\t\t_this80.table.rowManager.scrollHorizontal(left);\n\n\t\t\t\t_this80.table.options.pageLoaded.call(_this80.table, _this80.getPage());\n\t\t\t\tresolve();\n\t\t\t\tbreak;\n\n\t\t\tcase \"remote\":\n\t\t\tcase \"progressive_load\":\n\t\t\tcase \"progressive_scroll\":\n\t\t\t\t_this80.table.modules.ajax.blockActiveRequest();\n\t\t\t\t_this80._getRemotePage().then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function () {\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", _this80.mode);\n\t\t\t\treject();\n\t\t}\n\t});\n};\n\nPage.prototype._getRemotePage = function () {\n\tvar _this81 = this;\n\n\tvar self = this,\n\t    oldParams,\n\t    pageParams;\n\n\treturn new Promise(function (resolve, reject) {\n\n\t\tif (!self.table.modExists(\"ajax\", true)) {\n\t\t\treject();\n\t\t}\n\n\t\t//record old params and restore after request has been made\n\t\toldParams = Tabulator.prototype.helpers.deepClone(self.table.modules.ajax.getParams() || {});\n\t\tpageParams = self.table.modules.ajax.getParams();\n\n\t\t//configure request params\n\t\tpageParams[_this81.dataSentNames.page] = self.page;\n\n\t\t//set page size if defined\n\t\tif (_this81.size) {\n\t\t\tpageParams[_this81.dataSentNames.size] = _this81.size;\n\t\t}\n\n\t\t//set sort data if defined\n\t\tif (_this81.table.options.ajaxSorting && _this81.table.modExists(\"sort\")) {\n\t\t\tvar sorters = self.table.modules.sort.getSort();\n\n\t\t\tsorters.forEach(function (item) {\n\t\t\t\tdelete item.column;\n\t\t\t});\n\n\t\t\tpageParams[_this81.dataSentNames.sorters] = sorters;\n\t\t}\n\n\t\t//set filter data if defined\n\t\tif (_this81.table.options.ajaxFiltering && _this81.table.modExists(\"filter\")) {\n\t\t\tvar filters = self.table.modules.filter.getFilters(true, true);\n\t\t\tpageParams[_this81.dataSentNames.filters] = filters;\n\t\t}\n\n\t\tself.table.modules.ajax.setParams(pageParams);\n\n\t\tself.table.modules.ajax.sendRequest(_this81.progressiveLoad).then(function (data) {\n\t\t\tself._parseRemoteData(data);\n\t\t\tresolve();\n\t\t}).catch(function (e) {\n\t\t\treject();\n\t\t});\n\n\t\tself.table.modules.ajax.setParams(oldParams);\n\t});\n};\n\nPage.prototype._parseRemoteData = function (data) {\n\tvar self = this,\n\t    left,\n\t    data,\n\t    margin;\n\n\tif (typeof data[this.dataReceivedNames.last_page] === \"undefined\") {\n\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.last_page + \"' property\");\n\t}\n\n\tif (data[this.dataReceivedNames.data]) {\n\t\tthis.max = parseInt(data[this.dataReceivedNames.last_page]) || 1;\n\n\t\tif (this.progressiveLoad) {\n\t\t\tswitch (this.mode) {\n\t\t\t\tcase \"progressive_load\":\n\n\t\t\t\t\tif (this.page == 1) {\n\t\t\t\t\t\tthis.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.table.rowManager.addRows(data[this.dataReceivedNames.data]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.page < this.max) {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tself.nextPage().then(function () {}).catch(function () {});\n\t\t\t\t\t\t}, self.table.options.ajaxProgressiveLoadDelay);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\tdata = this.table.rowManager.getData().concat(data[this.dataReceivedNames.data]);\n\n\t\t\t\t\tthis.table.rowManager.setData(data, true, this.initialLoad && this.page == 1);\n\n\t\t\t\t\tmargin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.element.clientHeight * 2;\n\n\t\t\t\t\tif (self.table.rowManager.element.scrollHeight <= self.table.rowManager.element.clientHeight + margin) {\n\t\t\t\t\t\tself.nextPage().then(function () {}).catch(function () {});\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tleft = this.table.rowManager.scrollLeft;\n\n\t\t\tthis.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n\n\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\n\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\n\t\t\tthis.table.options.pageLoaded.call(this.table, this.getPage());\n\t\t}\n\n\t\tthis.initialLoad = false;\n\t} else {\n\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.data + \"' property\");\n\t}\n};\n\n//handle the footer element being redrawn\nPage.prototype.footerRedraw = function () {\n\tvar footer = this.table.footerManager.element;\n\n\tif (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n\t\tthis.pagesElement.style.display = 'none';\n\t} else {\n\t\tthis.pagesElement.style.display = '';\n\n\t\tif (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n\t\t\tthis.pagesElement.style.display = 'none';\n\t\t}\n\t}\n};\n\n//set the paramter names for pagination requests\nPage.prototype.paginationDataSentNames = {\n\t\"page\": \"page\",\n\t\"size\": \"size\",\n\t\"sorters\": \"sorters\",\n\t// \"sort_dir\":\"sort_dir\",\n\t\"filters\": \"filters\"\n\t// \"filter_value\":\"filter_value\",\n\t// \"filter_type\":\"filter_type\",\n};\n\n//set the property names for pagination responses\nPage.prototype.paginationDataReceivedNames = {\n\t\"current_page\": \"current_page\",\n\t\"last_page\": \"last_page\",\n\t\"data\": \"data\"\n};\n\nTabulator.prototype.registerModule(\"page\", Page);\n\nvar Persistence = function Persistence(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.mode = \"\";\n\tthis.id = \"\";\n\t// this.persistProps = [\"field\", \"width\", \"visible\"];\n\tthis.defWatcherBlock = false;\n\tthis.config = {};\n\tthis.readFunc = false;\n\tthis.writeFunc = false;\n};\n\n// Test for whether localStorage is available for use.\nPersistence.prototype.localStorageTest = function () {\n\tvar testKey = \"_tabulator_test\";\n\n\ttry {\n\t\twindow.localStorage.setItem(testKey, testKey);\n\t\twindow.localStorage.removeItem(testKey);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\n//setup parameters\nPersistence.prototype.initialize = function () {\n\t//determine persistent layout storage type\n\n\tvar mode = this.table.options.persistenceMode,\n\t    id = this.table.options.persistenceID,\n\t    retreivedData;\n\n\tthis.mode = mode !== true ? mode : this.localStorageTest() ? \"local\" : \"cookie\";\n\n\tif (this.table.options.persistenceReaderFunc) {\n\t\tif (typeof this.table.options.persistenceReaderFunc === \"function\") {\n\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\n\t\t} else {\n\t\t\tif (this.readers[this.table.options.persistenceReaderFunc]) {\n\t\t\t\tthis.readFunc = this.readers[this.table.options.persistenceReaderFunc];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (this.readers[this.mode]) {\n\t\t\tthis.readFunc = this.readers[this.mode];\n\t\t} else {\n\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n\t\t}\n\t}\n\n\tif (this.table.options.persistenceWriterFunc) {\n\t\tif (typeof this.table.options.persistenceWriterFunc === \"function\") {\n\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\n\t\t} else {\n\t\t\tif (this.readers[this.table.options.persistenceWriterFunc]) {\n\t\t\t\tthis.writeFunc = this.readers[this.table.options.persistenceWriterFunc];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (this.writers[this.mode]) {\n\t\t\tthis.writeFunc = this.writers[this.mode];\n\t\t} else {\n\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n\t\t}\n\t}\n\n\t//set storage tag\n\tthis.id = \"tabulator-\" + (id || this.table.element.getAttribute(\"id\") || \"\");\n\n\tthis.config = {\n\t\tsort: this.table.options.persistence === true || this.table.options.persistence.sort,\n\t\tfilter: this.table.options.persistence === true || this.table.options.persistence.filter,\n\t\tgroup: this.table.options.persistence === true || this.table.options.persistence.group,\n\t\tpage: this.table.options.persistence === true || this.table.options.persistence.page,\n\t\tcolumns: this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns\n\t};\n\n\t//load pagination data if needed\n\tif (this.config.page) {\n\t\tretreivedData = this.retreiveData(\"page\");\n\n\t\tif (retreivedData) {\n\t\t\tif (typeof retreivedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)) {\n\t\t\t\tthis.table.options.paginationSize = retreivedData.paginationSize;\n\t\t\t}\n\n\t\t\tif (typeof retreivedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)) {\n\t\t\t\tthis.table.options.paginationInitialPage = retreivedData.paginationInitialPage;\n\t\t\t}\n\t\t}\n\t}\n\n\t//load group data if needed\n\tif (this.config.group) {\n\t\tretreivedData = this.retreiveData(\"group\");\n\n\t\tif (retreivedData) {\n\t\t\tif (typeof retreivedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)) {\n\t\t\t\tthis.table.options.groupBy = retreivedData.groupBy;\n\t\t\t}\n\t\t\tif (typeof retreivedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)) {\n\t\t\t\tthis.table.options.groupStartOpen = retreivedData.groupStartOpen;\n\t\t\t}\n\t\t\tif (typeof retreivedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)) {\n\t\t\t\tthis.table.options.groupHeader = retreivedData.groupHeader;\n\t\t\t}\n\t\t}\n\t}\n};\n\nPersistence.prototype.initializeColumn = function (column) {\n\tvar self = this,\n\t    def,\n\t    keys;\n\n\tif (this.config.columns) {\n\t\tthis.defWatcherBlock = true;\n\n\t\tdef = column.getDefinition();\n\n\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n\n\t\tkeys.forEach(function (key) {\n\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\n\t\t\tvar value = def[key];\n\t\t\tif (props) {\n\t\t\t\tObject.defineProperty(def, key, {\n\t\t\t\t\tset: function set(newValue) {\n\t\t\t\t\t\tvalue = newValue;\n\n\t\t\t\t\t\tif (!self.defWatcherBlock) {\n\t\t\t\t\t\t\tself.save(\"columns\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (props.set) {\n\t\t\t\t\t\t\tprops.set(newValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tget: function get() {\n\t\t\t\t\t\tif (props.get) {\n\t\t\t\t\t\t\tprops.get();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.defWatcherBlock = false;\n\t}\n};\n\n//load saved definitions\nPersistence.prototype.load = function (type, current) {\n\tvar data = this.retreiveData(type);\n\n\tif (current) {\n\t\tdata = data ? this.mergeDefinition(current, data) : current;\n\t}\n\n\treturn data;\n};\n\n//retreive data from memory\nPersistence.prototype.retreiveData = function (type) {\n\treturn this.readFunc ? this.readFunc(this.id, type) : false;\n};\n\n//merge old and new column definitions\nPersistence.prototype.mergeDefinition = function (oldCols, newCols) {\n\tvar self = this,\n\t    output = [];\n\n\t// oldCols = oldCols || [];\n\tnewCols = newCols || [];\n\n\tnewCols.forEach(function (column, to) {\n\n\t\tvar from = self._findColumn(oldCols, column),\n\t\t    keys;\n\n\t\tif (from) {\n\n\t\t\tif (self.config.columns === true || self.config.columns == undefined) {\n\t\t\t\tkeys = Object.keys(from);\n\t\t\t\tkeys.push(\"width\");\n\t\t\t} else {\n\t\t\t\tkeys = self.config.columns;\n\t\t\t}\n\n\t\t\tkeys.forEach(function (key) {\n\t\t\t\tif (typeof column[key] !== \"undefined\") {\n\t\t\t\t\tfrom[key] = column[key];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (from.columns) {\n\t\t\t\tfrom.columns = self.mergeDefinition(from.columns, column.columns);\n\t\t\t}\n\n\t\t\toutput.push(from);\n\t\t}\n\t});\n\n\toldCols.forEach(function (column, i) {\n\t\tvar from = self._findColumn(newCols, column);\n\t\tif (!from) {\n\t\t\tif (output.length > i) {\n\t\t\t\toutput.splice(i, 0, column);\n\t\t\t} else {\n\t\t\t\toutput.push(column);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn output;\n};\n\n//find matching columns\nPersistence.prototype._findColumn = function (columns, subject) {\n\tvar type = subject.columns ? \"group\" : subject.field ? \"field\" : \"object\";\n\n\treturn columns.find(function (col) {\n\t\tswitch (type) {\n\t\t\tcase \"group\":\n\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\n\t\t\t\tbreak;\n\n\t\t\tcase \"field\":\n\t\t\t\treturn col.field === subject.field;\n\t\t\t\tbreak;\n\n\t\t\tcase \"object\":\n\t\t\t\treturn col === subject;\n\t\t\t\tbreak;\n\t\t}\n\t});\n};\n\n//save data\nPersistence.prototype.save = function (type) {\n\tvar data = {};\n\n\tswitch (type) {\n\t\tcase \"columns\":\n\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns());\n\t\t\tbreak;\n\n\t\tcase \"filter\":\n\t\t\tdata = this.table.modules.filter.getFilters();\n\t\t\tbreak;\n\n\t\tcase \"sort\":\n\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\n\t\t\tbreak;\n\n\t\tcase \"group\":\n\t\t\tdata = this.getGroupConfig();\n\t\t\tbreak;\n\n\t\tcase \"page\":\n\t\t\tdata = this.getPageConfig();\n\t\t\tbreak;\n\t}\n\n\tif (this.writeFunc) {\n\t\tthis.writeFunc(this.id, type, data);\n\t}\n};\n\n//ensure sorters contain no function data\nPersistence.prototype.validateSorters = function (data) {\n\tdata.forEach(function (item) {\n\t\titem.column = item.field;\n\t\tdelete item.field;\n\t});\n\n\treturn data;\n};\n\nPersistence.prototype.getGroupConfig = function () {\n\tvar data = {};\n\n\tif (this.config.group) {\n\t\tif (this.config.group === true || this.config.group.groupBy) {\n\t\t\tdata.groupBy = this.table.options.groupBy;\n\t\t}\n\n\t\tif (this.config.group === true || this.config.group.groupStartOpen) {\n\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\n\t\t}\n\n\t\tif (this.config.group === true || this.config.group.groupHeader) {\n\t\t\tdata.groupHeader = this.table.options.groupHeader;\n\t\t}\n\t}\n\n\treturn data;\n};\n\nPersistence.prototype.getPageConfig = function () {\n\tvar data = {};\n\n\tif (this.config.page) {\n\t\tif (this.config.page === true || this.config.page.size) {\n\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\n\t\t}\n\n\t\tif (this.config.page === true || this.config.page.page) {\n\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\n\t\t}\n\t}\n\n\treturn data;\n};\n\n//parse columns for data to store\nPersistence.prototype.parseColumns = function (columns) {\n\tvar self = this,\n\t    definitions = [],\n\t    excludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n\n\tcolumns.forEach(function (column) {\n\t\tvar defStore = {},\n\t\t    colDef = column.getDefinition(),\n\t\t    keys;\n\n\t\tif (column.isGroup) {\n\t\t\tdefStore.title = colDef.title;\n\t\t\tdefStore.columns = self.parseColumns(column.getColumns());\n\t\t} else {\n\t\t\tdefStore.field = column.getField();\n\n\t\t\tif (self.config.columns === true || self.config.columns == undefined) {\n\t\t\t\tkeys = Object.keys(colDef);\n\t\t\t\tkeys.push(\"width\");\n\t\t\t} else {\n\t\t\t\tkeys = self.config.columns;\n\t\t\t}\n\n\t\t\tkeys.forEach(function (key) {\n\n\t\t\t\tswitch (key) {\n\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\tdefStore.width = column.getWidth();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"visible\":\n\t\t\t\t\t\tdefStore.visible = column.visible;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1) {\n\t\t\t\t\t\t\tdefStore[key] = colDef[key];\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tdefinitions.push(defStore);\n\t});\n\n\treturn definitions;\n};\n\n// read peristence information from storage\nPersistence.prototype.readers = {\n\tlocal: function local(id, type) {\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\n\n\t\treturn data ? JSON.parse(data) : false;\n\t},\n\tcookie: function cookie(id, type) {\n\t\tvar cookie = document.cookie,\n\t\t    key = id + \"-\" + type,\n\t\t    cookiePos = cookie.indexOf(key + \"=\"),\n\t\t    end,\n\t\t    data;\n\n\t\t//if cookie exists, decode and load column data into tabulator\n\t\tif (cookiePos > -1) {\n\t\t\tcookie = cookie.substr(cookiePos);\n\n\t\t\tend = cookie.indexOf(\";\");\n\n\t\t\tif (end > -1) {\n\t\t\t\tcookie = cookie.substr(0, end);\n\t\t\t}\n\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\n\t\t}\n\n\t\treturn data ? JSON.parse(data) : false;\n\t}\n};\n\n//write persistence information to storage\nPersistence.prototype.writers = {\n\tlocal: function local(id, type, data) {\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n\t},\n\tcookie: function cookie(id, type, data) {\n\t\tvar expireDate = new Date();\n\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\n\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n\t}\n};\n\nTabulator.prototype.registerModule(\"persistence\", Persistence);\n\nvar Print = function Print(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.element = false;\n\tthis.manualBlock = false;\n};\n\nPrint.prototype.initialize = function () {\n\twindow.addEventListener(\"beforeprint\", this.replaceTable.bind(this));\n\twindow.addEventListener(\"afterprint\", this.cleanup.bind(this));\n};\n\nPrint.prototype.replaceTable = function () {\n\tif (!this.manualBlock) {\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-print-table\");\n\n\t\tthis.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n\n\t\tthis.table.element.style.display = \"none\";\n\n\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\n\t}\n};\n\nPrint.prototype.cleanup = function () {\n\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n\tif (this.element && this.element.parentNode) {\n\t\tthis.element.parentNode.removeChild(this.element);\n\t\tthis.table.element.style.display = \"\";\n\t}\n};\n\nPrint.prototype.printFullscreen = function (visible, style, config) {\n\tvar scrollX = window.scrollX,\n\t    scrollY = window.scrollY,\n\t    headerEl = document.createElement(\"div\"),\n\t    footerEl = document.createElement(\"div\"),\n\t    tableEl = this.table.modules.export.genereateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible, \"print\"),\n\t    headerContent,\n\t    footerContent;\n\n\tthis.manualBlock = true;\n\n\tthis.element = document.createElement(\"div\");\n\tthis.element.classList.add(\"tabulator-print-fullscreen\");\n\n\tif (this.table.options.printHeader) {\n\t\theaderEl.classList.add(\"tabulator-print-header\");\n\n\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n\t\tif (typeof headerContent == \"string\") {\n\t\t\theaderEl.innerHTML = headerContent;\n\t\t} else {\n\t\t\theaderEl.appendChild(headerContent);\n\t\t}\n\n\t\tthis.element.appendChild(headerEl);\n\t}\n\n\tthis.element.appendChild(tableEl);\n\n\tif (this.table.options.printFooter) {\n\t\tfooterEl.classList.add(\"tabulator-print-footer\");\n\n\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n\t\tif (typeof footerContent == \"string\") {\n\t\t\tfooterEl.innerHTML = footerContent;\n\t\t} else {\n\t\t\tfooterEl.appendChild(footerContent);\n\t\t}\n\n\t\tthis.element.appendChild(footerEl);\n\t}\n\n\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\n\tdocument.body.appendChild(this.element);\n\n\tif (this.table.options.printFormatter) {\n\t\tthis.table.options.printFormatter(this.element, tableEl);\n\t}\n\n\twindow.print();\n\n\tthis.cleanup();\n\n\twindow.scrollTo(scrollX, scrollY);\n\n\tthis.manualBlock = false;\n};\n\nTabulator.prototype.registerModule(\"print\", Print);\nvar ReactiveData = function ReactiveData(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.data = false;\n\tthis.blocked = false; //block reactivity while performing update\n\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\tthis.currentVersion = 0;\n};\n\nReactiveData.prototype.watchData = function (data) {\n\tvar self = this,\n\t    pushFunc,\n\t    version;\n\n\tthis.currentVersion++;\n\n\tversion = this.currentVersion;\n\n\tself.unwatchData();\n\n\tself.data = data;\n\n\t//override array push function\n\tself.origFuncs.push = data.push;\n\n\tObject.defineProperty(self.data, \"push\", {\n\t\tenumerable: false,\n\t\tconfigurable: true,\n\t\tvalue: function value() {\n\t\t\tvar args = Array.from(arguments);\n\n\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\targs.forEach(function (arg) {\n\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn self.origFuncs.push.apply(data, arguments);\n\t\t}\n\t});\n\n\t//override array unshift function\n\tself.origFuncs.unshift = data.unshift;\n\n\tObject.defineProperty(self.data, \"unshift\", {\n\t\tenumerable: false,\n\t\tconfigurable: true,\n\t\tvalue: function value() {\n\t\t\tvar args = Array.from(arguments);\n\n\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\targs.forEach(function (arg) {\n\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn self.origFuncs.unshift.apply(data, arguments);\n\t\t}\n\t});\n\n\t//override array shift function\n\tself.origFuncs.shift = data.shift;\n\n\tObject.defineProperty(self.data, \"shift\", {\n\t\tenumerable: false,\n\t\tconfigurable: true,\n\t\tvalue: function value() {\n\t\t\tvar row;\n\n\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\tif (self.data.length) {\n\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\n\t\t\t\t\tif (row) {\n\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self.origFuncs.shift.call(data);\n\t\t}\n\t});\n\n\t//override array pop function\n\tself.origFuncs.pop = data.pop;\n\n\tObject.defineProperty(self.data, \"pop\", {\n\t\tenumerable: false,\n\t\tconfigurable: true,\n\t\tvalue: function value() {\n\t\t\tvar row;\n\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\tif (self.data.length) {\n\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\n\t\t\t\t\tif (row) {\n\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn self.origFuncs.pop.call(data);\n\t\t}\n\t});\n\n\t//override array splice function\n\tself.origFuncs.splice = data.splice;\n\n\tObject.defineProperty(self.data, \"splice\", {\n\t\tenumerable: false,\n\t\tconfigurable: true,\n\t\tvalue: function value() {\n\t\t\tvar args = Array.from(arguments),\n\t\t\t    start = args[0] < 0 ? data.length + args[0] : args[0],\n\t\t\t    end = args[1],\n\t\t\t    newRows = args[2] ? args.slice(2) : false,\n\t\t\t    startRow;\n\n\t\t\tif (!self.blocked && version === self.currentVersion) {\n\n\t\t\t\t//add new rows\n\t\t\t\tif (newRows) {\n\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\n\t\t\t\t\tif (startRow) {\n\t\t\t\t\t\tnewRows.forEach(function (rowData) {\n\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewRows = newRows.slice().reverse();\n\n\t\t\t\t\t\tnewRows.forEach(function (rowData) {\n\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//delete removed rows\n\t\t\t\tif (end !== 0) {\n\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n\n\t\t\t\t\toldRows.forEach(function (rowData, i) {\n\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\n\n\t\t\t\t\t\tif (row) {\n\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (newRows || end !== 0) {\n\t\t\t\t\tself.table.rowManager.reRenderInPosition();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn self.origFuncs.splice.apply(data, arguments);\n\t\t}\n\t});\n};\n\nReactiveData.prototype.unwatchData = function () {\n\tif (this.data !== false) {\n\t\tfor (var key in this.origFuncs) {\n\t\t\tObject.defineProperty(this.data, key, {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: this.origFuncs.key\n\t\t\t});\n\t\t}\n\t}\n};\n\nReactiveData.prototype.watchRow = function (row) {\n\tvar data = row.getData();\n\n\tthis.blocked = true;\n\n\tfor (var key in data) {\n\t\tthis.watchKey(row, data, key);\n\t}\n\n\tif (this.table.options.dataTree) {\n\t\tthis.watchTreeChildren(row);\n\t}\n\n\tthis.blocked = false;\n};\n\nReactiveData.prototype.watchTreeChildren = function (row) {\n\tvar self = this,\n\t    childField = row.getData()[this.table.options.dataTreeChildField],\n\t    origFuncs = {};\n\n\tfunction rebuildTree() {\n\t\tself.table.modules.dataTree.initializeRow(row);\n\t\tself.table.modules.dataTree.layoutRow(row);\n\t\tself.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t}\n\n\tif (childField) {\n\n\t\torigFuncs.push = childField.push;\n\n\t\tObject.defineProperty(childField, \"push\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\n\n\t\t\t\trebuildTree();\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\n\t\torigFuncs.unshift = childField.unshift;\n\n\t\tObject.defineProperty(childField, \"unshift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar result = origFuncs.unshift.apply(childField, arguments);\n\n\t\t\t\trebuildTree();\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\n\t\torigFuncs.shift = childField.shift;\n\n\t\tObject.defineProperty(childField, \"shift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar result = origFuncs.shift.call(childField);\n\n\t\t\t\trebuildTree();\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\n\t\torigFuncs.pop = childField.pop;\n\n\t\tObject.defineProperty(childField, \"pop\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar result = origFuncs.pop.call(childField);\n\n\t\t\t\trebuildTree();\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\n\t\torigFuncs.splice = childField.splice;\n\n\t\tObject.defineProperty(childField, \"splice\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar result = origFuncs.splice.apply(childField, arguments);\n\n\t\t\t\trebuildTree();\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t}\n};\n\nReactiveData.prototype.watchKey = function (row, data, key) {\n\tvar self = this,\n\t    props = Object.getOwnPropertyDescriptor(data, key),\n\t    value = data[key],\n\t    version = this.currentVersion;\n\n\tObject.defineProperty(data, key, {\n\t\tset: function set(newValue) {\n\t\t\tvalue = newValue;\n\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\tvar update = {};\n\t\t\t\tupdate[key] = newValue;\n\t\t\t\trow.updateData(update);\n\t\t\t}\n\n\t\t\tif (props.set) {\n\t\t\t\tprops.set(newValue);\n\t\t\t}\n\t\t},\n\t\tget: function get() {\n\n\t\t\tif (props.get) {\n\t\t\t\tprops.get();\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}\n\t});\n};\n\nReactiveData.prototype.unwatchRow = function (row) {\n\tvar data = row.getData();\n\n\tfor (var key in data) {\n\t\tObject.defineProperty(data, key, {\n\t\t\tvalue: data[key]\n\t\t});\n\t}\n};\n\nReactiveData.prototype.block = function () {\n\tthis.blocked = true;\n};\n\nReactiveData.prototype.unblock = function () {\n\tthis.blocked = false;\n};\n\nTabulator.prototype.registerModule(\"reactiveData\", ReactiveData);\n\nvar ResizeColumns = function ResizeColumns(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.startColumn = false;\n\tthis.startX = false;\n\tthis.startWidth = false;\n\tthis.handle = null;\n\tthis.prevHandle = null;\n};\n\nResizeColumns.prototype.initializeColumn = function (type, column, element) {\n\tvar self = this,\n\t    variableHeight = false,\n\t    mode = this.table.options.resizableColumns;\n\n\t//set column resize mode\n\tif (type === \"header\") {\n\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n\t\tcolumn.modules.resize = { variableHeight: variableHeight };\n\t}\n\n\tif (mode === true || mode == type) {\n\n\t\tvar handle = document.createElement('div');\n\t\thandle.className = \"tabulator-col-resize-handle\";\n\n\t\tvar prevHandle = document.createElement('div');\n\t\tprevHandle.className = \"tabulator-col-resize-handle prev\";\n\n\t\thandle.addEventListener(\"click\", function (e) {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar handleDown = function handleDown(e) {\n\t\t\tvar nearestColumn = column.getLastColumn();\n\n\t\t\tif (nearestColumn && self._checkResizability(nearestColumn)) {\n\t\t\t\tself.startColumn = column;\n\t\t\t\tself._mouseDown(e, nearestColumn, handle);\n\t\t\t}\n\t\t};\n\n\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\thandle.addEventListener(\"touchstart\", handleDown, { passive: true });\n\n\t\t//reszie column on  double click\n\t\thandle.addEventListener(\"dblclick\", function (e) {\n\t\t\tvar col = column.getLastColumn();\n\n\t\t\tif (col && self._checkResizability(col)) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tcol.reinitializeWidth(true);\n\t\t\t}\n\t\t});\n\n\t\tprevHandle.addEventListener(\"click\", function (e) {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar prevHandleDown = function prevHandleDown(e) {\n\t\t\tvar nearestColumn, colIndex, prevColumn;\n\n\t\t\tnearestColumn = column.getFirstColumn();\n\n\t\t\tif (nearestColumn) {\n\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n\t\t\t\tif (prevColumn && self._checkResizability(prevColumn)) {\n\t\t\t\t\tself.startColumn = column;\n\t\t\t\t\tself._mouseDown(e, prevColumn, prevHandle);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tprevHandle.addEventListener(\"mousedown\", prevHandleDown);\n\t\tprevHandle.addEventListener(\"touchstart\", prevHandleDown, { passive: true });\n\n\t\t//resize column on double click\n\t\tprevHandle.addEventListener(\"dblclick\", function (e) {\n\t\t\tvar nearestColumn, colIndex, prevColumn;\n\n\t\t\tnearestColumn = column.getFirstColumn();\n\n\t\t\tif (nearestColumn) {\n\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n\t\t\t\tif (prevColumn && self._checkResizability(prevColumn)) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tprevColumn.reinitializeWidth(true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.appendChild(handle);\n\t\telement.appendChild(prevHandle);\n\t}\n};\n\nResizeColumns.prototype._checkResizability = function (column) {\n\treturn typeof column.definition.resizable != \"undefined\" ? column.definition.resizable : this.table.options.resizableColumns;\n};\n\nResizeColumns.prototype._mouseDown = function (e, column, handle) {\n\tvar self = this;\n\n\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\tfunction mouseMove(e) {\n\t\t// self.table.columnManager.tempScrollBlock();\n\n\t\tif (self.table.rtl) {\n\t\t\tcolumn.setWidth(self.startWidth - ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\n\t\t} else {\n\t\t\tcolumn.setWidth(self.startWidth + ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\n\t\t}\n\n\t\tif (self.table.options.virtualDomHoz) {\n\t\t\tself.table.vdomHoz.reinitialize(true);\n\t\t}\n\n\t\tif (!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n\t\t\tcolumn.checkCellHeights();\n\t\t}\n\t}\n\n\tfunction mouseUp(e) {\n\n\t\t//block editor from taking action while resizing is taking place\n\t\tif (self.startColumn.modules.edit) {\n\t\t\tself.startColumn.modules.edit.blocked = false;\n\t\t}\n\n\t\tif (self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n\t\t\tcolumn.checkCellHeights();\n\t\t}\n\n\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\n\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\tif (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.columns) {\n\t\t\tself.table.modules.persistence.save(\"columns\");\n\t\t}\n\n\t\tself.table.options.columnResized.call(self.table, column.getComponent());\n\t}\n\n\te.stopPropagation(); //prevent resize from interfereing with movable columns\n\n\t//block editor from taking action while resizing is taking place\n\tif (self.startColumn.modules.edit) {\n\t\tself.startColumn.modules.edit.blocked = true;\n\t}\n\n\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n\tself.startWidth = column.getWidth();\n\n\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\thandle.addEventListener(\"touchmove\", mouseMove, { passive: true });\n\thandle.addEventListener(\"touchend\", mouseUp);\n};\n\nTabulator.prototype.registerModule(\"resizeColumns\", ResizeColumns);\nvar ResizeRows = function ResizeRows(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.startColumn = false;\n\tthis.startY = false;\n\tthis.startHeight = false;\n\tthis.handle = null;\n\tthis.prevHandle = null;\n};\n\nResizeRows.prototype.initializeRow = function (row) {\n\tvar self = this,\n\t    rowEl = row.getElement();\n\n\tvar handle = document.createElement('div');\n\thandle.className = \"tabulator-row-resize-handle\";\n\n\tvar prevHandle = document.createElement('div');\n\tprevHandle.className = \"tabulator-row-resize-handle prev\";\n\n\thandle.addEventListener(\"click\", function (e) {\n\t\te.stopPropagation();\n\t});\n\n\tvar handleDown = function handleDown(e) {\n\t\tself.startRow = row;\n\t\tself._mouseDown(e, row, handle);\n\t};\n\n\thandle.addEventListener(\"mousedown\", handleDown);\n\thandle.addEventListener(\"touchstart\", handleDown, { passive: true });\n\n\tprevHandle.addEventListener(\"click\", function (e) {\n\t\te.stopPropagation();\n\t});\n\n\tvar prevHandleDown = function prevHandleDown(e) {\n\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\n\n\t\tif (prevRow) {\n\t\t\tself.startRow = prevRow;\n\t\t\tself._mouseDown(e, prevRow, prevHandle);\n\t\t}\n\t};\n\n\tprevHandle.addEventListener(\"mousedown\", prevHandleDown);\n\tprevHandle.addEventListener(\"touchstart\", prevHandleDown, { passive: true });\n\n\trowEl.appendChild(handle);\n\trowEl.appendChild(prevHandle);\n};\n\nResizeRows.prototype._mouseDown = function (e, row, handle) {\n\tvar self = this;\n\n\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\tfunction mouseMove(e) {\n\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n\t}\n\n\tfunction mouseUp(e) {\n\n\t\t// //block editor from taking action while resizing is taking place\n\t\t// if(self.startColumn.modules.edit){\n\t\t// \tself.startColumn.modules.edit.blocked = false;\n\t\t// }\n\n\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\n\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\tself.table.options.rowResized.call(this.table, row.getComponent());\n\t}\n\n\te.stopPropagation(); //prevent resize from interfereing with movable columns\n\n\t//block editor from taking action while resizing is taking place\n\t// if(self.startColumn.modules.edit){\n\t// \tself.startColumn.modules.edit.blocked = true;\n\t// }\n\n\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n\tself.startHeight = row.getHeight();\n\n\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\n\thandle.addEventListener(\"touchmove\", mouseMove, { passive: true });\n\thandle.addEventListener(\"touchend\", mouseUp);\n};\n\nTabulator.prototype.registerModule(\"resizeRows\", ResizeRows);\nvar ResizeTable = function ResizeTable(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.binding = false;\n\tthis.observer = false;\n\tthis.containerObserver = false;\n\n\tthis.tableHeight = 0;\n\tthis.tableWidth = 0;\n\tthis.containerHeight = 0;\n\tthis.containerWidth = 0;\n\n\tthis.autoResize = false;\n};\n\nResizeTable.prototype.initialize = function (row) {\n\tvar _this82 = this;\n\n\tvar table = this.table,\n\t    tableStyle;\n\n\tthis.tableHeight = table.element.clientHeight;\n\tthis.tableWidth = table.element.clientWidth;\n\n\tif (table.element.parentNode) {\n\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t}\n\n\tif (typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\") {\n\n\t\tthis.autoResize = true;\n\n\t\tthis.observer = new ResizeObserver(function (entry) {\n\t\t\tif (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n\n\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\n\t\t\t\tif (_this82.tableHeight != nodeHeight || _this82.tableWidth != nodeWidth) {\n\t\t\t\t\t_this82.tableHeight = nodeHeight;\n\t\t\t\t\t_this82.tableWidth = nodeWidth;\n\n\t\t\t\t\tif (table.element.parentNode) {\n\t\t\t\t\t\t_this82.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\t\t\t_this82.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (table.options.virtualDomHoz) {\n\t\t\t\t\t\ttable.vdomHoz.reinitialize(true);\n\t\t\t\t\t}\n\n\t\t\t\t\ttable.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.observer.observe(table.element);\n\n\t\ttableStyle = window.getComputedStyle(table.element);\n\n\t\tif (this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))) {\n\n\t\t\tthis.containerObserver = new ResizeObserver(function (entry) {\n\t\t\t\tif (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n\n\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\n\t\t\t\t\tif (_this82.containerHeight != nodeHeight || _this82.containerWidth != nodeWidth) {\n\t\t\t\t\t\t_this82.containerHeight = nodeHeight;\n\t\t\t\t\t\t_this82.containerWidth = nodeWidth;\n\t\t\t\t\t\t_this82.tableHeight = table.element.clientHeight;\n\t\t\t\t\t\t_this82.tableWidth = table.element.clientWidth;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (table.options.virtualDomHoz) {\n\t\t\t\t\t\ttable.vdomHoz.reinitialize(true);\n\t\t\t\t\t}\n\n\t\t\t\t\ttable.redraw();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\n\t\t}\n\t} else {\n\t\tthis.binding = function () {\n\t\t\tif (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n\t\t\t\tif (table.options.virtualDomHoz) {\n\t\t\t\t\ttable.vdomHoz.reinitialize(true);\n\t\t\t\t}\n\n\t\t\t\ttable.redraw();\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener(\"resize\", this.binding);\n\t}\n};\n\nResizeTable.prototype.clearBindings = function (row) {\n\tif (this.binding) {\n\t\twindow.removeEventListener(\"resize\", this.binding);\n\t}\n\n\tif (this.observer) {\n\t\tthis.observer.unobserve(this.table.element);\n\t}\n\n\tif (this.containerObserver) {\n\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\n\t}\n};\n\nTabulator.prototype.registerModule(\"resizeTable\", ResizeTable);\nvar ResponsiveLayout = function ResponsiveLayout(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.columns = [];\n\tthis.hiddenColumns = [];\n\tthis.mode = \"\";\n\tthis.index = 0;\n\tthis.collapseFormatter = [];\n\tthis.collapseStartOpen = true;\n\tthis.collapseHandleColumn = false;\n};\n\n//generate resposive columns list\nResponsiveLayout.prototype.initialize = function () {\n\tvar self = this,\n\t    columns = [];\n\n\tthis.mode = this.table.options.responsiveLayout;\n\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n\tthis.hiddenColumns = [];\n\n\t//detemine level of responsivity for each column\n\tthis.table.columnManager.columnsByIndex.forEach(function (column, i) {\n\t\tif (column.modules.responsive) {\n\t\t\tif (column.modules.responsive.order && column.modules.responsive.visible) {\n\t\t\t\tcolumn.modules.responsive.index = i;\n\t\t\t\tcolumns.push(column);\n\n\t\t\t\tif (!column.visible && self.mode === \"collapse\") {\n\t\t\t\t\tself.hiddenColumns.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t//sort list by responsivity\n\tcolumns = columns.reverse();\n\tcolumns = columns.sort(function (a, b) {\n\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\n\t\treturn diff || b.modules.responsive.index - a.modules.responsive.index;\n\t});\n\n\tthis.columns = columns;\n\n\tif (this.mode === \"collapse\") {\n\t\tthis.generateCollapsedContent();\n\t}\n\n\t//assign collapse column\n\tfor (var _iterator = this.table.columnManager.columnsByIndex, _isArray = Array.isArray(_iterator), _i16 = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n\t\tvar _ref;\n\n\t\tif (_isArray) {\n\t\t\tif (_i16 >= _iterator.length) break;\n\t\t\t_ref = _iterator[_i16++];\n\t\t} else {\n\t\t\t_i16 = _iterator.next();\n\t\t\tif (_i16.done) break;\n\t\t\t_ref = _i16.value;\n\t\t}\n\n\t\tvar col = _ref;\n\n\t\tif (col.definition.formatter == \"responsiveCollapse\") {\n\t\t\tthis.collapseHandleColumn = col;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (this.collapseHandleColumn) {\n\t\tif (this.hiddenColumns.length) {\n\t\t\tthis.collapseHandleColumn.show();\n\t\t} else {\n\t\t\tthis.collapseHandleColumn.hide();\n\t\t}\n\t}\n};\n\n//define layout information\nResponsiveLayout.prototype.initializeColumn = function (column) {\n\tvar def = column.getDefinition();\n\n\tcolumn.modules.responsive = { order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible: def.visible === false ? false : true };\n};\n\nResponsiveLayout.prototype.initializeRow = function (row) {\n\tvar el;\n\n\tif (row.type !== \"calc\") {\n\t\tel = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-responsive-collapse\");\n\n\t\trow.modules.responsiveLayout = {\n\t\t\telement: el,\n\t\t\topen: this.collapseStartOpen\n\t\t};\n\n\t\tif (!this.collapseStartOpen) {\n\t\t\tel.style.display = 'none';\n\t\t}\n\t}\n};\n\nResponsiveLayout.prototype.layoutRow = function (row) {\n\tvar rowEl = row.getElement();\n\n\tif (row.modules.responsiveLayout) {\n\t\trowEl.appendChild(row.modules.responsiveLayout.element);\n\t\tthis.generateCollapsedRowContent(row);\n\t}\n};\n\n//update column visibility\nResponsiveLayout.prototype.updateColumnVisibility = function (column, visible) {\n\tvar index;\n\tif (column.modules.responsive) {\n\t\tcolumn.modules.responsive.visible = visible;\n\t\tthis.initialize();\n\t}\n};\n\nResponsiveLayout.prototype.hideColumn = function (column) {\n\tvar colCount = this.hiddenColumns.length;\n\n\tcolumn.hide(false, true);\n\n\tif (this.mode === \"collapse\") {\n\t\tthis.hiddenColumns.unshift(column);\n\t\tthis.generateCollapsedContent();\n\n\t\tif (this.collapseHandleColumn && !colCount) {\n\t\t\tthis.collapseHandleColumn.show();\n\t\t}\n\t}\n};\n\nResponsiveLayout.prototype.showColumn = function (column) {\n\tvar index;\n\n\tcolumn.show(false, true);\n\t//set column width to prevent calculation loops on uninitialized columns\n\tcolumn.setWidth(column.getWidth());\n\n\tif (this.mode === \"collapse\") {\n\t\tindex = this.hiddenColumns.indexOf(column);\n\n\t\tif (index > -1) {\n\t\t\tthis.hiddenColumns.splice(index, 1);\n\t\t}\n\n\t\tthis.generateCollapsedContent();\n\n\t\tif (this.collapseHandleColumn && !this.hiddenColumns.length) {\n\t\t\tthis.collapseHandleColumn.hide();\n\t\t}\n\t}\n};\n\n//redraw columns to fit space\nResponsiveLayout.prototype.update = function () {\n\tvar self = this,\n\t    working = true;\n\n\twhile (working) {\n\n\t\tvar width = self.table.modules.layout.getMode() == \"fitColumns\" ? self.table.columnManager.getFlexBaseWidth() : self.table.columnManager.getWidth();\n\n\t\tvar diff = (self.table.options.headerVisible ? self.table.columnManager.element.clientWidth : self.table.element.clientWidth) - width;\n\n\t\tif (diff < 0) {\n\t\t\t//table is too wide\n\t\t\tvar column = self.columns[self.index];\n\n\t\t\tif (column) {\n\t\t\t\tself.hideColumn(column);\n\t\t\t\tself.index++;\n\t\t\t} else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t} else {\n\n\t\t\t//table has spare space\n\t\t\tvar _column = self.columns[self.index - 1];\n\n\t\t\tif (_column) {\n\t\t\t\tif (diff > 0) {\n\t\t\t\t\tif (diff >= _column.getWidth()) {\n\t\t\t\t\t\tself.showColumn(_column);\n\t\t\t\t\t\tself.index--;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tif (!self.table.rowManager.activeRowsCount) {\n\t\t\tself.table.rowManager.renderEmptyScroll();\n\t\t}\n\t}\n};\n\nResponsiveLayout.prototype.generateCollapsedContent = function () {\n\tvar self = this,\n\t    rows = this.table.rowManager.getDisplayRows();\n\n\trows.forEach(function (row) {\n\t\tself.generateCollapsedRowContent(row);\n\t});\n};\n\nResponsiveLayout.prototype.generateCollapsedRowContent = function (row) {\n\tvar el, contents;\n\n\tif (row.modules.responsiveLayout) {\n\t\tel = row.modules.responsiveLayout.element;\n\n\t\twhile (el.firstChild) {\n\t\t\tel.removeChild(el.firstChild);\n\t\t}contents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\t\tif (contents) {\n\t\t\tel.appendChild(contents);\n\t\t}\n\t}\n};\n\nResponsiveLayout.prototype.generateCollapsedRowData = function (row) {\n\tvar self = this,\n\t    data = row.getData(),\n\t    output = [],\n\t    mockCellComponent;\n\n\tthis.hiddenColumns.forEach(function (column) {\n\t\tvar value = column.getFieldValue(data);\n\n\t\tif (column.definition.title && column.field) {\n\t\t\tif (column.modules.format && self.table.options.responsiveLayoutCollapseUseFormatters) {\n\n\t\t\t\tmockCellComponent = {\n\t\t\t\t\tvalue: false,\n\t\t\t\t\tdata: {},\n\t\t\t\t\tgetValue: function getValue() {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t},\n\t\t\t\t\tgetData: function getData() {\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement: function getElement() {\n\t\t\t\t\t\treturn document.createElement(\"div\");\n\t\t\t\t\t},\n\t\t\t\t\tgetRow: function getRow() {\n\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn: function getColumn() {\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\toutput.push({\n\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\tvalue: column.modules.format.formatter.call(self.table.modules.format, mockCellComponent, column.modules.format.params)\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput.push({\n\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\tvalue: value\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\treturn output;\n};\n\nResponsiveLayout.prototype.formatCollapsedData = function (data) {\n\tvar list = document.createElement(\"table\"),\n\t    listContents = \"\";\n\n\tdata.forEach(function (item) {\n\t\tvar div = document.createElement(\"div\");\n\n\t\tif (item.value instanceof Node) {\n\t\t\tdiv.appendChild(item.value);\n\t\t\titem.value = div.innerHTML;\n\t\t}\n\n\t\tlistContents += \"<tr><td><strong>\" + item.title + \"</strong></td><td>\" + item.value + \"</td></tr>\";\n\t});\n\n\tlist.innerHTML = listContents;\n\n\treturn Object.keys(data).length ? list : \"\";\n};\n\nTabulator.prototype.registerModule(\"responsiveLayout\", ResponsiveLayout);\n\nvar SelectRow = function SelectRow(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.selecting = false; //flag selecting in progress\n\tthis.lastClickedRow = false; //last clicked row\n\tthis.selectPrev = []; //hold previously selected element for drag drop selection\n\tthis.selectedRows = []; //hold selected rows\n\tthis.headerCheckboxElement = null; // hold header select element\n};\n\nSelectRow.prototype.clearSelectionData = function (silent) {\n\tthis.selecting = false;\n\tthis.lastClickedRow = false;\n\tthis.selectPrev = [];\n\tthis.selectedRows = [];\n\n\tif (!silent) {\n\t\tthis._rowSelectionChanged();\n\t}\n};\n\nSelectRow.prototype.initializeRow = function (row) {\n\tvar self = this,\n\t    element = row.getElement();\n\n\t// trigger end of row selection\n\tvar endSelect = function endSelect() {\n\n\t\tsetTimeout(function () {\n\t\t\tself.selecting = false;\n\t\t}, 50);\n\n\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\n\t};\n\n\trow.modules.select = { selected: false };\n\n\t//set row selection class\n\tif (self.table.options.selectableCheck.call(this.table, row.getComponent())) {\n\t\telement.classList.add(\"tabulator-selectable\");\n\t\telement.classList.remove(\"tabulator-unselectable\");\n\n\t\tif (self.table.options.selectable && self.table.options.selectable != \"highlight\") {\n\t\t\tif (self.table.options.selectableRangeMode === \"click\") {\n\t\t\t\telement.addEventListener(\"click\", function (e) {\n\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\tself.lastClickedRow = self.lastClickedRow || row;\n\n\t\t\t\t\t\tvar lastClickedRowIdx = self.table.rowManager.getDisplayRowIndex(self.lastClickedRow);\n\t\t\t\t\t\tvar rowIdx = self.table.rowManager.getDisplayRowIndex(row);\n\n\t\t\t\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\t\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n\n\t\t\t\t\t\tvar rows = self.table.rowManager.getDisplayRows().slice(0);\n\t\t\t\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\n\t\t\t\t\t\tif (e.ctrlKey || e.metaKey) {\n\t\t\t\t\t\t\ttoggledRows.forEach(function (toggledRow) {\n\t\t\t\t\t\t\t\tif (toggledRow !== self.lastClickedRow) {\n\n\t\t\t\t\t\t\t\t\tif (self.table.options.selectable !== true && !self.isRowSelected(row)) {\n\t\t\t\t\t\t\t\t\t\tif (self.selectedRows.length < self.table.options.selectable) {\n\t\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tself.lastClickedRow = row;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.deselectRows(undefined, true);\n\n\t\t\t\t\t\t\tif (self.table.options.selectable !== true) {\n\t\t\t\t\t\t\t\tif (toggledRows.length > self.table.options.selectable) {\n\t\t\t\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, self.table.options.selectable);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tself.selectRows(toggledRows);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t} else if (e.ctrlKey || e.metaKey) {\n\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\tself.lastClickedRow = row;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.deselectRows(undefined, true);\n\t\t\t\t\t\tself.selectRows(row);\n\t\t\t\t\t\tself.lastClickedRow = row;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\telement.addEventListener(\"click\", function (e) {\n\t\t\t\t\tif (!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()) {\n\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!self.selecting) {\n\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\telement.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\tself.table._clearSelection();\n\n\t\t\t\t\t\tself.selecting = true;\n\n\t\t\t\t\t\tself.selectPrev = [];\n\n\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\n\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\n\n\t\t\t\t\t\tself.toggleRow(row);\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\telement.addEventListener(\"mouseenter\", function (e) {\n\t\t\t\t\tif (self.selecting) {\n\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\tself.toggleRow(row);\n\n\t\t\t\t\t\tif (self.selectPrev[1] == row) {\n\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\telement.addEventListener(\"mouseout\", function (e) {\n\t\t\t\t\tif (self.selecting) {\n\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\tself.selectPrev.unshift(row);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t} else {\n\t\telement.classList.add(\"tabulator-unselectable\");\n\t\telement.classList.remove(\"tabulator-selectable\");\n\t}\n};\n\n//toggle row selection\nSelectRow.prototype.toggleRow = function (row) {\n\tif (this.table.options.selectableCheck.call(this.table, row.getComponent())) {\n\t\tif (row.modules.select && row.modules.select.selected) {\n\t\t\tthis._deselectRow(row);\n\t\t} else {\n\t\t\tthis._selectRow(row);\n\t\t}\n\t}\n};\n\n//select a number of rows\nSelectRow.prototype.selectRows = function (rows) {\n\tvar _this83 = this;\n\n\tvar rowMatch;\n\n\tswitch (typeof rows === 'undefined' ? 'undefined' : _typeof(rows)) {\n\t\tcase \"undefined\":\n\t\t\tthis.table.rowManager.rows.forEach(function (row) {\n\t\t\t\t_this83._selectRow(row, true, true);\n\t\t\t});\n\n\t\t\tthis._rowSelectionChanged();\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\n\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\n\t\t\tif (rowMatch) {\n\t\t\t\tthis._selectRow(rowMatch, true, true);\n\t\t\t} else {\n\t\t\t\tthis.table.rowManager.getRows(rows).forEach(function (row) {\n\t\t\t\t\t_this83._selectRow(row, true, true);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._rowSelectionChanged();\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tif (Array.isArray(rows)) {\n\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\t_this83._selectRow(row, true, true);\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged();\n\t\t\t} else {\n\t\t\t\tthis._selectRow(rows, false, true);\n\t\t\t}\n\t\t\tbreak;\n\t}\n};\n\n//select an individual row\nSelectRow.prototype._selectRow = function (rowInfo, silent, force) {\n\tvar index;\n\n\t//handle max row count\n\tif (!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force) {\n\t\tif (this.selectedRows.length >= this.table.options.selectable) {\n\t\t\tif (this.table.options.selectableRollingSelection) {\n\t\t\t\tthis._deselectRow(this.selectedRows[0]);\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\tvar row = this.table.rowManager.findRow(rowInfo);\n\n\tif (row) {\n\t\tif (this.selectedRows.indexOf(row) == -1) {\n\t\t\tif (!row.modules.select) {\n\t\t\t\trow.modules.select = {};\n\t\t\t}\n\n\t\t\trow.modules.select.selected = true;\n\t\t\tif (row.modules.select.checkboxEl) {\n\t\t\t\trow.modules.select.checkboxEl.checked = true;\n\t\t\t}\n\t\t\trow.getElement().classList.add(\"tabulator-selected\");\n\n\t\t\tthis.selectedRows.push(row);\n\n\t\t\tif (this.table.options.dataTreeSelectPropagate) {\n\t\t\t\tthis.childRowSelection(row, true);\n\t\t\t}\n\n\t\t\tif (!silent) {\n\t\t\t\tthis.table.options.rowSelected.call(this.table, row.getComponent());\n\t\t\t}\n\n\t\t\tthis._rowSelectionChanged(silent);\n\t\t}\n\t} else {\n\t\tif (!silent) {\n\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t}\n\t}\n};\n\nSelectRow.prototype.isRowSelected = function (row) {\n\treturn this.selectedRows.indexOf(row) !== -1;\n};\n\n//deselect a number of rows\nSelectRow.prototype.deselectRows = function (rows, silent) {\n\tvar self = this,\n\t    rowCount;\n\n\tif (typeof rows == \"undefined\") {\n\n\t\trowCount = self.selectedRows.length;\n\n\t\tfor (var _i17 = 0; _i17 < rowCount; _i17++) {\n\t\t\tself._deselectRow(self.selectedRows[0], true);\n\t\t}\n\n\t\tself._rowSelectionChanged(silent);\n\t} else {\n\t\tif (Array.isArray(rows)) {\n\t\t\trows.forEach(function (row) {\n\t\t\t\tself._deselectRow(row, true);\n\t\t\t});\n\n\t\t\tself._rowSelectionChanged(silent);\n\t\t} else {\n\t\t\tself._deselectRow(rows, silent);\n\t\t}\n\t}\n};\n\n//deselect an individual row\nSelectRow.prototype._deselectRow = function (rowInfo, silent) {\n\tvar self = this,\n\t    row = self.table.rowManager.findRow(rowInfo),\n\t    index;\n\n\tif (row) {\n\t\tindex = self.selectedRows.findIndex(function (selectedRow) {\n\t\t\treturn selectedRow == row;\n\t\t});\n\n\t\tif (index > -1) {\n\n\t\t\tif (!row.modules.select) {\n\t\t\t\trow.modules.select = {};\n\t\t\t}\n\n\t\t\trow.modules.select.selected = false;\n\t\t\tif (row.modules.select.checkboxEl) {\n\t\t\t\trow.modules.select.checkboxEl.checked = false;\n\t\t\t}\n\t\t\trow.getElement().classList.remove(\"tabulator-selected\");\n\t\t\tself.selectedRows.splice(index, 1);\n\n\t\t\tif (this.table.options.dataTreeSelectPropagate) {\n\t\t\t\tthis.childRowSelection(row, false);\n\t\t\t}\n\n\t\t\tif (!silent) {\n\t\t\t\tself.table.options.rowDeselected.call(this.table, row.getComponent());\n\t\t\t}\n\n\t\t\tself._rowSelectionChanged(silent);\n\t\t}\n\t} else {\n\t\tif (!silent) {\n\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t}\n\t}\n};\n\nSelectRow.prototype.getSelectedData = function () {\n\tvar data = [];\n\n\tthis.selectedRows.forEach(function (row) {\n\t\tdata.push(row.getData());\n\t});\n\n\treturn data;\n};\n\nSelectRow.prototype.getSelectedRows = function () {\n\n\tvar rows = [];\n\n\tthis.selectedRows.forEach(function (row) {\n\t\trows.push(row.getComponent());\n\t});\n\n\treturn rows;\n};\n\nSelectRow.prototype._rowSelectionChanged = function (silent) {\n\tif (this.headerCheckboxElement) {\n\t\tif (this.selectedRows.length === 0) {\n\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t} else if (this.table.rowManager.rows.length === this.selectedRows.length) {\n\t\t\tthis.headerCheckboxElement.checked = true;\n\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t} else {\n\t\t\tthis.headerCheckboxElement.indeterminate = true;\n\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t}\n\t}\n\n\tif (!silent) {\n\t\tthis.table.options.rowSelectionChanged.call(this.table, this.getSelectedData(), this.getSelectedRows());\n\t}\n};\n\nSelectRow.prototype.registerRowSelectCheckbox = function (row, element) {\n\tif (!row._row.modules.select) {\n\t\trow._row.modules.select = {};\n\t}\n\n\trow._row.modules.select.checkboxEl = element;\n};\n\nSelectRow.prototype.registerHeaderSelectCheckbox = function (element) {\n\tthis.headerCheckboxElement = element;\n};\n\nSelectRow.prototype.childRowSelection = function (row, select) {\n\tvar children = this.table.modules.dataTree.getChildren(row);\n\n\tif (select) {\n\t\tfor (var _iterator2 = children, _isArray2 = Array.isArray(_iterator2), _i18 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n\t\t\tvar _ref2;\n\n\t\t\tif (_isArray2) {\n\t\t\t\tif (_i18 >= _iterator2.length) break;\n\t\t\t\t_ref2 = _iterator2[_i18++];\n\t\t\t} else {\n\t\t\t\t_i18 = _iterator2.next();\n\t\t\t\tif (_i18.done) break;\n\t\t\t\t_ref2 = _i18.value;\n\t\t\t}\n\n\t\t\tvar child = _ref2;\n\n\t\t\tthis._selectRow(child, true);\n\t\t}\n\t} else {\n\t\tfor (var _iterator3 = children, _isArray3 = Array.isArray(_iterator3), _i19 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n\t\t\tvar _ref3;\n\n\t\t\tif (_isArray3) {\n\t\t\t\tif (_i19 >= _iterator3.length) break;\n\t\t\t\t_ref3 = _iterator3[_i19++];\n\t\t\t} else {\n\t\t\t\t_i19 = _iterator3.next();\n\t\t\t\tif (_i19.done) break;\n\t\t\t\t_ref3 = _i19.value;\n\t\t\t}\n\n\t\t\tvar _child = _ref3;\n\n\t\t\tthis._deselectRow(_child, true);\n\t\t}\n\t}\n};\n\nTabulator.prototype.registerModule(\"selectRow\", SelectRow);\n\nvar Sort = function Sort(table) {\n\tthis.table = table; //hold Tabulator object\n\tthis.sortList = []; //holder current sort\n\tthis.changed = false; //has the sort changed since last render\n};\n\n//initialize column header for sorting\nSort.prototype.initializeColumn = function (column, content) {\n\tvar self = this,\n\t    sorter = false,\n\t    colEl,\n\t    arrowEl;\n\n\tswitch (_typeof(column.definition.sorter)) {\n\t\tcase \"string\":\n\t\t\tif (self.sorters[column.definition.sorter]) {\n\t\t\t\tsorter = self.sorters[column.definition.sorter];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"function\":\n\t\t\tsorter = column.definition.sorter;\n\t\t\tbreak;\n\t}\n\n\tcolumn.modules.sort = {\n\t\tsorter: sorter, dir: \"none\",\n\t\tparams: column.definition.sorterParams || {},\n\t\tstartingDir: column.definition.headerSortStartingDir || \"asc\",\n\t\ttristate: typeof column.definition.headerSortTristate !== \"undefined\" ? column.definition.headerSortTristate : this.table.options.headerSortTristate\n\t};\n\n\tif (typeof column.definition.headerSort === \"undefined\" ? this.table.options.headerSort !== false : column.definition.headerSort !== false) {\n\n\t\tcolEl = column.getElement();\n\n\t\tcolEl.classList.add(\"tabulator-sortable\");\n\n\t\tarrowEl = document.createElement(\"div\");\n\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\n\n\t\tif (_typeof(this.table.options.headerSortElement) == \"object\") {\n\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\n\t\t} else {\n\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\n\t\t}\n\n\t\t//create sorter arrow\n\t\tcontent.appendChild(arrowEl);\n\n\t\tcolumn.modules.sort.element = arrowEl;\n\n\t\t//sort on click\n\t\tcolEl.addEventListener(\"click\", function (e) {\n\t\t\tvar dir = \"\",\n\t\t\t    sorters = [],\n\t\t\t    match = false;\n\n\t\t\tif (column.modules.sort) {\n\t\t\t\tif (column.modules.sort.tristate) {\n\t\t\t\t\tif (column.modules.sort.dir == \"none\") {\n\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (column.modules.sort.dir == column.modules.sort.startingDir) {\n\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdir = \"none\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tswitch (column.modules.sort.dir) {\n\t\t\t\t\t\tcase \"asc\":\n\t\t\t\t\t\t\tdir = \"desc\";\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"desc\":\n\t\t\t\t\t\t\tdir = \"asc\";\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n\t\t\t\t\tsorters = self.getSort();\n\n\t\t\t\t\tmatch = sorters.findIndex(function (sorter) {\n\t\t\t\t\t\treturn sorter.field === column.getField();\n\t\t\t\t\t});\n\n\t\t\t\t\tif (match > -1) {\n\t\t\t\t\t\tsorters[match].dir = dir;\n\n\t\t\t\t\t\tif (match != sorters.length - 1) {\n\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\n\t\t\t\t\t\t\tif (dir != \"none\") {\n\t\t\t\t\t\t\t\tsorters.push(match);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (dir != \"none\") {\n\t\t\t\t\t\t\tsorters.push({ column: column, dir: dir });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//add to existing sort\n\t\t\t\t\tself.setSort(sorters);\n\t\t\t\t} else {\n\t\t\t\t\tif (dir == \"none\") {\n\t\t\t\t\t\tself.clear();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//sort by column only\n\t\t\t\t\t\tself.setSort(column, dir);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tself.table.rowManager.sorterRefresh(!self.sortList.length);\n\t\t\t}\n\t\t});\n\t}\n};\n\n//check if the sorters have changed since last use\nSort.prototype.hasChanged = function () {\n\tvar changed = this.changed;\n\tthis.changed = false;\n\treturn changed;\n};\n\n//return current sorters\nSort.prototype.getSort = function () {\n\tvar self = this,\n\t    sorters = [];\n\n\tself.sortList.forEach(function (item) {\n\t\tif (item.column) {\n\t\t\tsorters.push({ column: item.column.getComponent(), field: item.column.getField(), dir: item.dir });\n\t\t}\n\t});\n\n\treturn sorters;\n};\n\n//change sort list and trigger sort\nSort.prototype.setSort = function (sortList, dir) {\n\tvar self = this,\n\t    newSortList = [];\n\n\tif (!Array.isArray(sortList)) {\n\t\tsortList = [{ column: sortList, dir: dir }];\n\t}\n\n\tsortList.forEach(function (item) {\n\t\tvar column;\n\n\t\tcolumn = self.table.columnManager.findColumn(item.column);\n\n\t\tif (column) {\n\t\t\titem.column = column;\n\t\t\tnewSortList.push(item);\n\t\t\tself.changed = true;\n\t\t} else {\n\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n\t\t}\n\t});\n\n\tself.sortList = newSortList;\n\n\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.sort) {\n\t\tthis.table.modules.persistence.save(\"sort\");\n\t}\n};\n\n//clear sorters\nSort.prototype.clear = function () {\n\tthis.setSort([]);\n};\n\n//find appropriate sorter for column\nSort.prototype.findSorter = function (column) {\n\tvar row = this.table.rowManager.activeRows[0],\n\t    sorter = \"string\",\n\t    field,\n\t    value;\n\n\tif (row) {\n\t\trow = row.getData();\n\t\tfield = column.getField();\n\n\t\tif (field) {\n\n\t\t\tvalue = column.getFieldValue(row);\n\n\t\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\t\tcase \"undefined\":\n\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tif (!isNaN(value) && value !== \"\") {\n\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn this.sorters[sorter];\n};\n\n//work through sort list sorting data\nSort.prototype.sort = function (data) {\n\tvar self = this,\n\t    sortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n\t    sortListActual = [],\n\t    rowComponents = [],\n\t    lastSort;\n\n\tif (self.table.options.dataSorting) {\n\t\tself.table.options.dataSorting.call(self.table, self.getSort());\n\t}\n\n\tself.clearColumnHeaders();\n\n\tif (!self.table.options.ajaxSorting) {\n\n\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\n\t\tsortList.forEach(function (item, i) {\n\t\t\tvar sortObj = item.column.modules.sort;\n\n\t\t\tif (item.column && sortObj) {\n\n\t\t\t\t//if no sorter has been defined, take a guess\n\t\t\t\tif (!sortObj.sorter) {\n\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\n\t\t\t\t}\n\n\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n\n\t\t\t\tsortListActual.push(item);\n\t\t\t}\n\n\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t});\n\n\t\t//sort data\n\t\tif (sortListActual.length) {\n\t\t\tself._sortItems(data, sortListActual);\n\t\t}\n\t} else {\n\t\tsortList.forEach(function (item, i) {\n\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t});\n\t}\n\n\tif (self.table.options.dataSorted) {\n\t\tdata.forEach(function (row) {\n\t\t\trowComponents.push(row.getComponent());\n\t\t});\n\n\t\tself.table.options.dataSorted.call(self.table, self.getSort(), rowComponents);\n\t}\n};\n\n//clear sort arrows on columns\nSort.prototype.clearColumnHeaders = function () {\n\tthis.table.columnManager.getRealColumns().forEach(function (column) {\n\t\tif (column.modules.sort) {\n\t\t\tcolumn.modules.sort.dir = \"none\";\n\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\n\t\t}\n\t});\n};\n\n//set the column header sort direction\nSort.prototype.setColumnHeader = function (column, dir) {\n\tcolumn.modules.sort.dir = dir;\n\tcolumn.getElement().setAttribute(\"aria-sort\", dir);\n};\n\n//sort each item in sort list\nSort.prototype._sortItems = function (data, sortList) {\n\tvar _this84 = this;\n\n\tvar sorterCount = sortList.length - 1;\n\n\tdata.sort(function (a, b) {\n\t\tvar result;\n\n\t\tfor (var i = sorterCount; i >= 0; i--) {\n\t\t\tvar sortItem = sortList[i];\n\n\t\t\tresult = _this84._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\n\t\t\tif (result !== 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t});\n};\n\n//process individual rows for a sort function on active data\nSort.prototype._sortRow = function (a, b, column, dir, params) {\n\tvar el1Comp, el2Comp, colComp;\n\n\t//switch elements depending on search direction\n\tvar el1 = dir == \"asc\" ? a : b;\n\tvar el2 = dir == \"asc\" ? b : a;\n\n\ta = column.getFieldValue(el1.getData());\n\tb = column.getFieldValue(el2.getData());\n\n\ta = typeof a !== \"undefined\" ? a : \"\";\n\tb = typeof b !== \"undefined\" ? b : \"\";\n\n\tel1Comp = el1.getComponent();\n\tel2Comp = el2.getComponent();\n\n\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n};\n\n//default data sorters\nSort.prototype.sorters = {\n\n\t//sort numbers\n\tnumber: function number(a, b, aRow, bRow, column, dir, params) {\n\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\tvar decimal = params.decimalSeparator || \".\";\n\t\tvar thousand = params.thousandSeparator || \",\";\n\t\tvar emptyAlign = 0;\n\n\t\ta = parseFloat(String(a).split(thousand).join(\"\").split(decimal).join(\".\"));\n\t\tb = parseFloat(String(b).split(thousand).join(\"\").split(decimal).join(\".\"));\n\n\t\t//handle non numeric values\n\t\tif (isNaN(a)) {\n\t\t\temptyAlign = isNaN(b) ? 0 : -1;\n\t\t} else if (isNaN(b)) {\n\t\t\temptyAlign = 1;\n\t\t} else {\n\t\t\t//compare valid values\n\t\t\treturn a - b;\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\t},\n\n\t//sort strings\n\tstring: function string(a, b, aRow, bRow, column, dir, params) {\n\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\tvar emptyAlign = 0;\n\t\tvar locale;\n\n\t\t//handle empty values\n\t\tif (!a) {\n\t\t\temptyAlign = !b ? 0 : -1;\n\t\t} else if (!b) {\n\t\t\temptyAlign = 1;\n\t\t} else {\n\t\t\t//compare valid values\n\t\t\tswitch (_typeof(params.locale)) {\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tif (params.locale) {\n\t\t\t\t\t\tlocale = this.table.modules.localize.getLocale();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"string\":\n\t\t\t\t\tlocale = params.locale;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\t},\n\n\t//sort date\n\tdate: function date(a, b, aRow, bRow, column, dir, params) {\n\t\tif (!params.format) {\n\t\t\tparams.format = \"DD/MM/YYYY\";\n\t\t}\n\n\t\treturn this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n\t},\n\n\t//sort HH:mm formatted times\n\ttime: function time(a, b, aRow, bRow, column, dir, params) {\n\t\tif (!params.format) {\n\t\t\tparams.format = \"HH:mm\";\n\t\t}\n\n\t\treturn this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n\t},\n\n\t//sort datetime\n\tdatetime: function datetime(a, b, aRow, bRow, column, dir, params) {\n\t\tvar format = params.format || \"DD/MM/YYYY HH:mm:ss\",\n\t\t    alignEmptyValues = params.alignEmptyValues,\n\t\t    emptyAlign = 0;\n\n\t\tif (typeof moment != \"undefined\") {\n\t\t\ta = moment(a, format);\n\t\t\tb = moment(b, format);\n\n\t\t\tif (!a.isValid()) {\n\t\t\t\temptyAlign = !b.isValid() ? 0 : -1;\n\t\t\t} else if (!b.isValid()) {\n\t\t\t\temptyAlign = 1;\n\t\t\t} else {\n\t\t\t\t//compare valid values\n\t\t\t\treturn a - b;\n\t\t\t}\n\n\t\t\t//fix empty values in position\n\t\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\t\temptyAlign *= -1;\n\t\t\t}\n\n\t\t\treturn emptyAlign;\n\t\t} else {\n\t\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on moment.js\");\n\t\t}\n\t},\n\n\t//sort booleans\n\tboolean: function boolean(a, b, aRow, bRow, column, dir, params) {\n\t\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n\t\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n\n\t\treturn el1 - el2;\n\t},\n\n\t//sort if element contains any data\n\tarray: function array(a, b, aRow, bRow, column, dir, params) {\n\t\tvar el1 = 0;\n\t\tvar el2 = 0;\n\t\tvar type = params.type || \"length\";\n\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\tvar emptyAlign = 0;\n\n\t\tfunction calc(value) {\n\n\t\t\tswitch (type) {\n\t\t\t\tcase \"length\":\n\t\t\t\t\treturn value.length;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"sum\":\n\t\t\t\t\treturn value.reduce(function (c, d) {\n\t\t\t\t\t\treturn c + d;\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"max\":\n\t\t\t\t\treturn Math.max.apply(null, value);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"min\":\n\t\t\t\t\treturn Math.min.apply(null, value);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"avg\":\n\t\t\t\t\treturn value.reduce(function (c, d) {\n\t\t\t\t\t\treturn c + d;\n\t\t\t\t\t}) / value.length;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t//handle non array values\n\t\tif (!Array.isArray(a)) {\n\t\t\talignEmptyValues = !Array.isArray(b) ? 0 : -1;\n\t\t} else if (!Array.isArray(b)) {\n\t\t\talignEmptyValues = 1;\n\t\t} else {\n\n\t\t\t//compare valid values\n\t\t\tel1 = a ? calc(a) : 0;\n\t\t\tel2 = b ? calc(b) : 0;\n\n\t\t\treturn el1 - el2;\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\t},\n\n\t//sort if element contains any data\n\texists: function exists(a, b, aRow, bRow, column, dir, params) {\n\t\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\n\t\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\n\n\t\treturn el1 - el2;\n\t},\n\n\t//sort alpha numeric strings\n\talphanum: function alphanum(as, bs, aRow, bRow, column, dir, params) {\n\t\tvar a,\n\t\t    b,\n\t\t    a1,\n\t\t    b1,\n\t\t    i = 0,\n\t\t    L,\n\t\t    rx = /(\\d+)|(\\D+)/g,\n\t\t    rd = /\\d/;\n\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\tvar emptyAlign = 0;\n\n\t\t//handle empty values\n\t\tif (!as && as !== 0) {\n\t\t\temptyAlign = !bs && bs !== 0 ? 0 : -1;\n\t\t} else if (!bs && bs !== 0) {\n\t\t\temptyAlign = 1;\n\t\t} else {\n\n\t\t\tif (isFinite(as) && isFinite(bs)) return as - bs;\n\t\t\ta = String(as).toLowerCase();\n\t\t\tb = String(bs).toLowerCase();\n\t\t\tif (a === b) return 0;\n\t\t\tif (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\t\ta = a.match(rx);\n\t\t\tb = b.match(rx);\n\t\t\tL = a.length > b.length ? b.length : a.length;\n\t\t\twhile (i < L) {\n\t\t\t\ta1 = a[i];\n\t\t\t\tb1 = b[i++];\n\t\t\t\tif (a1 !== b1) {\n\t\t\t\t\tif (isFinite(a1) && isFinite(b1)) {\n\t\t\t\t\t\tif (a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\t\tif (b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\t\treturn a1 - b1;\n\t\t\t\t\t} else return a1 > b1 ? 1 : -1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a.length > b.length;\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\t}\n};\n\nTabulator.prototype.registerModule(\"sort\", Sort);\n\nvar Validate = function Validate(table) {\n\tthis.table = table;\n\tthis.invalidCells = [];\n};\n\n//validate\nValidate.prototype.initializeColumn = function (column) {\n\tvar self = this,\n\t    config = [],\n\t    validator;\n\n\tif (column.definition.validator) {\n\n\t\tif (Array.isArray(column.definition.validator)) {\n\t\t\tcolumn.definition.validator.forEach(function (item) {\n\t\t\t\tvalidator = self._extractValidator(item);\n\n\t\t\t\tif (validator) {\n\t\t\t\t\tconfig.push(validator);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tvalidator = this._extractValidator(column.definition.validator);\n\n\t\t\tif (validator) {\n\t\t\t\tconfig.push(validator);\n\t\t\t}\n\t\t}\n\n\t\tcolumn.modules.validate = config.length ? config : false;\n\t}\n};\n\nValidate.prototype._extractValidator = function (value) {\n\tvar type, params, pos;\n\n\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\tcase \"string\":\n\t\t\tpos = value.indexOf(':');\n\n\t\t\tif (pos > -1) {\n\t\t\t\ttype = value.substring(0, pos);\n\t\t\t\tparams = value.substring(pos + 1);\n\t\t\t} else {\n\t\t\t\ttype = value;\n\t\t\t}\n\n\t\t\treturn this._buildValidator(type, params);\n\t\t\tbreak;\n\n\t\tcase \"function\":\n\t\t\treturn this._buildValidator(value);\n\t\t\tbreak;\n\n\t\tcase \"object\":\n\t\t\treturn this._buildValidator(value.type, value.parameters);\n\t\t\tbreak;\n\t}\n};\n\nValidate.prototype._buildValidator = function (type, params) {\n\n\tvar func = typeof type == \"function\" ? type : this.validators[type];\n\n\tif (!func) {\n\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\n\t\treturn false;\n\t} else {\n\t\treturn {\n\t\t\ttype: typeof type == \"function\" ? \"function\" : type,\n\t\t\tfunc: func,\n\t\t\tparams: params\n\t\t};\n\t}\n};\n\nValidate.prototype.validate = function (validators, cell, value) {\n\tvar self = this,\n\t    valid = [],\n\t    invalidIndex = this.invalidCells.indexOf(cell);\n\n\tif (validators) {\n\t\tvalidators.forEach(function (item) {\n\t\t\tif (!item.func.call(self, cell.getComponent(), value, item.params)) {\n\t\t\t\tvalid.push({\n\t\t\t\t\ttype: item.type,\n\t\t\t\t\tparameters: item.params\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tvalid = valid.length ? valid : true;\n\n\tif (!cell.modules.validate) {\n\t\tcell.modules.validate = {};\n\t}\n\n\tif (valid === true) {\n\t\tcell.modules.validate.invalid = false;\n\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\n\t\tif (invalidIndex > -1) {\n\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t}\n\t} else {\n\t\tcell.modules.validate.invalid = true;\n\n\t\tif (this.table.options.validationMode !== \"manual\") {\n\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t}\n\n\t\tif (invalidIndex == -1) {\n\t\t\tthis.invalidCells.push(cell);\n\t\t}\n\t}\n\n\treturn valid;\n};\n\nValidate.prototype.getInvalidCells = function () {\n\tvar output = [];\n\n\tthis.invalidCells.forEach(function (cell) {\n\t\toutput.push(cell.getComponent());\n\t});\n\n\treturn output;\n};\n\nValidate.prototype.clearValidation = function (cell) {\n\tvar invalidIndex;\n\n\tif (cell.modules.validate && cell.modules.validate.invalid) {\n\n\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\tcell.modules.validate.invalid = false;\n\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\n\t\tif (invalidIndex > -1) {\n\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t}\n\t}\n};\n\nValidate.prototype.validators = {\n\n\t//is integer\n\tinteger: function integer(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\tvalue = Number(value);\n\t\treturn typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n\t},\n\n\t//is float\n\tfloat: function float(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\tvalue = Number(value);\n\t\treturn typeof value === 'number' && isFinite(value) && value % 1 !== 0;\n\t},\n\n\t//must be a number\n\tnumeric: function numeric(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\treturn !isNaN(value);\n\t},\n\n\t//must be a string\n\tstring: function string(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\treturn isNaN(value);\n\t},\n\n\t//maximum value\n\tmax: function max(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) <= parameters;\n\t},\n\n\t//minimum value\n\tmin: function min(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) >= parameters;\n\t},\n\n\t//starts with  value\n\tstarts: function starts(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n\t},\n\n\t//ends with  value\n\tends: function ends(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n\t},\n\n\t//minimum string length\n\tminLength: function minLength(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length >= parameters;\n\t},\n\n\t//maximum string length\n\tmaxLength: function maxLength(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length <= parameters;\n\t},\n\n\t//in provided value list\n\tin: function _in(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\tif (typeof parameters == \"string\") {\n\t\t\tparameters = parameters.split(\"|\");\n\t\t}\n\n\t\treturn value === \"\" || parameters.indexOf(value) > -1;\n\t},\n\n\t//must match provided regex\n\tregex: function regex(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\tvar reg = new RegExp(parameters);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//value must be unique in this column\n\tunique: function unique(cell, value, parameters) {\n\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\treturn true;\n\t\t}\n\t\tvar unique = true;\n\n\t\tvar cellData = cell.getData();\n\t\tvar column = cell.getColumn()._getSelf();\n\n\t\tthis.table.rowManager.rows.forEach(function (row) {\n\t\t\tvar data = row.getData();\n\n\t\t\tif (data !== cellData) {\n\t\t\t\tif (value == column.getFieldValue(data)) {\n\t\t\t\t\tunique = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn unique;\n\t},\n\n\t//must have a value\n\trequired: function required(cell, value, parameters) {\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\n\t}\n};\n\nTabulator.prototype.registerModule(\"validate\", Validate);\n\nexport default Tabulator;"]},"metadata":{},"sourceType":"module"}